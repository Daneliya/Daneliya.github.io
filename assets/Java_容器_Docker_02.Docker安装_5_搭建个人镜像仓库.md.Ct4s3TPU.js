import{_ as a,c as r,o as i,aN as s}from"./chunks/framework.CMIDsdwV.js";const u=JSON.parse('{"title":"搭建个人镜像仓库","description":"","frontmatter":{"title":"搭建个人镜像仓库","date":"2026-01-30","tags":["Docker"],"categories":["Docker"]},"headers":[],"relativePath":"Java/容器/Docker/02.Docker安装/5_搭建个人镜像仓库.md","filePath":"Java/容器/Docker/02.Docker安装/5_搭建个人镜像仓库.md","lastUpdated":1770025296000}'),o={name:"Java/容器/Docker/02.Docker安装/5_搭建个人镜像仓库.md"};function n(l,e,t,c,d,p){return i(),r("div",null,[...e[0]||(e[0]=[s('<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /Java\\容器\\Docker\\02.Docker安装\\5_搭建个人镜像仓库.md for this page in Markdown format</div><h1 id="搭建个人镜像仓库" tabindex="-1">搭建个人镜像仓库 <a class="header-anchor" href="#搭建个人镜像仓库" aria-label="Permalink to &quot;搭建个人镜像仓库&quot;">​</a></h1><p><a href="https://blog.csdn.net/weixin_44008788/article/details/144722354" target="_blank" rel="noreferrer">https://blog.csdn.net/weixin_44008788/article/details/144722354</a></p><p><a href="https://cr.console.aliyun.com/" target="_blank" rel="noreferrer">https://cr.console.aliyun.com/</a></p><p>使用阿里云容器镜像服务（ACR）创建并上传自定义镜像，我会按 “注册配置→准备镜像→推送镜像” 的完整流程，一步步教你操作，确保新手也能轻松完成。</p><h3 id="前提条件" tabindex="-1">前提条件 <a class="header-anchor" href="#前提条件" aria-label="Permalink to &quot;前提条件&quot;">​</a></h3><ol><li>已注册阿里云账号（<a href="https://www.aliyun.com/%EF%BC%89%EF%BC%9B" target="_blank" rel="noreferrer">https://www.aliyun.com/）；</a></li><li>本地安装 Docker（确保<code>docker -v</code>能正常输出版本）；</li><li>网络能正常访问阿里云服务。</li></ol><hr><h2 id="步骤-1-开通阿里云容器镜像服务并创建镜像仓库" tabindex="-1">步骤 1：开通阿里云容器镜像服务并创建镜像仓库 <a class="header-anchor" href="#步骤-1-开通阿里云容器镜像服务并创建镜像仓库" aria-label="Permalink to &quot;步骤 1：开通阿里云容器镜像服务并创建镜像仓库&quot;">​</a></h2><h3 id="_1-1-开通-acr-服务" tabindex="-1">1.1 开通 ACR 服务 <a class="header-anchor" href="#_1-1-开通-acr-服务" aria-label="Permalink to &quot;1.1 开通 ACR 服务&quot;">​</a></h3><ol><li>登录阿里云控制台，搜索 “容器镜像服务”（ACR）；</li><li>选择 “个人版 / 企业版”（个人版免费够用），点击 “立即开通”，按提示完成开通（无需额外付费，基础版免费）。</li></ol><h3 id="_1-2-创建镜像仓库" tabindex="-1">1.2 创建镜像仓库 <a class="header-anchor" href="#_1-2-创建镜像仓库" aria-label="Permalink to &quot;1.2 创建镜像仓库&quot;">​</a></h3><ol><li><p>开通后进入 ACR 控制台，选择左侧 “镜像仓库”→“实例列表”，点击默认实例（如<code>registry.cn-hangzhou.aliyuncs.com</code>）进入；</p></li><li><p>点击 “创建镜像仓库”，填写核心信息：</p><ul><li><strong>仓库名称</strong>：自定义（如<code>my-first-image</code>）；</li><li><strong>命名空间</strong>：选已有的或新建（如<code>my-namespace</code>，唯一标识）；</li><li><strong>仓库类型</strong>：公开 / 私有（测试选公开，生产选私有）；</li><li><strong>摘要 / 描述</strong>：可选，填镜像说明；</li></ul></li><li><p>点击 “创建”，完成后会看到仓库的<strong>公网地址</strong>（如<code>registry.cn-hangzhou.aliyuncs.com/my-namespace/my-first-image</code>），保存这个地址，后续推送镜像要用。</p></li></ol><h3 id="_1-3-获取阿里云镜像仓库登录信息" tabindex="-1">1.3 获取阿里云镜像仓库登录信息 <a class="header-anchor" href="#_1-3-获取阿里云镜像仓库登录信息" aria-label="Permalink to &quot;1.3 获取阿里云镜像仓库登录信息&quot;">​</a></h3><ol><li>在镜像仓库详情页，点击 “管理”→“凭证管理”；</li><li>记录： <ul><li>登录服务器：如<code>registry.cn-hangzhou.aliyuncs.com</code>；</li><li>用户名：阿里云账号 ID（或子账号）；</li><li>密码：需先设置 “访问凭证”（个人版可直接用阿里云账号密码，或创建 AccessKey）。</li></ul></li></ol><h2 id="_1-登录阿里云-container-registry" tabindex="-1">1. 登录阿里云 Container Registry <a class="header-anchor" href="#_1-登录阿里云-container-registry" aria-label="Permalink to &quot;1. 登录阿里云 Container Registry&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ docker login --username=所爱平山海 registry.cn-hangzhou.aliyuncs.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>用于登录的用户名为阿里云账号全名，密码为开通服务时设置的密码。</p><p>您可以在访问凭证页面修改凭证密码。</p><p>注意：使用 RAM 用户（子账号）登录镜像仓库时，不支持企业别名带有英文半角句号（.）。</p><h2 id="_2-从registry中拉取镜像" tabindex="-1">2. 从Registry中拉取镜像 <a class="header-anchor" href="#_2-从registry中拉取镜像" aria-label="Permalink to &quot;2. 从Registry中拉取镜像&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ docker pull registry.cn-hangzhou.aliyuncs.com/luckilyxxl/xxl:[镜像版本号]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_3-将镜像推送到registry" tabindex="-1">3. 将镜像推送到Registry <a class="header-anchor" href="#_3-将镜像推送到registry" aria-label="Permalink to &quot;3. 将镜像推送到Registry&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ docker login --username=所爱平山海 registry.cn-hangzhou.aliyuncs.com$ docker tag [ImageId] registry.cn-hangzhou.aliyuncs.com/luckilyxxl/xxl:[镜像版本号]$ docker push registry.cn-hangzhou.aliyuncs.com/luckilyxxl/xxl:[镜像版本号]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>请根据实际镜像信息替换示例中的[ImageId]和[镜像版本号]参数。</p><h2 id="_4-选择合适的镜像仓库地址" tabindex="-1">4. 选择合适的镜像仓库地址 <a class="header-anchor" href="#_4-选择合适的镜像仓库地址" aria-label="Permalink to &quot;4. 选择合适的镜像仓库地址&quot;">​</a></h2><p>从ECS推送镜像时，可以选择使用镜像仓库内网地址。推送速度将得到提升并且将不会损耗您的公网流量。</p><p>如果您使用的机器位于VPC网络，请使用 registry-vpc.cn-hangzhou.aliyuncs.com 作为Registry的域名登录。</p><h2 id="_5-示例" tabindex="-1">5. 示例 <a class="header-anchor" href="#_5-示例" aria-label="Permalink to &quot;5. 示例&quot;">​</a></h2><p>使用&quot;docker tag&quot;命令重命名镜像，并将它通过专有网络地址推送至Registry。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ docker imagesREPOSITORY                                                         TAG                 IMAGE ID            CREATED             VIRTUAL SIZEregistry.aliyuncs.com/acs/agent                                    0.7-dfb6816         37bb9c63c8b2        7 days ago          37.89 MB$ docker tag 37bb9c63c8b2 registry-vpc.cn-hangzhou.aliyuncs.com/acs/agent:0.7-dfb6816</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>使用 &quot;docker push&quot; 命令将该镜像推送至远程。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ docker push registry-vpc.cn-hangzhou.aliyuncs.com/acs/agent:0.7-dfb6816</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="使用-cloudflare-部署-docker-镜像代理" tabindex="-1">使用 Cloudflare 部署 Docker 镜像代理 <a class="header-anchor" href="#使用-cloudflare-部署-docker-镜像代理" aria-label="Permalink to &quot;使用 Cloudflare 部署 Docker 镜像代理&quot;">​</a></h3><p><a href="https://rokcso.com/p/cloudflare-docker-proxy/" target="_blank" rel="noreferrer">使用 Cloudflare 部署 Docker 镜像代理 | Rokcso&#39;s Blog</a></p><p><a href="https://github.com/cmliu/CF-Workers-docker.io" target="_blank" rel="noreferrer">cmliu/CF-Workers-docker.io: 这个项目是一个基于 Cloudflare Workers 的 Docker 镜像代理工具。它能够中转对 Docker 官方镜像仓库的请求，解决一些访问限制和加速访问的问题。</a></p>',36)])])}const g=a(o,[["render",n]]);export{u as __pageData,g as default};
