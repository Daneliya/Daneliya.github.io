import{_ as a,c as n,o as i,aN as p}from"./chunks/framework.CMIDsdwV.js";const d=JSON.parse('{"title":"å®æˆ˜3ï¼šå…‹éš†AIèŠå¤©åŠ©æ‰‹","description":"","frontmatter":{"title":"å®æˆ˜3ï¼šå…‹éš†AIèŠå¤©åŠ©æ‰‹","tags":["Python"],"categories":["Python"]},"headers":[],"relativePath":"Python/AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘/10_å®æˆ˜3ï¼šå…‹éš†AIèŠå¤©åŠ©æ‰‹.md","filePath":"Python/AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘/10_å®æˆ˜3ï¼šå…‹éš†AIèŠå¤©åŠ©æ‰‹.md","lastUpdated":1767444225000}'),l={name:"Python/AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘/10_å®æˆ˜3ï¼šå…‹éš†AIèŠå¤©åŠ©æ‰‹.md"};function e(t,s,h,r,k,o){return i(),n("div",null,[...s[0]||(s[0]=[p(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /Python\\AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘\\10_å®æˆ˜3ï¼šå…‹éš†AIèŠå¤©åŠ©æ‰‹.md for this page in Markdown format</div><h1 id="å®æˆ˜3-å…‹éš†aièŠå¤©åŠ©æ‰‹" tabindex="-1">å®æˆ˜3ï¼šå…‹éš†AIèŠå¤©åŠ©æ‰‹ <a class="header-anchor" href="#å®æˆ˜3-å…‹éš†aièŠå¤©åŠ©æ‰‹" aria-label="Permalink to &quot;å®æˆ˜3ï¼šå…‹éš†AIèŠå¤©åŠ©æ‰‹&quot;">â€‹</a></h1><h2 id="ä¸€ã€é¡¹ç›®ä»‹ç»" tabindex="-1">ä¸€ã€é¡¹ç›®ä»‹ç» <a class="header-anchor" href="#ä¸€ã€é¡¹ç›®ä»‹ç»" aria-label="Permalink to &quot;ä¸€ã€é¡¹ç›®ä»‹ç»&quot;">â€‹</a></h2><p>é¡¹ç›®çš„ç›®æ ‡æ˜¯å¼€å‘ä¸€ä¸ªä»¿ç…§ ChatGPTã€æ–‡å¿ƒä¸€è¨€çš„ AI èŠå¤©åŠ©æ‰‹ç½‘ç«™ï¼Œé‡ç‚¹å®ç° â€œå¸¦ä¸Šä¸‹æ–‡è®°å¿†çš„è¿ç»­å¯¹è¯â€ åŠŸèƒ½ï¼Œä»¥ä¸‹ä»<strong>ç•Œé¢ç»“æ„ã€æ ¸å¿ƒäº¤äº’é€»è¾‘ã€å…³é”®åŠŸèƒ½äº®ç‚¹</strong>ä¸‰æ–¹é¢æ•´ç†å…·ä½“æ•ˆæœï¼š</p><h3 id="_1ã€ç•Œé¢ç»“æ„-ä¾§è¾¹æ -ä¸»èŠå¤©åŒº" tabindex="-1">1ã€ç•Œé¢ç»“æ„ï¼šä¾§è¾¹æ  + ä¸»èŠå¤©åŒº <a class="header-anchor" href="#_1ã€ç•Œé¢ç»“æ„-ä¾§è¾¹æ -ä¸»èŠå¤©åŒº" aria-label="Permalink to &quot;1ã€ç•Œé¢ç»“æ„ï¼šä¾§è¾¹æ  + ä¸»èŠå¤©åŒº&quot;">â€‹</a></h3><p>ç½‘ç«™ç•Œé¢åˆ†ä¸ºä¸¤å¤§æ ¸å¿ƒåŒºåŸŸï¼Œå¸ƒå±€ç®€æ´ä¸”ç¬¦åˆä¸»æµ AI èŠå¤©å·¥å…·çš„ä½¿ç”¨ä¹ æƒ¯ï¼š</p><ol><li>å·¦ä¾§ä¾§è¾¹æ  <ul><li>æ ¸å¿ƒåŠŸèƒ½ï¼šä¾›ç”¨æˆ·è¾“å…¥è‡ªå®šä¹‰ API å¯†é’¥ï¼ˆç”¨äºè°ƒç”¨ AI æ¨¡å‹ç”Ÿæˆå†…å®¹ï¼‰ã€‚</li><li>è¾…åŠ©åŠŸèƒ½ï¼šæä¾›å¯è·³è½¬çš„<strong>OpenAI å®˜æ–¹ API å¯†é’¥è·å–é“¾æ¥</strong>ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿäº†è§£å¦‚ä½•è·å–å¯†é’¥ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ã€‚</li></ul></li><li>ä¸»èŠå¤©åŒº</li></ol><h3 id="_2ã€æ ¸å¿ƒäº¤äº’é€»è¾‘-å¯†é’¥éªŒè¯â†’è¿ç»­å¯¹è¯" tabindex="-1">2ã€æ ¸å¿ƒäº¤äº’é€»è¾‘ï¼šå¯†é’¥éªŒè¯â†’è¿ç»­å¯¹è¯ <a class="header-anchor" href="#_2ã€æ ¸å¿ƒäº¤äº’é€»è¾‘-å¯†é’¥éªŒè¯â†’è¿ç»­å¯¹è¯" aria-label="Permalink to &quot;2ã€æ ¸å¿ƒäº¤äº’é€»è¾‘ï¼šå¯†é’¥éªŒè¯â†’è¿ç»­å¯¹è¯&quot;">â€‹</a></h3><p>æ•´ä¸ªåŠ©æ‰‹çš„äº¤äº’æµç¨‹å›´ç»• â€œå¯†é’¥æœ‰æ•ˆæ€§â€ å’Œ â€œä¸Šä¸‹æ–‡è®°å¿†â€ å±•å¼€ï¼Œæ­¥éª¤æ¸…æ™°ï¼š</p><h4 id="_2-1ã€å‰ç½®-api-å¯†é’¥éªŒè¯" tabindex="-1">2.1ã€å‰ç½®ï¼šAPI å¯†é’¥éªŒè¯ <a class="header-anchor" href="#_2-1ã€å‰ç½®-api-å¯†é’¥éªŒè¯" aria-label="Permalink to &quot;2.1ã€å‰ç½®ï¼šAPI å¯†é’¥éªŒè¯&quot;">â€‹</a></h4><ul><li>è‹¥ç”¨æˆ·æœªè¾“å…¥ API å¯†é’¥ï¼šèŠå¤©åŠŸèƒ½æ— æ³•å¼€å¯ï¼Œç³»ç»Ÿä¼šä¸»åŠ¨æé†’ â€œè¯·è¾“å…¥ API å¯†é’¥â€ï¼Œé¿å…å› å¯†é’¥ç¼ºå¤±å¯¼è‡´æ¨¡å‹è°ƒç”¨å¤±è´¥ã€‚</li><li>è‹¥ç”¨æˆ·è¾“å…¥æœ‰æ•ˆ API å¯†é’¥ï¼šéªŒè¯é€šè¿‡åï¼ŒèŠå¤©åŠŸèƒ½è§£é”ï¼Œç”¨æˆ·å¯å¼€å§‹ä¸ AI åŠ©æ‰‹äº¤äº’ã€‚</li></ul><h4 id="_2-2ã€æ ¸å¿ƒ-å¸¦è®°å¿†çš„è¿ç»­å¯¹è¯" tabindex="-1">2.2ã€æ ¸å¿ƒï¼šå¸¦è®°å¿†çš„è¿ç»­å¯¹è¯ <a class="header-anchor" href="#_2-2ã€æ ¸å¿ƒ-å¸¦è®°å¿†çš„è¿ç»­å¯¹è¯" aria-label="Permalink to &quot;2.2ã€æ ¸å¿ƒï¼šå¸¦è®°å¿†çš„è¿ç»­å¯¹è¯&quot;">â€‹</a></h4><p>è¿™æ˜¯é¡¹ç›®ä¸‰ä¸å‰ä¸¤ä¸ªé¡¹ç›®ï¼ˆä»…æ”¯æŒä¸€æ¬¡æ€§äº’åŠ¨ï¼‰çš„æ ¸å¿ƒåŒºåˆ«ï¼Œå…·ä½“æ•ˆæœå¦‚ä¸‹ï¼š</p><ul><li><strong>å¤šè½®å¯¹è¯è¿è´¯æ€§</strong>ï¼šç”¨æˆ·å¯å‘èµ·å¤šè½®è¿½é—®ï¼Œæ‰€æœ‰æ¶ˆæ¯ï¼ˆç”¨æˆ·æé—® + AI å›ç­”ï¼‰ä¼šæŒ‰æ—¶é—´é¡ºåºä¾æ¬¡å±•ç¤ºåœ¨ä¸»èŠå¤©åŒºï¼ˆæ–°æ¶ˆæ¯è‡ªåŠ¨è¿½åŠ åœ¨å†å²æ¶ˆæ¯ä¸‹æ–¹ï¼‰ã€‚</li><li>ä¸Šä¸‹æ–‡è®°å¿†èƒ½åŠ›ï¼šAI èƒ½è¯†åˆ«å¹¶å…³è”å†å²å¯¹è¯ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š <ol><li>ç”¨æˆ·ç¬¬ä¸€è½®æé—® â€œç‰›é¡¿ç¬¬äºŒå®šå¾‹æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼ŒAI ç»™å‡ºè§£é‡Šï¼›</li><li>ç”¨æˆ·ç¬¬äºŒè½®è¿½é—® â€œå®ƒçš„å…¬å¼å¦‚ä½•æ¨å¯¼ï¼Ÿâ€ï¼ŒAI ä¼šè‡ªåŠ¨è¯†åˆ« â€œå®ƒâ€ æŒ‡ä»£ â€œç‰›é¡¿ç¬¬äºŒå®šå¾‹â€ï¼ŒåŸºäºä¸Šä¸€è½®å†…å®¹ç»™å‡ºæ¨å¯¼è¿‡ç¨‹ï¼Œæ— éœ€ç”¨æˆ·é‡å¤è¯´æ˜ä¸»è¯­ã€‚</li></ol></li></ul><h3 id="_3ã€å…³é”®åŠŸèƒ½äº®ç‚¹" tabindex="-1">3ã€å…³é”®åŠŸèƒ½äº®ç‚¹ <a class="header-anchor" href="#_3ã€å…³é”®åŠŸèƒ½äº®ç‚¹" aria-label="Permalink to &quot;3ã€å…³é”®åŠŸèƒ½äº®ç‚¹&quot;">â€‹</a></h3><ol><li><strong>ç”¨æˆ·è‡ªä¸»æ€§é«˜</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰ API å¯†é’¥ï¼Œç”¨æˆ·å¯ä½¿ç”¨è‡ªå·±çš„è´¦å·èµ„æºè°ƒç”¨æ¨¡å‹ï¼Œæ— éœ€ä¾èµ–é¡¹ç›®æ–¹æä¾›çš„ API æœåŠ¡ï¼Œçµæ´»åº¦æ›´é«˜ã€‚</li><li><strong>æ˜“ç”¨æ€§è®¾è®¡</strong>ï¼šé€šè¿‡ â€œå®˜æ–¹é“¾æ¥æŒ‡å¼•â€â€œæ— å¯†é’¥æé†’â€ ç­‰ç»†èŠ‚ï¼Œé™ä½ç”¨æˆ·æ“ä½œæˆæœ¬ï¼Œå°¤å…¶é€‚åˆå¯¹ API å¯†é’¥è·å–ä¸ç†Ÿæ‚‰çš„æ–°æ‰‹ã€‚</li><li><strong>æ ¸å¿ƒèƒ½åŠ›çªç ´</strong>ï¼šå®ç° â€œä¸Šä¸‹æ–‡è®°å¿†â€ï¼Œè§£å†³å‰åºé¡¹ç›® â€œå•æ¬¡äº’åŠ¨æ— å…³è”â€ çš„é—®é¢˜ï¼Œè®©å¯¹è¯æ›´è´´è¿‘çœŸå®äº¤æµåœºæ™¯ï¼ˆå¦‚æ—¥å¸¸å’¨è¯¢ã€çŸ¥è¯†é—®ç­”ã€ä»»åŠ¡åä½œç­‰ï¼‰ã€‚</li></ol><h2 id="äºŒã€åˆ›å»ºaiè¯·æ±‚" tabindex="-1">äºŒã€åˆ›å»ºAIè¯·æ±‚ <a class="header-anchor" href="#äºŒã€åˆ›å»ºaiè¯·æ±‚" aria-label="Permalink to &quot;äºŒã€åˆ›å»ºAIè¯·æ±‚&quot;">â€‹</a></h2><h3 id="_1ã€å‰æœŸå‡†å¤‡-ç¯å¢ƒæ­å»º" tabindex="-1">1ã€å‰æœŸå‡†å¤‡ï¼šç¯å¢ƒæ­å»º <a class="header-anchor" href="#_1ã€å‰æœŸå‡†å¤‡-ç¯å¢ƒæ­å»º" aria-label="Permalink to &quot;1ã€å‰æœŸå‡†å¤‡ï¼šç¯å¢ƒæ­å»º&quot;">â€‹</a></h3><ol><li><p><strong>åˆ›å»ºé¡¹ç›®ç»“æ„</strong>ï¼š æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå°†<code>requirements.txt</code>æ–‡ä»¶æ”¾å…¥å…¶ä¸­ï¼ˆåŒ…å«é¡¹ç›®æ‰€éœ€ä¾èµ–ï¼‰ã€‚</p><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>aiohttp==3.9.3</span></span>
<span class="line"><span>aiosignal==1.3.1</span></span>
<span class="line"><span>altair==5.2.0</span></span>
<span class="line"><span>annotated-types==0.6.0</span></span>
<span class="line"><span>anyio==4.3.0</span></span>
<span class="line"><span>async-timeout==4.0.3</span></span>
<span class="line"><span>attrs==23.2.0</span></span>
<span class="line"><span>blinker==1.7.0</span></span>
<span class="line"><span>cachetools==5.3.3</span></span>
<span class="line"><span>certifi==2024.2.2</span></span>
<span class="line"><span>charset-normalizer==3.3.2</span></span>
<span class="line"><span>click==8.1.7</span></span>
<span class="line"><span>dataclasses-json==0.6.4</span></span>
<span class="line"><span>distro==1.9.0</span></span>
<span class="line"><span>exceptiongroup==1.2.0</span></span>
<span class="line"><span>frozenlist==1.4.1</span></span>
<span class="line"><span>gitdb==4.0.11</span></span>
<span class="line"><span>GitPython==3.1.42</span></span>
<span class="line"><span>greenlet==3.0.3</span></span>
<span class="line"><span>h11==0.14.0</span></span>
<span class="line"><span>httpcore==1.0.4</span></span>
<span class="line"><span>httpx==0.27.0</span></span>
<span class="line"><span>idna==3.6</span></span>
<span class="line"><span>Jinja2==3.1.3</span></span>
<span class="line"><span>jsonpatch==1.33</span></span>
<span class="line"><span>jsonpointer==2.4</span></span>
<span class="line"><span>jsonschema==4.21.1</span></span>
<span class="line"><span>jsonschema-specifications==2023.12.1</span></span>
<span class="line"><span>langchain==0.1.12</span></span>
<span class="line"><span>langchain-community==0.0.28</span></span>
<span class="line"><span>langchain-core==0.1.31</span></span>
<span class="line"><span>langchain-openai==0.0.8</span></span>
<span class="line"><span>langchain-text-splitters==0.0.1</span></span>
<span class="line"><span>langsmith==0.1.25</span></span>
<span class="line"><span>markdown-it-py==3.0.0</span></span>
<span class="line"><span>MarkupSafe==2.1.5</span></span>
<span class="line"><span>marshmallow==3.21.1</span></span>
<span class="line"><span>mdurl==0.1.2</span></span>
<span class="line"><span>multidict==6.0.5</span></span>
<span class="line"><span>mypy-extensions==1.0.0</span></span>
<span class="line"><span>numpy==1.26.4</span></span>
<span class="line"><span>openai==1.14.0</span></span>
<span class="line"><span>orjson==3.9.15</span></span>
<span class="line"><span>packaging==23.2</span></span>
<span class="line"><span>pandas==2.2.1</span></span>
<span class="line"><span>pillow==10.2.0</span></span>
<span class="line"><span>protobuf==4.25.3</span></span>
<span class="line"><span>pyarrow==15.0.1</span></span>
<span class="line"><span>pydantic==2.6.4</span></span>
<span class="line"><span>pydantic_core==2.16.3</span></span>
<span class="line"><span>pydeck==0.8.1b0</span></span>
<span class="line"><span>Pygments==2.17.2</span></span>
<span class="line"><span>python-dateutil==2.9.0.post0</span></span>
<span class="line"><span>pytz==2024.1</span></span>
<span class="line"><span>PyYAML==6.0.1</span></span>
<span class="line"><span>referencing==0.33.0</span></span>
<span class="line"><span>regex==2023.12.25</span></span>
<span class="line"><span>requests==2.31.0</span></span>
<span class="line"><span>rich==13.7.1</span></span>
<span class="line"><span>rpds-py==0.18.0</span></span>
<span class="line"><span>six==1.16.0</span></span>
<span class="line"><span>smmap==5.0.1</span></span>
<span class="line"><span>sniffio==1.3.1</span></span>
<span class="line"><span>SQLAlchemy==2.0.28</span></span>
<span class="line"><span>streamlit==1.32.1</span></span>
<span class="line"><span>tenacity==8.2.3</span></span>
<span class="line"><span>tiktoken==0.6.0</span></span>
<span class="line"><span>toml==0.10.2</span></span>
<span class="line"><span>toolz==0.12.1</span></span>
<span class="line"><span>tornado==6.4</span></span>
<span class="line"><span>tqdm==4.66.2</span></span>
<span class="line"><span>typing-inspect==0.9.0</span></span>
<span class="line"><span>typing_extensions==4.10.0</span></span>
<span class="line"><span>tzdata==2024.1</span></span>
<span class="line"><span>urllib3==2.2.1</span></span>
<span class="line"><span>yarl==1.9.4</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br></div></div></li><li><p><strong>å®‰è£…ä¾èµ–</strong>ï¼š åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼Œå®‰è£…æ‰€æœ‰ä¾èµ–åŒ…ï¼š</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> requirements.txt</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>æ–°å»ºä»£ç æ–‡ä»¶</strong>ï¼š åˆ›å»ºä¸€ä¸ª Python æ–‡ä»¶ï¼ˆ<code>utils.py</code>ï¼‰ï¼Œç”¨äºç¼–å†™ä¸ AI æ¨¡å‹äº¤äº’çš„æ ¸å¿ƒé€»è¾‘ã€‚</p></li></ol><h3 id="_2ã€æ ¸å¿ƒå‡½æ•°" tabindex="-1">2ã€æ ¸å¿ƒå‡½æ•° <a class="header-anchor" href="#_2ã€æ ¸å¿ƒå‡½æ•°" aria-label="Permalink to &quot;2ã€æ ¸å¿ƒå‡½æ•°&quot;">â€‹</a></h3><p><code>utils.py</code>ä¸­å®šä¹‰<code>get_chat_response</code>å‡½æ•°ï¼Œå°è£…ä¸ AI æ¨¡å‹çš„äº¤äº’è¿‡ç¨‹ï¼Œå…³é”®æ˜¯ä¼ å…¥ â€œå¤–éƒ¨è®°å¿†â€ ä»¥ç»´æŒå¯¹è¯è¿è´¯æ€§ã€‚</p><h4 id="å‡½æ•°å‚æ•°è®¾è®¡" tabindex="-1">å‡½æ•°å‚æ•°è®¾è®¡ <a class="header-anchor" href="#å‡½æ•°å‚æ•°è®¾è®¡" aria-label="Permalink to &quot;å‡½æ•°å‚æ•°è®¾è®¡&quot;">â€‹</a></h4><p>å‡½æ•°éœ€æ¥æ”¶ 3 ä¸ªæ ¸å¿ƒå‚æ•°ï¼š</p><ul><li><code>prompt</code>ï¼šç”¨æˆ·å½“å‰çš„è¾“å…¥æç¤ºï¼ˆå­—ç¬¦ä¸²ï¼‰ã€‚</li><li><code>openai_api_key</code>ï¼šç”¨æˆ·æä¾›çš„ API å¯†é’¥ï¼ˆç”¨äºè°ƒç”¨ AI æ¨¡å‹ï¼‰ã€‚</li><li><code>memory</code>ï¼šå¤–éƒ¨ä¼ å…¥çš„è®°å¿†å®ä¾‹ï¼ˆå‚¨å­˜å†å²å¯¹è¯ï¼Œç¡®ä¿è·¨å‡½æ•°è°ƒç”¨æ—¶è®°å¿†ä¸ä¸¢å¤±ï¼‰ã€‚</li></ul><h4 id="å‡½æ•°å†…éƒ¨é€»è¾‘" tabindex="-1">å‡½æ•°å†…éƒ¨é€»è¾‘ <a class="header-anchor" href="#å‡½æ•°å†…éƒ¨é€»è¾‘" aria-label="Permalink to &quot;å‡½æ•°å†…éƒ¨é€»è¾‘&quot;">â€‹</a></h4><p><code>utils.py</code>å®Œæ•´ä»£ç </p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationChain</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_chat_response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prompt, memory, openai_api_key):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">openai_api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">openai_api_key)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationChain(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: prompt})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;response&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="å…³é”®é€»è¾‘è§£æ" tabindex="-1">å…³é”®é€»è¾‘è§£æ <a class="header-anchor" href="#å…³é”®é€»è¾‘è§£æ" aria-label="Permalink to &quot;å…³é”®é€»è¾‘è§£æ&quot;">â€‹</a></h4><ol><li><strong>æ¨¡å‹åˆå§‹åŒ–</strong>ï¼š ä½¿ç”¨<code>ChatOpenAI</code>åˆ›å»ºæ¨¡å‹å®ä¾‹ï¼Œé€šè¿‡<code>openai_api_key</code>å‚æ•°ä¼ å…¥ç”¨æˆ·æä¾›çš„å¯†é’¥ï¼Œç¡®ä¿æ¨¡å‹è°ƒç”¨æƒé™ã€‚</li><li><strong>å¯¹è¯é“¾ä¸è®°å¿†å…³è”</strong>ï¼š <code>ConversationChain</code>è‡ªåŠ¨å¤„ç† â€œåŠ è½½å†å²è®°å¿†â†’ç”Ÿæˆå›åº”â†’æ›´æ–°è®°å¿†â€ çš„å…¨æµç¨‹ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨<code>load_memory_variables</code>æˆ–<code>save_context</code>ï¼Œç®€åŒ–é€»è¾‘å¹¶å‡å°‘å‡ºé”™æ¦‚ç‡ã€‚</li><li><strong>å›åº”æå–</strong>ï¼š å¯¹è¯é“¾çš„<code>invoke</code>æ–¹æ³•è¿”å›å­—å…¸ï¼ˆå«<code>input</code>ã€<code>history</code>ã€<code>response</code>ç­‰å­—æ®µï¼‰ï¼Œä»…æå–<code>response</code>å­—æ®µï¼ˆAI çš„å›ç­”å†…å®¹ï¼‰ä½œä¸ºå‡½æ•°è¿”å›å€¼ï¼Œç¬¦åˆå®é™…éœ€æ±‚ã€‚</li></ol><h3 id="_3ã€åŠŸèƒ½æµ‹è¯•-éªŒè¯è®°å¿†æœ‰æ•ˆæ€§" tabindex="-1">3ã€åŠŸèƒ½æµ‹è¯•ï¼šéªŒè¯è®°å¿†æœ‰æ•ˆæ€§ <a class="header-anchor" href="#_3ã€åŠŸèƒ½æµ‹è¯•-éªŒè¯è®°å¿†æœ‰æ•ˆæ€§" aria-label="Permalink to &quot;3ã€åŠŸèƒ½æµ‹è¯•ï¼šéªŒè¯è®°å¿†æœ‰æ•ˆæ€§&quot;">â€‹</a></h3><p>ä¸ºç¡®ä¿å‡½æ•°èƒ½ç»´æŒå¯¹è¯è®°å¿†ï¼Œéœ€è¿›è¡Œå¤šè½®è°ƒç”¨æµ‹è¯•ï¼Œåœ¨<code>utils.py</code>ä¸­å¢åŠ å¦‚ä¸‹æµ‹è¯•ä»£ç ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">return_messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(get_chat_response(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç‰›é¡¿æå‡ºè¿‡å“ªäº›çŸ¥åçš„å®šå¾‹ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, memory, os.getenv(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OPENAI_API_KEY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)))</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(get_chat_response(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘ä¸Šä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, memory, os.getenv(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OPENAI_API_KEY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="æµ‹è¯•é¢„æœŸç»“æœ" tabindex="-1">æµ‹è¯•é¢„æœŸç»“æœ <a class="header-anchor" href="#æµ‹è¯•é¢„æœŸç»“æœ" aria-label="Permalink to &quot;æµ‹è¯•é¢„æœŸç»“æœ&quot;">â€‹</a></h4><ul><li>ç¬¬ä¸€è½®ï¼šAI æ­£ç¡®å›ç­”ç‰›é¡¿ç¬¬äºŒå®šå¾‹çš„å†…å®¹ã€‚</li><li>ç¬¬äºŒè½®ï¼šAI èƒ½è¯†åˆ« â€œå®ƒâ€ æŒ‡ä»£ â€œç‰›é¡¿ç¬¬äºŒå®šå¾‹â€ï¼ŒåŸºäºå†å²å¯¹è¯ç»™å‡ºå…¬å¼ï¼Œè¯æ˜è®°å¿†ç”Ÿæ•ˆï¼ˆå¯¹è¯è¿è´¯æ€§æˆç«‹ï¼‰ã€‚</li></ul><h3 id="_4ã€æ ¸å¿ƒäº®ç‚¹" tabindex="-1">4ã€æ ¸å¿ƒäº®ç‚¹ <a class="header-anchor" href="#_4ã€æ ¸å¿ƒäº®ç‚¹" aria-label="Permalink to &quot;4ã€æ ¸å¿ƒäº®ç‚¹&quot;">â€‹</a></h3><ol><li><strong>è®°å¿†å¤–éƒ¨åŒ–</strong>ï¼šè®°å¿†å®ä¾‹ä»å¤–éƒ¨ä¼ å…¥å‡½æ•°ï¼Œè€Œéåœ¨å‡½æ•°å†…éƒ¨åˆå§‹åŒ–ï¼Œç¡®ä¿å¤šè½®è°ƒç”¨æ—¶å†å²å¯¹è¯ä¸ä¸¢å¤±ï¼Œæ˜¯å®ç°è¿ç»­å¯¹è¯çš„å…³é”®ã€‚</li><li><strong>æµç¨‹è‡ªåŠ¨åŒ–</strong>ï¼šå€ŸåŠ©<code>ConversationChain</code>è‡ªåŠ¨å¤„ç†è®°å¿†åŠ è½½ä¸æ›´æ–°ï¼Œé¿å…æ‰‹åŠ¨æ“ä½œå¯èƒ½çš„é—æ¼æˆ–é”™è¯¯ã€‚</li><li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ API å¯†é’¥ï¼Œæ¨¡å‹å‹å·å¯è°ƒæ•´ï¼Œé€‚é…ä¸åŒåœºæ™¯éœ€æ±‚ã€‚</li></ol><h2 id="ä¸‰ã€åˆ›å»ºç½‘ç«™é¡µé¢" tabindex="-1">ä¸‰ã€åˆ›å»ºç½‘ç«™é¡µé¢ <a class="header-anchor" href="#ä¸‰ã€åˆ›å»ºç½‘ç«™é¡µé¢" aria-label="Permalink to &quot;ä¸‰ã€åˆ›å»ºç½‘ç«™é¡µé¢&quot;">â€‹</a></h2><p>é€šè¿‡ Streamlit æ„å»ºèŠå¤©åŠ©æ‰‹çš„å‰ç«¯ç•Œé¢ï¼Œå®ç° â€œAPI å¯†é’¥è¾“å…¥â†’å¯¹è¯å±•ç¤ºâ†’ç”¨æˆ·äº¤äº’â€ çš„å®Œæ•´åŠŸèƒ½ï¼Œæœ€ç»ˆæ‰“é€ ä¸€ä¸ªå¯éƒ¨ç½²ã€æ”¯æŒè¿è´¯å¯¹è¯çš„ä»¿ ChatGPT ç½‘ç«™ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†å®ç°æ­¥éª¤ä¸è§£æï¼š</p><h3 id="_1ã€å‰æœŸå‡†å¤‡-ä»£ç ç»“æ„ä¸ä¾èµ–" tabindex="-1">1ã€å‰æœŸå‡†å¤‡ï¼šä»£ç ç»“æ„ä¸ä¾èµ– <a class="header-anchor" href="#_1ã€å‰æœŸå‡†å¤‡-ä»£ç ç»“æ„ä¸ä¾èµ–" aria-label="Permalink to &quot;1ã€å‰æœŸå‡†å¤‡ï¼šä»£ç ç»“æ„ä¸ä¾èµ–&quot;">â€‹</a></h3><ol><li><strong>æ¸…ç†æµ‹è¯•ä»£ç </strong>ï¼š åˆ é™¤æˆ–æ³¨é‡Šæ‰<code>utils.py</code>ä¸­<code>get_chat_response</code>å‡½æ•°çš„æµ‹è¯•ä»£ç ï¼ˆé¿å…å¹²æ‰°å‰ç«¯è°ƒç”¨ï¼‰ã€‚</li><li><strong>æ–°å»ºå‰ç«¯æ–‡ä»¶</strong>ï¼š åˆ›å»ºå‰ç«¯ä»£ç æ–‡ä»¶ï¼ˆå¦‚<code>main.py</code>ï¼‰ï¼Œä½œä¸ºç½‘ç«™ä¸»é¡µå…¥å£ã€‚</li><li><strong>å¯¼å…¥æ ¸å¿ƒåº“</strong>ï¼š éœ€å¯¼å…¥ Streamlitï¼ˆæ„å»ºå‰ç«¯ï¼‰å’Œåç«¯çš„<code>get_chat_response</code>å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ol><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> streamlit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utils </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> get_chat_response</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2ã€å‰ç«¯ç•Œé¢æ­å»º-åˆ†æ¨¡å—å®ç°" tabindex="-1">2ã€å‰ç«¯ç•Œé¢æ­å»ºï¼šåˆ†æ¨¡å—å®ç° <a class="header-anchor" href="#_2ã€å‰ç«¯ç•Œé¢æ­å»º-åˆ†æ¨¡å—å®ç°" aria-label="Permalink to &quot;2ã€å‰ç«¯ç•Œé¢æ­å»ºï¼šåˆ†æ¨¡å—å®ç°&quot;">â€‹</a></h3><h4 id="_2-1ã€é¡µé¢æ ‡é¢˜ä¸åŸºç¡€é…ç½®" tabindex="-1">2.1ã€é¡µé¢æ ‡é¢˜ä¸åŸºç¡€é…ç½® <a class="header-anchor" href="#_2-1ã€é¡µé¢æ ‡é¢˜ä¸åŸºç¡€é…ç½®" aria-label="Permalink to &quot;2.1ã€é¡µé¢æ ‡é¢˜ä¸åŸºç¡€é…ç½®&quot;">â€‹</a></h4><p>è®¾ç½®ç½‘ç«™æ ‡é¢˜ï¼Œæå‡è§†è§‰è¾¨è¯†åº¦ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">st.title(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ğŸ’¬ å…‹éš†ChatGPT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_2-2ã€ä¾§è¾¹æ -api-å¯†é’¥è¾“å…¥" tabindex="-1">2.2ã€ä¾§è¾¹æ ï¼šAPI å¯†é’¥è¾“å…¥ <a class="header-anchor" href="#_2-2ã€ä¾§è¾¹æ -api-å¯†é’¥è¾“å…¥" aria-label="Permalink to &quot;2.2ã€ä¾§è¾¹æ ï¼šAPI å¯†é’¥è¾“å…¥&quot;">â€‹</a></h4><p>æ·»åŠ ä¾§è¾¹æ ç”¨äºç”¨æˆ·è¾“å…¥ API å¯†é’¥ï¼ˆå¤ç”¨å‰åºé¡¹ç›®é€»è¾‘ï¼Œç¡®ä¿å®‰å…¨æ€§ä¸è‡ªä¸»æ€§ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.sidebar:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    openai_api_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.text_input(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·è¾“å…¥OpenAI API Keyï¼š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[è·å–OpenAI API key](https://platform.openai.com/account/api-keys)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2-3ã€ä¼šè¯çŠ¶æ€åˆå§‹åŒ–-è§£å†³-è®°å¿†é‡ç½®-é—®é¢˜" tabindex="-1">2.3ã€ä¼šè¯çŠ¶æ€åˆå§‹åŒ–ï¼šè§£å†³ â€œè®°å¿†é‡ç½®â€ é—®é¢˜ <a class="header-anchor" href="#_2-3ã€ä¼šè¯çŠ¶æ€åˆå§‹åŒ–-è§£å†³-è®°å¿†é‡ç½®-é—®é¢˜" aria-label="Permalink to &quot;2.3ã€ä¼šè¯çŠ¶æ€åˆå§‹åŒ–ï¼šè§£å†³ â€œè®°å¿†é‡ç½®â€ é—®é¢˜&quot;">â€‹</a></h4><p>Streamlit æœ‰ä¸€ä¸ªå…³é”®ç‰¹æ€§ï¼š<strong>ç”¨æˆ·äº¤äº’ï¼ˆå¦‚è¾“å…¥ã€ç‚¹å‡»æŒ‰é’®ï¼‰æˆ–ä»£ç ä¿®æ”¹åï¼Œä¼šä»å¤´é‡æ–°è¿è¡Œä»£ç </strong>ã€‚è‹¥ç›´æ¥åˆå§‹åŒ–è®°å¿†ï¼Œä¼šå¯¼è‡´æ¯è½®å¯¹è¯åè®°å¿†è¢«æ¸…ç©ºï¼Œæ— æ³•ç»´æŒè¿è´¯æ€§ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šåˆ©ç”¨<code>st.session_state</code>ï¼ˆä¼šè¯çŠ¶æ€ï¼‰å‚¨å­˜è®°å¿†å’Œå¯¹è¯å†å²ï¼Œä»…åœ¨é¦–æ¬¡åŠ è½½æ—¶åˆå§‹åŒ–ï¼Œåç»­å¤ç”¨å·²æœ‰çŠ¶æ€ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;memory&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.session_state:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;memory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">return_messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;messages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                     &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-4ã€å¯¹è¯å†å²å±•ç¤º-åŒºåˆ†è§’è‰²ä¸å†…å®¹" tabindex="-1">2.4ã€å¯¹è¯å†å²å±•ç¤ºï¼šåŒºåˆ†è§’è‰²ä¸å†…å®¹ <a class="header-anchor" href="#_2-4ã€å¯¹è¯å†å²å±•ç¤º-åŒºåˆ†è§’è‰²ä¸å†…å®¹" aria-label="Permalink to &quot;2.4ã€å¯¹è¯å†å²å±•ç¤ºï¼šåŒºåˆ†è§’è‰²ä¸å†…å®¹&quot;">â€‹</a></h4><p>é€šè¿‡å¾ªç¯è¿­ä»£<code>st.session_state.messages</code>ï¼Œåˆ©ç”¨ Streamlit çš„<code>st.chat_message</code>å‡½æ•°å±•ç¤ºå¯¹è¯ï¼Œè‡ªåŠ¨åŒºåˆ† â€œAIâ€ å’Œ â€œäººç±»â€ è§’è‰²ï¼ˆå«é»˜è®¤å›¾æ ‡ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;messages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.chat_message(message[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]).write(message[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2-5ã€ç”¨æˆ·è¾“å…¥æ¡†-æ¥æ”¶æ¶ˆæ¯å¹¶è§¦å‘å¯¹è¯" tabindex="-1">2.5ã€ç”¨æˆ·è¾“å…¥æ¡†ï¼šæ¥æ”¶æ¶ˆæ¯å¹¶è§¦å‘å¯¹è¯ <a class="header-anchor" href="#_2-5ã€ç”¨æˆ·è¾“å…¥æ¡†-æ¥æ”¶æ¶ˆæ¯å¹¶è§¦å‘å¯¹è¯" aria-label="Permalink to &quot;2.5ã€ç”¨æˆ·è¾“å…¥æ¡†ï¼šæ¥æ”¶æ¶ˆæ¯å¹¶è§¦å‘å¯¹è¯&quot;">â€‹</a></h4><p>ä½¿ç”¨<code>st.chat_input</code>åˆ›å»ºç”¨æˆ·è¾“å…¥æ¡†ï¼Œå®ç° â€œè¾“å…¥â†’éªŒè¯â†’è°ƒç”¨åç«¯â†’å±•ç¤ºå›åº”â€ çš„æµç¨‹ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”¨æˆ·è¾“å…¥æ¡†ï¼šè·å–ç”¨æˆ·æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.chat_input()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 1. éªŒè¯APIå¯†é’¥ï¼šæ— å¯†é’¥åˆ™æç¤ºå¹¶ç»ˆæ­¢</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> openai_api_key:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.info(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·è¾“å…¥ä½ çš„OpenAI API Key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.stop()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 2. å‚¨å­˜å¹¶å±•ç¤ºç”¨æˆ·æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # åŠ å…¥å¯¹è¯å†å²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;messages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].append({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: prompt})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å‰ç«¯å±•ç¤ºç”¨æˆ·æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.chat_message(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).write(prompt)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	# 3. è°ƒç”¨åç«¯å‡½æ•°è·å–AIå›åº”ï¼ˆå¸¦åŠ è½½æç¤ºï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.spinner(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AIæ­£åœ¨æ€è€ƒä¸­ï¼Œè¯·ç¨ç­‰...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ä¼ å…¥ä¼šè¯çŠ¶æ€ä¸­çš„è®°å¿†ï¼Œç»´æŒè¿è´¯æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> get_chat_response(prompt, st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;memory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                     openai_api_key)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 4. å‚¨å­˜å¹¶å±•ç¤ºAIå›åº”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: response}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # åŠ å…¥å¯¹è¯å†å²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;messages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].append(msg)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å‰ç«¯å±•ç¤ºAIå›åº”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.chat_message(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).write(response)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="_2-6ã€å®Œæ•´ä»£ç " tabindex="-1">2.6ã€å®Œæ•´ä»£ç  <a class="header-anchor" href="#_2-6ã€å®Œæ•´ä»£ç " aria-label="Permalink to &quot;2.6ã€å®Œæ•´ä»£ç &quot;">â€‹</a></h4><p><code>main.py</code></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> streamlit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utils </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> get_chat_response</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">st.title(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ğŸ’¬ å…‹éš†ChatGPT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.sidebar:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    openai_api_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.text_input(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·è¾“å…¥OpenAI API Keyï¼š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[è·å–OpenAI API key](https://platform.openai.com/account/api-keys)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;memory&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.session_state:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;memory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">return_messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;messages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                     &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;messages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.chat_message(message[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]).write(message[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.chat_input()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> openai_api_key:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.info(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·è¾“å…¥ä½ çš„OpenAI API Key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.stop()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;messages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].append({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: prompt})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.chat_message(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).write(prompt)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.spinner(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AIæ­£åœ¨æ€è€ƒä¸­ï¼Œè¯·ç¨ç­‰...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> get_chat_response(prompt, st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;memory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                     openai_api_key)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: response}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.session_state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;messages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].append(msg)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.chat_message(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).write(response)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="_3ã€åŠŸèƒ½æµ‹è¯•ä¸éªŒè¯" tabindex="-1">3ã€åŠŸèƒ½æµ‹è¯•ä¸éªŒè¯ <a class="header-anchor" href="#_3ã€åŠŸèƒ½æµ‹è¯•ä¸éªŒè¯" aria-label="Permalink to &quot;3ã€åŠŸèƒ½æµ‹è¯•ä¸éªŒè¯&quot;">â€‹</a></h3><ol><li><strong>è¿è¡Œå‰ç«¯</strong>ï¼š å¯åŠ¨ Streamlit æœåŠ¡</li><li><strong>æµ‹è¯•æµç¨‹</strong>ï¼š <ul><li>æ­¥éª¤ 1ï¼šåœ¨ä¾§è¾¹æ è¾“å…¥ OpenAI API å¯†é’¥ã€‚</li><li>æ­¥éª¤ 2ï¼šåœ¨è¾“å…¥æ¡†å‘é€é—®é¢˜ï¼ˆå¦‚ â€œç‰›é¡¿ç¬¬äºŒå®šå¾‹æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼‰ï¼Œè§‚å¯Ÿ AI å›åº”æ˜¯å¦å±•ç¤ºã€‚</li><li>æ­¥éª¤ 3ï¼šç»§ç»­è¿½é—®ï¼ˆå¦‚ â€œå®ƒçš„å…¬å¼æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼‰ï¼ŒéªŒè¯ AI æ˜¯å¦èƒ½å…³è”å†å²å¯¹è¯ï¼ˆè®°å¿†ç”Ÿæ•ˆï¼‰ã€‚</li></ul></li><li><strong>é¢„æœŸæ•ˆæœ</strong>ï¼š <ul><li>å¯¹è¯æŒ‰ â€œç”¨æˆ·â†’AIâ€ é¡ºåºå±•ç¤ºï¼Œè§’è‰²æ°”æ³¡æ¸…æ™°åŒºåˆ†ã€‚</li><li>å¤šè½®è¿½é—®æ—¶ï¼ŒAI èƒ½ç†è§£ä¸Šä¸‹æ–‡ï¼ˆå¦‚ â€œå®ƒâ€ æŒ‡ä»£å‰åºé—®é¢˜ä¸­çš„ â€œç‰›é¡¿ç¬¬äºŒå®šå¾‹â€ï¼‰ã€‚</li></ul></li></ol><h3 id="_4ã€å¯é€‰åŠŸèƒ½-å¯¹è¯æ¸…ç©º-æŒ‘æˆ˜ä»»åŠ¡" tabindex="-1">4ã€å¯é€‰åŠŸèƒ½ï¼šå¯¹è¯æ¸…ç©ºï¼ˆæŒ‘æˆ˜ä»»åŠ¡ï¼‰ <a class="header-anchor" href="#_4ã€å¯é€‰åŠŸèƒ½-å¯¹è¯æ¸…ç©º-æŒ‘æˆ˜ä»»åŠ¡" aria-label="Permalink to &quot;4ã€å¯é€‰åŠŸèƒ½ï¼šå¯¹è¯æ¸…ç©ºï¼ˆæŒ‘æˆ˜ä»»åŠ¡ï¼‰&quot;">â€‹</a></h3><p>ä¸ºæå‡ç”¨æˆ·ä½“éªŒï¼Œå¯æ·»åŠ  â€œæ¸…ç©ºå¯¹è¯â€ æŒ‰é’®ï¼Œå®ç° â€œé‡ç½®è®°å¿† + æ¸…ç©ºå†å²â€ çš„åŠŸèƒ½ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åœ¨ä¾§è¾¹æ æ·»åŠ â€œæ¸…ç©ºå¯¹è¯â€æŒ‰é’®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.sidebar:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.button(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¸…ç©ºå¯¹è¯&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # é‡ç½®è®°å¿†å’Œå¯¹è¯å†å²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.session_state.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">return_messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.session_state.messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.rerun()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é‡æ–°åŠ è½½é¡µé¢ï¼Œç”Ÿæ•ˆæ¸…ç©ºæ“ä½œ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_5ã€æ ¸å¿ƒäº®ç‚¹" tabindex="-1">5ã€æ ¸å¿ƒäº®ç‚¹ <a class="header-anchor" href="#_5ã€æ ¸å¿ƒäº®ç‚¹" aria-label="Permalink to &quot;5ã€æ ¸å¿ƒäº®ç‚¹&quot;">â€‹</a></h3><ol><li><strong>ä¼šè¯çŠ¶æ€ç®¡ç†</strong>ï¼šé€šè¿‡<code>st.session_state</code>è§£å†³ Streamlit ä»£ç é‡è·‘å¯¼è‡´çš„ â€œè®°å¿†ä¸¢å¤±â€ é—®é¢˜ï¼Œæ˜¯å®ç°è¿è´¯å¯¹è¯çš„å…³é”®ã€‚</li><li><strong>è§’è‰²åŒ–å±•ç¤º</strong>ï¼šåˆ©ç”¨<code>st.chat_message</code>è‡ªåŠ¨åŒºåˆ† AI ä¸äººç±»è§’è‰²ï¼Œç•Œé¢è´´è¿‘ ChatGPT ç­‰ä¸»æµå·¥å…·ï¼Œç”¨æˆ·ä½“éªŒå‹å¥½ã€‚</li><li><strong>æµç¨‹å®Œæ•´æ€§</strong>ï¼šåŒ…å« â€œå¯†é’¥éªŒè¯â†’åŠ è½½æç¤ºâ†’å¯¹è¯å‚¨å­˜â†’å›åº”å±•ç¤ºâ€ å…¨æµç¨‹ï¼Œé€»è¾‘é—­ç¯ä¸”å®¹é”™æ€§å¼ºï¼ˆå¦‚æ— å¯†é’¥æ—¶æç¤ºï¼‰ã€‚</li></ol><h3 id="_6ã€éƒ¨ç½²ä¸æ‰©å±•-åç»­æ–¹å‘" tabindex="-1">6ã€éƒ¨ç½²ä¸æ‰©å±•ï¼ˆåç»­æ–¹å‘ï¼‰ <a class="header-anchor" href="#_6ã€éƒ¨ç½²ä¸æ‰©å±•-åç»­æ–¹å‘" aria-label="Permalink to &quot;6ã€éƒ¨ç½²ä¸æ‰©å±•ï¼ˆåç»­æ–¹å‘ï¼‰&quot;">â€‹</a></h3><ul><li><strong>éƒ¨ç½²</strong>ï¼šå¯é€šè¿‡ Streamlit Community Cloudï¼ˆå…è´¹ï¼‰ã€Heroku ç­‰å¹³å°éƒ¨ç½²ç½‘ç«™ï¼Œç”Ÿæˆå…¬å¼€é“¾æ¥ä¾›ä»–äººä½¿ç”¨ã€‚</li><li><strong>æ‰©å±•</strong>ï¼šå¯æ·»åŠ  â€œæ¨¡å‹é€‰æ‹©â€ï¼ˆå¦‚ GPT-3.5/GPT-4ï¼‰ã€â€œå¯¹è¯å¯¼å‡ºâ€ï¼ˆä¿å­˜ä¸º TXT/CSVï¼‰ç­‰åŠŸèƒ½ï¼Œæå‡å·¥å…·å®ç”¨æ€§ã€‚</li></ul>`,70)])])}const c=a(l,[["render",e]]);export{d as __pageData,c as default};
