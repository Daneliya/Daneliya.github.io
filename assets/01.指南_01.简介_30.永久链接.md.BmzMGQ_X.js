import{_ as i,c as e,o as a,aN as n}from"./chunks/framework.CMIDsdwV.js";const c=JSON.parse('{"title":"永久链接","description":"","frontmatter":{"title":"永久链接","date":"2025-08-23T17:19:49.000Z","permalink":"/guide/permalink","categories":["指南"],"tags":["指南"]},"headers":[],"relativePath":"01.指南/01.简介/30.永久链接.md","filePath":"01.指南/01.简介/30.永久链接.md","lastUpdated":1767456148000}'),l={name:"01.指南/01.简介/30.永久链接.md"};function t(p,s,r,h,k,d){return a(),e("div",null,[...s[0]||(s[0]=[n(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /01.指南\\01.简介\\30.永久链接.md for this page in Markdown format</div><h1 id="永久链接" tabindex="-1">永久链接 <a class="header-anchor" href="#永久链接" aria-label="Permalink to &quot;永久链接&quot;">​</a></h1><h2 id="永久链接-1" tabindex="-1">永久链接 <a class="header-anchor" href="#永久链接-1" aria-label="Permalink to &quot;永久链接&quot;">​</a></h2><p>VitePress 默认以 Markdown 文件路径作为链接访问，这会存在一个缺陷，当文件路径改变时，链接也会改变（再访问原来链接就会 404），在配置侧边栏、导航栏、各个文档链接引用、分享等场景时造成很大困扰。</p><p>因此需要给文件添加一个 <strong>永久链接</strong>，无论文件路径改变，访问链接不会改变。</p><p>Teek 使用 <a href="https://github.com/Kele-Bingtang/vitepress-theme-teek/blob/master/plugins/vitepress-plugin-permalink" target="_blank" rel="noreferrer">vitepress-plugin-permalink</a> 来实现永久链接功能。</p><p>插件已经内置到 Teek 中，你只需要在 Markdown 文件的 <code>frontmatter</code> 中添加如下内容：</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">permalink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/guide/quickstart</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这样就可以通过 <code>/guide/quickstart</code> 访问该页面了。</p><p>如果您不需要永久链接功能，请不配置 <code>permalink</code> 或者直接禁用该插件：</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineTeekConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vitepress-theme-teek/config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> teekConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineTeekConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  vitePlugins: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    permalink: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 禁用该插件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="永久链接方式" tabindex="-1">永久链接方式 <a class="header-anchor" href="#永久链接方式" aria-label="Permalink to &quot;永久链接方式&quot;">​</a></h2><p><code>vitepress-plugin-permalink</code> 插件提供两种方式实现永久链接：</p><ol><li><code>Proxy</code> 方式</li><li><code>Rewrites</code> 方式</li></ol><p><code>Proxy</code> 方式不会影响文件路径，而是在访问文件路径时，通过代理（拦截）将其转换 <code>Permalink</code>，因此既可以通过文件路径访问，也可以通过 <code>Permalink</code> 访问。</p><p><code>Rewrites</code> 方式在项目运行或者构建时，通过改变文件路径达到永久链接功能，你可以在构建的 <code>dist</code> 文件夹查看修改后的文件路径。</p><p>两者只能二选一，如果都配置，则以 <code>Rewrites</code> 方式为主。</p><p>Teek 默认为 <code>Proxy</code> 方式，如果替换为 <code>Rewrites</code> 方式，在 <code>config.mts</code> 里添加如下代码：</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vitepress&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createRewrites } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vitepress-theme-teek/config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rewrites: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createRewrites</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** options */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>createRewrites</code> 函数支持除了传入 <code>vitepress-plugin-permalink</code> 的 <a href="https://github.com/Kele-Bingtang/vitepress-theme-teek/blob/master/plugins/vitepress-plugin-permalink/src/types.ts" target="_blank" rel="noreferrer">配置项</a>，也支持额外传入两个配置项：</p><ul><li><code>srcDir</code>：VitePress 的 <a href="https://vitepress.dev/zh/reference/site-config#srcdir" target="_blank" rel="noreferrer">srcDir</a>，默认为 <code>.</code>，即当前项目的绝对目录</li><li><code>locales</code>：VitePress 的 <a href="https://vitepress.dev/zh/guide/i18n#internationalization" target="_blank" rel="noreferrer">locales</a></li></ul><p>如果没有传入配置项，则默认为从文档的根目录进行扫描。</p><h2 id="侧边栏方式" tabindex="-1">侧边栏方式 <a class="header-anchor" href="#侧边栏方式" aria-label="Permalink to &quot;侧边栏方式&quot;">​</a></h2><p>Teek 使用 <a href="https://github.com/Kele-Bingtang/vitepress-theme-teek/blob/master/plugins/vitepress-plugin-sidebar-resolve" target="_blank" rel="noreferrer">vitepress-plugin-sidebar-resolve</a> 来实现自动生成侧边栏功能。</p><p>默认情况下，Teek 按照项目的目录结构生成侧边栏，如果你修改永久链接方式为 <code>rewrites</code>，则目录结构作为侧边栏将会失效，因此需要手动开启 <code>rewrites</code> 生成侧边栏。</p><p>通过 <code>resolveRule</code> 配置项来配置侧边栏生成规则：</p><ul><li>当 <code>resolveRule</code> 为 <code>filePath</code>，则按照本地文件路径生成侧边栏</li><li>当 <code>resolveRule</code> 为 <code>rewrites</code>，则按照 <code>rewrites</code> 结果生成侧边栏</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vitepress&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createRewrites } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vitepress-theme-teek/config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rewrites: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createRewrites</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  vite: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      Sidebar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        resolveRule: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;rewrites&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>如果 <code>resolveRule</code> 为 <code>rewrites</code>，但是没有 <code>rewrites</code> 配置，则按照 <code>filePath</code> 配置生成侧边栏。</p><h2 id="什么是-rewrites" tabindex="-1">什么是 rewrites <a class="header-anchor" href="#什么是-rewrites" aria-label="Permalink to &quot;什么是 rewrites&quot;">​</a></h2><p><code>rewrites</code> 是什么？，请看 VitePress 的 <a href="https://vitepress.dev/zh/guide/routing#route-rewrites" target="_blank" rel="noreferrer">路由重写</a> 描述。</p><p>这里简单说下个人理解，<code>filePath</code> 称之为 <strong>本地文件路径</strong>，<code>rewrites</code> 称之为 <strong>运行文件路径</strong>。</p><p>本地文件路径通俗易懂，那什么是运行文件路径？</p><p>我们访问的 VitePress 文档的链接地址就是 <strong>运行文件路径</strong>。VitePress 启动后，默认会将本地文件路径当作运行文件路径，但是我们可以通过 <code>rewrites</code> 将本地文件路径重写为新的文件路径，新的文件路径就会取代本地文件路径成为运行文件路径。</p><p>假设文件 <code>quick-start.md</code> 在本地路径为 <code>guide/quick-start.md</code>，在 <code>rewrites</code> 中添加如下配置：</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vitepress&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rewrites: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;guide/quick-start.md&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/config/quick.md&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>此时该文件的运行文件路径为 <code>/config/quick</code> 而不是 <code>/guide/quick-start</code>。</p>`,37)])])}const E=i(l,[["render",t]]);export{c as __pageData,E as default};
