import{_ as i,c as a,o as n,aN as l}from"./chunks/framework.CMIDsdwV.js";const p="/assets/image-20240511221120610.DM68508G.png",e="/assets/image-20240511235744663.wzfdd-J8.png",t="/assets/image-20240511235954917.zelkQtd_.png",h="/assets/image-20240512001719343.CLolCq02.png",k="/assets/image-20240512005734162.CfpDRo6O.png",u=JSON.parse('{"title":"è§„åˆ™å¼•æ“LiteFlow","description":"","frontmatter":{"title":"è§„åˆ™å¼•æ“LiteFlow","tags":["å¼€æºé¡¹ç›®"],"categories":["å¼€æºé¡¹ç›®"]},"headers":[],"relativePath":"daily/å¼€æºé¡¹ç›®/2_è§„åˆ™å¼•æ“LiteFlow.md","filePath":"daily/å¼€æºé¡¹ç›®/2_è§„åˆ™å¼•æ“LiteFlow.md","lastUpdated":1767444225000}'),r={name:"daily/å¼€æºé¡¹ç›®/2_è§„åˆ™å¼•æ“LiteFlow.md"};function E(d,s,g,c,o,y){return n(),a("div",null,[...s[0]||(s[0]=[l(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /daily\\å¼€æºé¡¹ç›®\\2_è§„åˆ™å¼•æ“LiteFlow.md for this page in Markdown format</div><h1 id="è§„åˆ™å¼•æ“liteflow" tabindex="-1">è§„åˆ™å¼•æ“LiteFlow <a class="header-anchor" href="#è§„åˆ™å¼•æ“liteflow" aria-label="Permalink to &quot;è§„åˆ™å¼•æ“LiteFlow&quot;">â€‹</a></h1><h2 id="ä¸€ã€liteflowç®€ä»‹" tabindex="-1">ä¸€ã€LiteFlowç®€ä»‹ <a class="header-anchor" href="#ä¸€ã€liteflowç®€ä»‹" aria-label="Permalink to &quot;ä¸€ã€LiteFlowç®€ä»‹&quot;">â€‹</a></h2><blockquote><p><a href="https://gitee.com/dromara/liteFlow" target="_blank" rel="noreferrer">https://gitee.com/dromara/liteFlow</a></p><p><a href="https://liteflow.cc/" target="_blank" rel="noreferrer">https://liteflow.cc/</a></p></blockquote><p>æ­å»ºç³»ç»Ÿè¦å…ˆæ­å»ºæ¡†æ¶ï¼Œè€Œæ­å»ºæ¡†æ¶æœ€é‡è¦çš„äº‹æƒ…ä¹‹ä¸€å°±æ˜¯è¦è®¾è®¡å¥½æµç¨‹å¼•æ“ã€‚æµç¨‹å¼•æ“å¯ä»¥å¸¦æ¥è¯¸å¦‚**ã€é¿å…å†—ä½™ã€‘ã€æœ€å°ä¿®æ”¹ã€‘ã€æ–¹ä¾¿è¿½è¸ªã€‘ã€åˆ©äºåˆ†å·¥ã€‘ã€å¯è¯»æ€§å¥½ã€‘ã€çµæ´»å¤šå˜ã€‘**ç­‰å¥½å¤„ï¼Œè¿™äº›å¥½å¤„æ˜¯ä¼´éšç€æ•´ä¸ªç³»ç»Ÿç”Ÿå‘½å‘¨æœŸçš„ã€‚</p><p>å¸‚é¢ä¸Šè¿™æ ·çš„å¼•æ“å…¶å®è¿˜æŒºå¤šçš„ï¼ŒçŸ¥åçš„åŒ…æ‹¬<strong>Activitiã€Flowableã€camunda</strong> ç­‰ã€‚è¿™äº›æµç¨‹å¼•æ“åŠŸèƒ½å¼ºå¤§ï¼Œè¿˜æä¾›äº†å¯è§†åŒ–çš„èƒ½åŠ›ï¼Œå¾ˆå¤šå¤§å‚ä¹Ÿåœ¨ä½¿ç”¨ã€‚<strong>LiteFlow</strong> æ˜¯ç›¸æ¯”ä»–ä»¬æ¥è¯´æ›´è½»é‡çº§ä¸€äº›çš„æµç¨‹å¼•æ“ï¼Œå¾ˆå®¹æ˜“ä¸Šæ‰‹ï¼Œå–ä¹‹å³ç”¨ã€‚</p><p>å®˜æ–¹å¯¹LiteFlowçš„ä»‹ç»ï¼š</p><blockquote><p><em>LiteFlowæ˜¯ä¸€ä¸ªè½»é‡ä¸”å¼ºå¤§çš„å›½äº§è§„åˆ™å¼•æ“æ¡†æ¶ï¼Œå¯ç”¨äºå¤æ‚çš„ç»„ä»¶åŒ–ä¸šåŠ¡çš„ç¼–æ’é¢†åŸŸï¼Œç‹¬æœ‰çš„DSLè§„åˆ™é©±åŠ¨æ•´ä¸ªå¤æ‚ä¸šåŠ¡ï¼Œå¹¶å¯å®ç°å¹³æ»‘åˆ·æ–°çƒ­éƒ¨ç½²ï¼Œæ”¯æŒå¤šç§è„šæœ¬è¯­è¨€è§„åˆ™çš„åµŒå…¥ã€‚å¸®åŠ©ç³»ç»Ÿå˜å¾—æ›´åŠ ä¸æ»‘ä¸”çµæ´»ã€‚</em></p><p><em>LiteFlowäº2020å¹´æ­£å¼å¼€æºï¼Œ2021å¹´è·å¾—å¼€æºä¸­å›½å¹´åº¦æœ€å—æ¬¢è¿å¼€æºè½¯ä»¶æ®Šè£ã€‚äº2022å¹´è·å¾—Giteeæœ€æœ‰ä»·å€¼å¼€æºé¡¹ç›®(GVP)è£èª‰ã€‚æ˜¯ä¸€ä¸ªæ­£å¤„åœ¨é«˜é€Ÿå‘å±•ä¸­çš„å¼€æºé¡¹ç›®ã€‚</em></p><p><em>LiteFlowæ˜¯ä¸€ä¸ªç”±ç¤¾åŒºé©±åŠ¨çš„é¡¹ç›®ï¼Œæ‹¥æœ‰ä¸€ä¸ª2500å¤šäººçš„ä½¿ç”¨è€…ç¤¾åŒº</em></p></blockquote><p>è™½ç„¶ç›¸æ¯”Acitivitiã€Flowableæ¥è¯´ï¼ŒLiteFlowçš„çŸ¥ååº¦è¦ä½å¾—å¤šï¼ŒåŠŸèƒ½ä¹Ÿæ²¡æœ‰è¿™äº›çŸ¥åæˆç†Ÿå¼•æ“é‚£ä¹ˆå¼ºå¤§ï¼Œä½†LiteFlowè¿˜æ˜¯æœ‰è¯¸å¤šä¼˜ç‚¹ï¼Œèƒ½å¤Ÿæ»¡è¶³ä½ ç»å¤§éƒ¨åˆ†çš„åœºæ™¯ã€‚è¿™äº›ä¼˜ç‚¹åŒ…æ‹¬ï¼š</p><p><strong>ã€ä½¿ç”¨ä¾¿æ·ã€‘</strong>ï¼šå¼•å‡ ä¸ªjaråŒ…ã€å®ç°å‡ ä¸ªæ¥å£ã€å†™ä¸€ä¸ªæµç¨‹ç¼–æ’æ–‡ä»¶ï¼Œå°±èƒ½runã€‚</p><p><strong>ã€ç¼–æ’ä¸°å¯Œã€‘</strong>ï¼šæ”¯æŒä¸²è¡Œã€å¹¶è¡Œã€é€‰æ‹©ã€å¾ªç¯ã€å¼‚å¸¸å¤„ç†ã€åµŒå¥—ç­‰å„ç§ç¼–æ’æ–¹å¼ã€‚</p><p><strong>ã€æ”¯æŒè„šæœ¬ã€‘</strong>ï¼šæ”¯æŒå„ç§ä¸»æµè„šæœ¬è¯­è¨€ã€‚</p><p><strong>ã€é…ç½®æºä¸°å¯Œã€‘</strong>ï¼šæ”¯æŒå°†æµç¨‹å®šä¹‰æ”¾åˆ°ZKã€DBã€Etcdã€Nacosç­‰ã€‚ç›¸å½“äºå¯ä»¥å®ç°åŠ¨æ€é…ç½®æ›´æ”¹ã€‚</p><h2 id="äºŒã€å¿«é€Ÿå¼€å§‹" tabindex="-1">äºŒã€å¿«é€Ÿå¼€å§‹ <a class="header-anchor" href="#äºŒã€å¿«é€Ÿå¼€å§‹" aria-label="Permalink to &quot;äºŒã€å¿«é€Ÿå¼€å§‹&quot;">â€‹</a></h2><h3 id="ä¾èµ–" tabindex="-1">ğŸŒ´ä¾èµ– <a class="header-anchor" href="#ä¾èµ–" aria-label="Permalink to &quot;:palm_tree:ä¾èµ–&quot;">â€‹</a></h3><p>å¢åŠ liteflow-spring-boot-starterä¾èµ–åŒ…ï¼Œæä¾›è‡ªåŠ¨è£…é…åŠŸèƒ½</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.yomahub&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;liteflow-spring-boot-starter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;2.12.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="é…ç½®" tabindex="-1">ğŸŒ´é…ç½® <a class="header-anchor" href="#é…ç½®" aria-label="Permalink to &quot;:palm_tree:é…ç½®&quot;">â€‹</a></h3><p>SpringBooté…ç½®æ–‡ä»¶</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">liteflow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  rule-source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">config/flow.el.xml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>åœ¨resourcesä¸‹çš„<code>config/flow.el.xml</code>ä¸­å®šä¹‰è§„åˆ™ï¼š</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">chain</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chain1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        THEN(a, b, c);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="ç»„ä»¶" tabindex="-1">ğŸŒ´ç»„ä»¶ <a class="header-anchor" href="#ç»„ä»¶" aria-label="Permalink to &quot;:palm_tree:ç»„ä»¶&quot;">â€‹</a></h3><p>å®šä¹‰å¹¶å®ç°ä¸€äº›ç»„ä»¶ï¼Œç¡®ä¿SpringBootä¼šæ‰«æåˆ°è¿™äº›ç»„ä»¶å¹¶æ³¨å†Œè¿›ä¸Šä¸‹æ–‡ã€‚</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ACmp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NodeComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//do your business</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä»¥æ­¤ç±»æ¨å†åˆ†åˆ«å®šä¹‰b,cç»„ä»¶ï¼š</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BCmp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NodeComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//do your business</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CCmp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NodeComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//do your business</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="æ‰§è¡Œ" tabindex="-1">ğŸŒ´æ‰§è¡Œ <a class="header-anchor" href="#æ‰§è¡Œ" aria-label="Permalink to &quot;:palm_tree:æ‰§è¡Œ&quot;">â€‹</a></h3><p>å£°æ˜å¯åŠ¨ç±»ï¼š</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * å¯åŠ¨ç±»</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@author</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> xxl</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * @date 2024/5/6 22:48</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ComponentScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.xxl.liteflow&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æŠŠå®šä¹‰çš„ç»„ä»¶æ‰«å…¥Springä¸Šä¸‹æ–‡ä¸­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SpringbootLiteFlowApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SpringApplication.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SpringbootLiteFlowApplication.class, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ç„¶åå°±å¯ä»¥åœ¨Springbootä»»æ„è¢«Springæ‰˜ç®¡çš„ç±»ä¸­æ‹¿åˆ°flowExecutorï¼Œè¿›è¡Œæ‰§è¡Œé“¾è·¯ï¼š</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> YourClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FlowExecutor flowExecutor;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> testConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        LiteflowResponse response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> flowExecutor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute2Resp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chain1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;arg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="ä¸‰ã€å®æˆ˜" tabindex="-1">ä¸‰ã€å®æˆ˜ <a class="header-anchor" href="#ä¸‰ã€å®æˆ˜" aria-label="Permalink to &quot;ä¸‰ã€å®æˆ˜&quot;">â€‹</a></h2><h3 id="ç®€å•çš„ä¸²è¡Œæµç¨‹" tabindex="-1">ğŸŒ´ç®€å•çš„ä¸²è¡Œæµç¨‹ <a class="header-anchor" href="#ç®€å•çš„ä¸²è¡Œæµç¨‹" aria-label="Permalink to &quot;:palm_tree:ç®€å•çš„ä¸²è¡Œæµç¨‹&quot;">â€‹</a></h3><p>ä»¥ä¸€ä¸ªç®€å•çš„ç”¨æˆ·è½¬è´¦æ¥å£ä¸ºä¾‹ï¼š</p><p>æä¾›ä¸€ä¸ªç”¨æˆ·è½¬è´¦æ¥å£ï¼Œç”¨æˆ·å¯ä»¥ç»™æ”¶æ¬¾æ–¹è½¬è´¦ï¼Œè½¬è´¦æˆåŠŸåç”Ÿæˆä¸€ä¸ªè½¬è´¦è´¦å•ã€‚</p><h4 id="ã€step1ã€‘ç¡®å®šæµç¨‹" tabindex="-1">ğŸŒ±ã€step1ã€‘ç¡®å®šæµç¨‹ <a class="header-anchor" href="#ã€step1ã€‘ç¡®å®šæµç¨‹" aria-label="Permalink to &quot;:seedling:ã€step1ã€‘ç¡®å®šæµç¨‹&quot;">â€‹</a></h4><p>ä¸€ä¸ªè½¬è´¦è¡Œä¸ºçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><p><img src="`+p+`" alt="image-20240511221120610" loading="lazy"></p><h4 id="ã€step2ã€‘å®ç°ç»„ä»¶" tabindex="-1">ğŸŒ±ã€step2ã€‘å®ç°ç»„ä»¶ <a class="header-anchor" href="#ã€step2ã€‘å®ç°ç»„ä»¶" aria-label="Permalink to &quot;:seedling:ã€step2ã€‘å®ç°ç»„ä»¶&quot;">â€‹</a></h4><p>æ ¹æ®ä¸Šé¢è¿™ä¸ªæµç¨‹ï¼Œå®ç°å¦‚ä¸‹ç»„ä»¶ï¼š</p><p>ã€UserTransferComponentã€‘ï¼šç”¨æˆ·è½¬è´¦ç»„ä»¶ï¼Œè´Ÿè´£æ‰§è¡Œè½¬è´¦æ“ä½œã€‚</p><p>ã€UserTransferBillComponentã€‘ï¼šç”¨æˆ·è½¬è´¦è´¦å•ç»„ä»¶ï¼Œè®°å½•è½¬è´¦è´¦å•ã€‚</p><p>ã€UserTransferSuccessComponentã€‘ï¼šè½¬è´¦æˆåŠŸç»„ä»¶ï¼Œè®¾ç½®è½¬è´¦æˆåŠŸæ ‡å¿—ã€‚</p><p>è¿™ä¸‰ä¸ªç»„ä»¶çš„å…³é”®æ˜¯è¦ç»§æ‰¿LiteFlowçš„NodeComponentç±»ï¼Œå¹¶å®ç°process()æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>UserTransferComponent</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userTransfer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserTransferComponent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NodeComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TransferService transferService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        MyRequestContext requestContext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContextBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyRequestContext.class);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æ‰§è¡Œè½¬è´¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String orderId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> transferService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(requestContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPayerId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), requestContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPayeeId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), requestContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMoney</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContextBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyResponseContext.class).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>UserTransferBillComponent</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userTransferBill&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserTransferBillComponent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NodeComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TransferBillService transferBillService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        MyRequestContext requestContext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContextBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyRequestContext.class);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        MyResponseContext responseContext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContextBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyResponseContext.class);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //è®°å½•è´¦å•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        transferBillService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">recordBill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(responseContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), requestContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPayerId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), requestContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPayeeId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>UserTransferSuccessComponent</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userTransferSuccess&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserTransferSuccessComponent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NodeComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //è®¾ç½®è½¬è´¦æˆåŠŸæ ‡å¿—</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContextBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyResponseContext.class).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="ã€step3ã€‘ç¼–æ’ç»„ä»¶" tabindex="-1">ğŸŒ±ã€step3ã€‘ç¼–æ’ç»„ä»¶ <a class="header-anchor" href="#ã€step3ã€‘ç¼–æ’ç»„ä»¶" aria-label="Permalink to &quot;:seedling:ã€step3ã€‘ç¼–æ’ç»„ä»¶&quot;">â€‹</a></h4><p>æ¥ç€ï¼Œæˆ‘ä»¬è¦æ–°å»ºä¸€ä¸ªæµç¨‹é…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨é‡Œé¢æè¿°æˆ‘ä»¬æƒ³è¦çš„æµç¨‹ã€‚</p><p>æˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ªflow.el.xmlæ–‡ä»¶ï¼Œå¹¶åœ¨application.ymlä¸­é…ç½®</p><p>application.yml</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">liteflow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  rule-source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">config/flow.el.xml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æ¥ç€ï¼Œå°±æ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼Œåœ¨flow.el.xmlä¸­ç¼–å†™æµç¨‹ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">chain</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userTransferChainSimple&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        THEN(userTransfer, userTransferBill, userTransferSuccess);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ–‡ä»¶ä¸­åŒ…å«è¿™äº›å†…å®¹ï¼š</p><p>ã€1ã€‘éœ€è¦å¯¹è¿™ä¸ªchainå–ä¸€ä¸ªnameï¼Œè¿™ä¸ªnameåœ¨åé¢è°ƒç”¨æµç¨‹æ—¶éœ€è¦ç”¨åˆ°ã€‚</p><p>ã€2ã€‘THENä¸­å¯ä»¥çœ‹åˆ°ï¼Œç¼–æ’äº†ä¸Šé¢ç¼–å†™çš„ä¸‰ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”æœ‰é¡ºåºå…³ç³»ã€‚</p><h4 id="ã€step4ã€‘å®ç°ä¸€ä¸ªcontrollerè°ƒç”¨æ¥å£" tabindex="-1">ğŸŒ±ã€step4ã€‘å®ç°ä¸€ä¸ªcontrollerè°ƒç”¨æ¥å£ <a class="header-anchor" href="#ã€step4ã€‘å®ç°ä¸€ä¸ªcontrollerè°ƒç”¨æ¥å£" aria-label="Permalink to &quot;:seedling:ã€step4ã€‘å®ç°ä¸€ä¸ªcontrollerè°ƒç”¨æ¥å£&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * è½¬è´¦æµç¨‹è°ƒç”¨æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@author</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> xxl</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * @date 2024/5/11 22:14</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RestController</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserTransferController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //LiteFlowæ ¸å¿ƒbeanï¼Œç”¨æ¥è§¦å‘æµç¨‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FlowExecutor flowExecutor;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/userTransferChainSimple&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userTransferChainSimple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestParam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">payerId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestParam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">payeeId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestParam</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> money</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //1. æ„å»ºè¯·æ±‚ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç”¨æ¥ä¼ é€’å‚æ•°è¿›æµç¨‹ç»„ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        RequestContext requestContext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RequestContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        requestContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPayerId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payerId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        requestContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPayeeId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payeeId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        requestContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setMoney</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(money);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //2. è°ƒç”¨æµç¨‹å¼•æ“ï¼Œä¼ å…¥è¯·æ±‚ä¸Šä¸‹æ–‡å’Œç»“æœä¸Šä¸‹æ–‡ï¼Œç»“æœä¸Šä¸‹æ–‡ç”¨äºç»„ä»¶åœ¨å…¶ä¸­è®¾ç½®å„ç§ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ResponseContext responseContext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ResponseContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        flowExecutor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute2Resp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userTransferChainSimple&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, requestContext, responseContext);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //3. æ„é€ è¿”å›å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> buildResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(responseContext);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>å…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¯åŠ¨æµç¨‹æ—¶éœ€è¦æ„å»ºä¸Šä¸‹æ–‡å¯¹è±¡å¹¶ä¼ å…¥æµç¨‹å¼•æ“ã€‚è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡å®Œå…¨å¯ä»¥è‡ªå·±å®šä¹‰ï¼Œä¸Šå›¾ç¤ºä¾‹ä»…æ˜¯æˆ‘çš„ä¹ æƒ¯ï¼ˆåˆ†å¼€äº†è¯·æ±‚ä¸Šä¸‹æ–‡å’Œç»“æœä¸Šä¸‹æ–‡ï¼‰ã€‚</p><h4 id="ã€step5ã€‘run" tabindex="-1">ğŸŒ±ã€step5ã€‘runï¼ <a class="header-anchor" href="#ã€step5ã€‘run" aria-label="Permalink to &quot;:seedling:ã€step5ã€‘runï¼&quot;">â€‹</a></h4><p>æ‰§è¡Œè¿è¡Œä¸€ä¸‹çœ‹ä¸‹ç»“æœï¼š</p><p><img src="`+e+`" alt="image-20240511235744663" loading="lazy"></p><p>ä¸‹é¢æ˜¯æ§åˆ¶å°çš„è¾“å‡ºï¼š</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2024-05-11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:57:17.975</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20216</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ---</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [nio-8082-exec-6] com.yomahub.liteflow.slot.Slot           </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [3fb498306f40485894840641e017f128]:CHAIN_NAME[userTransferChainSimple]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userTransfer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;0&gt;==&gt;userTransferBill&lt;0&gt;==&gt;userTransferSuccess&lt;0&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2024-05-11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:57:17.975</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20216</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ---</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [nio-8082-exec-6] com.yomahub.liteflow.slot.DataBus        </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [3fb498306f40485894840641e017f128]:slot[2] released</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä»ä¸Šé¢æ§åˆ¶å°è¾“å‡ºå›¾ä¸­å¯ä»¥çœ‹åˆ°ç»„ä»¶æ‰§è¡Œçš„è¿‡ç¨‹ã€‚</p><p>çœ‹ä¸‹æ•´ä¸ªä»£ç çš„ç›®å½•ç»“æ„ï¼š</p><p><img src="`+t+'" alt="image-20240511235954917" loading="lazy"></p><p>ä½¿ç”¨äº†æµç¨‹å¼•æ“liteflowåï¼Œæ•´ä¸ªä»£ç çš„ç›®å½•ä¹Ÿå¾ˆæ¸…çˆ½æ¸…æ¥šã€‚</p><h3 id="æ¶‰åŠåˆ°æ¡ä»¶é€‰æ‹©-if-çš„æµç¨‹" tabindex="-1">ğŸŒ´æ¶‰åŠåˆ°æ¡ä»¶é€‰æ‹©(if)çš„æµç¨‹ <a class="header-anchor" href="#æ¶‰åŠåˆ°æ¡ä»¶é€‰æ‹©-if-çš„æµç¨‹" aria-label="Permalink to &quot;:palm_tree:æ¶‰åŠåˆ°æ¡ä»¶é€‰æ‹©(if)çš„æµç¨‹&quot;">â€‹</a></h3><h4 id="ã€step1ã€‘æµç¨‹" tabindex="-1">ğŸŒ±ã€step1ã€‘æµç¨‹ <a class="header-anchor" href="#ã€step1ã€‘æµç¨‹" aria-label="Permalink to &quot;:seedling:ã€step1ã€‘æµç¨‹&quot;">â€‹</a></h4><p>å»¶å±•ä¸Šé¢çš„è½¬è´¦æµç¨‹ï¼ŒåŠ å…¥é€‰æ‹©çš„é€»è¾‘ã€‚æ•´ä¸ªæµç¨‹å˜æˆå¦‚ä¸‹è¿™æ ·ï¼š</p><p><img src="'+h+`" alt="image-20240512001719343" loading="lazy"></p><p>æ–°å¢å…¥å‚æ ¡éªŒå’Œè½¬è´¦å¤±è´¥èŠ‚ç‚¹ã€‚</p><h4 id="ã€step2ã€‘æ–°å¢ç»„ä»¶" tabindex="-1">ğŸŒ±ã€step2ã€‘æ–°å¢ç»„ä»¶ <a class="header-anchor" href="#ã€step2ã€‘æ–°å¢ç»„ä»¶" aria-label="Permalink to &quot;:seedling:ã€step2ã€‘æ–°å¢ç»„ä»¶&quot;">â€‹</a></h4><p>ã€å…¥å‚æ ¡éªŒã€‘éœ€è¦ç”¨LiteFlowçš„â€œæ¡ä»¶ç»„ä»¶â€æ¥å®ç°ï¼Œè€Œã€è½¬è´¦å¤±è´¥ã€‘ç»„ä»¶åˆ™å’Œè½¬è´¦æˆåŠŸç»„ä»¶ä¸€æ ·å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>ç”¨æˆ·å…¥å‚æ£€æŸ¥ç»„ä»¶ï¼šUserCheckComponent</p><p>éœ€è¦æ³¨æ„çš„æ˜¯v2.12ä¹‹å‰ä½¿ç”¨NodeIfComponentï¼Œä¹‹åç‰ˆæœ¬åä½¿ç”¨NodeBooleanComponentã€‚</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å†å²ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userCheck&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserCheckComponent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NodeIfComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> processIf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        RequestContext requestContext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContextBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RequestContext.class);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> money </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requestContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMoney</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (money </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// v2.12</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userCheck&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserCheckComponent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NodeBooleanComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> processBoolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        MyRequestContext requestContext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContextBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyRequestContext.class);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> money </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requestContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMoney</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (money </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>è½¬è´¦å¤±è´¥ç»„ä»¶ï¼šUserTransferFailComponent</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userTransferFail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserTransferFailComponent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NodeComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContextBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ResponseContext.class).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="ã€step3ã€‘æ–°å¢é…ç½®" tabindex="-1">ğŸŒ±ã€step3ã€‘æ–°å¢é…ç½® <a class="header-anchor" href="#ã€step3ã€‘æ–°å¢é…ç½®" aria-label="Permalink to &quot;:seedling:ã€step3ã€‘æ–°å¢é…ç½®&quot;">â€‹</a></h4><p>åœ¨æµç¨‹å®šä¹‰æ–‡ä»¶ä¸­çš„å®šä¹‰ï¼š</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">chain</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userTransferChainIfElse&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        THEN(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            IF(userCheck, THEN(userTransfer, userTransferBill, userTransferSuccess)).ELSE(userTransferFail)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="ã€step4ã€‘è¿è¡Œæµ‹è¯•" tabindex="-1">ğŸŒ±ã€step4ã€‘è¿è¡Œæµ‹è¯• <a class="header-anchor" href="#ã€step4ã€‘è¿è¡Œæµ‹è¯•" aria-label="Permalink to &quot;:seedling:ã€step4ã€‘è¿è¡Œæµ‹è¯•&quot;">â€‹</a></h4><p>ä¸¤ç§æ‰§è¡Œç»“æœ</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userCheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;0&gt;==&gt;userTransfer&lt;0&gt;==&gt;userTransferBill&lt;12&gt;==&gt;userTransferSuccess&lt;0&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userCheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;0&gt;==&gt;userTransferFail&lt;0&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="æ¶‰åŠåˆ°å¼‚å¸¸å¤„ç†çš„æµç¨‹" tabindex="-1">ğŸŒ´æ¶‰åŠåˆ°å¼‚å¸¸å¤„ç†çš„æµç¨‹ <a class="header-anchor" href="#æ¶‰åŠåˆ°å¼‚å¸¸å¤„ç†çš„æµç¨‹" aria-label="Permalink to &quot;:palm_tree:æ¶‰åŠåˆ°å¼‚å¸¸å¤„ç†çš„æµç¨‹&quot;">â€‹</a></h3><h4 id="ã€step1ã€‘æµç¨‹-1" tabindex="-1">ğŸŒ±ã€step1ã€‘æµç¨‹ <a class="header-anchor" href="#ã€step1ã€‘æµç¨‹-1" aria-label="Permalink to &quot;:seedling:ã€step1ã€‘æµç¨‹&quot;">â€‹</a></h4><p>æ¶‰åŠåˆ°å¼‚å¸¸çš„æµç¨‹ã€‚æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="`+k+`" alt="image-20240512005734162" loading="lazy"></p><h4 id="ã€step2ã€‘æ–°å¢é…ç½®" tabindex="-1">ğŸŒ±ã€step2ã€‘æ–°å¢é…ç½® <a class="header-anchor" href="#ã€step2ã€‘æ–°å¢é…ç½®" aria-label="Permalink to &quot;:seedling:ã€step2ã€‘æ–°å¢é…ç½®&quot;">â€‹</a></h4><p>åœ¨æµç¨‹å®šä¹‰æ–‡ä»¶ä¸­çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">chain</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userTransferChainCatchException&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CATCH(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            THEN(userTransfer, userTransferBill, userTransferSuccess)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ).DO(userTransferFail);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>é€šè¿‡CATCHå…³é”®å­—åŒ…è£¹éœ€è¦æ•è·å¼‚å¸¸çš„æµç¨‹ï¼Œç„¶åä½¿ç”¨DOæ¥æŒ‡å®šå¼‚å¸¸å¤„ç†æµç¨‹å³å¯ã€‚</p><h4 id="ã€step3ã€‘è¿è¡Œæµ‹è¯•" tabindex="-1">ğŸŒ±ã€step3ã€‘è¿è¡Œæµ‹è¯• <a class="header-anchor" href="#ã€step3ã€‘è¿è¡Œæµ‹è¯•" aria-label="Permalink to &quot;:seedling:ã€step3ã€‘è¿è¡Œæµ‹è¯•&quot;">â€‹</a></h4><p>ä»£ç ä¸­æ·»åŠ ä¸€æ®µå¼‚å¸¸ï¼Œç›´æ¥è¿è¡Œçœ‹ä¸€ä¸‹å¼‚å¸¸æƒ…å†µä¸‹æ§åˆ¶å°çš„è¾“å‡ºï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>userTransfer&lt;3&gt;==&gt;userTransferFail&lt;0&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä»æ§åˆ¶å°å¯ä»¥çœ‹å‡ºï¼Œæ•è·äº†é¢„åŸ‹çš„å¼‚å¸¸ï¼Œç„¶åèµ°è¿›äº†userTransferFailèŠ‚ç‚¹ã€‚</p><h3 id="å°†æµç¨‹é…ç½®æ”¾åˆ°db-å¹¶å®ç°çƒ­åˆ·æ–°" tabindex="-1">ğŸŒ´å°†æµç¨‹é…ç½®æ”¾åˆ°DBï¼Œå¹¶å®ç°çƒ­åˆ·æ–° <a class="header-anchor" href="#å°†æµç¨‹é…ç½®æ”¾åˆ°db-å¹¶å®ç°çƒ­åˆ·æ–°" aria-label="Permalink to &quot;:palm_tree:å°†æµç¨‹é…ç½®æ”¾åˆ°DBï¼Œå¹¶å®ç°çƒ­åˆ·æ–°&quot;">â€‹</a></h3><p><strong>LiteFlow è¿˜æ”¯æŒæŠŠæµç¨‹å®šä¹‰æ”¾åœ¨æ•°æ®åº“é‡Œç»´æŠ¤ï¼Œå¹¶å®ç°çƒ­åˆ·æ–°ï¼ˆä¿®æ”¹æµç¨‹åä¸éœ€è¦é‡æ–°å¯åŠ¨æœåŠ¡ï¼‰</strong>ã€‚</p><h4 id="ã€step1ã€‘æ·»åŠ ä¾èµ–" tabindex="-1">ğŸŒ±ã€step1ã€‘æ·»åŠ ä¾èµ– <a class="header-anchor" href="#ã€step1ã€‘æ·»åŠ ä¾èµ–" aria-label="Permalink to &quot;:seedling:ã€step1ã€‘æ·»åŠ ä¾èµ–&quot;">â€‹</a></h4><p>éœ€è¦æ·»åŠ ä»¥ä¸‹é¢å¤–æ’ä»¶ä¾èµ–ï¼š</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.yomahub&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;liteflow-rule-sql&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;2.12.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="ã€step2ã€‘å¢åŠ é…ç½®" tabindex="-1">ğŸŒ±ã€step2ã€‘å¢åŠ é…ç½® <a class="header-anchor" href="#ã€step2ã€‘å¢åŠ é…ç½®" aria-label="Permalink to &quot;:seedling:ã€step2ã€‘å¢åŠ é…ç½®&quot;">â€‹</a></h4><p>ä¾èµ–äº†æ’ä»¶åŒ…ä¹‹åï¼Œæ— éœ€å†é…ç½®<code>liteflow.ruleSource</code>è·¯å¾„ã€‚</p><p>åªéœ€è¦é…ç½®æ’ä»¶çš„é¢å¤–å‚æ•°å³å¯ï¼Œåœ¨<code>application.yml</code>ä¸­ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">liteflow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#  rule-source: config/flow.el.xml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  rule-source-ext-data-map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #æ•°æ®æºåŸºç¡€é…ç½®ï¼Œé¡¹ç›®ä¸­é…ç½®è¿‡spring.datasourceæ— éœ€å†æ¬¡é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    url: jdbc:mysql://127.0.0.1:3306/x_file_storage</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    driverClassName: com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    username: root</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    password: xxl666</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    applicationName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">liteflowdemo</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #é…ç½®æµç¨‹çš„è¡¨å</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    chainTableName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">LITE_FLOW_CHAIN</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #æ³¨æ„ï¼Œä¸‹é¢xxxFieldç»“å°¾çš„ï¼Œéƒ½æ˜¯è¡¨ä¸­çš„åˆ—å</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #åº”ç”¨å</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    chainApplicationNameField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">application_name</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #æµç¨‹å</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    chainNameField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">chain_name</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #æµç¨‹è¡¨è¾¾å¼</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    elDataField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">el_data</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>LiteFlowæ”¯æŒäº†ä½¿ç”¨é¡¹ç›®ä¸­å·²å­˜åœ¨çš„Datasourceæ¥è¿›è¡Œæ•°æ®åº“è¿æ¥ã€‚å¦‚æœé¡¹ç›®ä¸­å·²æœ‰é“¾æ¥é…ç½®ï¼Œæ— éœ€å†æ¬¡é…ç½®ã€‚</p><h4 id="ã€step3ã€‘å»ºç«‹æ•°æ®åº“è¡¨" tabindex="-1">ğŸŒ±ã€step3ã€‘å»ºç«‹æ•°æ®åº“è¡¨ <a class="header-anchor" href="#ã€step3ã€‘å»ºç«‹æ•°æ®åº“è¡¨" aria-label="Permalink to &quot;:seedling:ã€step3ã€‘å»ºç«‹æ•°æ®åº“è¡¨&quot;">â€‹</a></h4><p>ä¸‹é¢æ’å…¥ä¸€ä¸ªåŸæœ¬å†™åœ¨æµç¨‹å®šä¹‰æ–‡ä»¶ä¸­çš„æµç¨‹é…ç½®ï¼š</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LITE_FLOW_CHAIN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`id\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> auto_increment,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`application_name\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`chain_name\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`el_data\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2046</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`id\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">insert into</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LITE_FLOW_CHAIN </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;liteflowdemo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userTransferChainFromDB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;THEN(userTransfer, userTransferBill, userTransferSuccess)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="ã€step4ã€‘è‡ªåŠ¨åˆ·æ–°" tabindex="-1">ğŸŒ±ã€step4ã€‘è‡ªåŠ¨åˆ·æ–° <a class="header-anchor" href="#ã€step4ã€‘è‡ªåŠ¨åˆ·æ–°" aria-label="Permalink to &quot;:seedling:ã€step4ã€‘è‡ªåŠ¨åˆ·æ–°&quot;">â€‹</a></h4><p>æµ‹è¯•æ‰§è¡Œçš„â€œæµç¨‹é“¾æ¡â€ã€‚</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userTransfer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;4&gt;==&gt;userTransferBill&lt;11&gt;==&gt;userTransferSuccess&lt;0&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç„¶åæˆ‘ä»¬åœ¨æ•°æ®åº“ä¿®æ”¹è¿™ä¸ªæµç¨‹ï¼Œä¸­é—´åŠ å…¥ä¸€ä¸ªUserTransferNotifyComponent</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LITE_FLOW_CHAIN </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el_data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;THEN(userTransfer, userTransferBill, userTransferNotify, userTransferSuccess)&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿™ä¸ªæ—¶å€™å†å»è®¿é—®é“¾æ¥ï¼Œè¿˜æ˜¯åŸæ¥çš„æµç¨‹é“¾ã€‚</p><p>è¿™æ˜¯å› ä¸º<strong>LiteFlowä¸æ”¯æŒï¼ˆv2.11.1ä¹‹å‰ç‰ˆæœ¬ä¸æ”¯æŒï¼Œä¹‹åçš„ç‰ˆæœ¬æ˜¯é»˜è®¤å…³é—­çš„ï¼‰DBä½œä¸ºæ•°æ®æºçš„çƒ­åŠ è½½</strong>ï¼ˆå¦‚æœä½¿ç”¨ZKï¼Œetcdç­‰ä½œä¸ºæ•°æ®æºï¼Œè‡ªåŠ¨å®ç°çƒ­åŠ è½½ï¼Œè¯¦æƒ…å¯ä»¥å»å®˜ç½‘çœ‹çœ‹ï¼‰ã€‚</p><p><strong>v2.11.1ä¹‹å‰ä¸»åŠ¨åˆ·æ–°ç¼“å­˜</strong></p><p>æ‰€ä»¥åœ¨DBä¿®æ”¹å®Œä»¥åï¼Œè¦æ‰‹åŠ¨åˆ·æ–°ä¸€ä¸‹LiteFlowçš„æœ¬åœ°ç¼“å­˜ã€‚</p><p>æˆ‘å®ç°äº†ä¸€ä¸ªç®€å•çš„æ¥å£è®©æˆ‘ä»¬å¯ä»¥ä¸»åŠ¨åˆ·æ–°ç¼“å­˜ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * ä¸»åŠ¨åˆ·æ–°ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/reloadLiteFlowConfigure&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reloadLiteFlowConfigure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        flowExecutor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reloadRule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è°ƒç”¨å®Œè¿™ä¸ªæ¥å£ä»¥åï¼Œæˆ‘ä»¬å†è®¿é—®ä¸€ä¸‹é“¾æ¥ï¼Œå°±æ˜¯å¦‚ä¸‹æ•ˆæœäº†ï¼š</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userTransfer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;0&gt;==&gt;userTransferBill&lt;0&gt;==&gt;userTransferNotify&lt;0&gt;==&gt;userTransferSuccess&lt;0&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>v2.11.1+è½®è¯¢è‡ªåŠ¨åˆ·æ–°</strong></p><p>LiteFlowæ”¯æŒSQLæ•°æ®æºè½®è¯¢æ¨¡å¼çš„è‡ªåŠ¨åˆ·æ–°æœºåˆ¶ã€‚å¯ä»¥åœ¨é…ç½®é¡¹ä¸­é€šè¿‡<code>pollingEnabled: true</code>æ¥å¼€å¯è‡ªåŠ¨åˆ·æ–°ï¼š</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">liteflow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  rule-source-ext-data-map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    pollingEnabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    ##ä»¥ä¸‹éå¿…é¡»ï¼Œé»˜è®¤1åˆ†é’Ÿ</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    pollingIntervalSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    pollingStartSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>è½®è¯¢æ¨¡å¼çš„è‡ªåŠ¨åˆ·æ–°æ ¹æ®é¢„è®¾çš„æ—¶é—´é—´éš”å®šæ—¶æ‹‰å–SQLä¸­çš„æ•°æ®ï¼Œä¸æœ¬åœ°ä¿å­˜çš„æ•°æ®SHAå€¼è¿›è¡Œå¯¹æ¯”æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°æ•°æ®ã€‚</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2024-05-13</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 00:40:09.153</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22552</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ---</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SQL-Polling-1]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> c.y.l.parser.sql.read.AbstractSqlRead</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> query</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sql:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SELECT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LITE_FLOW_CHAIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application_name=&#39;liteflowdemo&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2024-05-13</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 00:40:09.155</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22552</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ---</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SQL-Polling-1]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> c.y.l.parser.sql.util.LiteFlowJdbcUtil</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dataSourceName[dataSource],has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> found</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> liteflow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2024-05-13</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 00:41:09.154</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22552</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ---</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SQL-Polling-1]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> c.y.l.parser.sql.read.AbstractSqlRead</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> query</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sql:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SELECT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LITE_FLOW_CHAIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application_name=&#39;liteflowdemo&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2024-05-13</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 00:41:09.155</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22552</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ---</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SQL-Polling-1]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> c.y.l.parser.sql.util.LiteFlowJdbcUtil</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dataSourceName[dataSource],has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> found</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> liteflow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å®šæ—¶è½®è¯¢å­˜åœ¨äº›å¾®çš„æ€§èƒ½æ¶ˆè€—ï¼›å—è½®è¯¢é—´éš”é™åˆ¶ï¼Œæ•°æ®æ›´æ–°æœ‰ä¸€å®šå»¶è¿Ÿæ€§ã€‚</p><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h2><p>è‹ä¸‰è¯´æŠ€æœ¯-èŠèŠLiteFlow</p>`,137)])])}const F=i(r,[["render",E]]);export{u as __pageData,F as default};
