import{_ as t,c as i,o as a,ah as l}from"./chunks/framework.D5cOWG0Y.js";const y=JSON.parse('{"title":"Mybatis增强框架Mybatis-Flex","description":"","frontmatter":{"title":"Mybatis增强框架Mybatis-Flex","tags":["MyBatis","Mybatis-Flex"],"categories":["MyBatis","Mybatis-Flex"]},"headers":[],"relativePath":"常用框架/Mybatis/Mybatis增强框架Mybatis-Flex.md","filePath":"常用框架/Mybatis/Mybatis增强框架Mybatis-Flex.md","lastUpdated":1756054686000}'),e={name:"常用框架/Mybatis/Mybatis增强框架Mybatis-Flex.md"};function n(p,s,r,h,d,k){return a(),i("div",null,[...s[0]||(s[0]=[l(`<blockquote><p>官方文档：<a href="https://mybatis-flex.com/" target="_blank" rel="noreferrer">https://mybatis-flex.com/</a></p></blockquote><h2 id="一、mybatis-flex-是什么" tabindex="-1">一、Mybatis-Flex 是什么 <a class="header-anchor" href="#一、mybatis-flex-是什么" aria-label="Permalink to “一、Mybatis-Flex 是什么”">​</a></h2><p>Mybatis-Flex 是一个优雅的 Mybatis 增强框架，它非常轻量、同时拥有极高的性能与灵活性。我们可以轻松的使用 Mybaits-Flex 链接任何数据库，其内置的 QueryWrapper^亮点 帮助我们极大的减少了 SQL 编写的工作的同时，减少出错的可能性。</p><p>总而言之，Mybatis-Flex 能够极大地提高我们的开发效率和开发体验，让我们有更多的时间专注于自己的事情。</p><h2 id="二、mybatis-flex的有什么特点" tabindex="-1">二、Mybatis-Flex的有什么特点 <a class="header-anchor" href="#二、mybatis-flex的有什么特点" aria-label="Permalink to “二、Mybatis-Flex的有什么特点”">​</a></h2><p><strong>1、轻量</strong>：除了 MyBatis，没有任何第三方依赖轻依赖、没有任何拦截器，其原理是通过 SqlProvider 的方式实现的轻实现。同时，在执行的过程中，没有任何的 Sql 解析（Parse）轻运行。 这带来了几个好处：1、极高的性能；2、极易对代码进行跟踪和调试； 3、把控性更高。</p><p><strong>2、灵活</strong>：支持 Entity 的增删改查、以及分页查询的同时，Mybatis-Flex 提供了 Db + Row^灵活 工具，可以无需实体类对数据库进行增删改查以及分页查询。 与此同时，Mybatis-Flex 内置的 QueryWrapper^灵活 可以轻易的帮助我们实现 <strong>多表查询</strong>、<strong>链接查询</strong>、<strong>子查询</strong> 等等常见的 SQL 场景。</p><p><strong>3、强大</strong>：支持任意关系型数据库，还可以通过方言持续扩展，同时支持 <strong>多（复合）主键</strong>、<strong>逻辑删除</strong>、<strong>乐观锁配置</strong>、<strong>数据脱敏</strong>、<strong>数据审计</strong>、 <strong>数据填充</strong> 等等功能。</p><h2 id="三、mybatis-flex和同类框架对比" tabindex="-1">三、Mybatis-Flex和同类框架对比 <a class="header-anchor" href="#三、mybatis-flex和同类框架对比" aria-label="Permalink to “三、Mybatis-Flex和同类框架对比”">​</a></h2><h3 id="_1-功能对比" tabindex="-1">1）功能对比： <a class="header-anchor" href="#_1-功能对比" aria-label="Permalink to “1）功能对比：”">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">功能或特点</th><th style="text-align:left;">MyBatis-Flex</th><th style="text-align:left;">MyBatis-Plus</th><th style="text-align:left;">Fluent-MyBatis</th></tr></thead><tbody><tr><td style="text-align:left;">对 entity 的基本增删改查</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">分页查询</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">分页查询之总量缓存</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">分页查询无 SQL 解析设计（更轻量，及更高性能）</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">多表查询：from 多张表</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">多表查询：left join、inner join 等等</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">多表查询：union，union all</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">单主键配置</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">多种 id 生成策略</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">支持多主键、复合主键</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">字段的 typeHandler 配置</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">除了 MyBatis，无其他第三方依赖（更轻量）</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">QueryWrapper 是否支持在微服务项目下进行 RPC 传输</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">未知</td></tr><tr><td style="text-align:left;">逻辑删除</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">乐观锁</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">SQL 审计</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">数据填充</td><td style="text-align:left;">✅</td><td style="text-align:left;">✔️ <strong>（收费）</strong></td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">数据脱敏</td><td style="text-align:left;">✅</td><td style="text-align:left;">✔️ <strong>（收费）</strong></td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">字段权限</td><td style="text-align:left;">✅</td><td style="text-align:left;">✔️ <strong>（收费）</strong></td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">字段加密</td><td style="text-align:left;">✅</td><td style="text-align:left;">✔️ <strong>（收费）</strong></td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">字典回写</td><td style="text-align:left;">✅</td><td style="text-align:left;">✔️ <strong>（收费）</strong></td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">Db + Row</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">Entity 监听</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">多数据源支持</td><td style="text-align:left;">✅</td><td style="text-align:left;">借助其他框架或收费</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">多数据源是否支持 Spring 的事务管理，比如 @Transactional 和 TransactionTemplate 等</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">多数据源是否支持 &quot;非Spring&quot; 项目</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">多租户</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">动态表名</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">动态 Schema</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr></tbody></table><h3 id="_2-性能对比" tabindex="-1">2）性能对比： <a class="header-anchor" href="#_2-性能对比" aria-label="Permalink to “2）性能对比：”">​</a></h3><p><strong>这里直接贴测试结果：</strong></p><ul><li>MyBatis-Flex 的查询单条数据的速度，大概是 MyBatis-Plus 的 5 ~ 10+ 倍。</li><li>MyBatis-Flex 的查询 10 条数据的速度，大概是 MyBatis-Plus 的 5~10 倍左右。</li><li>Mybatis-Flex 的分页查询速度，大概是 Mybatis-Plus 的 5~10 倍左右。</li><li>Mybatis-Flex 的数据更新速度，大概是 Mybatis-Plus 的 5~10+ 倍。</li></ul><p><strong>具体性能对比测试，移步：</strong></p><blockquote><ul><li><a href="https://mybatis-flex.com/zh/intro/benchmark.html" target="_blank" rel="noreferrer">https://mybatis-flex.com/zh/intro/benchmark.html</a></li></ul></blockquote><h2 id="四、mybatis-flex支持的数据库类型" tabindex="-1">四、Mybatis-Flex支持的数据库类型 <a class="header-anchor" href="#四、mybatis-flex支持的数据库类型" aria-label="Permalink to “四、Mybatis-Flex支持的数据库类型”">​</a></h2><p>MyBatis-Flex 支持的数据库类型，如下表格所示，我们还可以通过自定义方言的方式，持续添加更多的数据库支持。</p><table tabindex="0"><thead><tr><th style="text-align:left;">数据库</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">mysql</td><td style="text-align:left;">MySQL 数据库</td></tr><tr><td style="text-align:left;">mariadb</td><td style="text-align:left;">MariaDB 数据库</td></tr><tr><td style="text-align:left;">oracle</td><td style="text-align:left;">Oracle11g 及以下数据库</td></tr><tr><td style="text-align:left;">oracle12c</td><td style="text-align:left;">Oracle12c 及以上数据库</td></tr><tr><td style="text-align:left;">db2</td><td style="text-align:left;">DB2 数据库</td></tr><tr><td style="text-align:left;">hsql</td><td style="text-align:left;">HSQL 数据库</td></tr><tr><td style="text-align:left;">sqlite</td><td style="text-align:left;">SQLite 数据库</td></tr><tr><td style="text-align:left;">postgresql</td><td style="text-align:left;">PostgreSQL 数据库</td></tr><tr><td style="text-align:left;">sqlserver2005</td><td style="text-align:left;">SQLServer2005 数据库</td></tr><tr><td style="text-align:left;">sqlserver</td><td style="text-align:left;">SQLServer 数据库</td></tr><tr><td style="text-align:left;">dm</td><td style="text-align:left;">达梦数据库</td></tr><tr><td style="text-align:left;">xugu</td><td style="text-align:left;">虚谷数据库</td></tr><tr><td style="text-align:left;">kingbasees</td><td style="text-align:left;">人大金仓数据库</td></tr><tr><td style="text-align:left;">phoenix</td><td style="text-align:left;">Phoenix HBase 数据库</td></tr><tr><td style="text-align:left;">gauss</td><td style="text-align:left;">Gauss 数据库</td></tr><tr><td style="text-align:left;">clickhouse</td><td style="text-align:left;">ClickHouse 数据库</td></tr><tr><td style="text-align:left;">gbase</td><td style="text-align:left;">南大通用(华库)数据库</td></tr><tr><td style="text-align:left;">gbase-8s</td><td style="text-align:left;">南大通用数据库 GBase 8s</td></tr><tr><td style="text-align:left;">oscar</td><td style="text-align:left;">神通数据库</td></tr><tr><td style="text-align:left;">sybase</td><td style="text-align:left;">Sybase ASE 数据库</td></tr><tr><td style="text-align:left;">OceanBase</td><td style="text-align:left;">OceanBase 数据库</td></tr><tr><td style="text-align:left;">Firebird</td><td style="text-align:left;">Firebird 数据库</td></tr><tr><td style="text-align:left;">derby</td><td style="text-align:left;">Derby 数据库</td></tr><tr><td style="text-align:left;">highgo</td><td style="text-align:left;">瀚高数据库</td></tr><tr><td style="text-align:left;">cubrid</td><td style="text-align:left;">CUBRID 数据库</td></tr><tr><td style="text-align:left;">goldilocks</td><td style="text-align:left;">GOLDILOCKS 数据库</td></tr><tr><td style="text-align:left;">csiidb</td><td style="text-align:left;">CSIIDB 数据库</td></tr><tr><td style="text-align:left;">hana</td><td style="text-align:left;">SAP_HANA 数据库</td></tr><tr><td style="text-align:left;">impala</td><td style="text-align:left;">Impala 数据库</td></tr><tr><td style="text-align:left;">vertica</td><td style="text-align:left;">Vertica 数据库</td></tr><tr><td style="text-align:left;">xcloud</td><td style="text-align:left;">行云数据库</td></tr><tr><td style="text-align:left;">redshift</td><td style="text-align:left;">亚马逊 redshift 数据库</td></tr><tr><td style="text-align:left;">openGauss</td><td style="text-align:left;">华为 openGauss 数据库</td></tr><tr><td style="text-align:left;">TDengine</td><td style="text-align:left;">TDengine 数据库</td></tr><tr><td style="text-align:left;">informix</td><td style="text-align:left;">Informix 数据库</td></tr><tr><td style="text-align:left;">greenplum</td><td style="text-align:left;">Greenplum 数据库</td></tr><tr><td style="text-align:left;">uxdb</td><td style="text-align:left;">优炫数据库</td></tr></tbody></table><h2 id="五、快速开始" tabindex="-1">五、快速开始 <a class="header-anchor" href="#五、快速开始" aria-label="Permalink to “五、快速开始”">​</a></h2><p><strong>第 1 步：创建数据库表</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`tb_account\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    \`id\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> auto_increment,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    \`user_name\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    \`age\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    \`birthday\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  DATETIME</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tb_account(id, user_name, age, birthday)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;张三&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2020-01-11&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;李四&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">19</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2021-03-21&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>第 2 步：创建 Spring Boot 项目，并添加 Maven 依赖</strong></p><blockquote><p>TIP：可以使用 Spring Initializer 快速初始化一个 Spring Boot 工程。</p></blockquote><p>需要添加的 Maven 主要依赖示例：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.mybatis-flex&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mybatis-flex-spring-boot-starter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.5.3&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.mysql&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql-connector-j&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;runtime&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.zaxxer&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;HikariCP&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- for test only --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-test&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;test&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>第 3 步：对 Spring Boot 项目进行配置</strong></p><p>在 application.yml 中配置数据源：</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># DataSource Config</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  datasource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">jdbc:mysql://localhost:3306/flex_test</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">root</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345678</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在 Spring Boot 启动类中添加 <code>@MapperScan</code> 注解，扫描 Mapper 文件夹：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MapperScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.mybatisflex.test.mapper&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MybatisFlexTestApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SpringApplication.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MybatisFlexTestApplication.class, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>第 4 步：编写实体类和 Mapper 接口</strong></p><p>这里使用了 Lombok 来简化代码。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tb_account&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Account</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">keyType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> KeyType.Auto)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Long id;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String userName;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Integer age;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Date birthday;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>使用 <code>@Table(&quot;tb_account&quot;)</code> 设置实体类与表名的映射关系</li><li>使用 <code>@Id(keyType = KeyType.Auto)</code> 标识主键为</li><li>自增</li></ul><p>Mapper 接口继承 BaseMapper 接口：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AccountMapper</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseMapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Account</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这部分也可以使用 MyBatis-Flex 的代码生成器来生，功能非常强大的。详情进入：</p><blockquote><ul><li><a href="https://mybatis-flex.com/zh/others/codegen.html" target="_blank" rel="noreferrer">https://mybatis-flex.com/zh/others/codegen.html</a></li></ul></blockquote><p><strong>第 5 步：开始使用</strong></p><p>添加测试类，进行功能测试：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.mybatisflex.test.entity.table.AccountTableDef.ACCOUNT;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootTest</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MybatisFlexTestApplicationTests</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AccountMapper accountMapper;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> contextLoads</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        QueryWrapper queryWrapper </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QueryWrapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ACCOUNT.AGE.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Account account </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> accountMapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">selectOneByQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queryWrapper);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(account);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>控制台输出：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Account(id=1, userName=张三, age=18, birthday=Sat Jan 11 00:00:00 CST 2020)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>以上的 示例 中， <code>ACCOUNT</code> 为 MyBatis-Flex 通过 APT 自动生成，只需通过静态导入即可，无需手动编码。</p><p>整体来讲，这个框架是Mybatis的增强版，几乎集成了mybatis plus、jooq、fluent mybatis的所有优点。</p><blockquote><p>获取本文源码可访问</p><p><a href="https://github.com/Daneliya/springboot_chowder/tree/main/springboot_myBaits_flex" target="_blank" rel="noreferrer">https://github.com/Daneliya/springboot_chowder/tree/main/springboot_myBaits_flex</a></p></blockquote><h2 id="六、参考资料" tabindex="-1">六、参考资料 <a class="header-anchor" href="#六、参考资料" aria-label="Permalink to “六、参考资料”">​</a></h2><p>[1]. <a href="https://blog.csdn.net/zhipengfang/article/details/132353553" target="_blank" rel="noreferrer">https://blog.csdn.net/zhipengfang/article/details/132353553</a></p>`,49)])])}const E=t(e,[["render",n]]);export{y as __pageData,E as default};
