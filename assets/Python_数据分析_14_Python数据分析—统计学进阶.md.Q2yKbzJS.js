import{_ as a,c as i,o as t,aN as n}from"./chunks/framework.CMIDsdwV.js";const l="/assets/output_14_0.CaHajyga.png",e="/assets/output_35_0.4L28oT8f.png",b=JSON.parse('{"title":"Python数据分析—统计学进阶","description":"","frontmatter":{"title":"Python数据分析—统计学进阶","tags":["Python"],"categories":["Python"]},"headers":[],"relativePath":"Python/数据分析/14_Python数据分析—统计学进阶.md","filePath":"Python/数据分析/14_Python数据分析—统计学进阶.md","lastUpdated":1767444225000}'),p={name:"Python/数据分析/14_Python数据分析—统计学进阶.md"};function h(r,s,d,k,o,g){return t(),i("div",null,[...s[0]||(s[0]=[n(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /Python\\数据分析\\14_Python数据分析—统计学进阶.md for this page in Markdown format</div><h1 id="python数据分析—统计学进阶" tabindex="-1">Python数据分析—统计学进阶 <a class="header-anchor" href="#python数据分析—统计学进阶" aria-label="Permalink to &quot;Python数据分析—统计学进阶&quot;">​</a></h1><h3 id="一、有关假设检验的一些概念" tabindex="-1">一、有关假设检验的一些概念 <a class="header-anchor" href="#一、有关假设检验的一些概念" aria-label="Permalink to &quot;一、有关假设检验的一些概念&quot;">​</a></h3><p>1、描述统计学与推断统计学</p><ul><li>描述统计学：对数据进行描述和总结</li><li>推断统计学：通过样本做出关于总体的推断和预测</li></ul><p>2、对象和整体</p><ul><li>对象：我们想要观测的<strong>具体事物</strong>叫做对象</li><li>整体：我们想观测的<strong>整个对象</strong>的集合</li></ul><p>3、样本和整体</p><ul><li>样本是我们收集数据的<strong>对象</strong></li><li>总体是我们想要得到结论的<strong>群体</strong></li></ul><p>4、统计量和参数</p><ul><li>统计量：描述样本特征的数值</li><li>参数：描述总体特征的数值</li><li>在统计推断中，我们会基于样本的统计量，对总体的参数进行推断，从而得到对总体的结论</li></ul><h3 id="二、独立双样本t检验步骤" tabindex="-1">二、独立双样本t检验步骤 <a class="header-anchor" href="#二、独立双样本t检验步骤" aria-label="Permalink to &quot;二、独立双样本t检验步骤&quot;">​</a></h3><p>1、概念</p><ul><li>独立：说明样本来自不同的总体，彼此没有关联</li><li>双样本：比较两个不同样本的数据</li><li>t检验：一种统计方法，用于确定样本的平均值之间是否存在统计显著的差异</li></ul><p>2、前提条件</p><ul><li>随机抽样</li><li>总体大致呈正态分布</li></ul><h4 id="一-、建立假设" tabindex="-1">(一)、建立假设 <a class="header-anchor" href="#一-、建立假设" aria-label="Permalink to &quot;(一)、建立假设&quot;">​</a></h4><p>1、原假设(H0)</p><p>2、备择假设(H1)</p><p>一般我们进行假设检验的时候，是想反驳原假设，以及支持备择假设</p><h4 id="二-、选择单尾或双尾" tabindex="-1">(二)、选择单尾或双尾 <a class="header-anchor" href="#二-、选择单尾或双尾" aria-label="Permalink to &quot;(二)、选择单尾或双尾&quot;">​</a></h4><p>1、双尾只推断总体之间是否有差异，不在意是正差还是负差</p><p>2、单尾推断只看是否存在正差异，或者只看是否存在负差异</p><h4 id="三-、确定显著水平" tabindex="-1">(三)、确定显著水平 <a class="header-anchor" href="#三-、确定显著水平" aria-label="Permalink to &quot;(三)、确定显著水平&quot;">​</a></h4><p>显著水平反应了检验的严格程度。</p><p>样本抽样存在随机性，检验结果没有可能保证100%符合现实，只能通过显著水平来调整严格程度</p><p>常见的双尾检验显著水平是0.05，也就是说如果检验结果是拒绝原假设，原假设实际为真的概率是5%；再换句话说，如果检验结果是拒绝原假设，结论95%概率是对的。</p><p>常见的单尾检验显著水平是0.025。</p><p><strong>之所以单尾检验显著水平定为双尾检验显著水平的一半，可以想象两样本数据的正态分布图，一样本的平均值落在另一样本的一边区间中，说明差异显著性，说明观察正差异或负差异，说明是单尾假设检验；一样本的平均值落在另一样本的两边区间中，说明差异显著性，说明观察正差异和负差异，说明是双尾假设检验</strong></p><h4 id="四-、计算t值" tabindex="-1">(四)、计算t值 <a class="header-anchor" href="#四-、计算t值" aria-label="Permalink to &quot;(四)、计算t值&quot;">​</a></h4><p>1、t值：表示两个样本之间均值差异的大小，越大说明差异约显著</p><h4 id="五-、计算自由度" tabindex="-1">(五)、计算自由度 <a class="header-anchor" href="#五-、计算自由度" aria-label="Permalink to &quot;(五)、计算自由度&quot;">​</a></h4><p>自由度 = 样本1的数量 + 样本2的数量 -2</p><h4 id="六-、查看t值临界值表" tabindex="-1">(六)、查看t值临界值表 <a class="header-anchor" href="#六-、查看t值临界值表" aria-label="Permalink to &quot;(六)、查看t值临界值表&quot;">​</a></h4><p>根据单双尾、自由度和显著水平，去查t值临界值表</p><h4 id="七-、比较临界值和t值" tabindex="-1">(七)、比较临界值和t值 <a class="header-anchor" href="#七-、比较临界值和t值" aria-label="Permalink to &quot;(七)、比较临界值和t值&quot;">​</a></h4><p>t值 &gt;= 临界值，拒绝原假设，说明存在显著差异</p><p>t值 &lt; 临界值，接受原假设，说明不存在显著差异</p><h3 id="三、z检验" tabindex="-1">三、Z检验 <a class="header-anchor" href="#三、z检验" aria-label="Permalink to &quot;三、Z检验&quot;">​</a></h3><h4 id="_1、前提条件的区别" tabindex="-1">1、前提条件的区别 <a class="header-anchor" href="#_1、前提条件的区别" aria-label="Permalink to &quot;1、前提条件的区别&quot;">​</a></h4><ul><li>增加了要求：总体方差已知/样本容量大于30</li></ul><h4 id="_2、步骤的区别" tabindex="-1">2、步骤的区别 <a class="header-anchor" href="#_2、步骤的区别" aria-label="Permalink to &quot;2、步骤的区别&quot;">​</a></h4><ul><li>不需要计算自由度</li><li>z值计算公式，相比于t值计算公式，把样本方差换成了总体方差</li><li>查看z值临界值表</li></ul><h4 id="_3、应用场景" tabindex="-1">3、应用场景 <a class="header-anchor" href="#_3、应用场景" aria-label="Permalink to &quot;3、应用场景&quot;">​</a></h4><ul><li>Z检验适用于已知总体方差，或者样本的数量大于30的情况</li><li>t检验适用于总体方差未知，且样本的数量小于等于30的情况。</li><li>在实际应用中，t检验比Z检验更加常见</li></ul><h4 id="_4、检验结果差异" tabindex="-1">4、检验结果差异 <a class="header-anchor" href="#_4、检验结果差异" aria-label="Permalink to &quot;4、检验结果差异&quot;">​</a></h4><ul><li>Z检验可以提供更高的准确性和敏感性</li></ul><h3 id="四、用代码实现t检验" tabindex="-1">四、用代码实现t检验 <a class="header-anchor" href="#四、用代码实现t检验" aria-label="Permalink to &quot;四、用代码实现t检验&quot;">​</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numpy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pandas </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 引入绘图相关库</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> seaborn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sns</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> matplotlib.pyplot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> plt</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> matplotlib</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 引入t检验相关函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> scipy.stats </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ttest_ind</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 引入Z检验相关函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> statsmodels.stats.weightstats </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ztest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="一-、knowledge" tabindex="-1">(一)、Knowledge <a class="header-anchor" href="#一-、knowledge" aria-label="Permalink to &quot;(一)、Knowledge&quot;">​</a></h4><p>1、SciPy</p><ul><li>做t检验，可以用SciPy这个库。SciPy和Pandas一样，都是建立在NumPy之上的</li><li><code>SciPy.stats</code>模块，有很多和统计分析有关的函数和类</li><li><code>SciPy.stats</code>模块中的<code>ttest_ind</code>函数，就是一个专门用来做独立双样本t检验的函数，&#39;ind&#39;是independent的简写</li></ul><p>2、p值：如果总体之间不存在显著差异，那样本之间存在当前这种差异或更极端的差异，有多大概率。</p><ul><li>p值小，假设总体之间没有显著差异的话，样本有这样的差异是小概率事件，应该拒绝原假设</li><li>p值大，假设总体之间没有显著差异的话，样本有这样的差异是大概率事件，应该接受原假设</li></ul><h4 id="二-、步骤" tabindex="-1">(二)、步骤 <a class="header-anchor" href="#二-、步骤" aria-label="Permalink to &quot;(二)、步骤&quot;">​</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">height_df </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pd.read_csv(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;height.csv&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">height_df</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><table tabindex="0"><thead><tr><th></th><th style="text-align:left;"><strong>身高</strong></th><th style="text-align:left;"><strong>地区</strong></th></tr></thead><tbody><tr><td><strong>0</strong></td><td style="text-align:left;">165</td><td style="text-align:left;">A</td></tr><tr><td><strong>1</strong></td><td style="text-align:left;">167</td><td style="text-align:left;">A</td></tr><tr><td><strong>2</strong></td><td style="text-align:left;">172</td><td style="text-align:left;">A</td></tr><tr><td><strong>3</strong></td><td style="text-align:left;">176</td><td style="text-align:left;">A</td></tr><tr><td><strong>4</strong></td><td style="text-align:left;">178</td><td style="text-align:left;">A</td></tr><tr><td><strong>5</strong></td><td style="text-align:left;">180</td><td style="text-align:left;">A</td></tr><tr><td><strong>6</strong></td><td style="text-align:left;">182</td><td style="text-align:left;">A</td></tr><tr><td><strong>7</strong></td><td style="text-align:left;">183</td><td style="text-align:left;">A</td></tr><tr><td><strong>8</strong></td><td style="text-align:left;">185</td><td style="text-align:left;">A</td></tr><tr><td><strong>9</strong></td><td style="text-align:left;">188</td><td style="text-align:left;">A</td></tr><tr><td><strong>10</strong></td><td style="text-align:left;">155</td><td style="text-align:left;">B</td></tr><tr><td><strong>11</strong></td><td style="text-align:left;">158</td><td style="text-align:left;">B</td></tr><tr><td><strong>12</strong></td><td style="text-align:left;">160</td><td style="text-align:left;">B</td></tr><tr><td><strong>13</strong></td><td style="text-align:left;">162</td><td style="text-align:left;">B</td></tr><tr><td><strong>14</strong></td><td style="text-align:left;">165</td><td style="text-align:left;">B</td></tr><tr><td><strong>15</strong></td><td style="text-align:left;">168</td><td style="text-align:left;">B</td></tr><tr><td><strong>16</strong></td><td style="text-align:left;">172</td><td style="text-align:left;">B</td></tr><tr><td><strong>17</strong></td><td style="text-align:left;">176</td><td style="text-align:left;">B</td></tr><tr><td><strong>18</strong></td><td style="text-align:left;">179</td><td style="text-align:left;">B</td></tr><tr><td><strong>19</strong></td><td style="text-align:left;">182</td><td style="text-align:left;">B</td></tr></tbody></table><h5 id="_1、引入t检验相关函数" tabindex="-1">1、引入t检验相关函数 <a class="header-anchor" href="#_1、引入t检验相关函数" aria-label="Permalink to &quot;1、引入t检验相关函数&quot;">​</a></h5><h5 id="_2、筛选两独立样本的series" tabindex="-1">2、筛选两独立样本的Series <a class="header-anchor" href="#_2、筛选两独立样本的series" aria-label="Permalink to &quot;2、筛选两独立样本的Series&quot;">​</a></h5><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">region_a_height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> height_df.query(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;地区 == &quot;A&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;身高&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">region_b_height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> height_df.query(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;地区 == &quot;B&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;身高&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">region_a_height</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    165</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    167</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    172</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    176</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    178</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    180</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    182</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    183</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    185</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    188</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Name: 身高, dtype: int64</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">region_b_height</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    155</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    158</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    160</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">13</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    162</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">14</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    165</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    168</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    172</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">17</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    176</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    179</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">19</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    182</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Name: 身高, dtype: int64</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 替换成Microsoft YaHei字体</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">matplotlib.rc(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;font&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">family</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Microsoft YaHei&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sns.kdeplot(region_a_height)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sns.kdeplot(region_b_height)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">plt.show()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="`+l+`" alt="" loading="lazy"></p><h5 id="_3、建立假设" tabindex="-1">3、建立假设 <a class="header-anchor" href="#_3、建立假设" aria-label="Permalink to &quot;3、建立假设&quot;">​</a></h5><p>原假设(H0)：地区A和地区B的人平均身高没有差异</p><p>备择假设(H1)：地区A和地区B 的人平均身高有差异</p><h5 id="_4、选择单尾-双尾" tabindex="-1">4、选择单尾/双尾 <a class="header-anchor" href="#_4、选择单尾-双尾" aria-label="Permalink to &quot;4、选择单尾/双尾&quot;">​</a></h5><p>选择双尾检验</p><h5 id="_5、确定显著水平" tabindex="-1">5、确定显著水平 <a class="header-anchor" href="#_5、确定显著水平" aria-label="Permalink to &quot;5、确定显著水平&quot;">​</a></h5><p>alpha = 0.05</p><h5 id="_6、计算t值和p值" tabindex="-1">6、计算t值和p值 <a class="header-anchor" href="#_6、计算t值和p值" aria-label="Permalink to &quot;6、计算t值和p值&quot;">​</a></h5><ul><li>调用<code>ttest_ind</code>函数，分别传入两样本的Series，<code>ttest_ind</code>函数会返回t检验的结果，里面包含两个数字，第一个表示t值，第二个表示p值</li><li><code>**ttest_ind**</code><strong>函数默认计算的是双尾的p值，如果是单尾检验，单尾的p值等于返回的p值除以二</strong></li><li><strong>之所以双尾检验p值是单尾检验p值的2倍，是人为x2的结果。可以想象单尾检验的p值为，一样本平均值，落在另一样本正态分布图中的面积；而由于双尾检验显著水平为，一样本平均值落入另一样本两边的面积，所以人为将p值x2，用两倍的面积和两边的面积去比较</strong></li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t_stat, p_value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ttest_ind(region_a_height, region_b_height)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(t_stat, p_value)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.608375959216796</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.017783305969556976</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="_7、比较p值和显著水平" tabindex="-1">7、比较p值和显著水平 <a class="header-anchor" href="#_7、比较p值和显著水平" aria-label="Permalink to &quot;7、比较p值和显著水平&quot;">​</a></h5><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># (把p值和显著水平进行比较，这里计算出的p值是0.018左右，小于0,05。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 说明当原假设为真时，当前样本出现这种差异的概率很小，而且比我们选择的显著水平更小，因此应该拒绝原假设，换句话说，我们推断总体的平均值确实存在差异。)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p_value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> alpha:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;两组数据有显著差异&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;两组数据无显著差异&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>两组数据有显著差异</p><p><strong>用代码做t检验的步骤，比上一节学的更加简洁和高效。我们不需要去看t值具体是多少，不需要去查t值临界值表，也不需要对比t值和临界值。只需要直接对比p值和显著水平，就能得到结论，到底是拒绝还是接受原假设</strong></p><h3 id="五、用代码实现z检验" tabindex="-1">五、用代码实现Z检验 <a class="header-anchor" href="#五、用代码实现z检验" aria-label="Permalink to &quot;五、用代码实现Z检验&quot;">​</a></h3><h4 id="一-、knowledge-1" tabindex="-1">(一)、Knowledge <a class="header-anchor" href="#一-、knowledge-1" aria-label="Permalink to &quot;(一)、Knowledge&quot;">​</a></h4><p>1、statsmodels</p><p>计算Z值和p值，可以用<code>statsmodels.stats.weightstats</code>模块的<code>ztest</code>函数</p><h4 id="二-、步骤-1" tabindex="-1">(二)、步骤 <a class="header-anchor" href="#二-、步骤-1" aria-label="Permalink to &quot;(二)、步骤&quot;">​</a></h4><p>用Python做Z检验，整个步骤和t检验很相似</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">height_df2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pd.read_csv(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;height2.csv&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">height_df2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><table tabindex="0"><thead><tr><th></th><th style="text-align:left;"><strong>身高</strong></th><th style="text-align:left;"><strong>地区</strong></th></tr></thead><tbody><tr><td><strong>0</strong></td><td style="text-align:left;">175</td><td style="text-align:left;">A</td></tr><tr><td><strong>1</strong></td><td style="text-align:left;">169</td><td style="text-align:left;">A</td></tr><tr><td><strong>2</strong></td><td style="text-align:left;">176</td><td style="text-align:left;">A</td></tr><tr><td><strong>3</strong></td><td style="text-align:left;">185</td><td style="text-align:left;">A</td></tr><tr><td><strong>4</strong></td><td style="text-align:left;">168</td><td style="text-align:left;">A</td></tr><tr><td><strong>...</strong></td><td style="text-align:left;">...</td><td style="text-align:left;">...</td></tr><tr><td><strong>61</strong></td><td style="text-align:left;">173</td><td style="text-align:left;">B</td></tr><tr><td><strong>62</strong></td><td style="text-align:left;">164</td><td style="text-align:left;">B</td></tr><tr><td><strong>63</strong></td><td style="text-align:left;">163</td><td style="text-align:left;">B</td></tr><tr><td><strong>64</strong></td><td style="text-align:left;">183</td><td style="text-align:left;">B</td></tr><tr><td><strong>65</strong></td><td style="text-align:left;">189</td><td style="text-align:left;">B</td></tr></tbody></table><h5 id="_1、引入z检验相关函数" tabindex="-1">1、引入Z检验相关函数 <a class="header-anchor" href="#_1、引入z检验相关函数" aria-label="Permalink to &quot;1、引入Z检验相关函数&quot;">​</a></h5><h5 id="_2、筛选两独立样本的series-1" tabindex="-1">2、筛选两独立样本的Series <a class="header-anchor" href="#_2、筛选两独立样本的series-1" aria-label="Permalink to &quot;2、筛选两独立样本的Series&quot;">​</a></h5><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">region_a_height2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> height_df2.query(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;地区 == &quot;A&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;身高&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">region_b_height2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> height_df2.query(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;地区 == &quot;B&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;身高&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sns.kdeplot(region_a_height2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sns.kdeplot(region_b_height2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">plt.show()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="`+e+`" alt="" loading="lazy"></p><h5 id="_3、建立假设-1" tabindex="-1">3、建立假设 <a class="header-anchor" href="#_3、建立假设-1" aria-label="Permalink to &quot;3、建立假设&quot;">​</a></h5><h5 id="_4、选择单尾-双尾-1" tabindex="-1">4、选择单尾/双尾 <a class="header-anchor" href="#_4、选择单尾-双尾-1" aria-label="Permalink to &quot;4、选择单尾/双尾&quot;">​</a></h5><h5 id="_5、确定显著水平-1" tabindex="-1">5、确定显著水平 <a class="header-anchor" href="#_5、确定显著水平-1" aria-label="Permalink to &quot;5、确定显著水平&quot;">​</a></h5><p>alpha = 0.05</p><h5 id="_6、计算z值和p值" tabindex="-1">6、计算Z值和p值 <a class="header-anchor" href="#_6、计算z值和p值" aria-label="Permalink to &quot;6、计算Z值和p值&quot;">​</a></h5><ul><li>调用ztest函数，分别传入两样本，ztest函数返回两个数字，第一个表示Z值，第二个表示p值 <ul><li>传入可选参数<code>alternative=&#39;two-sided&#39;</code>，表示双尾</li><li>如果是单尾的话，传入可选参数<code>alternative=&#39;larger&#39;</code>，表示想推断第一个的均值，是否显著大于第二个</li><li>传入可选参数<code>alternative=&#39;smaller&#39;</code>，表示想推断第一个的均值，是否显著小于第二个</li></ul></li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">z_stat, p_value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ztest(region_a_height2, region_b_height2, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">alternative</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;two-sided&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(z_stat, p_value)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.9906963757270788</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.04651427741343414</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="_7、比较p值和显著水平-1" tabindex="-1">7、比较p值和显著水平 <a class="header-anchor" href="#_7、比较p值和显著水平-1" aria-label="Permalink to &quot;7、比较p值和显著水平&quot;">​</a></h5><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p_value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> alpha:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;两组数据有显著差异&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;两组数据无显著差异&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>两组数据有显著差异</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 建立假设</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 原假设：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 备择假设：地区A的人平均身高小于地区B 的人的平均身高</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alpha </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.025</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 计算z值和p值（单尾负差异）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">z_stat, p_value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ztest(region_a_height2, region_b_height2, </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                        alternative</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;smaller&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(z_stat, p_value)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p_value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> alpha:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;两组数据有显著差异&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;两组数据无显著差异&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.9906963757270788</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.02325713870671707</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">两组数据有显著差异</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,104)])])}const y=a(p,[["render",h]]);export{b as __pageData,y as default};
