import{_ as n,c as a,o as i,ah as p}from"./chunks/framework.D5cOWG0Y.js";const d=JSON.parse('{"title":"实战2：爆款小红书文案生成器","description":"","frontmatter":{"title":"实战2：爆款小红书文案生成器","tags":["Python"],"categories":["Python"]},"headers":[],"relativePath":"Python/AI大模型应用开发/8_实战2：爆款小红书文案生成器.md","filePath":"Python/AI大模型应用开发/8_实战2：爆款小红书文案生成器.md","lastUpdated":1755802517000}'),l={name:"Python/AI大模型应用开发/8_实战2：爆款小红书文案生成器.md"};function e(t,s,r,h,k,c){return i(),a("div",null,[...s[0]||(s[0]=[p(`<h2 id="一、项目介绍" tabindex="-1">一、项目介绍 <a class="header-anchor" href="#一、项目介绍" aria-label="Permalink to “一、项目介绍”">​</a></h2><h3 id="_1、核心功能" tabindex="-1">1、核心功能 <a class="header-anchor" href="#_1、核心功能" aria-label="Permalink to “1、核心功能”">​</a></h3><ul><li>帮助用户生成适用于小红书平台的爆款文案，包括待选标题和正文内容，支持用户通过自有 API 密钥调用 AI 模型。</li></ul><h3 id="_2、界面设计" tabindex="-1">2、界面设计 <a class="header-anchor" href="#_2、界面设计" aria-label="Permalink to “2、界面设计”">​</a></h3><ol><li><strong>侧边栏</strong><ul><li>可收起 / 展开，支持用户输入 API 密钥（避免消耗开发者 token）。</li><li>附 OpenAI 官方 API 密钥获取链接，方便用户跳转查看获取方法。</li></ul></li><li><strong>主页面</strong><ul><li>设计简洁，包含：一个输入框（用于用户填写文案主题）、一个 “开始写作” 按钮。</li></ul></li></ol><h3 id="_3、用户交互流程" tabindex="-1">3、用户交互流程 <a class="header-anchor" href="#_3、用户交互流程" aria-label="Permalink to “3、用户交互流程”">​</a></h3><ol><li><strong>输入验证</strong><ul><li>若用户未提供 API 密钥却点击 “开始写作”：提示用户输入密钥。</li><li>若用户提供了 API 密钥但未填写主题：提示用户补充主题。</li></ul></li><li><strong>生成过程</strong><ul><li>信息完整后点击按钮，触发 AI 生成流程，此时显示加载组件（告知用户 AI 正在生成内容）。</li></ul></li><li><strong>结果展示</strong><ul><li>生成完成后，结果在分隔线下方展示，分为两列： <ul><li>左列：AI 生成的 5 个待选标题。</li><li>右列：AI 生成的文案正文。</li></ul></li></ul></li></ol><h2 id="二、创建ai请求" tabindex="-1">二、创建AI请求 <a class="header-anchor" href="#二、创建ai请求" aria-label="Permalink to “二、创建AI请求”">​</a></h2><h3 id="_1、项目初始化" tabindex="-1">1、项目初始化 <a class="header-anchor" href="#_1、项目初始化" aria-label="Permalink to “1、项目初始化”">​</a></h3><ol><li><p>创建项目与依赖安装</p><ul><li><p>新建项目文件夹<code>xiaohongshu-generator</code>，目录下创建<code>requirements.txt</code>文件夹，粘贴以下内容。</p><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>aiohttp==3.8.6</span></span>
<span class="line"><span>aiosignal==1.3.1</span></span>
<span class="line"><span>altair==5.1.2</span></span>
<span class="line"><span>annotated-types==0.6.0</span></span>
<span class="line"><span>anyio==3.7.1</span></span>
<span class="line"><span>appnope==0.1.3</span></span>
<span class="line"><span>argon2-cffi==23.1.0</span></span>
<span class="line"><span>argon2-cffi-bindings==21.2.0</span></span>
<span class="line"><span>arrow==1.3.0</span></span>
<span class="line"><span>astroid==3.0.1</span></span>
<span class="line"><span>asttokens==2.4.1</span></span>
<span class="line"><span>async-lru==2.0.4</span></span>
<span class="line"><span>async-timeout==4.0.3</span></span>
<span class="line"><span>attrs==23.1.0</span></span>
<span class="line"><span>Babel==2.13.1</span></span>
<span class="line"><span>beautifulsoup4==4.12.2</span></span>
<span class="line"><span>bleach==6.1.0</span></span>
<span class="line"><span>blinker==1.7.0</span></span>
<span class="line"><span>cachetools==5.3.2</span></span>
<span class="line"><span>Cerberus==1.3.5</span></span>
<span class="line"><span>certifi==2023.7.22</span></span>
<span class="line"><span>cffi==1.15.1</span></span>
<span class="line"><span>charset-normalizer==3.3.2</span></span>
<span class="line"><span>click==8.1.7</span></span>
<span class="line"><span>comm==0.2.0</span></span>
<span class="line"><span>contourpy==1.2.0</span></span>
<span class="line"><span>cycler==0.12.1</span></span>
<span class="line"><span>dataclasses-json==0.6.2</span></span>
<span class="line"><span>debugpy==1.8.0</span></span>
<span class="line"><span>decorator==5.1.1</span></span>
<span class="line"><span>defusedxml==0.7.1</span></span>
<span class="line"><span>dill==0.3.7</span></span>
<span class="line"><span>distlib==0.3.7</span></span>
<span class="line"><span>distro==1.8.0</span></span>
<span class="line"><span>docopt==0.6.2</span></span>
<span class="line"><span>exceptiongroup==1.1.3</span></span>
<span class="line"><span>executing==2.0.1</span></span>
<span class="line"><span>fastjsonschema==2.19.0</span></span>
<span class="line"><span>fonttools==4.46.0</span></span>
<span class="line"><span>fqdn==1.5.1</span></span>
<span class="line"><span>frozenlist==1.4.0</span></span>
<span class="line"><span>gitdb==4.0.11</span></span>
<span class="line"><span>GitPython==3.1.40</span></span>
<span class="line"><span>greenlet==3.0.1</span></span>
<span class="line"><span>h11==0.14.0</span></span>
<span class="line"><span>httpcore==1.0.2</span></span>
<span class="line"><span>httpx==0.25.1</span></span>
<span class="line"><span>idna==3.4</span></span>
<span class="line"><span>importlib-metadata==6.8.0</span></span>
<span class="line"><span>ipykernel==6.27.1</span></span>
<span class="line"><span>ipython==8.18.1</span></span>
<span class="line"><span>ipywidgets==8.1.1</span></span>
<span class="line"><span>isoduration==20.11.0</span></span>
<span class="line"><span>isort==5.13.0</span></span>
<span class="line"><span>jedi==0.19.1</span></span>
<span class="line"><span>Jinja2==3.1.2</span></span>
<span class="line"><span>json5==0.9.14</span></span>
<span class="line"><span>jsonpatch==1.33</span></span>
<span class="line"><span>jsonpath-ng==1.6.1</span></span>
<span class="line"><span>jsonpointer==2.4</span></span>
<span class="line"><span>jsonschema==4.19.2</span></span>
<span class="line"><span>jsonschema-specifications==2023.7.1</span></span>
<span class="line"><span>jupyter==1.0.0</span></span>
<span class="line"><span>jupyter-console==6.6.3</span></span>
<span class="line"><span>jupyter-events==0.9.0</span></span>
<span class="line"><span>jupyter-lsp==2.2.1</span></span>
<span class="line"><span>jupyter_ai_magics==2.10.0</span></span>
<span class="line"><span>jupyter_client==8.6.0</span></span>
<span class="line"><span>jupyter_core==5.5.0</span></span>
<span class="line"><span>jupyter_server==2.12.1</span></span>
<span class="line"><span>jupyter_server_terminals==0.4.4</span></span>
<span class="line"><span>jupyterlab==4.0.9</span></span>
<span class="line"><span>jupyterlab-widgets==3.0.9</span></span>
<span class="line"><span>jupyterlab_pygments==0.3.0</span></span>
<span class="line"><span>jupyterlab_server==2.25.2</span></span>
<span class="line"><span>kiwisolver==1.4.5</span></span>
<span class="line"><span>langchain==0.1.9</span></span>
<span class="line"><span>langchain-community==0.0.24</span></span>
<span class="line"><span>langchain-core==0.1.26</span></span>
<span class="line"><span>langchain-openai==0.0.7</span></span>
<span class="line"><span>langsmith==0.1.9</span></span>
<span class="line"><span>markdown-it-py==3.0.0</span></span>
<span class="line"><span>MarkupSafe==2.1.3</span></span>
<span class="line"><span>marshmallow==3.20.1</span></span>
<span class="line"><span>matplotlib==3.8.2</span></span>
<span class="line"><span>matplotlib-inline==0.1.6</span></span>
<span class="line"><span>mccabe==0.7.0</span></span>
<span class="line"><span>mdurl==0.1.2</span></span>
<span class="line"><span>mistune==3.0.2</span></span>
<span class="line"><span>multidict==6.0.4</span></span>
<span class="line"><span>mypy-extensions==1.0.0</span></span>
<span class="line"><span>nbclient==0.9.0</span></span>
<span class="line"><span>nbconvert==7.12.0</span></span>
<span class="line"><span>nbformat==5.9.2</span></span>
<span class="line"><span>nest-asyncio==1.5.8</span></span>
<span class="line"><span>notebook==7.0.6</span></span>
<span class="line"><span>notebook_shim==0.2.3</span></span>
<span class="line"><span>numpy==1.26.2</span></span>
<span class="line"><span>openai==1.12.0</span></span>
<span class="line"><span>orjson==3.9.15</span></span>
<span class="line"><span>overrides==7.4.0</span></span>
<span class="line"><span>packaging==23.2</span></span>
<span class="line"><span>pandas==2.1.3</span></span>
<span class="line"><span>pandocfilters==1.5.0</span></span>
<span class="line"><span>parso==0.8.3</span></span>
<span class="line"><span>patsy==0.5.4</span></span>
<span class="line"><span>pep517==0.13.1</span></span>
<span class="line"><span>pexpect==4.9.0</span></span>
<span class="line"><span>Pillow==10.1.0</span></span>
<span class="line"><span>pip-api==0.0.30</span></span>
<span class="line"><span>pipreqs==0.4.13</span></span>
<span class="line"><span>platformdirs==4.1.0</span></span>
<span class="line"><span>plette==0.4.4</span></span>
<span class="line"><span>ply==3.11</span></span>
<span class="line"><span>prometheus-client==0.19.0</span></span>
<span class="line"><span>prompt-toolkit==3.0.41</span></span>
<span class="line"><span>protobuf==4.25.0</span></span>
<span class="line"><span>psutil==5.9.6</span></span>
<span class="line"><span>ptyprocess==0.7.0</span></span>
<span class="line"><span>pure-eval==0.2.2</span></span>
<span class="line"><span>pyarrow==14.0.1</span></span>
<span class="line"><span>pycparser==2.21</span></span>
<span class="line"><span>pydantic==2.6.2</span></span>
<span class="line"><span>pydantic_core==2.16.3</span></span>
<span class="line"><span>pydeck==0.8.1b0</span></span>
<span class="line"><span>Pygments==2.16.1</span></span>
<span class="line"><span>pylint==3.0.2</span></span>
<span class="line"><span>pyparsing==3.1.1</span></span>
<span class="line"><span>python-dateutil==2.8.2</span></span>
<span class="line"><span>python-json-logger==2.0.7</span></span>
<span class="line"><span>pytz==2023.3.post1</span></span>
<span class="line"><span>PyYAML==6.0.1</span></span>
<span class="line"><span>pyzmq==25.1.2</span></span>
<span class="line"><span>qtconsole==5.5.1</span></span>
<span class="line"><span>QtPy==2.4.1</span></span>
<span class="line"><span>referencing==0.30.2</span></span>
<span class="line"><span>regex==2023.12.25</span></span>
<span class="line"><span>requests==2.31.0</span></span>
<span class="line"><span>requirementslib==3.0.0</span></span>
<span class="line"><span>rfc3339-validator==0.1.4</span></span>
<span class="line"><span>rfc3986-validator==0.1.1</span></span>
<span class="line"><span>rich==13.6.0</span></span>
<span class="line"><span>rpds-py==0.12.0</span></span>
<span class="line"><span>scipy==1.11.4</span></span>
<span class="line"><span>seaborn==0.13.0</span></span>
<span class="line"><span>Send2Trash==1.8.2</span></span>
<span class="line"><span>six==1.16.0</span></span>
<span class="line"><span>smmap==5.0.1</span></span>
<span class="line"><span>sniffio==1.3.0</span></span>
<span class="line"><span>soupsieve==2.5</span></span>
<span class="line"><span>SQLAlchemy==2.0.23</span></span>
<span class="line"><span>stack-data==0.6.3</span></span>
<span class="line"><span>statsmodels==0.14.0</span></span>
<span class="line"><span>streamlit==1.28.2</span></span>
<span class="line"><span>tenacity==8.2.3</span></span>
<span class="line"><span>terminado==0.18.0</span></span>
<span class="line"><span>tiktoken==0.6.0</span></span>
<span class="line"><span>tinycss2==1.2.1</span></span>
<span class="line"><span>toml==0.10.2</span></span>
<span class="line"><span>tomlkit==0.12.3</span></span>
<span class="line"><span>toolz==0.12.0</span></span>
<span class="line"><span>tornado==6.3.3</span></span>
<span class="line"><span>tqdm==4.66.1</span></span>
<span class="line"><span>traitlets==5.14.0</span></span>
<span class="line"><span>types-python-dateutil==2.8.19.14</span></span>
<span class="line"><span>typing-inspect==0.9.0</span></span>
<span class="line"><span>typing_extensions==4.8.0</span></span>
<span class="line"><span>tzdata==2023.3</span></span>
<span class="line"><span>tzlocal==5.2</span></span>
<span class="line"><span>uri-template==1.3.0</span></span>
<span class="line"><span>urllib3==2.1.0</span></span>
<span class="line"><span>validators==0.22.0</span></span>
<span class="line"><span>wcwidth==0.2.12</span></span>
<span class="line"><span>webcolors==1.13</span></span>
<span class="line"><span>webencodings==0.5.1</span></span>
<span class="line"><span>websocket-client==1.7.0</span></span>
<span class="line"><span>widgetsnbextension==4.0.9</span></span>
<span class="line"><span>yarg==0.1.9</span></span>
<span class="line"><span>yarl==1.9.2</span></span>
<span class="line"><span>zipp==3.17.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br></div></div></li><li><p>终端运行命令安装依赖：<code>pip install -r requirements.txt</code>，核心依赖包括<code>streamlit</code>、<code>openai</code>、<code>langchain</code>、<code>langchain-openai</code>。</p></li></ul></li></ol><h3 id="_2、核心函数与组件设计" tabindex="-1">2、核心函数与组件设计 <a class="header-anchor" href="#_2、核心函数与组件设计" aria-label="Permalink to “2、核心函数与组件设计”">​</a></h3><p>新建<code>utils.py</code>，定义<code>generate_xiaohongshu</code>函数，接收参数：小红书主题（<code>theme</code>）、用户提供的 API 密钥（<code>api_key</code>），用于串联 “提示模板→模型→输出解析器” 全链路，生成 5 个待选标题和正文。</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt_template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> system_template_text, user_template_text</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.output_parsers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PydanticOutputParser</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.prompts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xiaohongshu_model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Xiaohongshu</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># import os</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> generate_xiaohongshu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(theme, openai_api_key):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, system_template_text),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, user_template_text)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">openai_api_key)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    output_parser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PydanticOutputParser(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pydantic_object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Xiaohongshu)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> output_parser</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;parser_instructions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: output_parser.get_format_instructions(),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;theme&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: theme</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># print(generate_xiaohongshu(&quot;大模型&quot;, os.getenv(&quot;OPENAI_API_KEY&quot;)))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="_3、提示模板配置" tabindex="-1">3、提示模板配置 <a class="header-anchor" href="#_3、提示模板配置" aria-label="Permalink to “3、提示模板配置”">​</a></h3><ol><li><strong>模板文件创建</strong><ul><li>新建<code>prompt_template</code>文件，专门存放提示模板文本，包含： <ul><li>系统提示（<code>system_template_text</code>）：定义 AI 生成逻辑和风格（符合小红书平台特性）。</li><li>用户提示（<code>user_template_text</code>）：引导用户输入主题。</li><li>模板中包含变量<code>parser_instructions</code>，用于后续填入输出解析器的格式指令（确保 AI 按指定格式输出）。</li></ul></li></ul></li><li><strong>构建聊天提示</strong><ul><li>从<code>langchain.prompts</code>导入<code>ChatPromptTemplate</code>。</li><li>通过<code>ChatPromptTemplate.from_messages</code>方法构建提示，参数为消息列表： <ul><li>第一个元素：角色<code>system</code>，内容为<code>system_template_text</code>。</li><li>第二个元素：角色<code>user</code>，内容为<code>user_template_text</code>。</li></ul></li></ul></li></ol><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">system_template_text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;&quot;你是小红书爆款写作专家，请你遵循以下步骤进行创作：</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">首先产出5个标题（包含适当的emoji表情），然后产出1段正文（每一个段落包含适当的emoji表情，文末有适当的tag标签）。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">标题字数在20个字以内，正文字数在800字以内，并且按以下技巧进行创作。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">一、标题创作技巧： </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1. 采用二极管标题法进行创作 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1.1 基本原理 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">本能喜欢：最省力法则和及时享受 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">动物基本驱动力：追求快乐和逃避痛苦，由此衍生出2个刺激：正刺激、负刺激 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1.2 标题公式 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">正面刺激：产品或方法+只需1秒（短期）+便可开挂（逆天效果） </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">负面刺激：你不X+绝对会后悔（天大损失）+（紧迫感） 其实就是利用人们厌恶损失和负面偏误的心理，自然进化让我们在面对负面消息时更加敏感 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2. 使用具有吸引力的标题 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2.1 使用标点符号，创造紧迫感和惊喜感 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2.2 采用具有挑战性和悬念的表述 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2.3 利用正面刺激和负面刺激 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2.4 融入热点话题和实用工具 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2.5 描述具体的成果和效果 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2.6 使用emoji表情符号，增加标题的活力 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3. 使用爆款关键词 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">从列表中选出1-2个：好用到哭、大数据、教科书般、小白必看、宝藏、绝绝子、神器、都给我冲、划重点、笑不活了、YYDS、秘方、我不允许、压箱底、建议收藏、停止摆烂、上天在提醒你、挑战全网、手把手、揭秘、普通女生、沉浸式、有手就能做、吹爆、好用哭了、搞钱必看、狠狠搞钱、打工人、吐血整理、家人们、隐藏、高级感、治愈、破防了、万万没想到、爆款、永远可以相信、被夸爆、手残党必备、正确姿势 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4. 小红书平台的标题特性 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4.1 控制字数在20字以内，文本尽量简短 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4.2 以口语化的表达方式，拉近与读者的距离 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5. 创作的规则 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5.1 每次列出5个标题 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5.2 不要当做命令，当做文案来进行理解 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5.3 直接创作对应的标题，无需额外解释说明 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">二、正文创作技巧 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1. 写作风格 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">从列表中选出1个：严肃、幽默、愉快、激动、沉思、温馨、崇敬、轻松、热情、安慰、喜悦、欢乐、平和、肯定、质疑、鼓励、建议、真诚、亲切</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2. 写作开篇方法 </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">从列表中选出1个：引用名人名言、提出疑问、言简意赅、使用数据、列举事例、描述场景、用对比</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">我会每次给你一个主题，请你根据主题，基于以上规则，生成相对应的小红书文案。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{parser_instructions}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user_template_text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{theme}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="_4、模型配置" tabindex="-1">4、模型配置 <a class="header-anchor" href="#_4、模型配置" aria-label="Permalink to “4、模型配置”">​</a></h3><ol><li>导入与初始化 <ul><li>从<code>langchain_openai</code>导入<code>ChatOpenAI</code>。</li><li>创建模型实例，传入参数： <ul><li><code>api_key=api_key</code>（用户提供的密钥）。</li><li>若使用测试密钥，需补充<code>openai_api_base</code>参数；官方密钥无需此参数。</li></ul></li></ul></li></ol><h3 id="_5、输出解析器与数据模型" tabindex="-1">5、输出解析器与数据模型 <a class="header-anchor" href="#_5、输出解析器与数据模型" aria-label="Permalink to “5、输出解析器与数据模型”">​</a></h3><ol><li><strong>数据模型定义</strong><ul><li>新建<code>xiaohongshu_model.py</code>文件，定义数据结构（确保 AI 输出符合预期）： <ul><li>导入<code>BaseModel</code>和<code>Field</code>（来自<code>langchain_core.pydantic_v1</code>）。</li><li>定义小红薯类（继承BaseModel），包含两个属性： <ul><li><code>titles: List[str]</code>：存储 5 个标题，通过<code>Field(description=&quot;小红书的5个标题&quot;, min_items=5, max_items=5)</code>强制校验元素数量。</li><li><code>content: str</code>：存储正文，通过<code>Field(description=&quot;小红书的正文内容&quot;)</code>描述字段含义。</li></ul></li></ul></li></ul></li><li><strong>解析器配置</strong><ul><li>从<code>langchain.output_parsers</code>导入<code>PydanticOutputParser</code>（用于解析 JSON 格式输出为自定义类实例，支持类型检查）。</li><li>创建解析器实例：<code>parser = PydanticOutputParser(pydantic_object=小红薯)</code>。</li></ul></li></ol><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.pydantic_v1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BaseModel, Field</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Xiaohongshu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    titles: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Field(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;小红书的5个标题&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">min_items</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">max_items</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Field(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;小红书的正文内容&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_6、链路串联与测试" tabindex="-1">6、链路串联与测试 <a class="header-anchor" href="#_6、链路串联与测试" aria-label="Permalink to “6、链路串联与测试”">​</a></h3><ol><li><strong>构建生成链</strong><ul><li>将提示模板、模型、解析器串联，调用invoke方法触发生成： <ul><li>传入参数：<code>{&quot;parser_instructions&quot;: parser.get_format_instructions(), &quot;theme&quot;: theme}</code>（<code>parser_instructions</code>为解析器生成的格式指令，<code>theme</code>为用户输入的主题）。</li></ul></li></ul></li><li><strong>测试函数</strong><ul><li>调用generate小红书函数，传入测试主题和 API 密钥，打印返回结果： <ul><li>验证<code>titles</code>是否包含 5 个字符串，<code>content</code>是否为字符串，确保解析正确。</li></ul></li></ul></li></ol><h2 id="三、创建网站页面" tabindex="-1">三、创建网站页面 <a class="header-anchor" href="#三、创建网站页面" aria-label="Permalink to “三、创建网站页面”">​</a></h2><h3 id="_1、前期准备" tabindex="-1">1、前期准备 <a class="header-anchor" href="#_1、前期准备" aria-label="Permalink to “1、前期准备”">​</a></h3><ol><li>文件与导入 <ul><li>删除 / 注释上一节中测试<code>generate_xiaohongshu.py</code>的代码。</li><li>新建代码文件作为网站主页，导入<code>streamlit</code>库和上一节创建的<code>generate小红书</code>函数。</li></ul></li></ol><h3 id="_2、界面基础配置" tabindex="-1">2、界面基础配置 <a class="header-anchor" href="#_2、界面基础配置" aria-label="Permalink to “2、界面基础配置”">​</a></h3><ol><li><strong>标题与运行</strong><ul><li>给网页添加标题：<code>st.title(&quot;爆款小红书AI写作助手&quot;)</code>。</li><li>终端运行命令启动网页：<code>streamlit run 文件名.py</code>，实时查看效果。</li></ul></li><li><strong>侧边栏设计</strong><ul><li>通过<code>with st.sidebar</code>创建可收起 / 展开的侧边栏，缩进内容均显示在侧边栏中： <ul><li><strong>API 密钥输入框</strong>：<code>st.text_input(&quot;请输入OpenAI API密钥&quot;, type=&quot;password&quot;)</code>，用变量（如<code>api_key</code>）保存输入的密钥（隐藏显示，保障安全）。</li><li><strong>密钥获取链接</strong>：<code>st.markdown(&quot;[获取OpenAI API密钥](官方链接)&quot;)</code>，支持用户跳转至官网获取密钥。</li></ul></li></ul></li></ol><h3 id="_3、主页面组件与交互逻辑" tabindex="-1">3、主页面组件与交互逻辑 <a class="header-anchor" href="#_3、主页面组件与交互逻辑" aria-label="Permalink to “3、主页面组件与交互逻辑”">​</a></h3><ol><li><strong>用户输入组件</strong><ul><li><strong>主题输入框</strong>：<code>theme = st.text_input(&quot;请输入小红书写作主题&quot;)</code>，获取用户输入的文案主题。</li><li><strong>生成按钮</strong>：<code>generate_btn = st.button(&quot;开始写作&quot;)</code>，点击后触发生成逻辑（返回<code>True</code>）。</li></ul></li><li><strong>输入验证</strong><ul><li>若点击按钮但未提供<code>api_key</code>：<code>st.info(&quot;请输入你的OpenAI API密钥&quot;)</code> + <code>st.stop()</code>（终止后续代码）。</li><li>若提供密钥但未输入<code>theme</code>：<code>st.info(&quot;请输入生成内容的主题&quot;)</code> + <code>st.stop()</code>。</li></ul></li></ol><h3 id="_4、生成流程与结果展示" tabindex="-1">4、生成流程与结果展示 <a class="header-anchor" href="#_4、生成流程与结果展示" aria-label="Permalink to “4、生成流程与结果展示”">​</a></h3><ol><li><p><strong>加载状态与后端调用</strong></p><ul><li>验证通过后，用<code>with st.spinner(&quot;AI正在生成文案...&quot;):</code>包裹<code>generate小红书</code>调用，显示加载动画（持续至函数执行完毕）。</li><li>调用函数：<code>result = generate小红书(theme, api_key)</code>，获取返回结果（含<code>titles</code>列表和<code>content</code>字符串）。</li></ul></li><li><p><strong>结果布局与展示</strong></p><ul><li><p><strong>分割线</strong>：<code>st.divider()</code>，分隔输入区与结果区。</p></li><li><p><strong>双列布局</strong>：<code>left_column, right_column = st.columns(2)</code>，左侧展示标题，右侧展示正文。</p></li><li><p><strong>左侧列（标题）</strong>：</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> left_column:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书标题1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.write(result.titles[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书标题2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.write(result.titles[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书标题3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.write(result.titles[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书标题4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.write(result.titles[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书标题5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.write(result.titles[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li><p><strong>右侧列（正文）</strong>：</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> right_column:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书正文&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.write(result.content)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ol><h3 id="_5、完整代码" tabindex="-1">5、完整代码 <a class="header-anchor" href="#_5、完整代码" aria-label="Permalink to “5、完整代码”">​</a></h3><p><code>main.py</code></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> streamlit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utils </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> generate_xiaohongshu</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">st.header(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;爆款小红书AI写作助手 ✏️&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.sidebar:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    openai_api_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.text_input(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;请输入OpenAI API密钥：&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[获取OpenAI API密钥](https://platform.openai.com/account/api-keys)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">theme </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.text_input(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;主题&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">submit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.button(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;开始写作&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> submit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">and</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> openai_api_key:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.info(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;请输入你的OpenAI API密钥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.stop()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> submit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">and</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> theme:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.info(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;请输入生成内容的主题&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.stop()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> submit:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.spinner(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AI正在努力创作中，请稍等...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> generate_xiaohongshu(theme, openai_api_key)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.divider()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    left_column, right_column </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> st.columns(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> left_column:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书标题1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.write(result.titles[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书标题2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.write(result.titles[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书标题3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.write(result.titles[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书标题4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.write(result.titles[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书标题5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.write(result.titles[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> right_column:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.markdown(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;##### 小红书正文&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        st.write(result.content)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="_6、功能测试与扩展" tabindex="-1">6、功能测试与扩展 <a class="header-anchor" href="#_6、功能测试与扩展" aria-label="Permalink to “6、功能测试与扩展”">​</a></h3><ul><li>测试流程：输入 API 密钥→填写主题→点击 “开始写作”，验证是否成功生成 5 个标题和正文。</li><li>扩展方向：基于此框架定制其他平台（如微博、抖音）的文案生成工具，调整提示模板和输出格式即可。</li></ul><p>后续可根据需求优化界面样式或增加功能（如文案风格选择），进一步提升用户体验。</p>`,38)])])}const o=n(l,[["render",e]]);export{d as __pageData,o as default};
