<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ç»™AIæ¨¡å‹è¯»æ–‡ä»¶çš„èƒ½åŠ› | xiaolong</title>
    
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.Du365hsd.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.f887322e.js"></script>
    <script type="module" src="/assets/app.CMIWpojL.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BcY41y15.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CMIDsdwV.js">
    <link rel="modulepreload" href="/assets/Python_AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘_11_ç»™AIæ¨¡å‹è¯»æ–‡ä»¶çš„èƒ½åŠ›.md.C0hL3Ko4.lean.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <link rel="icon" type="image/png" href="/logo.png">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="zh-CN">
    <meta property="og:title" content="Teek | VitePress Theme">
    <meta property="og:site_name" content="Teek">
    <meta property="og:image" content="">
    <meta property="og:url" content="">
    <meta property="og:description" description="æ¬¢è¿æ¥åˆ° vitepress-theme-teek ä½¿ç”¨æ–‡æ¡£,Teek æ˜¯ä¸€ä¸ªåŸºäº VitePress æ„å»ºçš„ä¸»é¢˜ï¼Œæ˜¯åœ¨é»˜è®¤ä¸»é¢˜çš„åŸºç¡€ä¸Šè¿›è¡Œæ‹“å±•ï¼Œæ”¯æŒ VitePress çš„æ‰€æœ‰åŠŸèƒ½ã€é…ç½®,Teek æ‹¥æœ‰ä¸‰ç§å…¸å‹çš„çŸ¥è¯†ç®¡ç†å½¢æ€ï¼šç»“æ„åŒ–ã€ç¢ç‰‡åŒ–ã€ä½“ç³»åŒ–ï¼Œå¯ä»¥è½»æ¾æ„å»ºä¸€ä¸ªç»“æ„åŒ–çŸ¥è¯†åº“ï¼Œé€‚ç”¨ä¸ªäººåšå®¢ã€æ–‡æ¡£ç«™ã€çŸ¥è¯†åº“ç­‰åœºæ™¯">
    <meta name="description" description="æ¬¢è¿æ¥åˆ° vitepress-theme-teek ä½¿ç”¨æ–‡æ¡£,Teek æ˜¯ä¸€ä¸ªåŸºäº VitePress æ„å»ºçš„ä¸»é¢˜ï¼Œæ˜¯åœ¨é»˜è®¤ä¸»é¢˜çš„åŸºç¡€ä¸Šè¿›è¡Œæ‹“å±•ï¼Œæ”¯æŒ VitePress çš„æ‰€æœ‰åŠŸèƒ½ã€é…ç½®,Teek æ‹¥æœ‰ä¸‰ç§å…¸å‹çš„çŸ¥è¯†ç®¡ç†å½¢æ€ï¼šç»“æ„åŒ–ã€ç¢ç‰‡åŒ–ã€ä½“ç³»åŒ–ï¼Œå¯ä»¥è½»æ¾æ„å»ºä¸€ä¸ªç»“æ„åŒ–çŸ¥è¯†åº“ï¼Œé€‚ç”¨ä¸ªäººåšå®¢ã€æ–‡æ¡£ç«™ã€çŸ¥è¯†åº“ç­‰åœºæ™¯">
    <meta name="author" content="Teek">
    <meta name="keywords" description="æ¬¢è¿æ¥åˆ° vitepress-theme-teek ä½¿ç”¨æ–‡æ¡£,Teek æ˜¯ä¸€ä¸ªåŸºäº VitePress æ„å»ºçš„ä¸»é¢˜ï¼Œæ˜¯åœ¨é»˜è®¤ä¸»é¢˜çš„åŸºç¡€ä¸Šè¿›è¡Œæ‹“å±•ï¼Œæ”¯æŒ VitePress çš„æ‰€æœ‰åŠŸèƒ½ã€é…ç½®,Teek æ‹¥æœ‰ä¸‰ç§å…¸å‹çš„çŸ¥è¯†ç®¡ç†å½¢æ€ï¼šç»“æ„åŒ–ã€ç¢ç‰‡åŒ–ã€ä½“ç³»åŒ–ï¼Œå¯ä»¥è½»æ¾æ„å»ºä¸€ä¸ªç»“æ„åŒ–çŸ¥è¯†åº“ï¼Œé€‚ç”¨ä¸ªäººåšå®¢ã€æ–‡æ¡£ç«™ã€çŸ¥è¯†åº“ç­‰åœºæ™¯">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6079554807639839" crossorigin="anonymous"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body><!--teleport start anchor--><div style="display:none;" class="tk-spotlight-hover tk-spotlight-hover__aside" aria-hidden="true" focusable="false"></div><!--teleport anchor-->
    <div id="app"><!--[--><!--v-if--><!--v-if--><!--v-if--><!--[--><!--v-if--><!----><!--v-if--><div class="tk-right-bottom-button tk-wallpaper-outside flx-column"><!--[--><!--]--><div title="è¿”å›é¡¶éƒ¨" class="tk-right-bottom-button__button back-top" style="--tk-progress:0;display:none;" role="button" aria-label="è¿”å›é¡¶éƒ¨" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"><span class="content">0</span></div><div title="å‰å¾€è¯„è®º" class="tk-right-bottom-button__button" role="button" aria-label="å‰å¾€è¯„è®º" style="display:none;"><i class="tk-icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="M273.536 736H800a64 64 0 0 0 64-64V256a64 64 0 0 0-64-64H224a64 64 0 0 0-64 64v570.88zM296 800 147.968 918.4A32 32 0 0 1 96 893.44V256a128 128 0 0 1 128-128h576a128 128 0 0 1 128 128v416a128 128 0 0 1-128 128z"
    ></path>
    <path
      fill="currentColor"
      d="M512 499.2a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4zm192 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4zm-384 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4z"
    ></path>
  </svg></i></div><!--v-if--><!--[--><!--]--></div><!--]--><div class="Layout tk-layout has-sidebar-trigger" data-v-9a104c51><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-9a104c51 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>xiaolong</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>ğŸ¡ä¸»é¡µ</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/java.svg" alt="" style="width: 16px; height: 16px;">
              <span>Java</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/Java%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7/01.JDK%E6%96%B0%E7%89%B9%E6%80%A7/1_JDK8%E6%96%B0%E7%89%B9%E6%80%A7Optional%E5%AE%B9%E5%99%A8%E7%B1%BB.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/code.svg" alt="" style="width: 16px; height: 16px;">
              <span>Javaå¼€å‘æŠ€å·§</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/JVM%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/01.JVM%E6%A6%82%E5%BF%B5/0_JVM%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/JVM.svg" alt="" style="width: 16px; height: 16px;">
              <span>JVMæ€§èƒ½è°ƒä¼˜</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/1_JUC.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å¹¶å‘ç¼–ç¨‹.svg" alt="" style="width: 16px; height: 16px;">
              <span>å¹¶å‘ç¼–ç¨‹</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E5%AE%B9%E5%99%A8/Docker/0_Docker%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/docker.svg" alt="" style="width: 16px; height: 16px;">
              <span>å®¹å™¨ç›¸å…³</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/01.%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/è®¾è®¡æ¨¡å¼.svg" alt="" style="width: 16px; height: 16px;">
              <span>è®¾è®¡æ¨¡å¼</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%93%E6%A0%8F/01.SpringCloud/1_SpringCloud%E7%AE%80%E4%BB%8B.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/mse.svg" alt="" style="width: 16px; height: 16px;">
              <span>å¾®æœåŠ¡ä¸“æ </span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/01.%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ¶æ„è®¾è®¡.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ¶æ„è®¾è®¡</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%94%AF%E4%BB%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98API%E5%AF%B9%E6%8E%A5%E6%8C%87%E5%8D%97/1_%E5%95%86%E5%AE%B6%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/è§£å†³æ–¹æ¡ˆ.svg" alt="" style="width: 16px; height: 16px;">
              <span>è§£å†³æ–¹æ¡ˆ</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ•°æ®ç»“æ„.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ•°æ®ç»“æ„</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/1_%E5%B9%82%E7%AD%89%E8%AE%BE%E8%AE%A1.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/ç³»ç»Ÿä¼˜åŒ–.svg" alt="" style="width: 16px; height: 16px;">
              <span>ç³»ç»Ÿä¼˜åŒ–</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/python.svg" alt="" style="width: 16px; height: 16px;">
              <span>Python</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/åŸºç¡€è¯­æ³•.svg" alt="" style="width: 16px; height: 16px;">
              <span>åŸºç¡€è¯­æ³•</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/1_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ•°æ®åˆ†æ.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ•°æ®åˆ†æ</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Python/%E7%88%AC%E8%99%AB/1_%E7%88%AC%E8%99%AB%E7%9A%84%E6%B5%81%E7%A8%8B.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/çˆ¬è™«.svg" alt="" style="width: 16px; height: 16px;">
              <span>çˆ¬è™«</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1_AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%A7%91%E6%99%AE.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/äººå·¥æ™ºèƒ½.svg" alt="" style="width: 16px; height: 16px;">
              <span>AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/database.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ•°æ®åº“</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/database/mysql/acid.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/MySQL.svg" alt="" style="width: 16px; height: 16px;">
              <span>MySQL</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/database/mongodb/mongodb-introduction.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/MongoDB.svg" alt="" style="width: 16px; height: 16px;">
              <span>MongoDB</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/database/postgresql/postgresql-introduction.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/PostgreSQL.svg" alt="" style="width: 16px; height: 16px;">
              <span>PostgreSQL</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/database/tidb/tidb-introduction.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/TiDB.svg" alt="" style="width: 16px; height: 16px;">
              <span>åˆ†å¸ƒå¼æ•°æ®åº“TIDB</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/database/neo4j/neo4j-introduce.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/Neo4j.svg" alt="" style="width: 16px; height: 16px;">
              <span>Neo4j</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Redis/Redis%E5%9F%BA%E7%A1%80/1_Redis%E7%BC%93%E5%AD%98%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/redis.svg" alt="" style="width: 16px; height: 16px;">
              <span>Redisä¸“æ </span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/framework.svg" alt="" style="width: 16px; height: 16px;">
              <span>å¸¸ç”¨æ¡†æ¶</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Activiti7/Activiti%E6%95%B4%E5%90%88Spring.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å·¥ä½œæµ.svg" alt="" style="width: 16px; height: 16px;">
              <span>å·¥ä½œæµå¼•æ“Activiti7</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Caffeine/0_Caffeine%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/ç¼“å­˜.svg" alt="" style="width: 16px; height: 16px;">
              <span>ç¼“å­˜æ¡†æ¶Caffeine</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/EasyCaptcha/0_%E4%BD%BF%E7%94%A8EasyCaptcha%E7%94%9F%E6%88%90%E9%AA%8C%E8%AF%81%E7%A0%81.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/éªŒè¯ç .svg" alt="" style="width: 16px; height: 16px;">
              <span>éªŒè¯ç EasyCaptcha</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/EasyExcel/0_EasyExcel%E6%A6%82%E8%BF%B0.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/EasyExcel.svg" alt="" style="width: 16px; height: 16px;">
              <span>è¡¨æ ¼å·¥å…·EasyExcel</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/java/framework/distributed/elasticSearch01.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/ElasticSearch.svg" alt="" style="width: 16px; height: 16px;">
              <span>æœç´¢å¼•æ“ElasticSearch</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Mybatis/Mybatis-Plus-Join%E8%BF%9E%E8%A1%A8%E6%9F%A5%E8%AF%A2.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/Mybatis.svg" alt="" style="width: 16px; height: 16px;">
              <span>ä¸‰å‰‘å®¢Mybatis</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/ShardingJdbc/0_ShardingJdbc%E7%9A%84%E6%A6%82%E8%BF%B0.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ‰‹åŠ¨åˆ†è¡¨.svg" alt="" style="width: 16px; height: 16px;">
              <span>åˆ†åº“åˆ†è¡¨ShardingJdbc</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Spring/1_Spring%E5%AE%B9%E5%99%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/Spring.svg" alt="" style="width: 16px; height: 16px;">
              <span>ä¸‰å‰‘å®¢Spring</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/SpringBoot/SpringBoot%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/0_SpringBoot%E7%BC%96%E7%A8%8B%E8%B5%B7%E6%AD%A5.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/SpringBoot.svg" alt="" style="width: 16px; height: 16px;">
              <span>ä¸‰å‰‘å®¢SpringBoot</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/framework/springAI/overview.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/spring-ai.svg" alt="" style="width: 16px; height: 16px;">
              <span>AIæ¡†æ¶Spring AI</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/framework/springAIAlibaba/overview.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/é˜¿é‡Œå·´å·´.svg" alt="" style="width: 16px; height: 16px;">
              <span>AIæ¡†æ¶Spring AI Alibaba</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/java/framework/distributed/springBootAdmin.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/ç›‘æ§.svg" alt="" style="width: 16px; height: 16px;">
              <span>ç›‘æ§å·¥å…·SpringBootAdmin</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/java/framework/distributed/distributedTaskScheduling.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/xxl-job.svg" alt="" style="width: 16px; height: 16px;">
              <span>ä»»åŠ¡è°ƒåº¦XXL-JOB</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/framework/thymeleaf/thymeleafBasicGrammar.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/thymeleaf.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ¨¡æ¿å¼•æ“Thymeleaf</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/framework/retry/springRetry.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/é‡è¯•.svg" alt="" style="width: 16px; height: 16px;">
              <span>é‡è¯•æ¡†æ¶Retry</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Linux/Shell%E5%91%BD%E4%BB%A4/0_Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/linux.svg" alt="" style="width: 16px; height: 16px;">
              <span>Linux</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/StableDiffusion/StableDiffusion/0_StableDiffusion%E4%BB%8B%E7%BB%8D.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/aigc.svg" alt="" style="width: 16px; height: 16px;">
              <span>AIGC</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/notes.svg" alt="" style="width: 16px; height: 16px;">
              <span>éšç¬”æ–‡æ¡£</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>åšå®¢ç¬”è®°</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3/Vuepress/0_Vuepress%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/vuepress.svg" alt="" style="width: 16px; height: 16px;">
              <span>VuePress</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3/VitPress/0_Vitpress%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/vuepress-open.svg" alt="" style="width: 16px; height: 16px;">
              <span>VitPress</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3/%E5%85%B6%E4%BB%96%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3/Github_Pages%E5%8A%A0%E9%80%9F.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å…¶ä»–.svg" alt="" style="width: 16px; height: 16px;">
              <span>å…¶ä»–</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>æ—¥å¸¸ç¬”è®°</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0/IDEA+Linux%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/note.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ—¥å¸¸ç¬”è®°</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3/PDF%E8%BD%AC%E6%8D%A2.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å¼€å‘æ–‡æ¡£.svg" alt="" style="width: 16px; height: 16px;">
              <span>å¼€å‘æ–‡æ¡£</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/0_%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å¼€æº.svg" alt="" style="width: 16px; height: 16px;">
              <span>å¼€æºé¡¹ç›®</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/01_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/è€ƒè¯•.svg" alt="" style="width: 16px; height: 16px;">
              <span>è½¯è€ƒä¸­çº§</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E9%9D%A2%E8%AF%95%E4%B8%93%E6%A0%8F/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3/1_%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A6%82%E8%BF%B0.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/è°ˆè¯é¢è¯•.svg" alt="" style="width: 16px; height: 16px;">
              <span>é¢è¯•ä¸“æ </span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6/1_%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ•°å­¦.svg" alt="" style="width: 16px; height: 16px;">
              <span>é«˜ç­‰æ•°å­¦</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>å…³äºæœ¬ç«™</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/nav.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å®˜ç½‘ç½‘ç«™.svg" alt="" style="width: 16px; height: 16px;">
              <span>ç½‘ç«™å¯¼èˆª</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/archives.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å½’æ¡£2.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ–‡ç« å½’æ¡£</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/articleOverview.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ¸…å•2.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ–‡ç« æ¸…å•</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://gitee.com/xu_xiaolong" aria-label="gitee" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-gitee"></span></a><a class="VPSocialLink no-icon" href="https://github.com/Daneliya" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>ä¸»é¢˜</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://gitee.com/xu_xiaolong" aria-label="gitee" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-gitee"></span></a><a class="VPSocialLink no-icon" href="https://github.com/Daneliya" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><!--[--><!--]--><!--[--><div class="tk-theme-enhance flx-align-center"><!--[--><i class="tk-icon" style="--icon-size:20px;--icon-color-hover:var(--tk-theme-color);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="m512 863.36 384-54.848v-638.72L525.568 222.72a96 96 0 0 1-27.136 0L128 169.792v638.72zM137.024 106.432l370.432 52.928a32 32 0 0 0 9.088 0l370.432-52.928A64 64 0 0 1 960 169.792v638.72a64 64 0 0 1-54.976 63.36l-388.48 55.488a32 32 0 0 1-9.088 0l-388.48-55.488A64 64 0 0 1 64 808.512v-638.72a64 64 0 0 1 73.024-63.36z"
    ></path>
    <path fill="currentColor" d="M480 192h64v704h-64z"></path>
  </svg></i><!--]--></div><!--teleport start--><!--teleport end--><!--]--><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-9a104c51 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>èœå•</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>è¿”å›é¡¶éƒ¨</button><!----></div></div></div><aside class="VPSidebar" data-v-9a104c51 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--[--><!--v-if--><!--]--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>åŸºç¡€è¯­æ³•</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>PythonåŸºç¡€è¯­æ³•</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>çˆ¬è™«</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E7%88%AC%E8%99%AB/1_%E7%88%AC%E8%99%AB%E7%9A%84%E6%B5%81%E7%A8%8B.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>çˆ¬è™«çš„æµç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E7%88%AC%E8%99%AB/2_Python%E5%8F%91%E9%80%81HTTP%E8%AF%B7%E6%B1%82.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonå‘é€HTTPè¯·æ±‚</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E7%88%AC%E8%99%AB/3_Python%E8%A7%A3%E6%9E%90HTML.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonè§£æHTML</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E7%88%AC%E8%99%AB/4_%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1Top250.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>çˆ¬å–è±†ç“£ç”µå½±Top250</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E7%88%AC%E8%99%AB/5_Python%E4%BD%BF%E7%94%A8API.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonä½¿ç”¨API</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>æ•°æ®åˆ†æ</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/1_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/2_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94NumPy.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”NumPy</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/3_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94Pandas.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”Pandas</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/4_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94Dataframe.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”Dataframe</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/5_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94%E6%95%B0%E6%8D%AE%E6%94%B6%E9%9B%86.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”æ•°æ®æ”¶é›†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/6_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94%E8%AF%BB%E5%8F%96JSON.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”è¯»å–JSON</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/7_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94%E8%AF%BB%E5%8F%96CSV.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”è¯»å–CSV</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/8_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94%E8%AF%84%E4%BC%B0%E6%95%B0%E6%8D%AE.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”è¯„ä¼°æ•°æ®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/9_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94%E6%B8%85%E7%90%86%E6%95%B0%E6%8D%AE.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”æ¸…ç†æ•°æ®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/10_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”ä¿å­˜æ•°æ®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/11_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94%E6%95%B4%E7%90%86%E6%95%B0%E6%8D%AE.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”æ•´ç†æ•°æ®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/12_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94%E7%BB%9F%E8%AE%A1%E5%AD%A6%E5%9F%BA%E7%A1%80.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”ç»Ÿè®¡å­¦åŸºç¡€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/13_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94%E5%8F%AF%E8%A7%86%E5%8C%96%E6%95%B0%E6%8D%AE.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”å¯è§†åŒ–æ•°æ®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/14_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E2%80%94%E7%BB%9F%E8%AE%A1%E5%AD%A6%E8%BF%9B%E9%98%B6.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pythonæ•°æ®åˆ†æâ€”ç»Ÿè®¡å­¦è¿›é˜¶</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1_AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%A7%91%E6%99%AE.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>AIå¤§æ¨¡å‹ç§‘æ™®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2_OpenAI%E5%A4%A7%E6%A8%A1%E5%9E%8BAPI%E5%9F%BA%E7%A1%80.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>OpenAIå¤§æ¨¡å‹APIåŸºç¡€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/3_%E6%8F%90%E7%A4%BA%E8%AF%8D%E5%B7%A5%E7%A8%8B.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>æç¤ºè¯å·¥ç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/4_API%E7%94%A8%E6%B3%95%E7%A4%BA%E4%BE%8B.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>APIç”¨æ³•ç¤ºä¾‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/5_LangChain%E4%BB%8B%E7%BB%8D.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>LangChainä»‹ç»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/6_AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>AIæ¨¡å‹ä¸è¾“å…¥è¾“å‡º</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/7_%E5%AE%9E%E6%88%981%EF%BC%9A%E8%A7%86%E9%A2%91%E8%84%9A%E6%9C%AC%E4%B8%80%E9%94%AE%E7%94%9F%E6%88%90%E5%99%A8.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>å®æˆ˜1ï¼šè§†é¢‘è„šæœ¬ä¸€é”®ç”Ÿæˆå™¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/8_%E5%AE%9E%E6%88%982%EF%BC%9A%E7%88%86%E6%AC%BE%E5%B0%8F%E7%BA%A2%E4%B9%A6%E6%96%87%E6%A1%88%E7%94%9F%E6%88%90%E5%99%A8.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>å®æˆ˜2ï¼šçˆ†æ¬¾å°çº¢ä¹¦æ–‡æ¡ˆç”Ÿæˆå™¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/9_%E7%BB%99AI%E6%A8%A1%E5%9E%8B%E6%B7%BB%E5%8A%A0%E8%AE%B0%E5%BF%86.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ç»™AIæ¨¡å‹æ·»åŠ è®°å¿†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/10_%E5%AE%9E%E6%88%983%EF%BC%9A%E5%85%8B%E9%9A%86AI%E8%81%8A%E5%A4%A9%E5%8A%A9%E6%89%8B.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>å®æˆ˜3ï¼šå…‹éš†AIèŠå¤©åŠ©æ‰‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/11_%E7%BB%99AI%E6%A8%A1%E5%9E%8B%E8%AF%BB%E6%96%87%E4%BB%B6%E7%9A%84%E8%83%BD%E5%8A%9B.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ç»™AIæ¨¡å‹è¯»æ–‡ä»¶çš„èƒ½åŠ›</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/12_%E5%AE%9E%E6%88%984%EF%BC%9A%E6%99%BA%E8%83%BDPDF%E9%97%AE%E7%AD%94%E5%B7%A5%E5%85%B7.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>å®æˆ˜4ï¼šæ™ºèƒ½PDFé—®ç­”å·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/13_%E7%BB%99AI%E6%A8%A1%E5%9E%8B%E7%94%A8%E5%B7%A5%E5%85%B7%E7%9A%84%E8%83%BD%E5%8A%9B.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ç»™AIæ¨¡å‹ç”¨å·¥å…·çš„èƒ½åŠ›</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/14_CSV%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%99%BA%E8%83%BD%E5%B7%A5%E5%85%B7.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>CSVæ•°æ®åˆ†ææ™ºèƒ½å·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/15_Assistant%20API.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Assistant API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/16_Streamlit%E5%85%A5%E9%97%A8.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Streamlitå…¥é—¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/17_AI%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>AIåº”ç”¨éƒ¨ç½²</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-9a104c51 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><!--[--><!--[--><!--]--><div class="tk-article-share"><button class="tk-article-share__button flx-center" aria-label="åˆ†äº«æ­¤é¡µé¢" aria-live="polite"><div class="flx-center"><i class="tk-icon" style="margin-right:4px;--icon-color-hover:var(--tk-theme-color);"><svg
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    aria-hidden="true"
    role="img"
    class="iconify iconify iconify--solar"
    alt="Icon"
    width="1em"
    height="1em"
    viewBox="0 0 24 24"
    style="vertical-align: -0.125em"
  >
    <path
      fill="currentColor"
      fill-rule="evenodd"
      d="M13.803 5.333c0-1.84 1.5-3.333 3.348-3.333A3.34 3.34 0 0 1 20.5 5.333c0 1.841-1.5 3.334-3.349 3.334a3.35 3.35 0 0 1-2.384-.994l-4.635 3.156a3.34 3.34 0 0 1-.182 1.917l5.082 3.34a3.35 3.35 0 0 1 2.12-.753a3.34 3.34 0 0 1 3.348 3.334C20.5 20.507 19 22 17.151 22a3.34 3.34 0 0 1-3.348-3.333a3.3 3.3 0 0 1 .289-1.356L9.05 14a3.35 3.35 0 0 1-2.202.821A3.34 3.34 0 0 1 3.5 11.487a3.34 3.34 0 0 1 3.348-3.333c1.064 0 2.01.493 2.623 1.261l4.493-3.059a3.3 3.3 0 0 1-.161-1.023"
      clip-rule="evenodd"
    ></path>
  </svg></i> åˆ†äº«æ­¤é¡µé¢</div></button></div><!--[--><!--]--><!--]--><!--[--><!--]--><!--]--><!--]--><!--]--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>æœ¬é¡µå¯¼èˆª</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--[--><!--[--><!--[--><!--]--><!--[--><!--[--><!--]--><div class="tk-article-analyze flx-justify-between" aria-label="æ–‡ç« åˆ†æ"><div class="tk-article-breadcrumb" role="navigation" aria-label="æ–‡ç« é¢åŒ…å±‘"><div class="tk-breadcrumb" role="navigation" aria-label="é¢åŒ…å±‘"><!--[--><span class="tk-breadcrumb__item"><span class="tk-breadcrumb__inner" role="link"><!--[--><a href="/" title="é¦–é¡µ" class="home hover-color" aria-label="é¦–é¡µ"><i class="tk-icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"
    ></path>
  </svg></i></a><!--]--></span><span class="tk-breadcrumb__separator" role="presentation">/</span></span><!--[--><span class="tk-breadcrumb__item"><span class="tk-breadcrumb__inner" role="link"><!--[--><span href title="Python" class="" aria-label="Python">Python</span><!--]--></span><span class="tk-breadcrumb__separator" role="presentation">/</span></span><span class="tk-breadcrumb__item"><span class="tk-breadcrumb__inner" role="link"><!--[--><span href title="AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘" class="" aria-label="AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘">AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘</span><!--]--></span><span class="tk-breadcrumb__separator" role="presentation">/</span></span><!--]--><!--]--></div></div><div class="tk-article-analyze__wrapper flx-align-center"><div class="tk-article-info article" role="group" aria-label="æ–‡ç« ä¿¡æ¯"><!--[--><!--[--><span class="tk-article-info__item" role="group" aria-label="ä½œè€…"><i class="tk-icon tk-article-info__icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
  <path
    fill="currentColor"
    d="M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0"
  ></path>
</svg></i><a title="ä½œè€…" href="https://github.com/Daneliya" target="_blank" class="hover-color" aria-label="xiaolong">xiaolong</a></span><!--]--><!--[--><span class="tk-article-info__item" role="group" aria-label="åˆ›å»ºæ—¶é—´"><i class="tk-icon tk-article-info__icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
  <path
    fill="currentColor"
    d="M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"
  ></path>
</svg></i><a title="åˆ›å»ºæ—¶é—´" class="hover-color" aria-label="2026-01-13">2026-01-13</a></span><!--]--><!--[--><!--v-if--><!--]--><!--[--><!--v-if--><!--]--><!--[--><!--v-if--><!--]--><!--]--><!--[--><!--]--></div><div class="flx-center"><i class="tk-icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="m512 863.36 384-54.848v-638.72L525.568 222.72a96 96 0 0 1-27.136 0L128 169.792v638.72zM137.024 106.432l370.432 52.928a32 32 0 0 0 9.088 0l370.432-52.928A64 64 0 0 1 960 169.792v638.72a64 64 0 0 1-54.976 63.36l-388.48 55.488a32 32 0 0 1-9.088 0l-388.48-55.488A64 64 0 0 1 64 808.512v-638.72a64 64 0 0 1 73.024-63.36z"
    ></path>
    <path fill="currentColor" d="M480 192h64v704h-64z"></path>
  </svg></i><a title="æ–‡ç« å­—æ•°" class="hover-color" aria-label="æ–‡ç« å­—æ•°">14636</a></div><div class="flx-center"><i class="tk-icon" style="--icon-color-hover:var(--tk-theme-color);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"
    ></path>
    <path fill="currentColor" d="M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"></path>
    <path fill="currentColor" d="M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"></path>
  </svg></i><a title="é¢„è®¡é˜…è¯»æ—¶é•¿" class="hover-color" aria-label="é¢„è®¡é˜…è¯»æ—¶é•¿">54.6m</a></div><!--v-if--></div></div><!--[--><!--]--><!--]--><!----><!----><!----><!--v-if--><!--[--><div class="tk-sidebar-trigger" title="ä¾§è¾¹æ å±•å¼€/æŠ˜å " role="button" aria-label="ä¾§è¾¹æ å±•å¼€/æŠ˜å "><div class="tk-right-bottom-button__button"><i class="tk-icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg
    viewBox="0 0 48 48"
    display="inline-block"
    vertical-align="middle"
    min-width="1.2rem"
    width="1.2em"
    height="1.2em"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="4">
      <path d="M6 7h36M8 24h32" />
      <path stroke-linejoin="round" d="M13.99 30L8 24.005L14 18m20.01 0L40 23.995L34 30" />
      <path d="M6 41h36" />
    </g>
  </svg></i></div></div><!--]--><!--]--><!--]--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _Python_AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91_11_%E7%BB%99AI%E6%A8%A1%E5%9E%8B%E8%AF%BB%E6%96%87%E4%BB%B6%E7%9A%84%E8%83%BD%E5%8A%9B" data-v-39a288b8><div><div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /Python\AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘\11_ç»™AIæ¨¡å‹è¯»æ–‡ä»¶çš„èƒ½åŠ›.md for this page in Markdown format</div><h1 id="ç»™aiæ¨¡å‹è¯»æ–‡ä»¶çš„èƒ½åŠ›" tabindex="-1">ç»™AIæ¨¡å‹è¯»æ–‡ä»¶çš„èƒ½åŠ› <a class="header-anchor" href="#ç»™aiæ¨¡å‹è¯»æ–‡ä»¶çš„èƒ½åŠ›" aria-label="Permalink to &quot;ç»™AIæ¨¡å‹è¯»æ–‡ä»¶çš„èƒ½åŠ›&quot;">â€‹</a></h1><h2 id="ä¸€ã€rag-æ€ä¹ˆè®©aiçŸ¥é“ç§äººæ•°æ®-æ£€ç´¢å¢å¼ºç”Ÿæˆ" tabindex="-1">ä¸€ã€RAG æ€ä¹ˆè®©AIçŸ¥é“ç§äººæ•°æ®ï¼Ÿæ£€ç´¢å¢å¼ºç”Ÿæˆ <a class="header-anchor" href="#ä¸€ã€rag-æ€ä¹ˆè®©aiçŸ¥é“ç§äººæ•°æ®-æ£€ç´¢å¢å¼ºç”Ÿæˆ" aria-label="Permalink to &quot;ä¸€ã€RAG æ€ä¹ˆè®©AIçŸ¥é“ç§äººæ•°æ®ï¼Ÿæ£€ç´¢å¢å¼ºç”Ÿæˆ&quot;">â€‹</a></h2><p>å½“å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é¢ä¸´ â€œçŸ¥è¯†è¦†ç›–ä¸è¶³â€ï¼ˆå¦‚å°ä¼—é¢†åŸŸã€æœªè®­ç»ƒæ•°æ®ï¼‰æˆ– â€œå®æ—¶æ€§ç¼ºå¤±â€ é—®é¢˜æ—¶ï¼Œ<strong>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generationï¼Œç®€ç§° RAGï¼‰</strong> æˆä¸ºå…³é”®è§£å†³æ–¹æ¡ˆã€‚å®ƒé€šè¿‡ â€œè¿æ¥å¤–éƒ¨çŸ¥è¯†åº“â€ è®©æ¨¡å‹åŸºäºå®æ—¶ã€ä¸“å±æ•°æ®ç”Ÿæˆå‡†ç¡®å›ç­”ï¼Œä»¥ä¸‹ä»æ ¸å¿ƒé—®é¢˜ã€å®ç°æµç¨‹ã€ä¼˜åŠ£åŠ¿å¯¹æ¯”ä¸‰æ–¹é¢å±•å¼€æ•´ç†ï¼š</p><h3 id="_1ã€rag-çš„æ ¸å¿ƒåº”ç”¨åœºæ™¯-è§£å†³-llm-çš„å›ºæœ‰å±€é™" tabindex="-1">1ã€RAG çš„æ ¸å¿ƒåº”ç”¨åœºæ™¯ï¼šè§£å†³ LLM çš„å›ºæœ‰å±€é™ <a class="header-anchor" href="#_1ã€rag-çš„æ ¸å¿ƒåº”ç”¨åœºæ™¯-è§£å†³-llm-çš„å›ºæœ‰å±€é™" aria-label="Permalink to &quot;1ã€RAG çš„æ ¸å¿ƒåº”ç”¨åœºæ™¯ï¼šè§£å†³ LLM çš„å›ºæœ‰å±€é™&quot;">â€‹</a></h3><p>LLM çš„çŸ¥è¯†ä¾èµ–è®­ç»ƒæ•°æ®ï¼Œå­˜åœ¨å¤©ç„¶çŸ­æ¿ï¼ŒRAG æ­£æ˜¯ä¸ºå¼¥è¡¥è¿™äº›çŸ­æ¿è€Œç”Ÿï¼š</p><ol><li><strong>å°ä¼— / ä¸“ä¸šé¢†åŸŸçŸ¥è¯†ä¸è¶³</strong>ï¼šè‹¥è®­ç»ƒæ•°æ®ä¸­æŸé¢†åŸŸæ–‡æœ¬è¦†ç›–å°‘ï¼ˆå¦‚ç‰¹å®šè¡Œä¸šæŠ€æœ¯æ–‡æ¡£ã€å­¦æœ¯ç ”ç©¶ï¼‰ï¼ŒLLM æ— æ³•ç”Ÿæˆç²¾å‡†å›ç­”ã€‚</li><li><strong>ç§æœ‰æ•°æ®æ— æ³•è®¿é—®</strong>ï¼šä¼ä¸šå†…éƒ¨æ•°æ®ï¼ˆå¦‚å‘˜å·¥æ‰‹å†Œã€å®¢æˆ·æ¡£æ¡ˆï¼‰ã€ä¸ªäººç§å¯†æ–‡æ¡£ï¼ˆå¦‚æ—¥è®°ã€åŒ»ç–—è®°å½•ï¼‰ä¸ä¼šçº³å…¥å…¬å¼€ LLM çš„è®­ç»ƒæ•°æ®ï¼ŒLLM æ— æ³•ç›´æ¥å›ç­”ç›¸å…³é—®é¢˜ã€‚</li><li><strong>çŸ¥è¯†æ—¶æ•ˆæ€§ç¼ºå¤±</strong>ï¼šLLM çš„è®­ç»ƒæ•°æ®æœ‰ â€œæˆªæ­¢æ—¥æœŸâ€ï¼ˆå¦‚ GPT-4 æˆªæ­¢åˆ° 2023 å¹´ 10 æœˆï¼‰ï¼Œæ— æ³•å›ç­”è®­ç»ƒåå‡ºç°çš„æ–°ä¿¡æ¯ï¼ˆå¦‚ 2024 å¹´æ–°æ”¿ç­–ã€æ–°äº‹ä»¶ï¼‰ã€‚</li></ol><p>RAG çš„æ ¸å¿ƒä»·å€¼ï¼šè®© LLM â€œå®æ—¶è®¿é—®å¤–éƒ¨çŸ¥è¯†åº“â€ï¼Œæ— éœ€é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œå³å¯åŸºäºä¸“å± / æœ€æ–°æ•°æ®ç”Ÿæˆå›ç­”ï¼Œå…¸å‹åº”ç”¨åŒ…æ‹¬ï¼š</p><ul><li>ä¼ä¸šçŸ¥è¯†åº“é—®ç­”ï¼ˆå¦‚å‘˜å·¥æŸ¥è¯¢å†…éƒ¨åˆ¶åº¦ï¼‰ï¼›</li><li>ä¸ªäººæ–‡æ¡£é—®ç­”ï¼ˆå¦‚åŸºäº PDF ç®€å†å›ç­”èŒä¸šç»å†ï¼‰ï¼›</li><li>è¡Œä¸šä¸“ä¸šå·¥å…·ï¼ˆå¦‚åŸºäºåŒ»ç–—æ–‡çŒ®å›ç­”ç—…ç—‡é—®é¢˜ï¼‰ã€‚</li></ul><h3 id="_2ã€rag-çš„å®ç°æµç¨‹-ä¸‰æ­¥å®Œæˆ-æ£€ç´¢-å¢å¼º-ç”Ÿæˆ" tabindex="-1">2ã€RAG çš„å®ç°æµç¨‹ï¼šä¸‰æ­¥å®Œæˆ â€œæ£€ç´¢ - å¢å¼º - ç”Ÿæˆâ€ <a class="header-anchor" href="#_2ã€rag-çš„å®ç°æµç¨‹-ä¸‰æ­¥å®Œæˆ-æ£€ç´¢-å¢å¼º-ç”Ÿæˆ" aria-label="Permalink to &quot;2ã€RAG çš„å®ç°æµç¨‹ï¼šä¸‰æ­¥å®Œæˆ â€œæ£€ç´¢ - å¢å¼º - ç”Ÿæˆâ€&quot;">â€‹</a></h3><p>RAG çš„å®Œæ•´æµç¨‹åˆ†ä¸º â€œæ•°æ®å‡†å¤‡â€â€œç›¸ä¼¼æ£€ç´¢â€â€œç»“åˆç”Ÿæˆâ€ ä¸‰å¤§æ ¸å¿ƒæ­¥éª¤ï¼Œç¯ç¯ç›¸æ‰£ç¡®ä¿æ¨¡å‹è·å–æœ‰æ•ˆå¤–éƒ¨ä¿¡æ¯ï¼š</p><h4 id="æ­¥éª¤-1-æ•°æ®å‡†å¤‡-ç¦»çº¿é˜¶æ®µ-â€”â€”-æ„å»ºå¯æ£€ç´¢çš„å‘é‡æ•°æ®åº“" tabindex="-1">æ­¥éª¤ 1ï¼šæ•°æ®å‡†å¤‡ï¼ˆç¦»çº¿é˜¶æ®µï¼‰â€”â€” æ„å»ºå¯æ£€ç´¢çš„å‘é‡æ•°æ®åº“ <a class="header-anchor" href="#æ­¥éª¤-1-æ•°æ®å‡†å¤‡-ç¦»çº¿é˜¶æ®µ-â€”â€”-æ„å»ºå¯æ£€ç´¢çš„å‘é‡æ•°æ®åº“" aria-label="Permalink to &quot;æ­¥éª¤ 1ï¼šæ•°æ®å‡†å¤‡ï¼ˆç¦»çº¿é˜¶æ®µï¼‰â€”â€” æ„å»ºå¯æ£€ç´¢çš„å‘é‡æ•°æ®åº“&quot;">â€‹</a></h4><p>æ­¤é˜¶æ®µä¸ºåç»­æ£€ç´¢æ‰“åŸºç¡€ï¼Œæ ¸å¿ƒæ˜¯å°† â€œéç»“æ„åŒ–å¤–éƒ¨æ–‡æ¡£â€ è½¬åŒ–ä¸º â€œç»“æ„åŒ–å‘é‡æ•°æ®â€ï¼š</p><ol><li>æ–‡æ¡£åŠ è½½ä¸åˆ†å‰²ï¼š <ul><li>åŠ è½½å¤–éƒ¨æ–‡æ¡£ï¼ˆå¦‚ PDFã€TXTã€Wordï¼‰ï¼Œç”±äº LLM ä¸Šä¸‹æ–‡çª—å£æœ‰é™ï¼ˆæ— æ³•å¤„ç†è¶…é•¿æ–‡æœ¬ï¼‰ï¼Œéœ€å°†æ–‡æ¡£åˆ‡åˆ†æˆ<strong>çŸ­æ–‡æœ¬å—</strong>ï¼ˆå¦‚æ¯å— 200-500 å­—ç¬¦ï¼‰ï¼Œé¿å…ä¿¡æ¯è¶…å‡ºçª—å£æˆ–åˆ†å‰²è¿‡ç»†å¯¼è‡´è¯­ä¹‰æ–­è£‚ã€‚</li></ul></li><li>æ–‡æœ¬å‘é‡åŒ–ï¼ˆåµŒå…¥ï¼‰ï¼š <ul><li>é€šè¿‡ â€œåµŒå…¥æ¨¡å‹ï¼ˆEmbedding Modelï¼‰â€ å°†æ¯ä¸ªæ–‡æœ¬å—è½¬åŒ–ä¸º<strong>å›ºå®šé•¿åº¦çš„å‘é‡</strong>ï¼ˆå¦‚ 1536 ç»´æ•°å­—ä¸²ï¼‰ã€‚</li><li>å…³é”®ç‰¹æ€§ï¼šå‘é‡éœ€ä¿ç•™æ–‡æœ¬çš„ â€œè¯­ä¹‰ / è¯­æ³•å…³è”â€â€”â€” ç›¸ä¼¼æ–‡æœ¬çš„å‘é‡åœ¨ â€œå‘é‡ç©ºé—´â€ ä¸­çš„è·ç¦»æ›´è¿‘ï¼ˆå¦‚ â€œçŒ«æŠ“è€é¼ â€ å’Œ â€œçŒ«å’ªæ•æ‰è€é¼ â€ å‘é‡è·ç¦»è¿‘ï¼‰ï¼Œæ— å…³æ–‡æœ¬è·ç¦»è¿œï¼ˆå¦‚ â€œçŒ«æŠ“è€é¼ â€ å’Œ â€œè¡Œæ˜Ÿè¿è¡Œâ€ å‘é‡è·ç¦»è¿œï¼‰ï¼Œä¸ºåç»­ç›¸ä¼¼æ£€ç´¢æä¾›æ•°å­¦ä¾æ®ã€‚</li></ul></li><li>å‘é‡å­˜å‚¨ï¼š <ul><li>å°†æ‰€æœ‰æ–‡æœ¬å—çš„å‘é‡å­˜å…¥ â€œå‘é‡æ•°æ®åº“â€ï¼ˆå¦‚ Pineconeã€Chromaã€FAISSï¼‰ï¼Œå‘é‡æ•°æ®åº“ä¸“é—¨ä¼˜åŒ– â€œç›¸ä¼¼æ€§æŸ¥è¯¢â€ æ•ˆç‡ï¼Œå¯å¿«é€Ÿæ‰¾åˆ°ä¸ç›®æ ‡å‘é‡æœ€æ¥è¿‘çš„ç»“æœã€‚</li></ul></li></ol><h4 id="æ­¥éª¤-2-ç›¸ä¼¼æ£€ç´¢-åœ¨çº¿é˜¶æ®µ-â€”â€”-åŒ¹é…ç”¨æˆ·é—®é¢˜ä¸çŸ¥è¯†åº“" tabindex="-1">æ­¥éª¤ 2ï¼šç›¸ä¼¼æ£€ç´¢ï¼ˆåœ¨çº¿é˜¶æ®µï¼‰â€”â€” åŒ¹é…ç”¨æˆ·é—®é¢˜ä¸çŸ¥è¯†åº“ <a class="header-anchor" href="#æ­¥éª¤-2-ç›¸ä¼¼æ£€ç´¢-åœ¨çº¿é˜¶æ®µ-â€”â€”-åŒ¹é…ç”¨æˆ·é—®é¢˜ä¸çŸ¥è¯†åº“" aria-label="Permalink to &quot;æ­¥éª¤ 2ï¼šç›¸ä¼¼æ£€ç´¢ï¼ˆåœ¨çº¿é˜¶æ®µï¼‰â€”â€” åŒ¹é…ç”¨æˆ·é—®é¢˜ä¸çŸ¥è¯†åº“&quot;">â€‹</a></h4><p>å½“ç”¨æˆ·æå‡ºé—®é¢˜æ—¶ï¼Œéœ€ä»å‘é‡æ•°æ®åº“ä¸­æ‰¾åˆ°æœ€ç›¸å…³çš„æ–‡æœ¬å—ï¼š</p><ol><li><strong>é—®é¢˜å‘é‡åŒ–</strong>ï¼šå°†ç”¨æˆ·çš„é—®é¢˜ï¼ˆå¦‚ â€œè¿™ä»½æ–‡æ¡£ä¸­æåˆ°çš„äº§å“å®šä»·ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼‰é€šè¿‡åŒä¸€åµŒå…¥æ¨¡å‹è½¬åŒ–ä¸ºå‘é‡ã€‚</li><li><strong>ç›¸ä¼¼æ€§æŸ¥è¯¢</strong>ï¼šå‘é‡æ•°æ®åº“è®¡ç®— â€œé—®é¢˜å‘é‡â€ ä¸ â€œæ‰€æœ‰æ–‡æœ¬å—å‘é‡â€ çš„è·ç¦»ï¼Œç­›é€‰å‡º<strong>è·ç¦»æœ€è¿‘çš„ Top N ä¸ªæ–‡æœ¬å—</strong>ï¼ˆå¦‚ Top 3ï¼‰â€”â€” è¿™äº›æ–‡æœ¬å—æ˜¯çŸ¥è¯†åº“ä¸­ä¸ç”¨æˆ·é—®é¢˜æœ€ç›¸å…³çš„å†…å®¹ã€‚</li></ol><h4 id="æ­¥éª¤-3-ç»“åˆç”Ÿæˆ-åœ¨çº¿é˜¶æ®µ-â€”â€”-llm-åŸºäºæ£€ç´¢ç»“æœç”Ÿæˆå›ç­”" tabindex="-1">æ­¥éª¤ 3ï¼šç»“åˆç”Ÿæˆï¼ˆåœ¨çº¿é˜¶æ®µï¼‰â€”â€” LLM åŸºäºæ£€ç´¢ç»“æœç”Ÿæˆå›ç­” <a class="header-anchor" href="#æ­¥éª¤-3-ç»“åˆç”Ÿæˆ-åœ¨çº¿é˜¶æ®µ-â€”â€”-llm-åŸºäºæ£€ç´¢ç»“æœç”Ÿæˆå›ç­”" aria-label="Permalink to &quot;æ­¥éª¤ 3ï¼šç»“åˆç”Ÿæˆï¼ˆåœ¨çº¿é˜¶æ®µï¼‰â€”â€” LLM åŸºäºæ£€ç´¢ç»“æœç”Ÿæˆå›ç­”&quot;">â€‹</a></h4><p>å°† â€œç”¨æˆ·é—®é¢˜ + ç›¸å…³æ–‡æœ¬å—â€ åˆå¹¶ä¸ºæç¤ºï¼Œä¼ ç»™ LLM ç”Ÿæˆç²¾å‡†å›ç­”ï¼š</p><ol><li><p>æ„å»ºæç¤ºï¼šæŒ‰ â€œé—®é¢˜ + ä¸Šä¸‹æ–‡â€ æ ¼å¼ç»„åˆå†…å®¹ï¼Œç¤ºä¾‹ï¼š</p><blockquote><p>â€œåŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡å›ç­”é—®é¢˜ï¼š ã€ä¸Šä¸‹æ–‡ã€‘æ–‡æ¡£ä¸­æåˆ°ï¼Œ2024 å¹´äº§å“å®šä»·ç­–ç•¥ä¸ºï¼šåŸºç¡€ç‰ˆ 99 å…ƒ / æœˆï¼Œä¸“ä¸šç‰ˆ 299 å…ƒ / æœˆï¼Œä¼ä¸šç‰ˆæŒ‰ç”¨æˆ·æ•°è®¡è´¹ï¼ˆ10 äººä»¥å†… 1999 å…ƒ / æœˆï¼Œæ¯å¢åŠ  10 äººåŠ  1000 å…ƒï¼‰ã€‚ ã€é—®é¢˜ã€‘è¿™ä»½æ–‡æ¡£ä¸­æåˆ°çš„äº§å“å®šä»·ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿâ€</p></blockquote></li><li><p><strong>LLM ç”Ÿæˆå›ç­”</strong>ï¼šLLM ä»¥ â€œç›¸å…³æ–‡æœ¬å—â€ ä¸ºä¾æ®ï¼Œé¿å…ä¾èµ–è‡ªèº«å›ºæœ‰çŸ¥è¯†ï¼Œç”Ÿæˆä¸çŸ¥è¯†åº“å†…å®¹ä¸€è‡´çš„å‡†ç¡®å›ç­”ã€‚</p></li></ol><h3 id="_3ã€rag-ä¸-ç›´æ¥ä¼ å…¥å…¨æ–‡-çš„å¯¹æ¯”-ä½•æ—¶è¯¥ç”¨-rag" tabindex="-1">3ã€RAG ä¸ â€œç›´æ¥ä¼ å…¥å…¨æ–‡â€ çš„å¯¹æ¯”ï¼šä½•æ—¶è¯¥ç”¨ RAGï¼Ÿ <a class="header-anchor" href="#_3ã€rag-ä¸-ç›´æ¥ä¼ å…¥å…¨æ–‡-çš„å¯¹æ¯”-ä½•æ—¶è¯¥ç”¨-rag" aria-label="Permalink to &quot;3ã€RAG ä¸ â€œç›´æ¥ä¼ å…¥å…¨æ–‡â€ çš„å¯¹æ¯”ï¼šä½•æ—¶è¯¥ç”¨ RAGï¼Ÿ&quot;">â€‹</a></h3><p>éšç€ LLM ä¸Šä¸‹æ–‡çª—å£å¢å¤§ï¼ˆå¦‚ GPT-4 Turbo æ”¯æŒ 128k Tokenï¼‰ï¼Œéƒ¨åˆ†åœºæ™¯å¯ â€œç›´æ¥å°†å…¨æ–‡ + é—®é¢˜ä¼ ç»™æ¨¡å‹â€ï¼Œä½† RAG åœ¨ç‰¹å®šåœºæ™¯ä¸‹ä»ä¸å¯æ›¿ä»£ï¼ŒäºŒè€…å¯¹æ¯”å¦‚ä¸‹ï¼š</p><table tabindex="0"><thead><tr><th>ç»´åº¦</th><th>ç›´æ¥ä¼ å…¥å…¨æ–‡ï¼ˆæ—  RAGï¼‰</th><th>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰</th></tr></thead><tbody><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>çŸ¥è¯†åº“è§„æ¨¡å°ï¼ˆå…¨æ–‡å¯å®¹çº³è¿› LLM ä¸Šä¸‹æ–‡çª—å£ï¼‰ï¼Œå¯¹ç»†èŠ‚å‡†ç¡®åº¦è¦æ±‚æé«˜</td><td>çŸ¥è¯†åº“è§„æ¨¡å¤§ï¼ˆè¶…çª—å£ä¸Šé™ï¼‰ã€ç§æœ‰ / å®æ—¶æ•°æ®ã€éœ€æ§åˆ¶æˆæœ¬</td></tr><tr><td><strong>ä¼˜ç‚¹</strong></td><td>1. æ— æ–‡æœ¬åˆ†å‰²å¯¼è‡´çš„ä¿¡æ¯æŸå¤±ï¼Œå›ç­”å‡†ç¡®åº¦å¯èƒ½æ›´é«˜ï¼›2. å®ç°é€»è¾‘ç®€å•ï¼ˆæ— éœ€å‘é‡æ•°æ®åº“ï¼‰</td><td>1. æ”¯æŒè¶…å¤§è§„æ¨¡çŸ¥è¯†åº“ï¼›2. å“åº”é€Ÿåº¦å¿«ï¼ˆä»…ä¼ ç›¸å…³æ–‡æœ¬ï¼‰ï¼›3. æˆæœ¬ä½ï¼ˆå°‘æ¶ˆè€— Tokenï¼Œå¯ç”¨å°çª—å£æ¨¡å‹ï¼‰</td></tr><tr><td><strong>ç¼ºç‚¹</strong></td><td>1. å“åº”æ…¢ï¼ˆæ¨¡å‹éœ€å¤„ç†å…¨æ–‡ï¼‰ï¼›2. æˆæœ¬é«˜ï¼ˆå¤§çª—å£æ¨¡å‹æ”¶è´¹è´µ + å¤šæ¶ˆè€— Tokenï¼‰ï¼›3. æ— æ³•æ”¯æŒè¶…çª—å£æ•°æ®</td><td>1. æ–‡æœ¬åˆ†å‰²å¯èƒ½ä¸¢å¤±è·¨å—è¯­ä¹‰ï¼ˆéœ€ä¼˜åŒ–åˆ†å‰²ç­–ç•¥ï¼‰ï¼›2. éœ€é¢å¤–ç»´æŠ¤å‘é‡æ•°æ®åº“ï¼Œå®ç°å¤æ‚åº¦é«˜</td></tr></tbody></table><h3 id="_4ã€rag-çš„æ ¸å¿ƒä»·å€¼æ€»ç»“" tabindex="-1">4ã€RAG çš„æ ¸å¿ƒä»·å€¼æ€»ç»“ <a class="header-anchor" href="#_4ã€rag-çš„æ ¸å¿ƒä»·å€¼æ€»ç»“" aria-label="Permalink to &quot;4ã€RAG çš„æ ¸å¿ƒä»·å€¼æ€»ç»“&quot;">â€‹</a></h3><ol><li><strong>æ— éœ€è®­ç»ƒï¼Œå¿«é€Ÿé€‚é…æ–°é¢†åŸŸ</strong>ï¼šæ— éœ€å¯¹ LLM è¿›è¡Œå¾®è°ƒï¼ˆFine-tuningï¼‰ï¼Œä»…éœ€æ›´æ–°çŸ¥è¯†åº“ï¼Œå³å¯è®©æ¨¡å‹å¤„ç†æ–°é¢†åŸŸé—®é¢˜ï¼Œé™ä½æŠ€æœ¯é—¨æ§›ä¸æˆæœ¬ã€‚</li><li><strong>çŸ¥è¯†å¯æ§ä¸”å¯è¿½æº¯</strong>ï¼šå›ç­”åŸºäºæ˜ç¡®çš„å¤–éƒ¨æ–‡æ¡£ï¼Œå¯è¿½æº¯ä¿¡æ¯æ¥æºï¼ˆå¦‚ â€œå›ç­”æ¥è‡ªæ–‡æ¡£ç¬¬ 3 ç« â€ï¼‰ï¼Œé¿å… LLM â€œå¹»è§‰â€ï¼ˆç”Ÿæˆè™šå‡ä¿¡æ¯ï¼‰ã€‚</li><li><strong>çµæ´»æ”¯æŒç§æœ‰ / å®æ—¶æ•°æ®</strong>ï¼šä¼ä¸šå¯å°†å†…éƒ¨æ•°æ®æ„å»ºä¸ºç§æœ‰çŸ¥è¯†åº“ï¼Œä¸ªäººå¯æ¥å…¥ç§å¯†æ–‡æ¡£ï¼Œä¸”èƒ½é€šè¿‡æ›´æ–°çŸ¥è¯†åº“å®ç° â€œçŸ¥è¯†å®æ—¶è¿­ä»£â€ï¼ˆå¦‚æ–°å¢ 2024 å¹´æ•°æ®ï¼‰ã€‚</li></ol><p>é€šè¿‡ RAGï¼Œå¯è½»æ¾æ„å»º â€œä¸“å±é¢†åŸŸ AI å·¥å…·â€ï¼ˆå¦‚æ³•å¾‹æ–‡æ¡£é—®ç­”ã€åŒ»ç–—æ–‡çŒ®è§£è¯»ï¼‰ï¼Œæˆ–å®ç° â€œPDF/Word æ–‡æ¡£é—®ç­”â€ ç­‰å®ç”¨åŠŸèƒ½ï¼Œæ˜¯ LLM è½åœ°è¡Œä¸šåœºæ™¯çš„å…³é”®æŠ€æœ¯ä¹‹ä¸€ã€‚</p><h2 id="äºŒã€document-loader-æŠŠå¤–éƒ¨æ–‡æ¡£åŠ è½½è¿›æ¥" tabindex="-1">äºŒã€Document Loader æŠŠå¤–éƒ¨æ–‡æ¡£åŠ è½½è¿›æ¥ <a class="header-anchor" href="#äºŒã€document-loader-æŠŠå¤–éƒ¨æ–‡æ¡£åŠ è½½è¿›æ¥" aria-label="Permalink to &quot;äºŒã€Document Loader æŠŠå¤–éƒ¨æ–‡æ¡£åŠ è½½è¿›æ¥&quot;">â€‹</a></h2><p>åœ¨ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æµç¨‹ä¸­ï¼Œâ€œæ–‡æ¡£åŠ è½½å™¨ï¼ˆDocument Loaderï¼‰â€ æ˜¯æ•°æ®å‡†å¤‡çš„ç¬¬ä¸€æ­¥ï¼Œè´Ÿè´£å°†ä¸åŒæ¥æºã€ä¸åŒæ ¼å¼çš„å†…å®¹ï¼ˆå¦‚æœ¬åœ°æ–‡æœ¬ã€PDFã€ç½‘ç»œèµ„æºï¼‰ç»Ÿä¸€åŠ è½½ä¸º LangChain å¯å¤„ç†çš„<code>Document</code>å¯¹è±¡ï¼ˆå«æ–‡æœ¬å†…å®¹ä¸å…ƒæ•°æ®ï¼‰ã€‚LangChain ç¤¾åŒºæä¾›äº†ä¸°å¯Œçš„åŠ è½½å™¨ï¼Œè¦†ç›–ä¸»æµæ–‡æ¡£æ ¼å¼ä¸èµ„æºç±»å‹ï¼Œä»¥ä¸‹ä»æ ¸å¿ƒæ¦‚å¿µã€å¸¸ç”¨åŠ è½½å™¨å®æˆ˜ã€æ‰©å±•ç±»å‹ä¸‰æ–¹é¢å±•å¼€æ•´ç†ï¼š</p><h3 id="_1ã€æ–‡æ¡£åŠ è½½å™¨çš„æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">1ã€æ–‡æ¡£åŠ è½½å™¨çš„æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#_1ã€æ–‡æ¡£åŠ è½½å™¨çš„æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to &quot;1ã€æ–‡æ¡£åŠ è½½å™¨çš„æ ¸å¿ƒæ¦‚å¿µ&quot;">â€‹</a></h3><h4 id="_1-1-æ ¸å¿ƒä½œç”¨" tabindex="-1">1.1. æ ¸å¿ƒä½œç”¨ <a class="header-anchor" href="#_1-1-æ ¸å¿ƒä½œç”¨" aria-label="Permalink to &quot;1.1. æ ¸å¿ƒä½œç”¨&quot;">â€‹</a></h4><p>å°†éç»“æ„åŒ– / ç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚ TXTã€PDFã€ç½‘é¡µå†…å®¹ï¼‰è½¬åŒ–ä¸º<strong>æ ‡å‡†åŒ–çš„<code>Document</code>å¯¹è±¡åˆ—è¡¨</strong>ï¼Œæ¯ä¸ª<code>Document</code>åŒ…å«ä¸¤ä¸ªå…³é”®å±æ€§ï¼š</p><ul><li><code>page_content</code>ï¼šæ–‡æœ¬å†…å®¹æœ¬èº«ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œæ˜¯åç»­åˆ†å‰²ã€åµŒå…¥çš„æ ¸å¿ƒæ•°æ®ï¼›</li><li><code>metadata</code>ï¼šå…ƒæ•°æ®ï¼ˆå­—å…¸ï¼‰ï¼Œè®°å½•æ–‡æœ¬çš„æ¥æºä¿¡æ¯ï¼ˆå¦‚æ–‡æ¡£è·¯å¾„ã€é¡µç ã€URLã€è¯­è¨€ç­‰ï¼‰ï¼Œç”¨äºè¿½æº¯æ•°æ®æ¥æºæˆ–ç­›é€‰å†…å®¹ã€‚</li></ul><h4 id="_1-2-è®¾è®¡ä¼˜åŠ¿" tabindex="-1">1.2. è®¾è®¡ä¼˜åŠ¿ <a class="header-anchor" href="#_1-2-è®¾è®¡ä¼˜åŠ¿" aria-label="Permalink to &quot;1.2. è®¾è®¡ä¼˜åŠ¿&quot;">â€‹</a></h4><ul><li><strong>æ ¼å¼ç»Ÿä¸€</strong>ï¼šæ— è®ºåŸå§‹æ•°æ®æ˜¯ TXTã€PDF è¿˜æ˜¯ç½‘é¡µï¼ŒåŠ è½½åå‡ä¸º<code>Document</code>å¯¹è±¡ï¼Œåç»­åˆ†å‰²ã€åµŒå…¥æ­¥éª¤æ— éœ€é€‚é…ä¸åŒæ ¼å¼ï¼Œé™ä½å¼€å‘æˆæœ¬ï¼›</li><li><strong>æ¥æºå¹¿æ³›</strong>ï¼šæ”¯æŒæœ¬åœ°æ–‡ä»¶ã€ç½‘ç»œèµ„æºã€æ•°æ®åº“ç­‰å¤šç§æ•°æ®æºï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„çŸ¥è¯†åº“æ„å»ºéœ€æ±‚ã€‚</li></ul><h3 id="_2ã€å¸¸ç”¨æ–‡æ¡£åŠ è½½å™¨å®æˆ˜" tabindex="-1">2ã€å¸¸ç”¨æ–‡æ¡£åŠ è½½å™¨å®æˆ˜ <a class="header-anchor" href="#_2ã€å¸¸ç”¨æ–‡æ¡£åŠ è½½å™¨å®æˆ˜" aria-label="Permalink to &quot;2ã€å¸¸ç”¨æ–‡æ¡£åŠ è½½å™¨å®æˆ˜&quot;">â€‹</a></h3><h4 id="_2-1-textloader-åŠ è½½çº¯æ–‡æœ¬æ–‡ä»¶-txt" tabindex="-1">2.1. TextLoaderï¼šåŠ è½½çº¯æ–‡æœ¬æ–‡ä»¶ï¼ˆTXTï¼‰ <a class="header-anchor" href="#_2-1-textloader-åŠ è½½çº¯æ–‡æœ¬æ–‡ä»¶-txt" aria-label="Permalink to &quot;2.1. TextLoaderï¼šåŠ è½½çº¯æ–‡æœ¬æ–‡ä»¶ï¼ˆTXTï¼‰&quot;">â€‹</a></h4><p>çº¯æ–‡æœ¬æ–‡ä»¶ï¼ˆå¦‚<code>.txt</code>ï¼‰æ— æ ¼å¼å¹²æ‰°ï¼Œæ˜¯æœ€åŸºç¡€çš„æ•°æ®æºï¼Œ<code>TextLoader</code>å¯ç›´æ¥è¯»å–å…¶å†…å®¹ã€‚</p><p>ä½¿ç”¨æ­¥éª¤</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. å¯¼å…¥TextLoader</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.document_loaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. åˆå§‹åŒ–åŠ è½½å™¨ï¼šä¼ å…¥TXTæ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;demo.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ›¿æ¢ä¸ºä½ çš„TXTæ–‡ä»¶è·¯å¾„</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. æ‰§è¡ŒåŠ è½½ï¼šè¿”å›Documentå¯¹è±¡åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">documents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loader.load()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. æŸ¥çœ‹åŠ è½½ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åŠ è½½çš„Documentæ•°é‡ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(documents)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç¬¬ä¸€ä¸ªDocumentå…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">documents[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].page_content</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ç¬¬ä¸€ä¸ªDocumentå…ƒç´ çš„æ–‡æœ¬å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç¬¬ä¸€ä¸ªDocumentçš„å†…å®¹ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">documents[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].page_content[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰“å°å‰200å­—ç¬¦</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç¬¬ä¸€ä¸ªDocumentçš„å…ƒæ•°æ®ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">documents[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].metadata</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…ƒæ•°æ®ï¼ˆå«æ–‡ä»¶è·¯å¾„ç­‰ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å…³é”®è¯´æ˜ï¼š</p><ul><li>è‹¥ TXT æ–‡ä»¶è¾ƒå¤§ï¼ˆå¦‚ä¸‡å­—ä»¥ä¸Šï¼‰ï¼Œ<code>load()</code>ä¼šè¿”å›ä¸€ä¸ªåŒ…å« 1 ä¸ª<code>Document</code>çš„åˆ—è¡¨ï¼ˆæ•´æ–‡ä»¶ä¸ºä¸€ä¸ªæ–‡æœ¬å—ï¼‰ï¼Œåç»­éœ€é€šè¿‡æ–‡æœ¬åˆ†å‰²å™¨åˆ‡åˆ†ä¸ºæ›´å°çš„å—ï¼›</li><li>å…ƒæ•°æ®é»˜è®¤åŒ…å«<code>source</code>ï¼ˆæ–‡ä»¶è·¯å¾„ï¼‰ï¼Œå¯ç”¨äºè¿½æº¯æ–‡æœ¬æ¥æºã€‚</li></ul><h4 id="_2-2-pypdfloader-åŠ è½½-pdf-æ–‡ä»¶" tabindex="-1">2.2. PyPDFLoaderï¼šåŠ è½½ PDF æ–‡ä»¶ <a class="header-anchor" href="#_2-2-pypdfloader-åŠ è½½-pdf-æ–‡ä»¶" aria-label="Permalink to &quot;2.2. PyPDFLoaderï¼šåŠ è½½ PDF æ–‡ä»¶&quot;">â€‹</a></h4><p>PDF æ–‡ä»¶å«æ ¼å¼ä¿¡æ¯ï¼ˆå¦‚é¡µç ã€å­—ä½“ã€æ’ç‰ˆï¼‰ï¼Œéœ€ä¾èµ–<code>PyPDF</code>åº“è§£ææ–‡æœ¬ï¼Œ<code>PyPDFLoader</code>ä¼šæŒ‰é¡µç æ‹†åˆ†æ–‡æœ¬ï¼Œæ¯ä¸€é¡µå¯¹åº”ä¸€ä¸ª<code>Document</code>å¯¹è±¡ã€‚</p><p>å®‰è£…<code>PyPDF</code>ä¾èµ–ï¼ˆè§£æ PDF çš„æ ¸å¿ƒåº“ï¼‰ï¼š</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pypdf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä½¿ç”¨æ­¥éª¤</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. å¯¼å…¥PyPDFLoader</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.document_loaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PyPDFLoader</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. åˆå§‹åŒ–åŠ è½½å™¨ï¼šä¼ å…¥PDFæ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PyPDFLoader(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;report.pdf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ›¿æ¢ä¸ºä½ çš„PDFæ–‡ä»¶è·¯å¾„</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. æ‰§è¡ŒåŠ è½½ï¼šè¿”å›æŒ‰é¡µç æ‹†åˆ†çš„Documentåˆ—è¡¨ï¼ˆä¸€é¡µä¸€ä¸ªDocumentï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">documents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loader.load()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. æŸ¥çœ‹åŠ è½½ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PDFæ€»é¡µæ•°ï¼ˆDocumentæ•°é‡ï¼‰ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(documents)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç¬¬1é¡µDocumentå…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">documents[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].page_content</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ç¬¬ä¸€ä¸ªDocumentå…ƒç´ çš„æ–‡æœ¬å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç¬¬1é¡µDocumentçš„å†…å®¹ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">documents[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].page_content[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç¬¬1é¡µDocumentçš„å…ƒæ•°æ®ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">documents[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].metadata</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…ƒæ•°æ®å«&quot;page&quot;ï¼ˆé¡µç ï¼‰ã€&quot;source&quot;ï¼ˆè·¯å¾„ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å…³é”®è¯´æ˜</p><ul><li>åŠ è½½ç»“æœä¸­ï¼Œæ¯ä¸ª<code>Document</code>å¯¹åº” PDF çš„ä¸€é¡µï¼Œå…ƒæ•°æ®çš„<code>page</code>å­—æ®µæ ‡è®°é¡µç ï¼Œä¾¿äºåç»­å®šä½å†…å®¹æ¥æºï¼›</li><li>è‹¥ PDF å«æ‰«æå›¾ï¼ˆéæ–‡å­—å†…å®¹ï¼‰ï¼Œ<code>PyPDFLoader</code>æ— æ³•æå–æ–‡æœ¬ï¼Œéœ€å…ˆé€šè¿‡ OCR å·¥å…·ï¼ˆå¦‚ Tesseractï¼‰å°†å›¾ç‰‡è½¬ä¸ºæ–‡å­—ï¼Œå†ç”¨<code>TextLoader</code>åŠ è½½ã€‚</li></ul><h4 id="_2-3-wikipedialoader-åŠ è½½ç»´åŸºç™¾ç§‘è¯æ¡å†…å®¹" tabindex="-1">2.3. WikipediaLoaderï¼šåŠ è½½ç»´åŸºç™¾ç§‘è¯æ¡å†…å®¹ <a class="header-anchor" href="#_2-3-wikipedialoader-åŠ è½½ç»´åŸºç™¾ç§‘è¯æ¡å†…å®¹" aria-label="Permalink to &quot;2.3. WikipediaLoaderï¼šåŠ è½½ç»´åŸºç™¾ç§‘è¯æ¡å†…å®¹&quot;">â€‹</a></h4><p>æ”¯æŒç›´æ¥ä»ç»´åŸºç™¾ç§‘åŠ è½½æŒ‡å®šè¯æ¡çš„å†…å®¹ï¼Œæ— éœ€æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ï¼Œé€‚åˆæ„å»ºå«æƒå¨ä¿¡æ¯çš„çŸ¥è¯†åº“ã€‚</p><p>å®‰è£…<code>wikipedia</code>ä¾èµ–ï¼ˆè°ƒç”¨ç»´åŸºç™¾ç§‘ API çš„åº“ï¼‰ï¼š</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wikipedia</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä½¿ç”¨æ­¥éª¤</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. å¯¼å…¥WikipediaLoader</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.document_loaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WikipediaLoader</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. åˆå§‹åŒ–åŠ è½½å™¨ï¼šé…ç½®è¯æ¡ã€è¯­è¨€ã€åŠ è½½æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WikipediaLoader(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;äººå·¥æ™ºèƒ½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç»´åŸºç™¾ç§‘è¯æ¡åï¼ˆä¸­æ–‡/è‹±æ–‡å‡å¯ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    lang</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;zh&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯­è¨€ï¼š&quot;zh&quot;ï¼ˆä¸­æ–‡ï¼‰ã€&quot;en&quot;ï¼ˆè‹±æ–‡ï¼‰ç­‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    load_max_docs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æœ€å¤šåŠ è½½çš„ç›¸å…³æ–‡æ¡£æ•°é‡ï¼ˆé¿å…å†…å®¹è¿‡å¤šï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. æ‰§è¡ŒåŠ è½½ï¼šè¿”å›ç›¸å…³è¯æ¡çš„Documentåˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">documents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loader.load()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. æŸ¥çœ‹åŠ è½½ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åŠ è½½çš„ç»´åŸºç™¾ç§‘æ–‡æ¡£æ•°é‡ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(documents)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç¬¬1ä¸ªDocumentå…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">documents[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].page_content</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ç¬¬ä¸€ä¸ªDocumentå…ƒç´ çš„æ–‡æœ¬å†…å®¹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i, doc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> enumerate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(documents, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ã€æ–‡æ¡£</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ã€‘æ ‡é¢˜ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">doc.metadata[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;title&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å†…å®¹é¢„è§ˆï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">doc.page_content[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¥æºURLï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">doc.metadata[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…ƒæ•°æ®å«è¯æ¡URL</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>å…³é”®å‚æ•°è¯´æ˜</p><ul><li><code>query</code>ï¼šå¿…å¡«ï¼Œç»´åŸºç™¾ç§‘è¯æ¡åï¼ˆå¦‚ â€œç‰›é¡¿ç¬¬äºŒå®šå¾‹â€â€œChatGPTâ€ï¼‰ï¼›</li><li><code>lang</code>ï¼šå¯é€‰ï¼Œé»˜è®¤ â€œenâ€ï¼ˆè‹±æ–‡ï¼‰ï¼Œéœ€æŒ‡å®š â€œzhâ€ è·å–ä¸­æ–‡è¯æ¡ï¼›</li><li><code>load_max_docs</code>ï¼šå¯é€‰ï¼Œé»˜è®¤åŠ è½½æ‰€æœ‰ç›¸å…³è¯æ¡ï¼Œå»ºè®®è®¾è¾ƒå°å€¼ï¼ˆå¦‚ 2-5ï¼‰é¿å…å†…å®¹å†—ä½™ã€‚</li></ul><h3 id="_3ã€langchain-æ”¯æŒçš„å…¶ä»–æ–‡æ¡£åŠ è½½å™¨-æ‰©å±•ç±»å‹" tabindex="-1">3ã€LangChain æ”¯æŒçš„å…¶ä»–æ–‡æ¡£åŠ è½½å™¨ï¼ˆæ‰©å±•ç±»å‹ï¼‰ <a class="header-anchor" href="#_3ã€langchain-æ”¯æŒçš„å…¶ä»–æ–‡æ¡£åŠ è½½å™¨-æ‰©å±•ç±»å‹" aria-label="Permalink to &quot;3ã€LangChain æ”¯æŒçš„å…¶ä»–æ–‡æ¡£åŠ è½½å™¨ï¼ˆæ‰©å±•ç±»å‹ï¼‰&quot;">â€‹</a></h3><p>é™¤ä¸Šè¿°ä¸‰ç§ï¼ŒLangChain ç¤¾åŒºè¿˜æ”¯æŒæ•°åç§æ–‡æ¡£åŠ è½½å™¨ï¼Œè¦†ç›–ä¸»æµæ ¼å¼ä¸èµ„æºï¼Œéƒ¨åˆ†å¸¸ç”¨ç±»å‹å¦‚ä¸‹ï¼š</p><table tabindex="0"><thead><tr><th>åŠ è½½å™¨ç±»å‹</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¾èµ–åº“ / æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td><code>CSVLoader</code></td><td>åŠ è½½ CSV è¡¨æ ¼æ–‡ä»¶ï¼ˆå¦‚ Excel å¯¼å‡ºçš„ç»“æ„åŒ–æ•°æ®ï¼‰</td><td>æ— éœ€é¢å¤–ä¾èµ–ï¼Œæ”¯æŒæŒ‡å®šåˆ—æå–æ–‡æœ¬</td></tr><tr><td><code>Docx2txtLoader</code></td><td>åŠ è½½ Word æ–‡æ¡£ï¼ˆ.docx æ ¼å¼ï¼‰</td><td>éœ€å®‰è£…<code>docx2txt</code>åº“</td></tr><tr><td><code>UnstructuredPowerPointLoader</code></td><td>åŠ è½½ PPT æ–‡æ¡£ï¼ˆ.pptx æ ¼å¼ï¼‰</td><td>éœ€å®‰è£…<code>unstructured</code>åº“ï¼Œæå–å¹»ç¯ç‰‡æ–‡æœ¬</td></tr><tr><td><code>WebBaseLoader</code></td><td>åŠ è½½ç½‘é¡µå†…å®¹ï¼ˆé€šè¿‡ URLï¼‰</td><td>éœ€å®‰è£…<code>beautifulsoup4</code>åº“ï¼Œæ”¯æŒè§£æ HTML</td></tr><tr><td><code>YouTubeLoader</code></td><td>åŠ è½½ YouTube è§†é¢‘çš„å­—å¹•å†…å®¹</td><td>éœ€å®‰è£…<code>youtube-transcript-api</code>åº“ï¼Œæ”¯æŒå¤šè¯­è¨€å­—å¹•</td></tr><tr><td><code>GitHubLoader</code></td><td>åŠ è½½ GitHub ä»“åº“ä¸­çš„ä»£ç  / æ–‡æ¡£</td><td>éœ€é…ç½® GitHub Tokenï¼Œæ”¯æŒæŒ‡å®šä»“åº“ / æ–‡ä»¶è·¯å¾„</td></tr></tbody></table><p>æŸ¥çœ‹æ‰€æœ‰åŠ è½½å™¨</p><p>å¯è®¿é—® LangChain å®˜æ–¹æ–‡æ¡£çš„<a href="https://python.langchain.com/docs/integrations/document_loaders/" target="_blank" rel="noreferrer">Document Loaders åˆ—è¡¨</a>ï¼ŒæŒ‰ â€œæ ¼å¼â€â€œæ¥æºâ€ ç­›é€‰æ‰€éœ€åŠ è½½å™¨ï¼Œæ¯ä¸ªåŠ è½½å™¨å‡æœ‰è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹ã€‚</p><h3 id="_4ã€æ–‡æ¡£åŠ è½½çš„é€šç”¨æ³¨æ„äº‹é¡¹" tabindex="-1">4ã€æ–‡æ¡£åŠ è½½çš„é€šç”¨æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#_4ã€æ–‡æ¡£åŠ è½½çš„é€šç”¨æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;4ã€æ–‡æ¡£åŠ è½½çš„é€šç”¨æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h3><ol><li><p><strong>ç¼–ç é—®é¢˜</strong>ï¼šåŠ è½½ TXT æ–‡ä»¶æ—¶ï¼Œè‹¥é‡ç¼–ç é”™è¯¯ï¼ˆå¦‚ä¸­æ–‡ä¹±ç ï¼‰ï¼Œå¯åœ¨<code>TextLoader</code>ä¸­æŒ‡å®šç¼–ç æ ¼å¼ï¼Œç¤ºä¾‹ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;demo.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">encoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¸¸ç”¨ç¼–ç ï¼šutf-8ã€gbk</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>å¤§æ–‡ä»¶å¤„ç†</strong>ï¼šåŠ è½½è¶…å¤§æ–‡ä»¶ï¼ˆå¦‚ 100MB ä»¥ä¸Šçš„ TXT/PDFï¼‰æ—¶ï¼Œå»ºè®®å…ˆåˆ†å‰²æ–‡ä»¶æˆ–ä½¿ç”¨ â€œæµå¼åŠ è½½â€ï¼ˆéƒ¨åˆ†åŠ è½½å™¨æ”¯æŒ<code>load_incrementally=True</code>ï¼‰ï¼Œé¿å…å†…å­˜æº¢å‡ºï¼›</p></li><li><p><strong>å…ƒæ•°æ®åˆ©ç”¨</strong>ï¼šåŠ è½½åå¯é€šè¿‡å…ƒæ•°æ®ç­›é€‰å†…å®¹ï¼ˆå¦‚ä»…ä¿ç•™ PDF çš„ç¬¬ 1-10 é¡µï¼‰ï¼Œç¤ºä¾‹ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç­›é€‰PDFçš„ç¬¬1-5é¡µDocument</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">filtered_docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [doc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> doc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> documents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> doc.metadata[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;page&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol><h2 id="ä¸‰ã€text-splitter-ä¸Šä¸‹æ–‡çª—å£æœ‰é™-æ–‡æœ¬åˆ‡æˆå—" tabindex="-1">ä¸‰ã€Text Splitter ä¸Šä¸‹æ–‡çª—å£æœ‰é™ï¼Ÿæ–‡æœ¬åˆ‡æˆå— <a class="header-anchor" href="#ä¸‰ã€text-splitter-ä¸Šä¸‹æ–‡çª—å£æœ‰é™-æ–‡æœ¬åˆ‡æˆå—" aria-label="Permalink to &quot;ä¸‰ã€Text Splitter ä¸Šä¸‹æ–‡çª—å£æœ‰é™ï¼Ÿæ–‡æœ¬åˆ‡æˆå—&quot;">â€‹</a></h2><p>åœ¨ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æµç¨‹ä¸­ï¼Œâ€œæ–‡æœ¬åˆ†å‰²â€ æ˜¯è¡”æ¥ â€œæ–‡æ¡£åŠ è½½â€ ä¸ â€œå‘é‡åµŒå…¥â€ çš„å…³é”®æ­¥éª¤ â€”â€” ç”±äºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸Šä¸‹æ–‡çª—å£æœ‰é™ï¼Œéœ€å°†è¶…é•¿æ–‡æ¡£åˆ‡åˆ†ä¸º â€œè¯­ä¹‰å®Œæ•´ã€é•¿åº¦å¯æ§â€ çš„æ–‡æœ¬å—ï¼Œä¸ºåç»­ç²¾å‡†æ£€ç´¢å’ŒåµŒå…¥å¥ å®šåŸºç¡€ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒåŸç†ã€å·¥å…·é€‰æ‹©ã€å‚æ•°é…ç½®åŠä¸­æ–‡é€‚é…å±•å¼€æ•´ç†ï¼š</p><h3 id="_1ã€æ–‡æœ¬åˆ†å‰²çš„æ ¸å¿ƒæ„ä¹‰ä¸æŒ‘æˆ˜" tabindex="-1">1ã€æ–‡æœ¬åˆ†å‰²çš„æ ¸å¿ƒæ„ä¹‰ä¸æŒ‘æˆ˜ <a class="header-anchor" href="#_1ã€æ–‡æœ¬åˆ†å‰²çš„æ ¸å¿ƒæ„ä¹‰ä¸æŒ‘æˆ˜" aria-label="Permalink to &quot;1ã€æ–‡æœ¬åˆ†å‰²çš„æ ¸å¿ƒæ„ä¹‰ä¸æŒ‘æˆ˜&quot;">â€‹</a></h3><h4 id="_1-æ ¸å¿ƒæ„ä¹‰" tabindex="-1">1. æ ¸å¿ƒæ„ä¹‰ <a class="header-anchor" href="#_1-æ ¸å¿ƒæ„ä¹‰" aria-label="Permalink to &quot;1. æ ¸å¿ƒæ„ä¹‰&quot;">â€‹</a></h4><ul><li><strong>é€‚é… LLM çª—å£é™åˆ¶</strong>ï¼šè‹¥æ–‡æ¡£é•¿åº¦è¿œè¶…æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£ï¼ˆå¦‚ä¸€æœ¬ 10 ä¸‡å­—çš„ä¹¦ï¼‰ï¼Œæ— æ³•ç›´æ¥ä¼ å…¥æ¨¡å‹ï¼Œéœ€åˆ†å‰²ä¸ºçŸ­æ–‡æœ¬å—ï¼ˆå¦‚æ¯å— 500 å­—ç¬¦ï¼‰ï¼Œç¡®ä¿åç»­èƒ½è¢«æ¨¡å‹å¤„ç†ã€‚</li><li><strong>ä¿éšœè¯­ä¹‰å®Œæ•´æ€§</strong>ï¼šåˆ†å‰²åçš„æ–‡æœ¬å—éœ€æ˜¯ â€œå¯ç†è§£çš„æœ€å°å•å…ƒâ€ï¼ˆå¦‚å®Œæ•´å¥å­ã€æ®µè½ï¼‰ï¼Œé¿å…åˆ‡åˆ†åœ¨åŠå¥è¯ã€å…³é”®æ¦‚å¿µä¸­é—´ï¼Œå¯¼è‡´ AI æ— æ³•ç†è§£æ–‡æœ¬å«ä¹‰ã€‚</li></ul><h4 id="_2-æ ¸å¿ƒæŒ‘æˆ˜" tabindex="-1">2. æ ¸å¿ƒæŒ‘æˆ˜ <a class="header-anchor" href="#_2-æ ¸å¿ƒæŒ‘æˆ˜" aria-label="Permalink to &quot;2. æ ¸å¿ƒæŒ‘æˆ˜&quot;">â€‹</a></h4><ul><li><strong>é¿å…è¯­ä¹‰æ–­è£‚</strong>ï¼šè‹¥åˆ†å‰²ç¬¦å·é€‰æ‹©ä¸å½“ï¼ˆå¦‚åœ¨ â€œç‰›é¡¿ç¬¬äºŒå®šå¾‹â€ ä¸­é—´åˆ‡åˆ†ï¼‰ï¼Œä¼šç ´åæ–‡æœ¬é€»è¾‘ï¼Œåç»­æ£€ç´¢å’Œç”Ÿæˆéƒ½ä¼šå‡ºé”™ã€‚</li><li><strong>å¹³è¡¡é•¿åº¦ä¸è¿è´¯æ€§</strong>ï¼šæ–‡æœ¬å—è¿‡é•¿å¯èƒ½ä»è¶…çª—å£ï¼Œè¿‡çŸ­åˆ™ä¸¢å¤±ä¸Šä¸‹æ–‡å…³è”ï¼ˆå¦‚ä»…åˆ‡åˆ†å•ä¸ªçŸ­å¥ï¼Œæ— æ³•ä½“ç°æ®µè½é€»è¾‘ï¼‰ã€‚</li></ul><h3 id="_2ã€langchain-æ ¸å¿ƒåˆ†å‰²å™¨-recursivecharactertextsplitter-å­—ç¬¦é€’å½’åˆ†å‰²å™¨" tabindex="-1">2ã€LangChain æ ¸å¿ƒåˆ†å‰²å™¨ï¼šRecursiveCharacterTextSplitterï¼ˆå­—ç¬¦é€’å½’åˆ†å‰²å™¨ï¼‰ <a class="header-anchor" href="#_2ã€langchain-æ ¸å¿ƒåˆ†å‰²å™¨-recursivecharactertextsplitter-å­—ç¬¦é€’å½’åˆ†å‰²å™¨" aria-label="Permalink to &quot;2ã€LangChain æ ¸å¿ƒåˆ†å‰²å™¨ï¼šRecursiveCharacterTextSplitterï¼ˆå­—ç¬¦é€’å½’åˆ†å‰²å™¨ï¼‰&quot;">â€‹</a></h3><p>LangChain ä¸­æœ€å¸¸ç”¨ã€é€‚é…æ€§æœ€å¼ºçš„åˆ†å‰²å™¨æ˜¯<code>RecursiveCharacterTextSplitter</code>ï¼ˆå­—ç¬¦é€’å½’åˆ†å‰²å™¨ï¼‰ï¼Œå…¶æ ¸å¿ƒé€»è¾‘æ˜¯ â€œæŒ‰ä¼˜å…ˆçº§ä½¿ç”¨åˆ†å‰²ç¬¦ï¼Œé€’å½’åˆ‡åˆ†ç›´åˆ°æ–‡æœ¬å—ç¬¦åˆé•¿åº¦è¦æ±‚â€ï¼Œå°¤å…¶é€‚åˆå¤„ç†å¤šæ ¼å¼ã€å¤šè¯­è¨€æ–‡æ¡£ã€‚</p><h4 id="_1-å‰æœŸå‡†å¤‡-å®‰è£…ä¸å¯¼å…¥" tabindex="-1">1. å‰æœŸå‡†å¤‡ï¼šå®‰è£…ä¸å¯¼å…¥ <a class="header-anchor" href="#_1-å‰æœŸå‡†å¤‡-å®‰è£…ä¸å¯¼å…¥" aria-label="Permalink to &quot;1. å‰æœŸå‡†å¤‡ï¼šå®‰è£…ä¸å¯¼å…¥&quot;">â€‹</a></h4><ul><li><p><strong>å®‰è£…ä¾èµ–</strong>ï¼šè¯¥åˆ†å‰²å™¨å±äº<code>langchain-text-splitters</code>åº“ï¼Œéœ€å…ˆå®‰è£…ï¼š</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> langchain-text-splitters</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>å¯¼å…¥æ¨¡å—</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_text_splitters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RecursiveCharacterTextSplitter</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_2-å…³é”®å‚æ•°è§£æ" tabindex="-1">2. å…³é”®å‚æ•°è§£æ <a class="header-anchor" href="#_2-å…³é”®å‚æ•°è§£æ" aria-label="Permalink to &quot;2. å…³é”®å‚æ•°è§£æ&quot;">â€‹</a></h4><p>åˆ›å»ºåˆ†å‰²å™¨å®ä¾‹æ—¶ï¼Œéœ€é…ç½® 4 ä¸ªæ ¸å¿ƒå‚æ•°ï¼Œç›´æ¥å½±å“åˆ†å‰²æ•ˆæœï¼š</p><table tabindex="0"><thead><tr><th>å‚æ•°å</th><th>ä½œç”¨</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td><code>chunk_size</code></td><td>å•ä¸ªæ–‡æœ¬å—çš„æœ€å¤§é•¿åº¦ï¼ˆå•ä½ï¼šå­—ç¬¦ï¼Œéƒ¨åˆ†åœºæ™¯å¯è®¾ä¸º Token æ•°ï¼‰</td><td>500</td></tr><tr><td><code>chunk_overlap</code></td><td>ç›¸é‚»æ–‡æœ¬å—çš„é‡å é•¿åº¦ï¼ˆç”¨äºä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ï¼Œé¿å…åˆ†å‰²å¤„ä¿¡æ¯ä¸¢å¤±ï¼‰</td><td>50</td></tr><tr><td><code>separators</code></td><td>åˆ†å‰²ç¬¦åˆ—è¡¨ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼Œä¼˜å…ˆç”¨é å‰çš„åˆ†å‰²ç¬¦åˆ‡åˆ†ï¼Œå¤±è´¥åˆ™å°è¯•ä¸‹ä¸€ä¸ªï¼‰</td><td>ä¸­æ–‡é€‚é…åˆ—è¡¨</td></tr><tr><td><code>length_function</code></td><td>è®¡ç®—æ–‡æœ¬é•¿åº¦çš„å‡½æ•°ï¼ˆé»˜è®¤<code>len</code>ï¼Œå³å­—ç¬¦æ•°ï¼›å¯è‡ªå®šä¹‰ä¸º Token è®¡æ•°å™¨ï¼‰</td><td><code>len</code></td></tr></tbody></table><h5 id="_1-chunk-sizeä¸chunk-overlap-å¹³è¡¡é•¿åº¦ä¸è¿è´¯æ€§" tabindex="-1">ï¼ˆ1ï¼‰<code>chunk_size</code>ä¸<code>chunk_overlap</code>ï¼šå¹³è¡¡é•¿åº¦ä¸è¿è´¯æ€§ <a class="header-anchor" href="#_1-chunk-sizeä¸chunk-overlap-å¹³è¡¡é•¿åº¦ä¸è¿è´¯æ€§" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰`chunk_size`ä¸`chunk_overlap`ï¼šå¹³è¡¡é•¿åº¦ä¸è¿è´¯æ€§&quot;">â€‹</a></h5><ul><li><code>chunk_size</code>ï¼šéœ€æ ¹æ®æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£è°ƒæ•´ï¼ˆå¦‚ GPT-3.5 æ”¯æŒ 4k Tokenâ‰ˆ3000 å­—ç¬¦ï¼Œå¯è®¾<code>chunk_size=2000</code>ï¼‰ï¼Œæ¼”ç¤ºæ—¶å¯è®¾è¾ƒå°å€¼ï¼ˆå¦‚ 500ï¼‰æ–¹ä¾¿æµ‹è¯•ã€‚</li><li><code>chunk_overlap</code>ï¼šé€šå¸¸è®¾ä¸º<code>chunk_size</code>çš„ 10%-20%ï¼ˆå¦‚<code>chunk_size=500</code>æ—¶è®¾<code>overlap=50</code>ï¼‰ï¼Œç¡®ä¿ç›¸é‚»å—åœ¨åˆ†å‰²å¤„æœ‰é‡å ï¼ˆå¦‚ â€œç¬¬ 1 å—ç»“å°¾ 50 å­—ç¬¦ = ç¬¬ 2 å—å¼€å¤´ 50 å­—ç¬¦â€ï¼‰ï¼Œé¿å…å…³é”®ä¿¡æ¯æ–­è£‚ã€‚</li></ul><h5 id="_2-separators-é€‚é…ä¸­æ–‡çš„åˆ†å‰²ç¬¦é…ç½®" tabindex="-1">ï¼ˆ2ï¼‰<code>separators</code>ï¼šé€‚é…ä¸­æ–‡çš„åˆ†å‰²ç¬¦é…ç½® <a class="header-anchor" href="#_2-separators-é€‚é…ä¸­æ–‡çš„åˆ†å‰²ç¬¦é…ç½®" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰`separators`ï¼šé€‚é…ä¸­æ–‡çš„åˆ†å‰²ç¬¦é…ç½®&quot;">â€‹</a></h5><p>é»˜è®¤<code>separators</code>ä¸ºè‹±æ–‡åœºæ™¯è®¾è®¡ï¼ˆå«ç©ºæ ¼ã€è‹±æ–‡æ ‡ç‚¹ï¼‰ï¼Œä¸­æ–‡æ–‡æ¡£éœ€è‡ªå®šä¹‰åˆ†å‰²ç¬¦åˆ—è¡¨ï¼ŒæŒ‰ â€œä»å¤§åˆ°å°â€ çš„è¯­ä¹‰å•å…ƒæ’åºï¼ˆä¼˜å…ˆæŒ‰æ®µè½ã€å†æŒ‰å¥å­ã€æœ€åæŒ‰çŸ­å¥ï¼‰ï¼Œç¤ºä¾‹ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸­æ–‡é€‚é…çš„åˆ†å‰²ç¬¦åˆ—è¡¨ï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chinese_separators </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ®µè½åˆ†éš”ï¼ˆä¼˜å…ˆæŒ‰æ®µè½åˆ‡åˆ†ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¢è¡Œåˆ†éš”ï¼ˆæ®µè½å†…æŒ‰æ¢è¡Œåˆ‡åˆ†ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸­æ–‡å¥å·ï¼ˆå¥å­ç»“æŸï¼‰</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ„Ÿå¹å·</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é—®å·</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ï¼Œ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€—å·ï¼ˆçŸ­å¥åˆ†éš”ï¼Œå°½é‡é¿å…ï¼Œä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ã€&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é¡¿å·</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # ç©ºå­—ç¬¦ä¸²ï¼ˆæœ€åå…œåº•ï¼Œä»»æ„ä½ç½®åˆ‡åˆ†ï¼Œé¿å…æ— æ³•åˆ†å‰²ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>é€»è¾‘ï¼šå…ˆå°è¯•ç”¨ â€œæ®µè½åˆ†éš”ï¼ˆ\n\nï¼‰â€ åˆ‡åˆ†ï¼Œè‹¥å•ä¸ªæ®µè½ä»è¶…<code>chunk_size</code>ï¼Œå†ç”¨ â€œæ¢è¡Œï¼ˆ\nï¼‰â€ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€åç”¨ç©ºå­—ç¬¦ä¸²å…œåº•ï¼Œç¡®ä¿æ‰€æœ‰æ–‡æœ¬éƒ½èƒ½è¢«åˆ†å‰²ã€‚</li></ul><h4 id="_3-æ–‡æœ¬åˆ†å‰²å®æˆ˜" tabindex="-1">3. æ–‡æœ¬åˆ†å‰²å®æˆ˜ <a class="header-anchor" href="#_3-æ–‡æœ¬åˆ†å‰²å®æˆ˜" aria-label="Permalink to &quot;3. æ–‡æœ¬åˆ†å‰²å®æˆ˜&quot;">â€‹</a></h4><p>ä»¥ â€œåŠ è½½åçš„ä¸­æ–‡æ–‡æ¡£â€ ä¸ºä¾‹ï¼Œå®Œæ•´åˆ†å‰²æµç¨‹å¦‚ä¸‹</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!pip install langchain_text_splitters</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.document_loaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_text_splitters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RecursiveCharacterTextSplitter</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŠ è½½ä¸€ä»½ä¸­æ–‡äº§å“æ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./demo.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loader.load()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºä¸­æ–‡é€‚é…çš„å­—ç¬¦é€’å½’åˆ†å‰²å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text_splitter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RecursiveCharacterTextSplitter(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chunk_size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å•ä¸ªæ–‡æœ¬å—æœ€å¤§500å­—ç¬¦</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chunk_overlap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç›¸é‚»å—é‡å 40å­—ç¬¦</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # separators=chinese_separators,  # ä¸­æ–‡åˆ†å‰²ç¬¦åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # length_function=len      # æŒ‰å­—ç¬¦æ•°è®¡ç®—é•¿åº¦</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    separators</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼Œ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ã€&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡Œåˆ†å‰²ï¼ˆè¾“å…¥Documentsåˆ—è¡¨ï¼Œè¾“å‡ºåˆ†å‰²åçš„Documentsåˆ—è¡¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">texts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text_splitter.split_documents(docs)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">texts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éªŒè¯ç»“æœï¼ˆæŸ¥çœ‹åˆ†å‰²åçš„æ–‡æœ¬å—æ•°é‡ä¸é•¿åº¦ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># # print(f&quot;åˆ†å‰²å‰æ–‡æ¡£æ•°ï¼š{len(docs)}&quot;)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># print(f&quot;åˆ†å‰²åæ–‡æœ¬å—æ•°ï¼š{len(texts)}&quot;)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># print(f&quot;ç¬¬ä¸€ä¸ªæ–‡æœ¬å—é•¿åº¦ï¼š{len(texts[0].page_content)}&quot;)  # åº”â‰¤500</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[Document(page_content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç½—æµ®å®«ï¼ˆæ³•è¯­ï¼šMusÃ©e du Louvre,è‹±è¯­ /ËˆluËv(rÉ™)/ ï¼‰ï¼Œæ­£å¼åç§°ä¸ºç½—æµ®åšç‰©é¦†ï¼Œä½äºæ³•å›½å·´é»å¸‚ä¸­å¿ƒçš„å¡çº³æ²³è¾¹ï¼ŒåŸæ˜¯å»ºäº12ä¸–çºªæœ«è‡³13ä¸–çºªåˆçš„ç‹å®«ï¼Œç°åœ¨æ˜¯ä¸€æ‰€ç»¼åˆåšç‰©é¦†ï¼Œäº¦æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„è‰ºæœ¯åšç‰©é¦†ä¹‹ä¸€ï¼Œä»¥åŠå‚è§‚äººæ•°æœ€å¤šçš„åšç‰©é¦†ï¼Œæ˜¯å·´é»ä¸­å¿ƒæœ€çŸ¥åçš„åœ°æ ‡ã€‚\n\nç½—æµ®å®«çš„å»ºç­‘ç‰©å§‹å»ºäº1190å¹´å·¦å³ï¼Œå¹¶åœ¨è¿‘ä»£æ›¾å¤šæ¬¡è¿›è¡Œæ‰©å»ºï¼Œä»Šå¤©æ‰€è§çš„æ¨¡æ ·åˆ™ä¸€ä¸ªå·¨å¤§çš„ç¿¼æ¥¼å’Œäº­é˜å»ºç­‘ç¾¤ï¼Œä¸»è¦ç»„æˆéƒ¨åˆ†çš„æ€»é¢ç§¯åˆ™è¶…è¿‡60,600å¹³æ–¹å…¬å°ºï¼ˆ652,000å¹³æ–¹è‹±å°ºï¼‰ï¼Œé¦†å†…æ°¸ä¹…æ”¶è—åˆ™åŒ…æ‹¬é›•å¡‘ã€ç»˜ç”»ã€ç¾æœ¯å·¥è‰ºåŠå¤ä»£ä¸œæ–¹ã€å¤ä»£åŸƒåŠå’Œå¤å¸Œè…Šç½—é©¬ç­‰7ä¸ªåˆ†ç±»ï¼Œä¸»è¦æ”¶è—1860å¹´ä»¥å‰çš„è‰ºæœ¯ä½œå“ä¸è€ƒå¤æ–‡ç‰©ï¼Œç½—æµ®å®«åšç‰©é¦†åœ¨1793å¹´8æœˆ10æ—¥å¼€å¹•èµ·æ­£å¼å¯¹å…¬ä¼—å¼€æ”¾ï¼Œå¹³å‡æ¯å¤©æœ‰15,000åæ¸¸å®¢åˆ°æ­¤å‚è§‚ï¼Œå…¶ä¸­65%æ˜¯å¤–å›½æ¸¸å®¢ã€‚\n\nä½ç½®\n\nç½—æµ®å®«ä¸æœä¹ä¸½èŠ±å›­çš„å«æ˜Ÿç…§ç‰‡\nç½—æµ®å®«åšç‰©é¦†ä½äºå·´é»å¸‚ä¸­å¿ƒçš„å¢æµ®å®«å†…ï¼Œä½äºå¡çº³æ²³å³å²¸ï¼Œæ¯—é‚»æœä¹ä¸½èŠ±å›­ã€‚æœ€è¿‘çš„ä¸¤ä¸ªåœ°é“ç«™æ˜¯çš‡å®¶å®«-ç½—æµ®å®«ç«™å’Œå¢æµ®-é‡Œæ²ƒåˆ©ç«™ï¼Œå‰è€…æœ‰ç›´è¾¾åœ°ä¸‹è´­ç‰©ä¸­å¿ƒ Carrousel du Louvre çš„åœ°ä¸‹é€šé“ã€‚&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> metadata</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./demo.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Document(page_content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åœ¨1980å¹´ä»£æœ«å’Œ1990å¹´ä»£å¤§æ”¹å»ºä¹‹å‰ï¼Œç½—æµ®å®«å…±æœ‰å¥½å‡ ä¸ªè¡—é“å…¥å£ï¼Œç›®å‰å¤§éƒ¨åˆ†å…¥å£å·²ç»æ°¸ä¹…å…³é—­ã€‚è‡ª1993å¹´ä»¥æ¥ï¼Œåšç‰©é¦†çš„æ­£é—¨ä½ç½®ä½äºæ‹¿ç ´ä»‘å¹¿åœºé‡‘å­—å¡”åº•ä¸‹çš„åœ°ä¸‹ç©ºé—´ï¼Œæ¸¸å®¢å¯ä»¥ä»é‡‘å­—å¡”æœ¬èº«ã€æ—‹è½¬é˜¶æ¢¯å¤„è¿æ¥åˆ°åšç‰©é¦†çš„é€šé“ã€‚\n\nåšç‰©é¦†çš„å‚è§‚æ—¶é—´éšè‘—æ—¶ä»£çš„æ¨ç§»è€Œå˜åŒ–ã€‚è‡ª18ä¸–çºªå¼€æ”¾ä»¥æ¥ï¼Œåªæœ‰è‰ºæœ¯å®¶å’Œæ¥è‡ªå¤–å›½çš„è§‚å…‰æ¸¸å®¢äº«æœ‰ç‰¹æƒå‚è§‚ï¼Œè¿™é¡¹ç‰¹æƒååœ¨1850å¹´ä»£æ‰æ¶ˆå¤±ã€‚å½“åšç‰©é¦†ä»1793å¹´é¦–æ¬¡å¼€æ”¾æ—¶ï¼Œæ–°å†æ³•æ³•å›½å…±å’Œå†è§„å®šäº†â€œåå¤©å‘¨â€ï¼ˆæ³•è¯­ï¼šdÃ©cadesï¼‰ï¼Œå…¶ä¸­å‰å…­å¤©ä¸ºè‰ºæœ¯å®¶å’Œå¤–å›½äººè®¿é—®ï¼Œåä¸‰å¤©ä¸ºå°†å†›è®¿é—®ï¼Œæ°‘ä¼—ä»…èƒ½åœ¨æœ€åä¸€å¤©å‚è§‚ï¼Œååœ¨åœ¨1800å¹´ä»£åˆæœŸåœ¨æ¢å¤ä¸ƒå¤©å‘¨åï¼Œæ°‘ä¼—åœ¨æ¯å‘¨åªæœ‰4å°æ—¶çš„æ—¶é—´èƒ½åœ¨ç½—æµ®å®«å‚è§‚ï¼Œå‘¨å…­å’Œå‘¨æ—¥åˆ™æ˜¯ç¼©å‡è‡³ä¸‹åˆ2ç‚¹è‡³ä¸‹åˆ4ç‚¹æœŸé—´å‚è§‚ã€‚\n\nä»1824å¹´å¼€å§‹çš„ä¸€é¡¹æ–°è§„å®šå…è®¸å…¬ä¼—åœ¨æ˜ŸæœŸæ—¥å’ŒèŠ‚å‡æ—¥æ—¶å‚è§‚ï¼Œç„¶è€Œå…¶ä»–æ—¥å­åªå¯¹è‰ºæœ¯å®¶å’Œå¤–å›½æ¸¸å®¢å¼€æ”¾ï¼Œè¿™ç§æƒ…å†µåˆ°1855å¹´æ‰å‘ç”Ÿäº†å˜åŒ–ï¼Œåšç‰©é¦†æ›´æ”¹æˆé™¤äº†å‘¨ä¸€å¤–å…¨å¤©å‘å…¬ä¼—å…è´¹å¼€æ”¾ï¼Œç›´åˆ°1922å¹´æ‰å¼€å§‹æ”¶è´¹ã€‚\n\nå½“å‰è‡ª1946å¹´å¼€å§‹ï¼Œç½—æµ®å®«é™¤äº†åœ¨å‘¨äºŒå…¬ä¼‘å’Œç‰¹æ®Šå‡æ—¥å¤–ï¼Œé€šå¸¸å‘æ¸¸å®¢å…¨é¢å¼€æ”¾å‚è§‚ï¼Œå†…éƒ¨å…è®¸ä½¿ç”¨ç…§ç›¸æœºå’Œå½•åƒæœºï¼Œä½†ç¦æ­¢ä½¿ç”¨é—ªå…‰ç¯ã€‚&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> metadata</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./demo.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(texts[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].page_content)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ç½—æµ®å®«ï¼ˆæ³•è¯­ï¼šMusÃ©e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> du</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Louvre,è‹±è¯­</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /ËˆluËv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rÉ™</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ï¼‰ï¼Œæ­£å¼åç§°ä¸ºç½—æµ®åšç‰©é¦†ï¼Œä½äºæ³•å›½å·´é»å¸‚ä¸­å¿ƒçš„å¡çº³æ²³è¾¹ï¼ŒåŸæ˜¯å»ºäº12ä¸–çºªæœ«è‡³13ä¸–çºªåˆçš„ç‹å®«ï¼Œç°åœ¨æ˜¯ä¸€æ‰€ç»¼åˆåšç‰©é¦†ï¼Œäº¦æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„è‰ºæœ¯åšç‰©é¦†ä¹‹ä¸€ï¼Œä»¥åŠå‚è§‚äººæ•°æœ€å¤šçš„åšç‰©é¦†ï¼Œæ˜¯å·´é»ä¸­å¿ƒæœ€çŸ¥åçš„åœ°æ ‡ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ç½—æµ®å®«çš„å»ºç­‘ç‰©å§‹å»ºäº1190å¹´å·¦å³ï¼Œå¹¶åœ¨è¿‘ä»£æ›¾å¤šæ¬¡è¿›è¡Œæ‰©å»ºï¼Œä»Šå¤©æ‰€è§çš„æ¨¡æ ·åˆ™ä¸€ä¸ªå·¨å¤§çš„ç¿¼æ¥¼å’Œäº­é˜å»ºç­‘ç¾¤ï¼Œä¸»è¦ç»„æˆéƒ¨åˆ†çš„æ€»é¢ç§¯åˆ™è¶…è¿‡60,600å¹³æ–¹å…¬å°ºï¼ˆ652,000å¹³æ–¹è‹±å°ºï¼‰ï¼Œé¦†å†…æ°¸ä¹…æ”¶è—åˆ™åŒ…æ‹¬é›•å¡‘ã€ç»˜ç”»ã€ç¾æœ¯å·¥è‰ºåŠå¤ä»£ä¸œæ–¹ã€å¤ä»£åŸƒåŠå’Œå¤å¸Œè…Šç½—é©¬ç­‰7ä¸ªåˆ†ç±»ï¼Œä¸»è¦æ”¶è—1860å¹´ä»¥å‰çš„è‰ºæœ¯ä½œå“ä¸è€ƒå¤æ–‡ç‰©ï¼Œç½—æµ®å®«åšç‰©é¦†åœ¨1793å¹´8æœˆ10æ—¥å¼€å¹•èµ·æ­£å¼å¯¹å…¬ä¼—å¼€æ”¾ï¼Œå¹³å‡æ¯å¤©æœ‰15,000åæ¸¸å®¢åˆ°æ­¤å‚è§‚ï¼Œå…¶ä¸­65%æ˜¯å¤–å›½æ¸¸å®¢ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ä½ç½®</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ç½—æµ®å®«ä¸æœä¹ä¸½èŠ±å›­çš„å«æ˜Ÿç…§ç‰‡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ç½—æµ®å®«åšç‰©é¦†ä½äºå·´é»å¸‚ä¸­å¿ƒçš„å¢æµ®å®«å†…ï¼Œä½äºå¡çº³æ²³å³å²¸ï¼Œæ¯—é‚»æœä¹ä¸½èŠ±å›­ã€‚æœ€è¿‘çš„ä¸¤ä¸ªåœ°é“ç«™æ˜¯çš‡å®¶å®«-ç½—æµ®å®«ç«™å’Œå¢æµ®-é‡Œæ²ƒåˆ©ç«™ï¼Œå‰è€…æœ‰ç›´è¾¾åœ°ä¸‹è´­ç‰©ä¸­å¿ƒ</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Carrousel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> du</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Louvre</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> çš„åœ°ä¸‹é€šé“ã€‚</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_4-åˆ†å‰²æ•ˆæœéªŒè¯" tabindex="-1">4. åˆ†å‰²æ•ˆæœéªŒè¯ <a class="header-anchor" href="#_4-åˆ†å‰²æ•ˆæœéªŒè¯" aria-label="Permalink to &quot;4. åˆ†å‰²æ•ˆæœéªŒè¯&quot;">â€‹</a></h4><ul><li><strong>é•¿åº¦åˆè§„</strong>ï¼šæ‰€æœ‰åˆ†å‰²åçš„æ–‡æœ¬å—<code>page_content</code>é•¿åº¦å‡â‰¤<code>chunk_size</code>ï¼Œæ— è¶…çª—å£é£é™©ã€‚</li><li><strong>è¯­ä¹‰å®Œæ•´</strong>ï¼šæ–‡æœ¬å—ä»¥ â€œæ®µè½ã€å¥å­â€ ç»“å°¾ï¼ˆå¦‚ â€œã€‚â€â€œï¼â€ï¼‰ï¼Œæ— åŠå¥è¯ã€æ–­è£‚æ¦‚å¿µï¼ˆå¦‚ä¸ä¼šå‡ºç° â€œç‰›é¡¿ç¬¬äºŒå®šâ€ è¿™æ ·çš„ä¸å®Œæ•´çŸ­è¯­ï¼‰ã€‚</li></ul><h3 id="_3ã€æ–‡æœ¬åˆ†å‰²çš„æ³¨æ„äº‹é¡¹" tabindex="-1">3ã€æ–‡æœ¬åˆ†å‰²çš„æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#_3ã€æ–‡æœ¬åˆ†å‰²çš„æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;3ã€æ–‡æœ¬åˆ†å‰²çš„æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h3><p>â‘  æ ¹æ®æ–‡æ¡£ç±»å‹è°ƒæ•´å‚æ•°ï¼š</p><ul><li>é•¿æ–‡æ¡£ï¼ˆå¦‚ä¹¦ç±ï¼‰ï¼š<code>chunk_size</code>å¯è®¾å¤§ï¼ˆå¦‚ 1000 å­—ç¬¦ï¼‰ï¼Œ<code>overlap</code>è®¾ 100-200 å­—ç¬¦ï¼Œç¡®ä¿æ®µè½é€»è¾‘è¿è´¯ã€‚</li><li>çŸ­æ–‡æ¡£ï¼ˆå¦‚æ–°é—»ç¨¿ï¼‰ï¼š<code>chunk_size</code>å¯è®¾å°ï¼ˆå¦‚ 300 å­—ç¬¦ï¼‰ï¼Œ<code>overlap</code>è®¾ 30-50 å­—ç¬¦ï¼Œé¿å…å•å—è¿‡é•¿ã€‚</li></ul><p>â‘¡ ä¸­æ–‡ä¸è‹±æ–‡åˆ†å‰²ç¬¦åŒºåˆ†ï¼š</p><ul><li>è‹±æ–‡æ–‡æ¡£å¯ç”¨é»˜è®¤<code>separators</code>ï¼ˆ<code>[&quot;\n\n&quot;, &quot;\n&quot;, &quot;. &quot;, &quot; &quot;, &quot;&quot;]</code>ï¼‰ï¼Œä¾èµ–ç©ºæ ¼å’Œè‹±æ–‡å¥å·ï¼›</li><li>ä¸­æ–‡æ–‡æ¡£å¿…é¡»è‡ªå®šä¹‰<code>separators</code>ï¼Œé¿å…ç”¨ç©ºæ ¼ï¼ˆä¸­æ–‡æ— ç©ºæ ¼åˆ†éš”ä¹ æƒ¯ï¼‰ï¼Œä¼˜å…ˆç”¨ä¸­æ–‡æ ‡ç‚¹å’Œæ¢è¡Œã€‚</li></ul><p>â‘¢ é•¿åº¦è®¡ç®—æ–¹å¼é€‰æ‹©ï¼š</p><ul><li>è‹¥éœ€ç²¾å‡†åŒ¹é…æ¨¡å‹ Token é™åˆ¶ï¼ˆå¦‚ GPT-4 çš„ Token çª—å£ï¼‰ï¼Œå¯å°†<code>length_function</code>è®¾ä¸º Token è®¡æ•°å™¨ï¼ˆå¦‚<code>tiktoken.encoding_for_model(&quot;gpt-4&quot;).encode</code>ï¼‰ï¼Œç¡®ä¿<code>chunk_size</code>æŒ‰ Token æ•°è®¡ç®—ï¼Œé¿å…å­—ç¬¦æ•°ä¸ Token æ•°å·®å¼‚å¯¼è‡´è¶…çª—å£ã€‚</li></ul><h3 id="_4ã€åç»­æµç¨‹è¡”æ¥" tabindex="-1">4ã€åç»­æµç¨‹è¡”æ¥ <a class="header-anchor" href="#_4ã€åç»­æµç¨‹è¡”æ¥" aria-label="Permalink to &quot;4ã€åç»­æµç¨‹è¡”æ¥&quot;">â€‹</a></h3><p>æ–‡æœ¬åˆ†å‰²å®Œæˆåï¼Œä¸‹ä¸€æ­¥å°†è¿›å…¥ â€œå‘é‡åµŒå…¥â€ é˜¶æ®µ â€”â€” é€šè¿‡åµŒå…¥æ¨¡å‹ï¼ˆå¦‚ OpenAI Embeddingsã€Sentence-BERTï¼‰å°†æ¯ä¸ª<code>split_documents</code>ä¸­çš„æ–‡æœ¬å—è½¬åŒ–ä¸ºå‘é‡ï¼Œæœ€ç»ˆå­˜å…¥å‘é‡æ•°æ®åº“ï¼Œä¸ºåç»­ RAG çš„ â€œç›¸ä¼¼æ£€ç´¢â€ åšå‡†å¤‡ã€‚</p><h2 id="å››ã€text-embedding-æ–‡æœ¬å˜æ•°å­—-ç¥å¥‡çš„åµŒå…¥å‘é‡" tabindex="-1">å››ã€Text Embedding æ–‡æœ¬å˜æ•°å­—ï¼Ÿç¥å¥‡çš„åµŒå…¥å‘é‡ <a class="header-anchor" href="#å››ã€text-embedding-æ–‡æœ¬å˜æ•°å­—-ç¥å¥‡çš„åµŒå…¥å‘é‡" aria-label="Permalink to &quot;å››ã€Text Embedding æ–‡æœ¬å˜æ•°å­—ï¼Ÿç¥å¥‡çš„åµŒå…¥å‘é‡&quot;">â€‹</a></h2><p>åœ¨ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æµç¨‹ä¸­ï¼Œâ€œæ–‡æœ¬åµŒå…¥ï¼ˆEmbeddingï¼‰â€ æ˜¯å°† â€œåˆ†å‰²åçš„æ–‡æœ¬å—â€ è½¬åŒ–ä¸º â€œæœºå™¨å¯ç†è§£çš„å‘é‡â€ çš„æ ¸å¿ƒæ­¥éª¤ â€”â€” é€šè¿‡åµŒå…¥æ¨¡å‹æ•æ‰æ–‡æœ¬çš„è¯­ä¹‰ä¸è¯­æ³•å…³ç³»ï¼Œä¸ºåç»­ â€œç›¸ä¼¼æ€§æ£€ç´¢â€ æä¾›æ•°å­¦åŸºç¡€ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒåŸç†ã€å·¥å…·é€‰æ‹©ã€OpenAI Embeddings å®æˆ˜ä¸‰æ–¹é¢å±•å¼€æ•´ç†ï¼š</p><h3 id="_1ã€æ–‡æœ¬åµŒå…¥çš„æ ¸å¿ƒåŸç†ä¸ä»·å€¼" tabindex="-1">1ã€æ–‡æœ¬åµŒå…¥çš„æ ¸å¿ƒåŸç†ä¸ä»·å€¼ <a class="header-anchor" href="#_1ã€æ–‡æœ¬åµŒå…¥çš„æ ¸å¿ƒåŸç†ä¸ä»·å€¼" aria-label="Permalink to &quot;1ã€æ–‡æœ¬åµŒå…¥çš„æ ¸å¿ƒåŸç†ä¸ä»·å€¼&quot;">â€‹</a></h3><h4 id="_1-1ã€ä»€ä¹ˆæ˜¯æ–‡æœ¬åµŒå…¥" tabindex="-1">1.1ã€ä»€ä¹ˆæ˜¯æ–‡æœ¬åµŒå…¥ï¼Ÿ <a class="header-anchor" href="#_1-1ã€ä»€ä¹ˆæ˜¯æ–‡æœ¬åµŒå…¥" aria-label="Permalink to &quot;1.1ã€ä»€ä¹ˆæ˜¯æ–‡æœ¬åµŒå…¥ï¼Ÿ&quot;">â€‹</a></h4><p>æ–‡æœ¬åµŒå…¥æ˜¯é€šè¿‡<strong>åµŒå…¥æ¨¡å‹</strong>å°†éç»“æ„åŒ–æ–‡æœ¬ï¼ˆå¦‚å¥å­ã€æ®µè½ï¼‰è½¬åŒ–ä¸º<strong>å›ºå®šé•¿åº¦çš„æ•°å€¼å‘é‡</strong>ï¼ˆå¦‚ 1536 ç»´ã€3072 ç»´æ•°å­—ä¸²ï¼‰çš„è¿‡ç¨‹ã€‚</p><ul><li>å…³é”®ç‰¹æ€§ï¼šå‘é‡éœ€ä¿ç•™æ–‡æœ¬çš„ â€œè¯­ä¹‰å…³è”æ€§â€â€”â€” <ul><li>ç›¸ä¼¼æ–‡æœ¬ï¼ˆå¦‚ â€œçŒ«æŠ“è€é¼ â€ å’Œ â€œçŒ«å’ªæ•æ‰è€é¼ â€ï¼‰çš„å‘é‡åœ¨ â€œå‘é‡ç©ºé—´â€ ä¸­çš„è·ç¦»æ›´è¿‘ï¼›</li><li>æ— å…³æ–‡æœ¬ï¼ˆå¦‚ â€œçŒ«æŠ“è€é¼ â€ å’Œ â€œè¡Œæ˜Ÿè¿è¡Œè½¨é“â€ï¼‰çš„å‘é‡è·ç¦»æ›´è¿œã€‚</li></ul></li><li>æ ¸å¿ƒä»·å€¼ï¼šå°† â€œæ–‡æœ¬è¯­ä¹‰åŒ¹é…â€ è½¬åŒ–ä¸º â€œå‘é‡æ•°å­¦è®¡ç®—â€ï¼ˆå¦‚è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ï¼Œè®©å‘é‡æ•°æ®åº“èƒ½å¿«é€Ÿæ‰¾åˆ°ä¸ç”¨æˆ·é—®é¢˜æœ€ç›¸å…³çš„æ–‡æœ¬å—ã€‚</li></ul><h4 id="_1-2ã€langchain-çš„åµŒå…¥é€»è¾‘" tabindex="-1">1.2ã€LangChain çš„åµŒå…¥é€»è¾‘ <a class="header-anchor" href="#_1-2ã€langchain-çš„åµŒå…¥é€»è¾‘" aria-label="Permalink to &quot;1.2ã€LangChain çš„åµŒå…¥é€»è¾‘&quot;">â€‹</a></h4><p>LangChain æœ¬èº«ä¸ç›´æ¥å®ç°åµŒå…¥åŠŸèƒ½ï¼Œè€Œæ˜¯é€šè¿‡<strong>é›†æˆç¬¬ä¸‰æ–¹åµŒå…¥æ¨¡å‹</strong>ï¼ˆå¦‚ OpenAIã€ç™¾åº¦æ–‡å¿ƒä¸€è¨€ã€Sentence-BERTï¼‰æä¾›ç»Ÿä¸€æ¥å£ï¼Œå¼€å‘è€…æ— éœ€å…³æ³¨æ¨¡å‹åº•å±‚ç»†èŠ‚ï¼Œåªéœ€è°ƒç”¨å°è£…å¥½çš„æ–¹æ³•å³å¯å®ŒæˆåµŒå…¥ã€‚</p><h3 id="_2ã€ä¸»æµåµŒå…¥æ¨¡å‹ä¸å·¥å…·é€‰æ‹©" tabindex="-1">2ã€ä¸»æµåµŒå…¥æ¨¡å‹ä¸å·¥å…·é€‰æ‹© <a class="header-anchor" href="#_2ã€ä¸»æµåµŒå…¥æ¨¡å‹ä¸å·¥å…·é€‰æ‹©" aria-label="Permalink to &quot;2ã€ä¸»æµåµŒå…¥æ¨¡å‹ä¸å·¥å…·é€‰æ‹©&quot;">â€‹</a></h3><p>å¸¸ç”¨çš„åµŒå…¥æ¨¡å‹åˆ†ä¸º â€œå•†ä¸šæ¨¡å‹â€ å’Œ â€œå¼€æºæ¨¡å‹â€ ä¸¤ç±»ï¼Œéœ€æ ¹æ®åœºæ™¯é€‰æ‹©ï¼š</p><table tabindex="0"><thead><tr><th>ç±»å‹</th><th>ä»£è¡¨æ¨¡å‹</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å•†ä¸šæ¨¡å‹</td><td>OpenAI Embeddingsï¼ˆå¦‚ text-embedding-3-largeï¼‰</td><td>è¯­ä¹‰æ•æ‰ç²¾å‡†ï¼ŒAPI è°ƒç”¨ä¾¿æ·ï¼Œéœ€ä»˜è´¹</td><td>ä¼ä¸šçº§åº”ç”¨ã€å¯¹ç²¾åº¦è¦æ±‚é«˜çš„åœºæ™¯</td></tr><tr><td>å¼€æºæ¨¡å‹</td><td>Sentence-BERTï¼ˆå¦‚ all-MiniLM-L6-v2ï¼‰</td><td>å…è´¹ï¼Œå¯æœ¬åœ°éƒ¨ç½²ï¼Œç²¾åº¦ç•¥ä½äºå•†ä¸šæ¨¡å‹</td><td>ä¸ªäººé¡¹ç›®ã€é¢„ç®—æœ‰é™ã€æ•°æ®éšç§æ•æ„Ÿ</td></tr></tbody></table><p>ä»¥<strong>OpenAI Embeddings</strong>ä¸ºä¾‹ï¼ˆæœ€å¸¸ç”¨çš„å•†ä¸šåµŒå…¥æ¨¡å‹ï¼‰ï¼Œè®²è§£å…·ä½“å®ç°æµç¨‹ã€‚</p><h3 id="_3ã€openai-embeddings-å®æˆ˜æ­¥éª¤" tabindex="-1">3ã€OpenAI Embeddings å®æˆ˜æ­¥éª¤ <a class="header-anchor" href="#_3ã€openai-embeddings-å®æˆ˜æ­¥éª¤" aria-label="Permalink to &quot;3ã€OpenAI Embeddings å®æˆ˜æ­¥éª¤&quot;">â€‹</a></h3><h4 id="_3-1ã€å‰æœŸå‡†å¤‡-ä¾èµ–å®‰è£…ä¸-api-å¯†é’¥é…ç½®" tabindex="-1">3.1ã€å‰æœŸå‡†å¤‡ï¼šä¾èµ–å®‰è£…ä¸ API å¯†é’¥é…ç½® <a class="header-anchor" href="#_3-1ã€å‰æœŸå‡†å¤‡-ä¾èµ–å®‰è£…ä¸-api-å¯†é’¥é…ç½®" aria-label="Permalink to &quot;3.1ã€å‰æœŸå‡†å¤‡ï¼šä¾èµ–å®‰è£…ä¸ API å¯†é’¥é…ç½®&quot;">â€‹</a></h4><h5 id="_1-å®‰è£…ä¾èµ–" tabindex="-1">ï¼ˆ1ï¼‰å®‰è£…ä¾èµ– <a class="header-anchor" href="#_1-å®‰è£…ä¾èµ–" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰å®‰è£…ä¾èµ–&quot;">â€‹</a></h5><p>éœ€å®‰è£…<code>openai</code>åº“ï¼ˆç”¨äºè°ƒç”¨ OpenAI APIï¼‰å’Œ LangChain ç›¸å…³æ¨¡å—ï¼š</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openai</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> langchain-openai</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_2-é…ç½®-api-å¯†é’¥" tabindex="-1">ï¼ˆ2ï¼‰é…ç½® API å¯†é’¥ <a class="header-anchor" href="#_2-é…ç½®-api-å¯†é’¥" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰é…ç½® API å¯†é’¥&quot;">â€‹</a></h5><ul><li>æ–¹å¼ 1ï¼šå°† API å¯†é’¥å­˜å…¥ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼Œé¿å…ç¡¬ç¼–ç ï¼‰ï¼š <ul><li>Windowsï¼š<code>set OPENAI_API_KEY=&quot;ä½ çš„APIå¯†é’¥&quot;</code></li><li>macOS/Linuxï¼š<code>export OPENAI_API_KEY=&quot;ä½ çš„APIå¯†é’¥&quot;</code></li></ul></li><li>æ–¹å¼ 2ï¼šåœ¨ä»£ç ä¸­ç›´æ¥ä¼ å…¥å¯†é’¥ï¼ˆä»…ç”¨äºæµ‹è¯•ï¼Œä¸æ¨èç”Ÿäº§ç¯å¢ƒï¼‰ã€‚</li></ul><h4 id="_3-2ã€åˆå§‹åŒ–-openai-embeddings-å®ä¾‹" tabindex="-1">3.2ã€åˆå§‹åŒ– OpenAI Embeddings å®ä¾‹ <a class="header-anchor" href="#_3-2ã€åˆå§‹åŒ–-openai-embeddings-å®ä¾‹" aria-label="Permalink to &quot;3.2ã€åˆå§‹åŒ– OpenAI Embeddings å®ä¾‹&quot;">â€‹</a></h4><p>ä»<code>langchain-openai</code>å¯¼å…¥<code>OpenAIEmbeddings</code>ï¼Œå¹¶é…ç½®æ¨¡å‹å‚æ•°ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–åµŒå…¥æ¨¡å‹å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">embeddings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text-embedding-3-large&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŒ‡å®šåµŒå…¥æ¨¡å‹ï¼ˆå¯æ›¿æ¢ä¸ºtext-embedding-3-smallç­‰ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    openai_api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ çš„APIå¯†é’¥&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # è‹¥å·²è®¾ç¯å¢ƒå˜é‡ï¼Œå¯çœç•¥è¯¥å‚æ•°ï¼ˆè‡ªåŠ¨è¯»å–ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="å…³é”®å‚æ•°è¯´æ˜" tabindex="-1">å…³é”®å‚æ•°è¯´æ˜ï¼š <a class="header-anchor" href="#å…³é”®å‚æ•°è¯´æ˜" aria-label="Permalink to &quot;å…³é”®å‚æ•°è¯´æ˜ï¼š&quot;">â€‹</a></h5><ul><li><code>model</code>ï¼šåµŒå…¥æ¨¡å‹åç§°ï¼ŒOpenAI å®˜æ–¹æ”¯æŒçš„æ¨¡å‹åŒ…æ‹¬ï¼š <ul><li><code>text-embedding-3-large</code>ï¼šé«˜ç»´åº¦ï¼ˆé»˜è®¤ 3072 ç»´ï¼‰ï¼Œç²¾åº¦é«˜ï¼Œé€‚åˆå¤æ‚è¯­ä¹‰åŒ¹é…ï¼›</li><li><code>text-embedding-3-small</code>ï¼šä½ç»´åº¦ï¼ˆé»˜è®¤ 1536 ç»´ï¼‰ï¼Œé€Ÿåº¦å¿«ã€æˆæœ¬ä½ï¼Œé€‚åˆç®€å•åœºæ™¯ï¼›</li><li>æ—§æ¨¡å‹ï¼ˆå¦‚<code>text-embedding-ada-002</code>ï¼‰ï¼šä»å¯ç”¨ï¼Œä½†æ¨èä¼˜å…ˆä½¿ç”¨ v3 ç³»åˆ—ã€‚</li></ul></li><li><code>dimensions</code>ï¼ˆå¯é€‰ï¼‰ï¼šè‡ªå®šä¹‰å‘é‡ç»´åº¦ï¼ˆä»… v3 ç³»åˆ—æ”¯æŒï¼‰ï¼Œå¦‚<code>dimensions=1024</code>â€”â€” å¯åœ¨ â€œç²¾åº¦â€ å’Œ â€œå­˜å‚¨ / è®¡ç®—æˆæœ¬â€ é—´å¹³è¡¡ï¼ˆç»´åº¦è¶Šå°ï¼Œå‘é‡æ•°æ®åº“å­˜å‚¨å‹åŠ›è¶Šå°ï¼Œæ£€ç´¢é€Ÿåº¦è¶Šå¿«ï¼‰ã€‚</li></ul><h4 id="_3-3ã€æ–‡æœ¬åµŒå…¥æ ¸å¿ƒæ“ä½œ" tabindex="-1">3.3ã€æ–‡æœ¬åµŒå…¥æ ¸å¿ƒæ“ä½œ <a class="header-anchor" href="#_3-3ã€æ–‡æœ¬åµŒå…¥æ ¸å¿ƒæ“ä½œ" aria-label="Permalink to &quot;3.3ã€æ–‡æœ¬åµŒå…¥æ ¸å¿ƒæ“ä½œ&quot;">â€‹</a></h4><h5 id="_1-å•æ–‡æœ¬-å¤šæ–‡æœ¬åµŒå…¥" tabindex="-1">ï¼ˆ1ï¼‰å•æ–‡æœ¬ / å¤šæ–‡æœ¬åµŒå…¥ <a class="header-anchor" href="#_1-å•æ–‡æœ¬-å¤šæ–‡æœ¬åµŒå…¥" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰å•æ–‡æœ¬ / å¤šæ–‡æœ¬åµŒå…¥&quot;">â€‹</a></h5><p>é€šè¿‡<code>embed_query</code>ï¼ˆå•æ–‡æœ¬ï¼Œå¸¸ç”¨äºç”¨æˆ·é—®é¢˜åµŒå…¥ï¼‰æˆ–<code>embed_documents</code>ï¼ˆå¤šæ–‡æœ¬ï¼Œå¸¸ç”¨äºæ–‡æœ¬å—åµŒå…¥ï¼‰æ–¹æ³•å®ç°ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!pip install openai</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">embeddings_model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text-embedding-3-large&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨å…¶ä»–APIï¼Œåˆ™éœ€è¦æä¾›é¢å¤–å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># embeddings_model = OpenAIEmbeddings(model=&quot;text-embedding-3-large&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#                                     openai_api_key=&quot;&lt;ä½ çš„APIå¯†é’¥&gt;&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#                                     openai_api_base=&quot;https://api.aigc369.com/v1&quot;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¤šæ–‡æœ¬åµŒå…¥ï¼ˆåˆ†å‰²åçš„æ–‡æœ¬å—åˆ—è¡¨ï¼Œè¿”å›å‘é‡åˆ—è¡¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text_chunks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;LangChainæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºLLMåº”ç”¨çš„æ¡†æ¶&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;OpenAI Embeddingså¯å°†æ–‡æœ¬è½¬åŒ–ä¸ºå‘é‡&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;RAGæµç¨‹åŒ…æ‹¬æ–‡æ¡£åŠ è½½ã€åˆ†å‰²ã€åµŒå…¥ã€æ£€ç´¢ã€ç”Ÿæˆ&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¹æ–‡æœ¬å—åˆ—è¡¨è¿›è¡ŒåµŒå…¥ï¼Œè¿”å›å‘é‡åˆ—è¡¨ï¼ˆæ¯ä¸ªå‘é‡å¯¹åº”ä¸€ä¸ªæ–‡æœ¬å—ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">embeded_result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> embeddings.embed_documents(text_chunks)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(embeded_result)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">embeded_result</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[[-0.005549268744966659,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  -0.016023970990018652,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  -0.01250122560200001,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ...]]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹å…¶ä»–ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ–‡æœ¬å—æ•°é‡ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(text_chunks)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å‘é‡æ•°é‡ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(embeded_result)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸æ–‡æœ¬å—æ•°é‡ä¸€è‡´</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å•ä¸ªå‘é‡ç»´åº¦ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(embeded_result[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¦‚3072ï¼ˆtext-embedding-3-largeé»˜è®¤ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¦‚æœå¸Œæœ›åµŒå…¥å‘é‡ç»´åº¦æ›´å°ï¼Œå¯ä»¥é€šè¿‡dimensionså‚æ•°è¿›è¡ŒæŒ‡å®š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">embeddings_model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text-embedding-3-large&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dimensions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">embeded_result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> embeddings_model.embed_documents([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hey bro&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(embeded_result[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1024</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å•æ–‡æœ¬åµŒå…¥ï¼ˆç”¨æˆ·é—®é¢˜ï¼Œè¿”å›å•ä¸ªå‘é‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user_query </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ä»€ä¹ˆæ˜¯RAGæµç¨‹ï¼Ÿ&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">query_embedding </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> embeddings.embed_query(user_query)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·é—®é¢˜å‘é‡ç»´åº¦ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(query_embedding)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸æ–‡æœ¬å—å‘é‡ç»´åº¦ä¸€è‡´ï¼ˆç¡®ä¿å¯è®¡ç®—ç›¸ä¼¼åº¦ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1024</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_2-å‘é‡çš„æœ¬è´¨" tabindex="-1">ï¼ˆ2ï¼‰å‘é‡çš„æœ¬è´¨ <a class="header-anchor" href="#_2-å‘é‡çš„æœ¬è´¨" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰å‘é‡çš„æœ¬è´¨&quot;">â€‹</a></h5><p><code>chunk_embeddings</code>å’Œ<code>query_embedding</code>å‡ä¸º<strong>æµ®ç‚¹æ•°åˆ—è¡¨</strong>ï¼Œç¤ºä¾‹ï¼ˆç®€åŒ–ï¼‰ï¼š <code>[0.023, -0.012, 0.056, ..., 0.031]</code>ï¼ˆå…± 3072 ä¸ªæµ®ç‚¹æ•°ï¼Œå¯¹åº” 3072 ç»´å‘é‡ï¼‰ã€‚ è¿™äº›æ•°å€¼æ— ç›´è§‚å«ä¹‰ï¼Œä½†é€šè¿‡æ•°å­¦è®¡ç®—ï¼ˆå¦‚ä½™å¼¦ç›¸ä¼¼åº¦ï¼‰å¯è¡¡é‡æ–‡æœ¬é—´çš„è¯­ä¹‰å…³è”ã€‚</p><h4 id="_4-åµŒå…¥ç»“æœçš„åç»­ç”¨é€”" tabindex="-1">4. åµŒå…¥ç»“æœçš„åç»­ç”¨é€” <a class="header-anchor" href="#_4-åµŒå…¥ç»“æœçš„åç»­ç”¨é€”" aria-label="Permalink to &quot;4. åµŒå…¥ç»“æœçš„åç»­ç”¨é€”&quot;">â€‹</a></h4><p>æ–‡æœ¬å—çš„å‘é‡ï¼ˆ<code>chunk_embeddings</code>ï¼‰ä¼šè¢«å­˜å…¥<strong>å‘é‡æ•°æ®åº“</strong>ï¼ˆå¦‚ Pineconeã€Chromaï¼‰ï¼Œç”¨æˆ·é—®é¢˜çš„å‘é‡ï¼ˆ<code>query_embedding</code>ï¼‰ä¼šç”¨äºåœ¨å‘é‡æ•°æ®åº“ä¸­ â€œç›¸ä¼¼æ€§æ£€ç´¢â€â€”â€” æ‰¾åˆ°ä¸é—®é¢˜å‘é‡è·ç¦»æœ€è¿‘çš„æ–‡æœ¬å—å‘é‡ï¼Œè¿›è€Œè·å–å¯¹åº”çš„åŸå§‹æ–‡æœ¬å—ï¼Œä¸º LLM ç”Ÿæˆå›ç­”æä¾›ä¸Šä¸‹æ–‡ã€‚</p><h2 id="äº”ã€vector-store-å‘é‡æ•°æ®åº“-aiæ¨¡å‹çš„æµ·é©¬ä½“" tabindex="-1">äº”ã€Vector Store å‘é‡æ•°æ®åº“ï¼ŒAIæ¨¡å‹çš„æµ·é©¬ä½“ <a class="header-anchor" href="#äº”ã€vector-store-å‘é‡æ•°æ®åº“-aiæ¨¡å‹çš„æµ·é©¬ä½“" aria-label="Permalink to &quot;äº”ã€Vector Store å‘é‡æ•°æ®åº“ï¼ŒAIæ¨¡å‹çš„æµ·é©¬ä½“&quot;">â€‹</a></h2><p>åœ¨ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æµç¨‹ä¸­ï¼Œâ€œå‘é‡æ•°æ®åº“â€ æ˜¯è¡”æ¥ â€œæ–‡æœ¬åµŒå…¥â€ ä¸ â€œç›¸ä¼¼æ€§æ£€ç´¢â€ çš„æ ¸å¿ƒç»„ä»¶ â€”â€” å®ƒä¸“é—¨å­˜å‚¨æ–‡æœ¬å—çš„å‘é‡ï¼Œå¹¶é€šè¿‡ â€œç›¸ä¼¼æ€§æœç´¢â€ å¿«é€ŸåŒ¹é…ç”¨æˆ·é—®é¢˜ä¸çŸ¥è¯†åº“å†…å®¹ï¼Œè§£å†³ä¼ ç»Ÿæ•°æ®åº“æ— æ³•å¤„ç†éç»“æ„åŒ–æ•°æ®è¯­ä¹‰åŒ¹é…çš„ç—›ç‚¹ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒåŸç†ã€å·¥å…·å®æˆ˜ã€æ£€ç´¢æµç¨‹ä¸‰æ–¹é¢å±•å¼€æ•´ç†ï¼š</p><h3 id="_1ã€å‘é‡æ•°æ®åº“çš„æ ¸å¿ƒä»·å€¼-ä¸ºä½•ä¸ç”¨ä¼ ç»Ÿæ•°æ®åº“" tabindex="-1">1ã€å‘é‡æ•°æ®åº“çš„æ ¸å¿ƒä»·å€¼ï¼šä¸ºä½•ä¸ç”¨ä¼ ç»Ÿæ•°æ®åº“ï¼Ÿ <a class="header-anchor" href="#_1ã€å‘é‡æ•°æ®åº“çš„æ ¸å¿ƒä»·å€¼-ä¸ºä½•ä¸ç”¨ä¼ ç»Ÿæ•°æ®åº“" aria-label="Permalink to &quot;1ã€å‘é‡æ•°æ®åº“çš„æ ¸å¿ƒä»·å€¼ï¼šä¸ºä½•ä¸ç”¨ä¼ ç»Ÿæ•°æ®åº“ï¼Ÿ&quot;">â€‹</a></h3><p>ä¼ ç»Ÿæ•°æ®åº“ä¸å‘é‡æ•°æ®åº“çš„æ ¸å¿ƒå·®å¼‚åœ¨äº â€œæ•°æ®ç±»å‹é€‚é…â€ å’Œ â€œæŸ¥è¯¢æœºåˆ¶â€ï¼Œå‘é‡æ•°æ®åº“çš„ä¼˜åŠ¿é›†ä¸­åœ¨<strong>éç»“æ„åŒ–æ•°æ®çš„è¯­ä¹‰åŒ¹é…</strong>ï¼š</p><table tabindex="0"><thead><tr><th>ç»´åº¦</th><th>ä¼ ç»Ÿæ•°æ®åº“ï¼ˆå¦‚ MySQLã€PostgreSQLï¼‰</th><th>å‘é‡æ•°æ®åº“ï¼ˆå¦‚ FAISSã€Chromaã€Pineconeï¼‰</th></tr></thead><tbody><tr><td><strong>é€‚é…æ•°æ®ç±»å‹</strong></td><td>ç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚å‘˜å·¥ IDã€å…¥èŒæ—¥æœŸï¼Œæœ‰å›ºå®šæ ¼å¼å’Œå­—æ®µå®šä¹‰ï¼‰</td><td>éç»“æ„åŒ–æ•°æ®çš„å‘é‡ï¼ˆå¦‚æ–‡æœ¬åµŒå…¥å‘é‡ã€å›¾åƒå‘é‡ï¼Œæ— å›ºå®šæ ¼å¼ï¼‰</td></tr><tr><td><strong>æŸ¥è¯¢æœºåˆ¶</strong></td><td>ç²¾å‡†åŒ¹é…ï¼ˆå¦‚ â€œå‘˜å·¥ ID=002â€â€œå·¥èµ„ &gt; 5000â€ï¼‰ï¼Œä¾èµ–å…³é”®è¯æˆ–æ•°å€¼æ¯”å¯¹</td><td>ç›¸ä¼¼æ€§æœç´¢ï¼ˆå¦‚è®¡ç®—å‘é‡é—´ä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ï¼ŒåŸºäºè¯­ä¹‰å…³è”åŒ¹é…ï¼Œä¸ä¾èµ–ç²¾ç¡®å…³é”®è¯</td></tr><tr><td><strong>å…¸å‹åœºæ™¯å±€é™</strong></td><td>æ— æ³•å¤„ç† â€œè¯­ä¹‰ç›¸ä¼¼ä½†å…³é”®è¯ä¸åŒâ€ çš„æŸ¥è¯¢ï¼ˆå¦‚æŸ¥ â€œæ“…é•¿è´¢åŠ¡é¢„ç®—â€ï¼Œæ— æ³•åŒ¹é… â€œé¢„ç®—æ§åˆ¶ä¸è´¢åŠ¡è§„åˆ’ç»éªŒä¸°å¯Œâ€ï¼‰</td><td>æ“…é•¿å¤„ç†è¯­ä¹‰åŒ¹é…åœºæ™¯ï¼Œå¯å¿«é€Ÿæ‰¾åˆ°ä¸ç”¨æˆ·é—®é¢˜ â€œæ„æ€ç›¸è¿‘â€ çš„æ–‡æœ¬å—</td></tr></tbody></table><p><strong>ç»“è®º</strong>ï¼šåœ¨ RAG ä¸­ï¼Œéœ€ç”¨å‘é‡æ•°æ®åº“å­˜å‚¨æ–‡æœ¬å—å‘é‡ï¼Œå®ç° â€œç”¨æˆ·é—®é¢˜â†’è¯­ä¹‰åŒ¹é…â†’ç›¸å…³æ–‡æœ¬å—â€ çš„é«˜æ•ˆæ£€ç´¢ï¼Œè¿™æ˜¯ä¼ ç»Ÿæ•°æ®åº“æ— æ³•æ›¿ä»£çš„ã€‚</p><h3 id="_2ã€ä¸»æµå‘é‡æ•°æ®åº“ä¸å·¥å…·é€‰æ‹©" tabindex="-1">2ã€ä¸»æµå‘é‡æ•°æ®åº“ä¸å·¥å…·é€‰æ‹© <a class="header-anchor" href="#_2ã€ä¸»æµå‘é‡æ•°æ®åº“ä¸å·¥å…·é€‰æ‹©" aria-label="Permalink to &quot;2ã€ä¸»æµå‘é‡æ•°æ®åº“ä¸å·¥å…·é€‰æ‹©&quot;">â€‹</a></h3><p>å¸¸ç”¨çš„å‘é‡æ•°æ®åº“åˆ†ä¸º â€œå¼€æºæœ¬åœ°å‹â€ å’Œ â€œå•†ä¸šäº‘æœåŠ¡å‹â€ï¼Œæœ¬èŠ‚ä»¥<strong>FAISS</strong>ï¼ˆFacebook å¼€æºï¼Œè½»é‡æ˜“ä¸Šæ‰‹ï¼Œé€‚åˆæœ¬åœ°æµ‹è¯•ï¼‰ä¸ºä¾‹ï¼Œè®²è§£å…·ä½“å®ç°æµç¨‹ï¼š</p><table tabindex="0"><thead><tr><th>ç±»å‹</th><th>ä»£è¡¨æ•°æ®åº“</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å¼€æºæœ¬åœ°</td><td>FAISSã€Chroma</td><td>å…è´¹ï¼Œå¯æœ¬åœ°éƒ¨ç½²ï¼Œæ— éœ€ç½‘ç»œï¼Œé€‚åˆå°ä½“é‡çŸ¥è¯†åº“</td><td>ä¸ªäººé¡¹ç›®ã€æœ¬åœ°æµ‹è¯•ã€æ•°æ®éšç§æ•æ„Ÿåœºæ™¯</td></tr><tr><td>å•†ä¸šäº‘æœåŠ¡</td><td>Pineconeã€Weaviate</td><td>æ”¯æŒå¤§è§„æ¨¡æ•°æ®ï¼Œé«˜å¯ç”¨ï¼Œéœ€ä»˜è´¹</td><td>ä¼ä¸šçº§åº”ç”¨ã€è¶…å¤§è§„æ¨¡çŸ¥è¯†åº“</td></tr></tbody></table><h3 id="_3ã€faiss-å‘é‡æ•°æ®åº“å®æˆ˜æ­¥éª¤" tabindex="-1">3ã€FAISS å‘é‡æ•°æ®åº“å®æˆ˜æ­¥éª¤ <a class="header-anchor" href="#_3ã€faiss-å‘é‡æ•°æ®åº“å®æˆ˜æ­¥éª¤" aria-label="Permalink to &quot;3ã€FAISS å‘é‡æ•°æ®åº“å®æˆ˜æ­¥éª¤&quot;">â€‹</a></h3><h4 id="_3-1-å‰æœŸå‡†å¤‡-ä¾èµ–å®‰è£…ä¸å¯¼å…¥" tabindex="-1">3.1. å‰æœŸå‡†å¤‡ï¼šä¾èµ–å®‰è£…ä¸å¯¼å…¥ <a class="header-anchor" href="#_3-1-å‰æœŸå‡†å¤‡-ä¾èµ–å®‰è£…ä¸å¯¼å…¥" aria-label="Permalink to &quot;3.1. å‰æœŸå‡†å¤‡ï¼šä¾èµ–å®‰è£…ä¸å¯¼å…¥&quot;">â€‹</a></h4><p>å®‰è£… FAISS ä¾èµ–</p><p>FAISS æä¾› CPU å’Œ GPU ç‰ˆæœ¬ï¼Œæœ¬åœ°æµ‹è¯•ä¼˜å…ˆå®‰è£… CPU ç‰ˆæœ¬ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pip install faiss-cpu langchain-community</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¯¼å…¥æ ¸å¿ƒæ¨¡å—</p><p>éœ€å¯¼å…¥ LangChain çš„<code>FAISS</code>å‘é‡å­˜å‚¨ç±»ï¼Œä»¥åŠå‰æœŸå‡†å¤‡å¥½çš„ â€œåˆ†å‰²åæ–‡æœ¬å—â€ å’Œ â€œåµŒå…¥æ¨¡å‹å®ä¾‹â€ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¼å…¥FAISSå‘é‡æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.vectorstores </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FAISS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.document_loaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¼å…¥å‰æœŸå‡†å¤‡çš„ç»„ä»¶ï¼ˆæ–‡æœ¬å—+åµŒå…¥æ¨¡å‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_text_splitters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RecursiveCharacterTextSplitter  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å·²åˆ†å‰²å¥½çš„æ–‡æœ¬å—ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å·²åˆå§‹åŒ–çš„åµŒå…¥æ¨¡å‹</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_3-2-æ–‡æœ¬å—å‘é‡å­˜å‚¨-ä¸€é”®ç”Ÿæˆå¹¶å­˜å‚¨å‘é‡" tabindex="-1">3.2. æ–‡æœ¬å—å‘é‡å­˜å‚¨ï¼šä¸€é”®ç”Ÿæˆå¹¶å­˜å‚¨å‘é‡ <a class="header-anchor" href="#_3-2-æ–‡æœ¬å—å‘é‡å­˜å‚¨-ä¸€é”®ç”Ÿæˆå¹¶å­˜å‚¨å‘é‡" aria-label="Permalink to &quot;3.2. æ–‡æœ¬å—å‘é‡å­˜å‚¨ï¼šä¸€é”®ç”Ÿæˆå¹¶å­˜å‚¨å‘é‡&quot;">â€‹</a></h4><p>LangChain å°è£…äº†<code>FAISS.from_documents</code>æ–¹æ³•ï¼Œå¯è‡ªåŠ¨å®Œæˆ â€œæ–‡æœ¬å—åµŒå…¥â†’å‘é‡å­˜å‚¨â€ çš„å…¨æµç¨‹ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†å‘é‡ç”Ÿæˆï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‡è®¾å‰æœŸå·²å®Œæˆæ–‡æœ¬åˆ†å‰²ï¼Œå¾—åˆ°split_documentsï¼ˆåˆ†å‰²åçš„Documentsåˆ—è¡¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‡è®¾å·²åˆå§‹åŒ–åµŒå…¥æ¨¡å‹embeddingsï¼ˆå¦‚OpenAIEmbeddingså®ä¾‹ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. ç”Ÿæˆæ–‡æœ¬å—å‘é‡å¹¶å­˜å‚¨åˆ°FAISSæ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vector_db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FAISS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.from_documents(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    documents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">split_documents,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ†å‰²åçš„æ–‡æœ¬å—åˆ—è¡¨ï¼ˆDocumentsç±»å‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    embedding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">embeddings        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åµŒå…¥æ¨¡å‹å®ä¾‹ï¼ˆç”¨äºå°†æ–‡æœ¬å—è½¬ä¸ºå‘é‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ï¼ˆå¯é€‰ï¼‰ä¿å­˜FAISSæ•°æ®åº“åˆ°æœ¬åœ°ï¼Œåç»­å¯ç›´æ¥åŠ è½½ï¼ˆé¿å…é‡å¤åµŒå…¥ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vector_db.save_local(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;faiss_local_db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¿å­˜åˆ°å½“å‰ç›®å½•çš„faiss_local_dbæ–‡ä»¶å¤¹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ï¼ˆå¯é€‰ï¼‰ä»æœ¬åœ°åŠ è½½FAISSæ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># vector_db = FAISS.load_local(&quot;faiss_local_db&quot;, embeddings)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š<code>from_documents</code>æ–¹æ³•ä¼šéå†<code>split_documents</code>ä¸­çš„æ¯ä¸ªæ–‡æœ¬å—ï¼Œé€šè¿‡<code>embeddings</code>æ¨¡å‹ç”Ÿæˆå‘é‡ï¼Œå†å°† â€œå‘é‡ + åŸå§‹æ–‡æœ¬å—â€ ä¸€èµ·å­˜å…¥ FAISS æ•°æ®åº“ã€‚</li><li><strong>ä¼˜åŠ¿</strong>ï¼šæ— éœ€æ‰‹åŠ¨è°ƒç”¨åµŒå…¥æ¨¡å‹ï¼ŒLangChain è‡ªåŠ¨è¡”æ¥ â€œåµŒå…¥â†’å­˜å‚¨â€ æµç¨‹ï¼Œç®€åŒ–ä»£ç ã€‚</li></ul><h4 id="_3-3-ç›¸ä¼¼æ€§æ£€ç´¢-æ‰¾åˆ°ä¸ç”¨æˆ·é—®é¢˜æœ€ç›¸å…³çš„æ–‡æœ¬å—" tabindex="-1">3.3. ç›¸ä¼¼æ€§æ£€ç´¢ï¼šæ‰¾åˆ°ä¸ç”¨æˆ·é—®é¢˜æœ€ç›¸å…³çš„æ–‡æœ¬å— <a class="header-anchor" href="#_3-3-ç›¸ä¼¼æ€§æ£€ç´¢-æ‰¾åˆ°ä¸ç”¨æˆ·é—®é¢˜æœ€ç›¸å…³çš„æ–‡æœ¬å—" aria-label="Permalink to &quot;3.3. ç›¸ä¼¼æ€§æ£€ç´¢ï¼šæ‰¾åˆ°ä¸ç”¨æˆ·é—®é¢˜æœ€ç›¸å…³çš„æ–‡æœ¬å—&quot;">â€‹</a></h4><p>å‘é‡æ•°æ®åº“çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ â€œç›¸ä¼¼æ€§æ£€ç´¢â€ï¼ŒLangChain é€šè¿‡ â€œæ£€ç´¢å™¨ï¼ˆRetrieverï¼‰â€ å°è£…æ£€ç´¢é€»è¾‘ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰åˆ›å»ºæ£€ç´¢å™¨</p><p>è°ƒç”¨å‘é‡æ•°æ®åº“çš„<code>as_retriever</code>æ–¹æ³•ï¼Œç”Ÿæˆæ£€ç´¢å™¨å®ä¾‹ï¼Œå¯é…ç½® â€œè¿”å›æ–‡æœ¬å—æ•°é‡â€ï¼ˆé»˜è®¤è¿”å› Top 4ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºæ£€ç´¢å™¨ï¼Œè®¾ç½®è¿”å›Top 3ä¸ªæœ€ç›¸å…³çš„æ–‡æœ¬å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retriever </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vector_db.as_retriever(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">search_kwargs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;k&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><code>search_kwargs={&quot;k&quot;: 3}</code>ï¼šæ§åˆ¶æ£€ç´¢ç»“æœæ•°é‡ï¼Œk å€¼è¶Šå¤§ï¼Œè¿”å›çš„ç›¸å…³æ–‡æœ¬å—è¶Šå¤šï¼ˆéœ€å¹³è¡¡ â€œè¦†ç›–åº¦â€ ä¸ â€œç²¾å‡†åº¦â€ï¼Œé€šå¸¸ k=3~5 å³å¯ï¼‰ã€‚</li></ul><p>ï¼ˆ2ï¼‰æ‰§è¡Œç›¸ä¼¼æ€§æ£€ç´¢</p><p>æ£€ç´¢å™¨å®ç°äº† LangChain çš„<code>Runnable</code>æ¥å£ï¼Œå¯ç›´æ¥è°ƒç”¨<code>invoke</code>æ–¹æ³•ä¼ å…¥ç”¨æˆ·é—®é¢˜ï¼Œè¿”å›æœ€ç›¸å…³çš„æ–‡æœ¬å—åˆ—è¡¨ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”¨æˆ·é—®é¢˜ï¼ˆç¤ºä¾‹ï¼šæŸ¥è¯¢ä¸â€œè´¢åŠ¡é¢„ç®—â€ç›¸å…³çš„å†…å®¹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user_query </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;å¦‚ä½•åˆ¶å®šå…¬å¸çš„è´¢åŠ¡é¢„ç®—ï¼Ÿ&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡Œæ£€ç´¢ï¼Œè¿”å›Top 3ä¸ªç›¸å…³æ–‡æœ¬å—ï¼ˆDocumentsåˆ—è¡¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">relevant_chunks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> retriever.invoke(user_query)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹æ£€ç´¢ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ£€ç´¢åˆ°çš„ç›¸å…³æ–‡æœ¬å—æ•°é‡ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(relevant_chunks)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i, chunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> enumerate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(relevant_chunks, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ã€ç›¸å…³æ–‡æœ¬å—</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ã€‘&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å†…å®¹ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chunk.page_content</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŸå§‹æ–‡æœ¬å—å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¥æºï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chunk.metadata</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–‡æœ¬å—å…ƒæ•°æ®ï¼ˆå¦‚æ–‡æ¡£è·¯å¾„ã€é¡µç ï¼Œå¯é€‰ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ï¼ˆ3ï¼‰æ£€ç´¢ç»“æœè¯´æ˜</p><ul><li>ç»“æœæ’åºï¼š<code>relevant_chunks</code>æŒ‰ â€œç›¸ä¼¼åº¦ä»é«˜åˆ°ä½â€ æ’åºï¼Œç¬¬ä¸€ä¸ªæ–‡æœ¬å—ä¸ç”¨æˆ·é—®é¢˜è¯­ä¹‰æœ€æ¥è¿‘ã€‚</li><li>è¯­ä¹‰åŒ¹é…é€»è¾‘ï¼šæ£€ç´¢å™¨é€šè¿‡è®¡ç®— â€œç”¨æˆ·é—®é¢˜å‘é‡â€ ä¸ â€œæ•°æ®åº“ä¸­æ‰€æœ‰æ–‡æœ¬å—å‘é‡â€ çš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œç­›é€‰å‡ºç›¸ä¼¼åº¦æœ€é«˜çš„æ–‡æœ¬å—ï¼Œå³ä½¿å…³é”®è¯ä¸å®Œå…¨åŒ¹é…ï¼ˆå¦‚ç”¨æˆ·é—® â€œè´¢åŠ¡é¢„ç®—â€ï¼Œå¯åŒ¹é… â€œé¢„ç®—æ§åˆ¶ä¸è´¢åŠ¡è§„åˆ’â€ ç›¸å…³æ–‡æœ¬ï¼‰ã€‚</li></ul><h4 id="_3-4-å®Œæ•´ä»£ç " tabindex="-1">3.4. å®Œæ•´ä»£ç  <a class="header-anchor" href="#_3-4-å®Œæ•´ä»£ç " aria-label="Permalink to &quot;3.4. å®Œæ•´ä»£ç &quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- 1. å®‰è£…ä¾èµ–ï¼ˆä»…é¦–æ¬¡æ‰§è¡Œéœ€è¿è¡Œï¼‰ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…FAISSå‘é‡æ•°æ®åº“çš„CPUç‰ˆæœ¬ï¼ˆç”¨äºæœ¬åœ°å­˜å‚¨æ–‡æœ¬å‘é‡ï¼Œè½»é‡æ˜“ä¸Šæ‰‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># !pip install faiss-cpu</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- 2. å¯¼å…¥æ ¸å¿ƒæ¨¡å—ï¼ˆå¯¹åº”RAGå„ç¯èŠ‚ç»„ä»¶ï¼‰ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. æ–‡æ¡£åŠ è½½å™¨ï¼šä»æœ¬åœ°åŠ è½½TXTçº¯æ–‡æœ¬æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.document_loaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. å‘é‡æ•°æ®åº“ï¼šFAISSï¼Œç”¨äºå­˜å‚¨æ–‡æœ¬å—å‘é‡å¹¶æ”¯æŒç›¸ä¼¼æ€§æ£€ç´¢</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.vectorstores </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FAISS</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. åµŒå…¥æ¨¡å‹ï¼šOpenAI Embeddingsï¼Œç”¨äºå°†æ–‡æœ¬å—è½¬åŒ–ä¸ºè¯­ä¹‰å‘é‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai.embeddings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. æ–‡æœ¬åˆ†å‰²å™¨ï¼šé€’å½’å­—ç¬¦åˆ†å‰²å™¨ï¼Œå°†é•¿æ–‡æœ¬åˆ‡åˆ†ä¸ºè¯­ä¹‰å®Œæ•´çš„çŸ­æ–‡æœ¬å—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_text_splitters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RecursiveCharacterTextSplitter</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- 3. æ­¥éª¤1ï¼šåŠ è½½æœ¬åœ°TXTæ–‡æ¡£ï¼ˆRAG-æ•°æ®å‡†å¤‡ï¼‰ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–TextLoaderï¼Œä¼ å…¥TXTæ–‡ä»¶è·¯å¾„ï¼ˆéœ€ç¡®ä¿æ–‡ä»¶åœ¨å½“å‰ä»£ç è¿è¡Œç›®å½•ä¸‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½œç”¨ï¼šå°†TXTæ–‡ä»¶å†…å®¹åŠ è½½ä¸ºLangChainæ ‡å‡†çš„Documentå¯¹è±¡ï¼ˆå«æ–‡æœ¬å†…å®¹å’Œå…ƒæ•°æ®ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./demo2.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡ŒåŠ è½½æ“ä½œï¼Œè¿”å›Documentå¯¹è±¡åˆ—è¡¨ï¼ˆ1ä¸ªDocumentå¯¹åº”æ•´ä¸ªTXTæ–‡ä»¶ï¼Œåç»­ä¼šåˆ†å‰²ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loader.load()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- 4. æ­¥éª¤2ï¼šæ–‡æœ¬åˆ†å‰²ï¼ˆRAG-æ•°æ®å¤„ç†ï¼‰ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–é€’å½’å­—ç¬¦åˆ†å‰²å™¨ï¼Œé…ç½®åˆ†å‰²å‚æ•°ï¼ˆé€‚é…ä¸­æ–‡æ–‡æœ¬ç‰¹æ€§ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text_splitter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RecursiveCharacterTextSplitter(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chunk_size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å•ä¸ªæ–‡æœ¬å—çš„æœ€å¤§é•¿åº¦ï¼ˆå•ä½ï¼šå­—ç¬¦ï¼‰ï¼Œé¿å…è¶…LLMä¸Šä¸‹æ–‡çª—å£</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chunk_overlap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç›¸é‚»æ–‡æœ¬å—çš„é‡å é•¿åº¦ï¼ˆ40å­—ç¬¦ï¼‰ï¼Œä¿æŒè¯­ä¹‰è¿è´¯æ€§ï¼ˆå¦‚é¿å…åˆ†å‰²åœ¨å¥å­ä¸­é—´ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    separators</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼Œ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ã€&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸­æ–‡é€‚é…åˆ†å‰²ç¬¦ä¼˜å…ˆçº§</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # åˆ†å‰²é€»è¾‘ï¼šä¼˜å…ˆæŒ‰æ®µè½ï¼ˆ\n\nï¼‰â†’æ¢è¡Œï¼ˆ\nï¼‰â†’å¥å­ç»“å°¾ï¼ˆã€‚ï¼ï¼Ÿï¼‰â†’çŸ­å¥åˆ†éš”ï¼ˆï¼Œã€ï¼‰â†’å…œåº•ï¼ˆä»»æ„ä½ç½®ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡Œåˆ†å‰²ï¼šå°†åŠ è½½çš„Documentåˆ—è¡¨ï¼ˆæ•´ä¸ªTXTï¼‰åˆ‡åˆ†ä¸ºå¤šä¸ªçŸ­æ–‡æœ¬å—Document</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºtextsä¸ºåˆ†å‰²åçš„Documentåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªè¯­ä¹‰å®Œæ•´çš„çŸ­æ–‡æœ¬å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">texts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text_splitter.split_documents(docs)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- 5. æ­¥éª¤3ï¼šæ–‡æœ¬åµŒå…¥ä¸å‘é‡å­˜å‚¨ï¼ˆRAG-æ•°æ®å­˜å‚¨ï¼‰ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–OpenAIåµŒå…¥æ¨¡å‹ï¼ˆéœ€ç¡®ä¿ç¯å¢ƒå˜é‡å·²é…ç½®OPENAI_API_KEYï¼Œæˆ–é€šè¿‡openai_api_keyå‚æ•°ä¼ å…¥ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½œç”¨ï¼šå°†æ–‡æœ¬å—è½¬åŒ–ä¸ºå«è¯­ä¹‰ä¿¡æ¯çš„å‘é‡ï¼ˆé»˜è®¤text-embedding-3-smallæ¨¡å‹ï¼Œ1536ç»´å‘é‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">embeddings_model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. å°†åˆ†å‰²åçš„æ–‡æœ¬å—ï¼ˆtextsï¼‰é€šè¿‡åµŒå…¥æ¨¡å‹ç”Ÿæˆå‘é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. è‡ªåŠ¨å°†â€œå‘é‡+åŸå§‹æ–‡æœ¬å—â€å­˜å…¥FAISSå‘é‡æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºdbä¸ºFAISSæ•°æ®åº“å®ä¾‹ï¼Œåç»­å¯ç”¨äºç›¸ä¼¼æ€§æ£€ç´¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FAISS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.from_documents(texts, embeddings_model)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- 6. æ­¥éª¤4ï¼šåˆ›å»ºæ£€ç´¢å™¨ï¼ˆRAG-æ£€ç´¢å‡†å¤‡ï¼‰ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°†FAISSæ•°æ®åº“åŒ…è£…ä¸ºæ£€ç´¢å™¨ï¼ˆRetrieverï¼‰ï¼Œç®€åŒ–ç›¸ä¼¼æ€§æ£€ç´¢è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ£€ç´¢å™¨æ˜¯LangChainçš„æ ‡å‡†Runnableç»„ä»¶ï¼Œæ”¯æŒinvokeæ–¹æ³•å¿«é€ŸæŸ¥è¯¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retriever </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.as_retriever()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯é€šè¿‡search_kwargsé…ç½®æ£€ç´¢å‚æ•°ï¼Œå¦‚search_kwargs={&quot;k&quot;:3}ï¼ˆè¿”å›Top3ç›¸å…³æ–‡æœ¬å—ï¼Œé»˜è®¤k=4ï¼‰</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- 7. æ­¥éª¤5ï¼šç›¸ä¼¼æ€§æ£€ç´¢ï¼ˆRAG-æ£€ç´¢æ‰§è¡Œï¼‰ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬ä¸€æ¬¡æ£€ç´¢ï¼šæŸ¥è¯¢â€œå¢æµ®å®«è¿™ä¸ªåå­—æ€ä¹ˆæ¥çš„ï¼Ÿâ€</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># invokeæ–¹æ³•ä¼šè‡ªåŠ¨å®Œæˆï¼šé—®é¢˜â†’å‘é‡è½¬åŒ–â†’FAISSç›¸ä¼¼æ€§è®¡ç®—â†’è¿”å›TopNç›¸å…³æ–‡æœ¬å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retrieved_docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> retriever.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¢æµ®å®«è¿™ä¸ªåå­—æ€ä¹ˆæ¥çš„ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰“å°ç¬¬ä¸€ä¸ªæœ€ç›¸å…³æ–‡æœ¬å—çš„å†…å®¹ï¼ˆpage_contentä¸ºæ–‡æœ¬å—æ ¸å¿ƒå†…å®¹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ã€æ£€ç´¢ç»“æœ1ï¼šå¢æµ®å®«åå­—ç”±æ¥ã€‘&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(retrieved_docs[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].page_content)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ†éš”çº¿ï¼Œä¾¿äºåŒºåˆ†ä¸åŒæŸ¥è¯¢ç»“æœ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬äºŒæ¬¡æ£€ç´¢ï¼šæŸ¥è¯¢â€œå¢æµ®å®«åœ¨å“ªå¹´è¢«å‘½åä¸ºä¸­å¤®è‰ºæœ¯åšç‰©é¦†â€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retrieved_docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> retriever.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¢æµ®å®«åœ¨å“ªå¹´è¢«å‘½åä¸ºä¸­å¤®è‰ºæœ¯åšç‰©é¦†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰“å°ç¬¬ä¸€ä¸ªæœ€ç›¸å…³æ–‡æœ¬å—çš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ã€æ£€ç´¢ç»“æœ2ï¼šå¢æµ®å®«å‘½åä¸ºä¸­å¤®è‰ºæœ¯åšç‰©é¦†çš„å¹´ä»½ã€‘&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(retrieved_docs[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].page_content)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><h3 id="_4ã€å½“å‰-rag-æµç¨‹è¿›å±•ä¸åç»­è¡”æ¥" tabindex="-1">4ã€å½“å‰ RAG æµç¨‹è¿›å±•ä¸åç»­è¡”æ¥ <a class="header-anchor" href="#_4ã€å½“å‰-rag-æµç¨‹è¿›å±•ä¸åç»­è¡”æ¥" aria-label="Permalink to &quot;4ã€å½“å‰ RAG æµç¨‹è¿›å±•ä¸åç»­è¡”æ¥&quot;">â€‹</a></h3><p>æˆªè‡³ç›®å‰ï¼Œå·²å®Œæˆ RAG çš„å‰ä¸¤æ­¥æ ¸å¿ƒæµç¨‹ï¼š</p><ol><li><strong>æ•°æ®å‡†å¤‡</strong>ï¼šæ–‡æ¡£åŠ è½½â†’æ–‡æœ¬åˆ†å‰²â†’æ–‡æœ¬åµŒå…¥â†’å‘é‡å­˜å‚¨ï¼ˆå­˜å…¥ FAISSï¼‰ï¼›</li><li><strong>ç›¸ä¼¼æ£€ç´¢</strong>ï¼šç”¨æˆ·é—®é¢˜â†’é—®é¢˜åµŒå…¥â†’å‘é‡æ•°æ®åº“ç›¸ä¼¼æ€§æœç´¢â†’è¿”å›ç›¸å…³æ–‡æœ¬å—ã€‚</li></ol><p>ä¸‹ä¸€æ­¥éœ€å®Œæˆ RAG çš„æœ€åä¸€æ­¥ï¼š<strong>ç»“åˆç”Ÿæˆ</strong>â€”â€” å°† â€œç”¨æˆ·é—®é¢˜ + ç›¸å…³æ–‡æœ¬å—â€ åˆå¹¶ä¸ºæç¤ºï¼Œä¼ ç»™ LLM ç”ŸæˆåŸºäºçŸ¥è¯†åº“çš„ç²¾å‡†å›ç­”ã€‚æ­¤å¤–ï¼Œè‹¥éœ€å®ç° â€œå¸¦è®°å¿†çš„è¿ç»­å¯¹è¯â€ï¼Œè¿˜éœ€å°†æ£€ç´¢å™¨ä¸ â€œå¯¹è¯è®°å¿†â€â€œæç¤ºæ¨¡æ¿â€ ç»“åˆï¼Œä½† LangChain æä¾›äº†æ›´ç®€åŒ–çš„æ–¹æ¡ˆï¼ˆå¦‚<code>RetrievalChain</code>ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨æ‹¼æ¥æµç¨‹ã€‚</p><h2 id="å…­ã€retrieval-chain-å¼€ç®±å³ç”¨çš„æ£€ç´¢å¢å¼ºå¯¹è¯é“¾" tabindex="-1">å…­ã€Retrieval Chain å¼€ç®±å³ç”¨çš„æ£€ç´¢å¢å¼ºå¯¹è¯é“¾ <a class="header-anchor" href="#å…­ã€retrieval-chain-å¼€ç®±å³ç”¨çš„æ£€ç´¢å¢å¼ºå¯¹è¯é“¾" aria-label="Permalink to &quot;å…­ã€Retrieval Chain å¼€ç®±å³ç”¨çš„æ£€ç´¢å¢å¼ºå¯¹è¯é“¾&quot;">â€‹</a></h2><p>åœ¨å®Œæˆ â€œæ–‡æ¡£åŠ è½½â†’åˆ†å‰²â†’åµŒå…¥â†’å‘é‡å­˜å‚¨â†’ç›¸ä¼¼æ£€ç´¢â€ åï¼Œæ ¸å¿ƒéœ€æ±‚æ˜¯ â€œè®© AI ç»“åˆæ£€ç´¢åˆ°çš„å¤–éƒ¨æ–‡æ¡£ + å¯¹è¯è®°å¿†ç”Ÿæˆå›ç­”â€ã€‚LangChain æä¾›çš„<code>Conversational Retrieval Chain</code>ï¼ˆæ£€ç´¢å¢å¼ºå¯¹è¯é“¾ï¼‰å·²å°è£…å¥½å…¨æµç¨‹ï¼Œæ— éœ€æ‰‹åŠ¨æ‹¼æ¥ â€œé—®é¢˜ + æ–‡æ¡£ + è®°å¿†â€ï¼Œä»¥ä¸‹ä»<strong>æ ¸å¿ƒç»„ä»¶ã€é“¾åˆ›å»ºã€ä½¿ç”¨æ–¹æ³•ã€å®šåˆ¶åŒ–åŠŸèƒ½</strong>å››æ–¹é¢æ•´ç†ï¼š</p><h3 id="_1ã€conversational-retrieval-chain-çš„æ ¸å¿ƒä»·å€¼" tabindex="-1">1ã€Conversational Retrieval Chain çš„æ ¸å¿ƒä»·å€¼ <a class="header-anchor" href="#_1ã€conversational-retrieval-chain-çš„æ ¸å¿ƒä»·å€¼" aria-label="Permalink to &quot;1ã€Conversational Retrieval Chain çš„æ ¸å¿ƒä»·å€¼&quot;">â€‹</a></h3><p>è¯¥é“¾æ˜¯ RAG ä¸ â€œå¯¹è¯è®°å¿†â€ çš„ç»“åˆä½“ï¼Œè§£å†³ä¸¤å¤§å…³é”®é—®é¢˜ï¼š</p><ol><li><strong>æ£€ç´¢å¢å¼º</strong>ï¼šè‡ªåŠ¨å°†ç”¨æˆ·é—®é¢˜å¯¹åº”çš„ â€œç›¸å…³æ–‡æ¡£ç‰‡æ®µâ€ ä½œä¸ºä¸Šä¸‹æ–‡ä¼ ç»™ AIï¼Œé¿å… AI ä¾èµ–å›ºæœ‰çŸ¥è¯†ï¼ˆå‡å°‘å¹»è§‰ï¼‰ï¼›</li><li><strong>å¯¹è¯è®°å¿†</strong>ï¼šç»´æŒå¤šè½®å¯¹è¯è¿è´¯æ€§ï¼ŒAI èƒ½å…³è”å†å²å¯¹è¯ï¼ˆå¦‚ç”¨æˆ·è¿½é—® â€œå®ƒçš„å…·ä½“æ—¶é—´â€ï¼ŒAI çŸ¥é“ â€œå®ƒâ€ æŒ‡ä»£ä¸Šä¸€è½®æåˆ°çš„ â€œå¢æµ®å®«å‘½åäº‹ä»¶â€ï¼‰ã€‚</li></ol><p>ç›¸æ¯”æ™®é€š<code>ConversationChain</code>ï¼ˆä»…å¸¦è®°å¿†ï¼‰æˆ–<code>RetrievalChain</code>ï¼ˆä»…å¸¦æ£€ç´¢ï¼‰ï¼Œå®ƒåŒæ—¶å…·å¤‡ â€œæ£€ç´¢å¤–éƒ¨çŸ¥è¯†â€ å’Œ â€œè®°å¿†ä¸Šä¸‹æ–‡â€ çš„èƒ½åŠ›ï¼Œæ˜¯å®ç° â€œå¸¦çŸ¥è¯†åº“çš„è¿ç»­å¯¹è¯ AIâ€ çš„æ ¸å¿ƒå·¥å…·ã€‚</p><h3 id="_2ã€é“¾åˆ›å»ºå‰çš„æ ¸å¿ƒç»„ä»¶å‡†å¤‡" tabindex="-1">2ã€é“¾åˆ›å»ºå‰çš„æ ¸å¿ƒç»„ä»¶å‡†å¤‡ <a class="header-anchor" href="#_2ã€é“¾åˆ›å»ºå‰çš„æ ¸å¿ƒç»„ä»¶å‡†å¤‡" aria-label="Permalink to &quot;2ã€é“¾åˆ›å»ºå‰çš„æ ¸å¿ƒç»„ä»¶å‡†å¤‡&quot;">â€‹</a></h3><p>éœ€æå‰å‡†å¤‡ 3 ä¸ªå…³é”®ç»„ä»¶ï¼ˆå‡ä¸ºå‰åºæ­¥éª¤å·²æ¶‰åŠçš„å†…å®¹ï¼Œå¯ç›´æ¥å¤ç”¨ï¼‰ï¼š</p><table tabindex="0"><thead><tr><th>ç»„ä»¶ç±»å‹</th><th>ä½œç”¨</th><th>å®ç°æ–¹å¼ï¼ˆç¤ºä¾‹ï¼‰</th></tr></thead><tbody><tr><td><strong>èŠå¤©æ¨¡å‹ï¼ˆLLMï¼‰</strong></td><td>ç”Ÿæˆå›ç­”çš„æ ¸å¿ƒï¼Œéœ€æ”¯æŒå¯¹è¯æ ¼å¼</td><td>ä½¿ç”¨<code>ChatOpenAI</code>ï¼ˆå¦‚ GPT-3.5/4ï¼‰</td></tr><tr><td><strong>æ£€ç´¢å™¨ï¼ˆRetrieverï¼‰</strong></td><td>ä»å‘é‡æ•°æ®åº“ä¸­æ£€ç´¢ä¸é—®é¢˜ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µ</td><td>ä» FAISS/Chroma ç­‰å‘é‡æ•°æ®åº“é€šè¿‡<code>as_retriever()</code>ç”Ÿæˆ</td></tr><tr><td><strong>å¯¹è¯è®°å¿†ï¼ˆMemoryï¼‰</strong></td><td>å‚¨å­˜å†å²å¯¹è¯ï¼Œç»´æŒå¤šè½®è¿è´¯æ€§</td><td>ä½¿ç”¨<code>ConversationBufferMemory</code>ç­‰è®°å¿†ç±»å‹ï¼Œéœ€ç‰¹æ®Šé…ç½®</td></tr></tbody></table><h4 id="å…³é”®-è®°å¿†ç»„ä»¶çš„ç‰¹æ®Šé…ç½®" tabindex="-1">å…³é”®ï¼šè®°å¿†ç»„ä»¶çš„ç‰¹æ®Šé…ç½® <a class="header-anchor" href="#å…³é”®-è®°å¿†ç»„ä»¶çš„ç‰¹æ®Šé…ç½®" aria-label="Permalink to &quot;å…³é”®ï¼šè®°å¿†ç»„ä»¶çš„ç‰¹æ®Šé…ç½®&quot;">â€‹</a></h4><p><code>Conversational Retrieval Chain</code>å¯¹è®°å¿†çš„<strong>å˜é‡åæœ‰å›ºå®šè¦æ±‚</strong>ï¼Œéœ€ç¡®ä¿ï¼š</p><ul><li><code>memory_key=&quot;chat_history&quot;</code>ï¼šé“¾é»˜è®¤é€šè¿‡<code>chat_history</code>é”®è¯»å– / æ›´æ–°å†å²å¯¹è¯ï¼Œè®°å¿†å®ä¾‹çš„<code>memory_key</code>å¿…é¡»ä¸æ­¤ä¸€è‡´ï¼›</li><li><code>return_messages=True</code>ï¼šè®°å¿†éœ€å‚¨å­˜ä¸ºæ¶ˆæ¯å¯¹è±¡åˆ—è¡¨ï¼ˆè€Œéå­—ç¬¦ä¸²ï¼‰ï¼Œç¡®ä¿é“¾èƒ½æ­£ç¡®è§£æå†å²å¯¹è¯ï¼›</li><li><code>output_key=&quot;answer&quot;</code>ï¼šé“¾é»˜è®¤å°† AI çš„å›ç­”å­˜å…¥<code>answer</code>é”®ï¼Œè®°å¿†éœ€æŒ‡å®šè¯¥é”®ä»¥æ›´æ–°å¯¹è¯å†å²ã€‚</li></ul><p>ç¤ºä¾‹ä»£ç ï¼ˆåˆå§‹åŒ–è®°å¿†ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–ç¬¦åˆé“¾è¦æ±‚çš„è®°å¿†å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chat_history&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¿…é¡»ä¸º&quot;chat_history&quot;ï¼Œä¸é“¾çš„å˜é‡ååŒ¹é…</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    return_messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‚¨å­˜ä¸ºæ¶ˆæ¯åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    output_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;answer&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # é“¾çš„è¾“å‡ºç»“æœä¸­ï¼ŒAIå›ç­”å¯¹åº”&quot;answer&quot;é”®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3ã€åˆ›å»º-conversational-retrieval-chain" tabindex="-1">3ã€åˆ›å»º Conversational Retrieval Chain <a class="header-anchor" href="#_3ã€åˆ›å»º-conversational-retrieval-chain" aria-label="Permalink to &quot;3ã€åˆ›å»º Conversational Retrieval Chain&quot;">â€‹</a></h3><h4 id="_3-1-å¯¼å…¥æ ¸å¿ƒæ¨¡å—" tabindex="-1">3.1. å¯¼å…¥æ ¸å¿ƒæ¨¡å— <a class="header-anchor" href="#_3-1-å¯¼å…¥æ ¸å¿ƒæ¨¡å—" aria-label="Permalink to &quot;3.1. å¯¼å…¥æ ¸å¿ƒæ¨¡å—&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¼å…¥é“¾ã€èŠå¤©æ¨¡å‹ã€è®°å¿†ï¼ˆå‰åºæ­¥éª¤å·²å¯¼å…¥æ£€ç´¢å™¨å’Œå‘é‡æ•°æ®åº“ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationalRetrievalChain</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.document_loaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.vectorstores </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FAISS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai.embeddings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_text_splitters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RecursiveCharacterTextSplitter</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-2-åˆå§‹åŒ–å…¶ä»–ç»„ä»¶-å¤ç”¨å‰åºä»£ç " tabindex="-1">3.2. åˆå§‹åŒ–å…¶ä»–ç»„ä»¶ï¼ˆå¤ç”¨å‰åºä»£ç ï¼‰ <a class="header-anchor" href="#_3-2-åˆå§‹åŒ–å…¶ä»–ç»„ä»¶-å¤ç”¨å‰åºä»£ç " aria-label="Permalink to &quot;3.2. åˆå§‹åŒ–å…¶ä»–ç»„ä»¶ï¼ˆå¤ç”¨å‰åºä»£ç ï¼‰&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- æ­¥éª¤1ï¼šåŠ è½½æ–‡æ¡£ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–æ–‡æœ¬åŠ è½½å™¨ï¼ŒæŒ‡å®šè¦åŠ è½½çš„TXTæ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./demo2.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡ŒåŠ è½½ï¼Œè¿”å›åŒ…å«æ–‡æ¡£å†…å®¹çš„åˆ—è¡¨ï¼ˆæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªDocumentå¯¹è±¡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loader.load()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- æ­¥éª¤2ï¼šæ–‡æœ¬åˆ†å‰² --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–é€’å½’å­—ç¬¦åˆ†å‰²å™¨ï¼Œé…ç½®ä¸­æ–‡é€‚é…å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text_splitter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RecursiveCharacterTextSplitter(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chunk_size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å•ä¸ªæ–‡æœ¬å—æœ€å¤§é•¿åº¦ï¼ˆ500å­—ç¬¦ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chunk_overlap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç›¸é‚»æ–‡æœ¬å—é‡å é•¿åº¦ï¼ˆ40å­—ç¬¦ï¼Œä¿æŒä¸Šä¸‹æ–‡è¿è´¯ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    separators</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼Œ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ã€&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸­æ–‡åˆ†å‰²ç¬¦ä¼˜å…ˆçº§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°†åŠ è½½çš„æ–‡æ¡£åˆ†å‰²ä¸ºå¤šä¸ªçŸ­æ–‡æœ¬å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">texts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text_splitter.split_documents(docs)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- æ­¥éª¤3ï¼šåˆ›å»ºå‘é‡æ•°æ®åº“ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–OpenAIåµŒå…¥æ¨¡å‹ï¼ˆç”¨äºå°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">embeddings_model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°†åˆ†å‰²åçš„æ–‡æœ¬å—è½¬æ¢ä¸ºå‘é‡å¹¶å­˜å‚¨åˆ°FAISSæ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FAISS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.from_documents(texts, embeddings_model)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- æ­¥éª¤4ï¼šåˆ›å»ºæ£€ç´¢å™¨ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°†å‘é‡æ•°æ®åº“è½¬æ¢ä¸ºæ£€ç´¢å™¨ï¼Œç”¨äºåç»­æŸ¥è¯¢ç›¸å…³æ–‡æœ¬å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retriever </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.as_retriever()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- æ­¥éª¤5ï¼šåˆå§‹åŒ–æ ¸å¿ƒç»„ä»¶ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–èŠå¤©æ¨¡å‹ï¼ˆä½¿ç”¨GPT-3.5-turboï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–å¯¹è¯è®°å¿†ï¼ˆé€‚é…ConversationalRetrievalChainçš„è¦æ±‚ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    return_messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä»¥æ¶ˆæ¯å¯¹è±¡åˆ—è¡¨å½¢å¼å­˜å‚¨è®°å¿†</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;chat_history&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è®°å¿†åœ¨é“¾ä¸­çš„å˜é‡åï¼ˆéœ€ä¸é“¾è¦æ±‚ä¸€è‡´ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    output_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;answer&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # é“¾è¾“å‡ºä¸­AIå›ç­”çš„é”®åï¼ˆéœ€ä¸é“¾è¦æ±‚ä¸€è‡´ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h4 id="_3-3-è°ƒç”¨from-llmæ–¹æ³•åˆ›å»ºé“¾" tabindex="-1">3.3. è°ƒç”¨<code>from_llm</code>æ–¹æ³•åˆ›å»ºé“¾ <a class="header-anchor" href="#_3-3-è°ƒç”¨from-llmæ–¹æ³•åˆ›å»ºé“¾" aria-label="Permalink to &quot;3.3. è°ƒç”¨`from_llm`æ–¹æ³•åˆ›å»ºé“¾&quot;">â€‹</a></h4><p>é“¾çš„åˆ›å»ºé€šè¿‡<code>ConversationalRetrievalChain.from_llm()</code>å®ç°ï¼Œå‚æ•°éœ€åŒ…å« â€œæ¨¡å‹ã€æ£€ç´¢å™¨ã€è®°å¿†â€ ä¸‰å¤§æ ¸å¿ƒç»„ä»¶ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºæ£€ç´¢å¢å¼ºå¯¹è¯é“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qa_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationalRetrievalChain.from_llm(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm,                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠå¤©æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    retriever</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retriever,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–‡æ¡£æ£€ç´¢å™¨</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¹è¯è®°å¿†</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    verbose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # å¯é€‰ï¼šTrueåˆ™æ‰“å°é“¾çš„è¿è¡Œæ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_4ã€ä½¿ç”¨é“¾å®ç°-å¸¦è®°å¿†çš„-rag-å¯¹è¯" tabindex="-1">4ã€ä½¿ç”¨é“¾å®ç° â€œå¸¦è®°å¿†çš„ RAG å¯¹è¯â€ <a class="header-anchor" href="#_4ã€ä½¿ç”¨é“¾å®ç°-å¸¦è®°å¿†çš„-rag-å¯¹è¯" aria-label="Permalink to &quot;4ã€ä½¿ç”¨é“¾å®ç° â€œå¸¦è®°å¿†çš„ RAG å¯¹è¯â€&quot;">â€‹</a></h3><h4 id="_4-1-æ ¸å¿ƒè°ƒç”¨æ–¹å¼-invokeæ–¹æ³•" tabindex="-1">4.1. æ ¸å¿ƒè°ƒç”¨æ–¹å¼ï¼š<code>invoke</code>æ–¹æ³• <a class="header-anchor" href="#_4-1-æ ¸å¿ƒè°ƒç”¨æ–¹å¼-invokeæ–¹æ³•" aria-label="Permalink to &quot;4.1. æ ¸å¿ƒè°ƒç”¨æ–¹å¼ï¼š`invoke`æ–¹æ³•&quot;">â€‹</a></h4><p>é“¾çš„è¾“å…¥æ˜¯<strong>å« â€œquestionâ€ é”®çš„å­—å…¸</strong>ï¼ˆ<code>question</code>å¯¹åº”ç”¨æˆ·å½“å‰é—®é¢˜ï¼‰ï¼Œè¾“å‡ºæ˜¯å« â€œanswerâ€â€œchat_historyâ€ ç­‰é”®çš„å­—å…¸ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬ä¸€è½®å¯¹è¯ï¼šç”¨æˆ·æé—®ï¼ˆå…³äºå¤–éƒ¨æ–‡æ¡£çš„é—®é¢˜ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user_question1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;å¢æµ®å®«è¿™ä¸ªåå­—æ€ä¹ˆæ¥çš„ï¼Ÿ&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qa_chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chat_history&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: memory, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: user_question1})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹è¾“å‡ºç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·é—®é¢˜1ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response1[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;question&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AIå›ç­”1ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response1[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;answer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬äºŒè½®å¯¹è¯ï¼šè¿½é—®ï¼ˆéªŒè¯è®°å¿†ï¼Œä¾èµ–ä¸Šä¸€è½®ä¸Šä¸‹æ–‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># user_question2 = &quot;å¯¹åº”çš„æ‹‰ä¸è¯­æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user_question2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;å®ƒåœ¨å“ªå¹´è¢«å‘½åä¸ºä¸­å¤®è‰ºæœ¯åšç‰©é¦†ï¼Ÿ&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # â€œå®ƒâ€æŒ‡ä»£å¢æµ®å®«</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qa_chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chat_history&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: memory, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: user_question2})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·é—®é¢˜2ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response2[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;question&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AIå›ç­”2ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response2[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;answer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å†å²å¯¹è¯ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response2[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;chat_history&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹å‚¨å­˜çš„å†å²å¯¹è¯</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="_4-2-å…³é”®é€»è¾‘è¯´æ˜" tabindex="-1">4.2. å…³é”®é€»è¾‘è¯´æ˜ <a class="header-anchor" href="#_4-2-å…³é”®é€»è¾‘è¯´æ˜" aria-label="Permalink to &quot;4.2. å…³é”®é€»è¾‘è¯´æ˜&quot;">â€‹</a></h4><ul><li><strong>æ£€ç´¢è‡ªåŠ¨è§¦å‘</strong>ï¼šè°ƒç”¨<code>invoke</code>æ—¶ï¼Œé“¾ä¼šå…ˆå°†<code>question</code>ä¼ å…¥æ£€ç´¢å™¨ï¼Œè·å–ç›¸å…³æ–‡æ¡£ç‰‡æ®µï¼Œå†å°† â€œå†å²å¯¹è¯ï¼ˆchat_historyï¼‰+ é—®é¢˜ï¼ˆquestionï¼‰+ ç›¸å…³æ–‡æ¡£â€ åˆå¹¶ä¸ºæç¤ºä¼ ç»™ LLMï¼›</li><li><strong>è®°å¿†è‡ªåŠ¨æ›´æ–°</strong>ï¼šæ¯è½®å¯¹è¯åï¼Œé“¾ä¼šå°† â€œç”¨æˆ·é—®é¢˜ + AI å›ç­”â€ è‡ªåŠ¨å­˜å…¥<code>memory</code>ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨<code>save_context</code>ï¼›</li><li><strong>ä¸Šä¸‹æ–‡è¿è´¯æ€§</strong>ï¼šç¬¬äºŒè½®è¿½é—®ä¸­ï¼ŒAI èƒ½è¯†åˆ« â€œå®ƒâ€ æŒ‡ä»£ â€œå¢æµ®å®«â€ï¼Œè¯æ˜è®°å¿†ç”Ÿæ•ˆï¼›åŒæ—¶å›ç­”åŸºäºæ£€ç´¢åˆ°çš„æ–‡æ¡£ç‰‡æ®µï¼Œè¯æ˜ RAG ç”Ÿæ•ˆã€‚</li></ul><h3 id="_5ã€é“¾çš„å®šåˆ¶åŒ–åŠŸèƒ½" tabindex="-1">5ã€é“¾çš„å®šåˆ¶åŒ–åŠŸèƒ½ <a class="header-anchor" href="#_5ã€é“¾çš„å®šåˆ¶åŒ–åŠŸèƒ½" aria-label="Permalink to &quot;5ã€é“¾çš„å®šåˆ¶åŒ–åŠŸèƒ½&quot;">â€‹</a></h3><h4 id="_5-1-è¿”å›å‚è€ƒæ–‡æ¡£ç‰‡æ®µ-éªŒè¯-ai-å›ç­”å¯ä¿¡åº¦" tabindex="-1">5.1. è¿”å›å‚è€ƒæ–‡æ¡£ç‰‡æ®µï¼ˆéªŒè¯ AI å›ç­”å¯ä¿¡åº¦ï¼‰ <a class="header-anchor" href="#_5-1-è¿”å›å‚è€ƒæ–‡æ¡£ç‰‡æ®µ-éªŒè¯-ai-å›ç­”å¯ä¿¡åº¦" aria-label="Permalink to &quot;5.1. è¿”å›å‚è€ƒæ–‡æ¡£ç‰‡æ®µï¼ˆéªŒè¯ AI å›ç­”å¯ä¿¡åº¦ï¼‰&quot;">â€‹</a></h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé“¾ä»…è¿”å› AI çš„å›ç­”ï¼Œè‹¥éœ€éªŒè¯ â€œå›ç­”æ˜¯å¦æ¥è‡ªå¤–éƒ¨æ–‡æ¡£â€ï¼ˆé¿å…å¹»è§‰ï¼‰ï¼Œå¯åœ¨åˆ›å»ºé“¾æ—¶è®¾ç½®<code>return_source_documents=True</code>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºé“¾æ—¶å¼€å¯â€œè¿”å›å‚è€ƒæ–‡æ¡£â€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qa_chain_with_source </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationalRetrievalChain.from_llm(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    retriever</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retriever,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    return_source_documents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å¼€å¯åï¼Œè¾“å‡ºä¼šåŒ…å«&quot;source_documents&quot;é”®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è°ƒç”¨å¹¶æŸ¥çœ‹å‚è€ƒæ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qa_chain_with_source.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chat_history&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: memory, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¢æµ®å®«åå­—æ€ä¹ˆæ¥çš„ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AIå›ç­”ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;answer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ã€å‚è€ƒæ–‡æ¡£ç‰‡æ®µï¼ˆTop1ç›¸å…³ï¼‰ã€‘&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;source_documents&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].page_content)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰“å°æœ€ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ–‡æ¡£æ¥æºï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source_documents&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].metadata</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰“å°æ–‡æ¡£å…ƒæ•°æ®ï¼ˆå¦‚è·¯å¾„ã€é¡µç ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>ä½œç”¨ï¼š<code>source_documents</code>æ˜¯æ£€ç´¢åˆ°çš„ç›¸å…³æ–‡æ¡£ç‰‡æ®µåˆ—è¡¨ï¼ˆæŒ‰ç›¸ä¼¼åº¦æ’åºï¼‰ï¼Œå¯ç›´æ¥å®šä½ AI å›ç­”çš„ä¿¡æ¯æ¥æºï¼ŒéªŒè¯å›ç­”çœŸå®æ€§ã€‚</li></ul><h4 id="_5-2-æ½œåœ¨é—®é¢˜-æ–‡æ¡£ç‰‡æ®µè¿‡é•¿å¯¼è‡´è¶…çª—å£" tabindex="-1">5.2. æ½œåœ¨é—®é¢˜ï¼šæ–‡æ¡£ç‰‡æ®µè¿‡é•¿å¯¼è‡´è¶…çª—å£ <a class="header-anchor" href="#_5-2-æ½œåœ¨é—®é¢˜-æ–‡æ¡£ç‰‡æ®µè¿‡é•¿å¯¼è‡´è¶…çª—å£" aria-label="Permalink to &quot;5.2. æ½œåœ¨é—®é¢˜ï¼šæ–‡æ¡£ç‰‡æ®µè¿‡é•¿å¯¼è‡´è¶…çª—å£&quot;">â€‹</a></h4><p>å½“å‰é»˜è®¤é€»è¾‘æ˜¯ â€œå°†æ‰€æœ‰æ£€ç´¢åˆ°çš„æ–‡æ¡£ç‰‡æ®µï¼ˆå¦‚ Top3ï¼‰å…¨éƒ¨ä¼ ç»™ LLMâ€ï¼Œè‹¥ç‰‡æ®µè¿‡é•¿æˆ–æ•°é‡è¿‡å¤šï¼Œå¯èƒ½è¶…è¿‡æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ã€‚è§£å†³æ–¹æ¡ˆï¼ˆåç»­è®²è§£ï¼‰åŒ…æ‹¬ï¼š</p><ul><li>é™åˆ¶æ£€ç´¢ç‰‡æ®µæ•°é‡ï¼ˆå¦‚<code>retriever = db.as_retriever(search_kwargs={&quot;k&quot;:2})</code>ï¼‰ï¼›</li><li>å¯¹æ£€ç´¢åˆ°çš„ç‰‡æ®µè¿›è¡ŒäºŒæ¬¡æ€»ç»“ï¼ˆç”¨<code>create_doc_summary</code>å‚æ•°ï¼‰ï¼›</li><li>ä½¿ç”¨æ”¯æŒå¤§çª—å£çš„æ¨¡å‹ï¼ˆå¦‚ GPT-4 Turbo 128kï¼‰ã€‚</li></ul><h3 id="_6ã€æ ¸å¿ƒæµç¨‹æ€»ç»“" tabindex="-1">6ã€æ ¸å¿ƒæµç¨‹æ€»ç»“ <a class="header-anchor" href="#_6ã€æ ¸å¿ƒæµç¨‹æ€»ç»“" aria-label="Permalink to &quot;6ã€æ ¸å¿ƒæµç¨‹æ€»ç»“&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>é“¾çš„ä½œç”¨</th></tr></thead><tbody><tr><td>1. ç»„ä»¶å‡†å¤‡</td><td>åˆå§‹åŒ– LLMã€Retrieverã€Memory</td><td>ä¸ºé“¾æä¾› â€œç”Ÿæˆæ ¸å¿ƒâ€â€œçŸ¥è¯†æ¥æºâ€â€œä¸Šä¸‹æ–‡è®°å¿†â€</td></tr><tr><td>2. åˆ›å»ºé“¾</td><td>è°ƒç”¨<code>from_llm</code>æ•´åˆç»„ä»¶</td><td>å°è£… â€œæ£€ç´¢â†’æ‹¼æ¥æç¤ºâ†’ç”Ÿæˆå›ç­”â†’æ›´æ–°è®°å¿†â€ å…¨æµç¨‹</td></tr><tr><td>3. å‘èµ·å¯¹è¯</td><td>è°ƒç”¨<code>invoke</code>ä¼ å…¥ç”¨æˆ·é—®é¢˜</td><td>è‡ªåŠ¨è§¦å‘æ£€ç´¢ï¼Œç»“åˆå†å²å¯¹è¯ç”Ÿæˆå›ç­”ï¼Œæ— éœ€æ‰‹åŠ¨æ‹¼æ¥ä¸Šä¸‹æ–‡</td></tr><tr><td>4. éªŒè¯ / å®šåˆ¶</td><td>å¼€å¯<code>return_source_documents</code></td><td>æŸ¥çœ‹å‚è€ƒæ–‡æ¡£ï¼ŒéªŒè¯å›ç­”å¯ä¿¡åº¦ï¼Œé¿å… AI å¹»è§‰</td></tr></tbody></table><p>é€šè¿‡<code>Conversational Retrieval Chain</code>ï¼Œå¯å¿«é€Ÿå®ç° â€œå¸¦çŸ¥è¯†åº“ + å¸¦è®°å¿†â€ çš„å¯¹è¯ AIï¼ˆå¦‚ä¼ä¸šçŸ¥è¯†åº“é—®ç­”ã€æ–‡æ¡£åŠ©æ‰‹ï¼‰ï¼Œæ˜¯ LangChain ä¸­ RAG è½åœ°çš„æ ¸å¿ƒå·¥å…·ä¹‹ä¸€ã€‚</p><h2 id="ä¸ƒã€documents-chain-æŠŠå¤–éƒ¨æ–‡æ¡£å¡ç»™æ¨¡å‹çš„ä¸åŒæ–¹å¼" tabindex="-1">ä¸ƒã€Documents Chain æŠŠå¤–éƒ¨æ–‡æ¡£å¡ç»™æ¨¡å‹çš„ä¸åŒæ–¹å¼ <a class="header-anchor" href="#ä¸ƒã€documents-chain-æŠŠå¤–éƒ¨æ–‡æ¡£å¡ç»™æ¨¡å‹çš„ä¸åŒæ–¹å¼" aria-label="Permalink to &quot;ä¸ƒã€Documents Chain æŠŠå¤–éƒ¨æ–‡æ¡£å¡ç»™æ¨¡å‹çš„ä¸åŒæ–¹å¼&quot;">â€‹</a></h2><p>åœ¨ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ä¸­ï¼Œâ€œæ–‡æ¡£ä¼ é€’ç­–ç•¥â€ å†³å®šäº†å¦‚ä½•å°†æ£€ç´¢åˆ°çš„ç›¸å…³æ–‡æœ¬ç‰‡æ®µä¼ ç»™ LLM ç”Ÿæˆå›ç­”ã€‚é™¤é»˜è®¤çš„<code>stuff</code>ï¼ˆå¡«å……ï¼‰æ³•å¤–ï¼ŒLangChain è¿˜æ”¯æŒ<code>map_reduce</code>ï¼ˆæ˜ å°„è§„çº¦ï¼‰ã€<code>refine</code>ï¼ˆä¼˜åŒ–ï¼‰ã€<code>map_rerank</code>ï¼ˆæ˜ å°„é‡æ’åºï¼‰3 ç§ç­–ç•¥ï¼Œåˆ†åˆ«é€‚é… â€œç‰‡æ®µè¿‡é•¿ / è¿‡å¤šâ€â€œéœ€ç²¾å‡†è¿­ä»£ä¼˜åŒ–â€â€œéœ€å¿«é€Ÿç­›é€‰æœ€ä¼˜ç‰‡æ®µâ€ ç­‰åœºæ™¯ã€‚ä»¥ä¸‹ä»<strong>åŸç†ã€ä¼˜ç¼ºç‚¹ã€é€‚ç”¨åœºæ™¯ã€ä»£ç å®ç°</strong>å››æ–¹é¢å±•å¼€æ•´ç†ï¼š</p><h3 id="_1ã€4-ç§æ–‡æ¡£ä¼ é€’ç­–ç•¥æ ¸å¿ƒåŸç†" tabindex="-1">1ã€4 ç§æ–‡æ¡£ä¼ é€’ç­–ç•¥æ ¸å¿ƒåŸç† <a class="header-anchor" href="#_1ã€4-ç§æ–‡æ¡£ä¼ é€’ç­–ç•¥æ ¸å¿ƒåŸç†" aria-label="Permalink to &quot;1ã€4 ç§æ–‡æ¡£ä¼ é€’ç­–ç•¥æ ¸å¿ƒåŸç†&quot;">â€‹</a></h3><p>æ‰€æœ‰ç­–ç•¥çš„å‰ææ˜¯ â€œå·²é€šè¿‡æ£€ç´¢å™¨è·å– Top N ç›¸å…³æ–‡æœ¬ç‰‡æ®µâ€ï¼Œæ ¸å¿ƒå·®å¼‚åœ¨äº â€œç‰‡æ®µå¦‚ä½•å¤„ç†å¹¶ä¼ ç»™ LLMâ€ï¼š</p><h4 id="_1-1-stuff-å¡«å……æ³•-é»˜è®¤ç­–ç•¥-ç®€å•ç›´æ¥" tabindex="-1">1.1. Stuffï¼ˆå¡«å……æ³•ï¼‰ï¼šé»˜è®¤ç­–ç•¥ï¼Œç®€å•ç›´æ¥ <a class="header-anchor" href="#_1-1-stuff-å¡«å……æ³•-é»˜è®¤ç­–ç•¥-ç®€å•ç›´æ¥" aria-label="Permalink to &quot;1.1. Stuffï¼ˆå¡«å……æ³•ï¼‰ï¼šé»˜è®¤ç­–ç•¥ï¼Œç®€å•ç›´æ¥&quot;">â€‹</a></h4><h5 id="åŸç†" tabindex="-1">åŸç† <a class="header-anchor" href="#åŸç†" aria-label="Permalink to &quot;åŸç†&quot;">â€‹</a></h5><p>å°†<strong>æ‰€æœ‰æ£€ç´¢åˆ°çš„æ–‡æœ¬ç‰‡æ®µæ‹¼æ¥æˆä¸€ä¸ªé•¿æ–‡æœ¬</strong>ï¼Œä¸ç”¨æˆ·é—®é¢˜ã€å¯¹è¯è®°å¿†åˆå¹¶ä¸ºä¸€ä¸ªæç¤ºï¼Œä¸€æ¬¡æ€§ä¼ ç»™ LLM ç”Ÿæˆå›ç­”ã€‚</p><ul><li>æµç¨‹ï¼šæ£€ç´¢ç‰‡æ®µ â†’ æ‹¼æ¥ç‰‡æ®µ â†’ å•æ¬¡ LLM è°ƒç”¨ â†’ ç”Ÿæˆå›ç­”ã€‚</li></ul><h5 id="ä¼˜ç¼ºç‚¹" tabindex="-1">ä¼˜ç¼ºç‚¹ <a class="header-anchor" href="#ä¼˜ç¼ºç‚¹" aria-label="Permalink to &quot;ä¼˜ç¼ºç‚¹&quot;">â€‹</a></h5><table tabindex="0"><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>1. ä»…éœ€ 1 æ¬¡ LLM è°ƒç”¨ï¼Œé€Ÿåº¦å¿«ã€æˆæœ¬ä½ï¼›</td><td>1. ç‰‡æ®µæ€»é•¿åº¦æ˜“è¶… LLM ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ï¼›</td></tr><tr><td>2. LLM èƒ½çœ‹åˆ°æ‰€æœ‰ç‰‡æ®µçš„å®Œæ•´å…³è”ï¼Œä¿¡æ¯æ— å‰²è£‚ï¼›</td><td>2. ä»…é€‚åˆç‰‡æ®µæ•°é‡å°‘ï¼ˆå¦‚ Top3ï¼‰ã€å•ç‰‡æ®µçŸ­çš„åœºæ™¯ã€‚</td></tr></tbody></table><h5 id="é€‚ç”¨åœºæ™¯" tabindex="-1">é€‚ç”¨åœºæ™¯ <a class="header-anchor" href="#é€‚ç”¨åœºæ™¯" aria-label="Permalink to &quot;é€‚ç”¨åœºæ™¯&quot;">â€‹</a></h5><ul><li>çŸ¥è¯†åº“ç‰‡æ®µçŸ­ï¼ˆå¦‚å•ç‰‡æ®µâ‰¤500 å­—ç¬¦ï¼‰ã€æ£€ç´¢ç»“æœæ•°é‡å°‘ï¼ˆå¦‚ Top2-3ï¼‰ï¼›</li><li>å¯¹å“åº”é€Ÿåº¦å’Œæˆæœ¬æ•æ„Ÿï¼Œä¸” LLM ä¸Šä¸‹æ–‡çª—å£è¶³å¤Ÿå®¹çº³æ‰€æœ‰ç‰‡æ®µï¼ˆå¦‚ GPT-3.5 4k Tokenï¼‰ã€‚</li></ul><h4 id="_1-2-map-reduce-æ˜ å°„è§„çº¦æ³•-å¤šç‰‡æ®µèåˆ" tabindex="-1">1.2. Map Reduceï¼ˆæ˜ å°„è§„çº¦æ³•ï¼‰ï¼šå¤šç‰‡æ®µèåˆ <a class="header-anchor" href="#_1-2-map-reduce-æ˜ å°„è§„çº¦æ³•-å¤šç‰‡æ®µèåˆ" aria-label="Permalink to &quot;1.2. Map Reduceï¼ˆæ˜ å°„è§„çº¦æ³•ï¼‰ï¼šå¤šç‰‡æ®µèåˆ&quot;">â€‹</a></h4><h5 id="åŸç†-1" tabindex="-1">åŸç† <a class="header-anchor" href="#åŸç†-1" aria-label="Permalink to &quot;åŸç†&quot;">â€‹</a></h5><p>åˆ† â€œMapï¼ˆæ˜ å°„ï¼‰â€ å’Œ â€œReduceï¼ˆè§„çº¦ï¼‰â€ ä¸¤é˜¶æ®µå¤„ç†ï¼Œè§£å†³ â€œç‰‡æ®µæ€»é•¿åº¦è¶…çª—å£â€ é—®é¢˜ï¼š</p><ol><li><strong>Map é˜¶æ®µ</strong>ï¼šå°†æ¯ä¸ªæ£€ç´¢ç‰‡æ®µå•ç‹¬ä¼ ç»™ LLMï¼Œç”Ÿæˆè¯¥ç‰‡æ®µå¯¹åº”çš„ â€œå±€éƒ¨å›ç­”â€ï¼ˆ1 ä¸ªç‰‡æ®µâ†’1 ä¸ªå±€éƒ¨å›ç­”ï¼ŒN ä¸ªç‰‡æ®µâ†’N æ¬¡ LLM è°ƒç”¨ï¼‰ï¼›</li><li><strong>Reduce é˜¶æ®µ</strong>ï¼šå°†æ‰€æœ‰ â€œå±€éƒ¨å›ç­”â€ æ‹¼æ¥æˆ â€œå›ç­”åˆé›†â€ï¼Œä¼ ç»™ LLM ç”Ÿæˆ â€œæ•´åˆæ‰€æœ‰ä¿¡æ¯çš„æœ€ç»ˆå›ç­”â€ï¼ˆ1 æ¬¡ LLM è°ƒç”¨ï¼‰ã€‚</li></ol><ul><li>æµç¨‹ï¼šæ£€ç´¢ç‰‡æ®µ â†’ é€ä¸ªç‰‡æ®µç”Ÿæˆå±€éƒ¨å›ç­”ï¼ˆMapï¼‰ â†’ åˆå¹¶å±€éƒ¨å›ç­” â†’ ç”Ÿæˆæœ€ç»ˆå›ç­”ï¼ˆReduceï¼‰ã€‚</li></ul><h5 id="ä¼˜ç¼ºç‚¹-1" tabindex="-1">ä¼˜ç¼ºç‚¹ <a class="header-anchor" href="#ä¼˜ç¼ºç‚¹-1" aria-label="Permalink to &quot;ä¼˜ç¼ºç‚¹&quot;">â€‹</a></h5><table tabindex="0"><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>1. æ”¯æŒè¶…é•¿ç¯‡æ®µ / å¤šç‰‡æ®µï¼ˆå•ç‰‡æ®µä¸è¶…çª—å£å³å¯ï¼‰ï¼›</td><td>1. éœ€ N+1 æ¬¡ LLM è°ƒç”¨ï¼ˆN ä¸ºç‰‡æ®µæ•°ï¼‰ï¼Œæˆæœ¬é«˜ã€é€Ÿåº¦æ…¢ï¼›</td></tr><tr><td>2. èƒ½èåˆå¤šä¸ªç‰‡æ®µçš„ä¿¡æ¯ï¼Œé€‚åˆå¤æ‚æŸ¥è¯¢ï¼›</td><td>2. Reduce é˜¶æ®µå¯èƒ½é—æ¼å±€éƒ¨å›ç­”çš„ç»†èŠ‚ï¼›</td></tr><tr><td>3. å¯å¹¶è¡Œå¤„ç† Map é˜¶æ®µï¼Œæå‡æ•ˆç‡ï¼ˆLangChain é»˜è®¤æ”¯æŒï¼‰ã€‚</td><td>3. å±€éƒ¨å›ç­”é—´è‹¥æœ‰å†²çªï¼ŒLLM éœ€æ‰‹åŠ¨åˆ¤æ–­ï¼Œæ˜“å‡ºé”™ã€‚</td></tr></tbody></table><h5 id="é€‚ç”¨åœºæ™¯-1" tabindex="-1">é€‚ç”¨åœºæ™¯ <a class="header-anchor" href="#é€‚ç”¨åœºæ™¯-1" aria-label="Permalink to &quot;é€‚ç”¨åœºæ™¯&quot;">â€‹</a></h5><ul><li>æ£€ç´¢ç‰‡æ®µæ•°é‡å¤šï¼ˆå¦‚ Top5-10ï¼‰æˆ–å•ç‰‡æ®µè¾ƒé•¿ï¼Œä½†æ¯ä¸ªç‰‡æ®µç‹¬ç«‹åŒ…å«éƒ¨åˆ†ä¿¡æ¯ï¼›</li><li>éœ€æ•´åˆå¤šæ¥æºä¿¡æ¯çš„å¤æ‚æŸ¥è¯¢ï¼ˆå¦‚ â€œæ€»ç»“æ–‡æ¡£ä¸­ 3 ä¸ªäº§å“çš„å®šä»·ç­–ç•¥â€ï¼‰ã€‚</li></ul><h4 id="_1-3-refine-ä¼˜åŒ–æ³•-è¿­ä»£å¼ç²¾å‡†ä¼˜åŒ–" tabindex="-1">1.3. Refineï¼ˆä¼˜åŒ–æ³•ï¼‰ï¼šè¿­ä»£å¼ç²¾å‡†ä¼˜åŒ– <a class="header-anchor" href="#_1-3-refine-ä¼˜åŒ–æ³•-è¿­ä»£å¼ç²¾å‡†ä¼˜åŒ–" aria-label="Permalink to &quot;1.3. Refineï¼ˆä¼˜åŒ–æ³•ï¼‰ï¼šè¿­ä»£å¼ç²¾å‡†ä¼˜åŒ–&quot;">â€‹</a></h4><h5 id="åŸç†-2" tabindex="-1">åŸç† <a class="header-anchor" href="#åŸç†-2" aria-label="Permalink to &quot;åŸç†&quot;">â€‹</a></h5><p>æŒ‰ç‰‡æ®µé¡ºåº<strong>é€æ¬¡è¿­ä»£ä¼˜åŒ–å›ç­”</strong>ï¼Œè®© LLM åŸºäºæ–°ç‰‡æ®µä¸æ–­ä¿®æ­£å·²æœ‰å›ç­”ï¼Œè€Œéç‹¬ç«‹å¤„ç†æ¯ä¸ªç‰‡æ®µï¼š</p><ol><li>ç¬¬ 1 è½®ï¼šç”¨ â€œç¬¬ 1 ä¸ªç‰‡æ®µ + ç”¨æˆ·é—®é¢˜â€ ç”Ÿæˆåˆå§‹å›ç­”ï¼›</li><li>ç¬¬ 2 è½®ï¼šç”¨ â€œåˆå§‹å›ç­” + ç¬¬ 2 ä¸ªç‰‡æ®µ + ç”¨æˆ·é—®é¢˜â€ ç”Ÿæˆä¼˜åŒ–åçš„å›ç­”ï¼›</li><li>ç¬¬ N è½®ï¼šç”¨ â€œä¸Šä¸€è½®å›ç­” + ç¬¬ N ä¸ªç‰‡æ®µ + ç”¨æˆ·é—®é¢˜â€ ç”Ÿæˆæœ€ç»ˆå›ç­”ï¼ˆN ä¸ªç‰‡æ®µâ†’N æ¬¡ LLM è°ƒç”¨ï¼‰ã€‚</li></ol><ul><li>æµç¨‹ï¼šæ£€ç´¢ç‰‡æ®µ â†’ åŸºäºç¬¬ 1 ç‰‡æ®µç”Ÿæˆåˆå§‹å›ç­” â†’ ç»“åˆç¬¬ 2 ç‰‡æ®µä¼˜åŒ– â†’ ... â†’ ç»“åˆç¬¬ N ç‰‡æ®µç”Ÿæˆæœ€ç»ˆå›ç­”ã€‚</li></ul><h5 id="ä¼˜ç¼ºç‚¹-2" tabindex="-1">ä¼˜ç¼ºç‚¹ <a class="header-anchor" href="#ä¼˜ç¼ºç‚¹-2" aria-label="Permalink to &quot;ä¼˜ç¼ºç‚¹&quot;">â€‹</a></h5><table tabindex="0"><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>1. å›ç­”ç²¾åº¦é«˜ï¼ŒLLM èƒ½åŸºäºæ–°ä¿¡æ¯é€æ¬¡ä¿®æ­£ï¼Œå‡å°‘é—æ¼ï¼›</td><td>1. éœ€ N æ¬¡ LLM è°ƒç”¨ï¼Œæˆæœ¬æœ€é«˜ã€é€Ÿåº¦æœ€æ…¢ï¼›</td></tr><tr><td>2. èƒ½å¤„ç†è¶…é•¿ç¯‡æ®µ / å¤šç‰‡æ®µï¼Œä¸”ä¿ç•™ä¸Šä¸‹æ–‡å…³è”ï¼›</td><td>2. ç‰‡æ®µé¡ºåºå½±å“æœ€ç»ˆç»“æœï¼ˆè‹¥å…³é”®ç‰‡æ®µåœ¨åï¼Œå‰æœŸå›ç­”æ˜“åå·®ï¼‰ï¼›</td></tr><tr><td>3. é€‚åˆéœ€è¦æ·±åº¦ç†è§£ç‰‡æ®µé€»è¾‘çš„åœºæ™¯ã€‚</td><td>3. æ— æ³•å¹¶è¡Œå¤„ç†ï¼Œå¿…é¡»æŒ‰é¡ºåºè¿­ä»£ã€‚</td></tr></tbody></table><h5 id="é€‚ç”¨åœºæ™¯-2" tabindex="-1">é€‚ç”¨åœºæ™¯ <a class="header-anchor" href="#é€‚ç”¨åœºæ™¯-2" aria-label="Permalink to &quot;é€‚ç”¨åœºæ™¯&quot;">â€‹</a></h5><ul><li>ç‰‡æ®µé—´æœ‰é€»è¾‘å…³è”ï¼ˆå¦‚æ–‡æ¡£ç« èŠ‚é¡ºåºï¼‰ï¼Œéœ€é€æ­¥æ·±å…¥ç†è§£çš„æŸ¥è¯¢ï¼ˆå¦‚ â€œè§£æè®ºæ–‡çš„å®éªŒæ–¹æ³•ä¸ç»“è®ºâ€ï¼‰ï¼›</li><li>å¯¹å›ç­”ç²¾åº¦è¦æ±‚æé«˜ï¼Œå¯æ¥å—é«˜æˆæœ¬å’Œæ…¢é€Ÿåº¦ï¼ˆå¦‚ä¸“ä¸šé¢†åŸŸé—®ç­”ã€å­¦æœ¯è§£è¯»ï¼‰ã€‚</li></ul><h4 id="_1-4-map-rerank-æ˜ å°„é‡æ’åºæ³•-å¿«é€Ÿç­›é€‰æœ€ä¼˜" tabindex="-1">1.4. Map Rerankï¼ˆæ˜ å°„é‡æ’åºæ³•ï¼‰ï¼šå¿«é€Ÿç­›é€‰æœ€ä¼˜ <a class="header-anchor" href="#_1-4-map-rerank-æ˜ å°„é‡æ’åºæ³•-å¿«é€Ÿç­›é€‰æœ€ä¼˜" aria-label="Permalink to &quot;1.4. Map Rerankï¼ˆæ˜ å°„é‡æ’åºæ³•ï¼‰ï¼šå¿«é€Ÿç­›é€‰æœ€ä¼˜&quot;">â€‹</a></h4><h5 id="åŸç†-3" tabindex="-1">åŸç† <a class="header-anchor" href="#åŸç†-3" aria-label="Permalink to &quot;åŸç†&quot;">â€‹</a></h5><p>åˆ† â€œMapï¼ˆæ˜ å°„ï¼‰â€ å’Œ â€œRerankï¼ˆé‡æ’åºï¼‰â€ ä¸¤é˜¶æ®µï¼Œèšç„¦ â€œç­›é€‰æœ€ä¼˜ç‰‡æ®µâ€ è€Œé â€œèåˆä¿¡æ¯â€ï¼š</p><ol><li><strong>Map é˜¶æ®µ</strong>ï¼šå°†æ¯ä¸ªæ£€ç´¢ç‰‡æ®µå•ç‹¬ä¼ ç»™ LLMï¼Œè¦æ±‚ LLM ç”Ÿæˆ â€œå±€éƒ¨å›ç­”â€ å¹¶å¯¹ â€œè¯¥ç‰‡æ®µä¸é—®é¢˜çš„ç›¸å…³æ€§â€ æ‰“åˆ†ï¼ˆå¦‚ 1-10 åˆ†ï¼ŒN ä¸ªç‰‡æ®µâ†’N æ¬¡ LLM è°ƒç”¨ï¼‰ï¼›</li><li><strong>Rerank é˜¶æ®µ</strong>ï¼šç­›é€‰å‡º â€œç›¸å…³æ€§å¾—åˆ†æœ€é«˜â€ çš„å±€éƒ¨å›ç­”ï¼Œç›´æ¥ä½œä¸ºæœ€ç»ˆå›ç­”ï¼ˆæ— éœ€é¢å¤– LLM è°ƒç”¨ï¼‰ã€‚</li></ol><ul><li>æµç¨‹ï¼šæ£€ç´¢ç‰‡æ®µ â†’ é€ä¸ªç‰‡æ®µç”Ÿæˆå±€éƒ¨å›ç­” + æ‰“åˆ†ï¼ˆMapï¼‰ â†’ é€‰æ‹©æœ€é«˜åˆ†å›ç­”ä½œä¸ºæœ€ç»ˆç»“æœï¼ˆRerankï¼‰ã€‚</li></ul><h5 id="ä¼˜ç¼ºç‚¹-3" tabindex="-1">ä¼˜ç¼ºç‚¹ <a class="header-anchor" href="#ä¼˜ç¼ºç‚¹-3" aria-label="Permalink to &quot;ä¼˜ç¼ºç‚¹&quot;">â€‹</a></h5><table tabindex="0"><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>1. ç›¸æ¯” Map Reduceï¼Œå°‘ 1 æ¬¡ Reduce è°ƒç”¨ï¼Œæˆæœ¬ç•¥ä½ï¼›</td><td>1. ä¸èåˆå¤šç‰‡æ®µä¿¡æ¯ï¼Œä»…ç”¨æœ€ä¼˜ç‰‡æ®µå›ç­”ï¼Œæ˜“é—æ¼å…¶ä»–ä¿¡æ¯ï¼›</td></tr><tr><td>2. é€Ÿåº¦æ¯” Refine å¿«ï¼Œä¸”èƒ½è§£å†³è¶…çª—å£é—®é¢˜ï¼›</td><td>2. ä¾èµ– LLM æ‰“åˆ†å‡†ç¡®æ€§ï¼Œè‹¥æ‰“åˆ†åå·®ï¼Œç»“æœä¼šå‡ºé”™ï¼›</td></tr><tr><td>3. é€‚åˆåªéœ€å•ä¸ªç‰‡æ®µå³å¯å›ç­”çš„åœºæ™¯ã€‚</td><td>3. éœ€åœ¨æç¤ºä¸­æ˜ç¡®æ‰“åˆ†è§„åˆ™ï¼Œæç¤ºè®¾è®¡è¾ƒå¤æ‚ã€‚</td></tr></tbody></table><h5 id="é€‚ç”¨åœºæ™¯-3" tabindex="-1">é€‚ç”¨åœºæ™¯ <a class="header-anchor" href="#é€‚ç”¨åœºæ™¯-3" aria-label="Permalink to &quot;é€‚ç”¨åœºæ™¯&quot;">â€‹</a></h5><ul><li>é—®é¢˜ç­”æ¡ˆä»…å­˜åœ¨äºæŸä¸€ä¸ªç‰‡æ®µä¸­ï¼ˆå¦‚ â€œæ–‡æ¡£ä¸­æåˆ°çš„å¢æµ®å®«å‘½åå¹´ä»½æ˜¯å¤šå°‘â€ï¼‰ï¼›</li><li>éœ€å¿«é€Ÿå¾—åˆ°ç­”æ¡ˆï¼Œä¸”å¯æ¥å— â€œä¸èåˆå¤šç‰‡æ®µä¿¡æ¯â€ï¼ˆå¦‚ç®€å•äº‹å®æŸ¥è¯¢ï¼‰ã€‚</li></ul><h3 id="_2ã€4-ç§ç­–ç•¥å¯¹æ¯”æ€»ç»“" tabindex="-1">2ã€4 ç§ç­–ç•¥å¯¹æ¯”æ€»ç»“ <a class="header-anchor" href="#_2ã€4-ç§ç­–ç•¥å¯¹æ¯”æ€»ç»“" aria-label="Permalink to &quot;2ã€4 ç§ç­–ç•¥å¯¹æ¯”æ€»ç»“&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Stuffï¼ˆå¡«å……ï¼‰</th><th>Map Reduceï¼ˆæ˜ å°„è§„çº¦ï¼‰</th><th>Refineï¼ˆä¼˜åŒ–ï¼‰</th><th>Map Rerankï¼ˆæ˜ å°„é‡æ’åºï¼‰</th></tr></thead><tbody><tr><td>LLM è°ƒç”¨æ¬¡æ•°</td><td>1 æ¬¡</td><td>N+1 æ¬¡ï¼ˆN ä¸ºç‰‡æ®µæ•°ï¼‰</td><td>N æ¬¡</td><td>N æ¬¡</td></tr><tr><td>å“åº”é€Ÿåº¦</td><td>æœ€å¿«</td><td>ä¸­ç­‰ï¼ˆå¯å¹¶è¡Œ Mapï¼‰</td><td>æœ€æ…¢</td><td>ä¸­ç­‰ï¼ˆå¯å¹¶è¡Œ Mapï¼‰</td></tr><tr><td>æˆæœ¬</td><td>æœ€ä½</td><td>è¾ƒé«˜</td><td>æœ€é«˜</td><td>è¾ƒé«˜</td></tr><tr><td>ä¿¡æ¯èåˆèƒ½åŠ›</td><td>å¼ºï¼ˆå…¨ç‰‡æ®µå¯è§ï¼‰</td><td>è¾ƒå¼ºï¼ˆæ•´åˆå±€éƒ¨å›ç­”ï¼‰</td><td>å¼ºï¼ˆé€æ¬¡ä¼˜åŒ–ï¼‰</td><td>å¼±ï¼ˆä»…ç”¨æœ€ä¼˜ç‰‡æ®µï¼‰</td></tr><tr><td>ä¸Šä¸‹æ–‡çª—å£é™åˆ¶</td><td>æ˜“è¶…é™åˆ¶</td><td>æ— ï¼ˆå•ç‰‡æ®µä¸è¶…å³å¯ï¼‰</td><td>æ— ï¼ˆå•ç‰‡æ®µä¸è¶…å³å¯ï¼‰</td><td>æ— ï¼ˆå•ç‰‡æ®µä¸è¶…å³å¯ï¼‰</td></tr><tr><td>é€‚ç”¨é—®é¢˜ç±»å‹</td><td>ç®€å•äº‹å®æŸ¥è¯¢</td><td>å¤æ‚å¤šä¿¡æ¯æ•´åˆæŸ¥è¯¢</td><td>æ·±åº¦é€»è¾‘ç†è§£æŸ¥è¯¢</td><td>å•ç‰‡æ®µäº‹å®æŸ¥è¯¢</td></tr></tbody></table><h3 id="_3ã€ä»£ç å®ç°-æŒ‡å®š-chain-type" tabindex="-1">3ã€ä»£ç å®ç°ï¼šæŒ‡å®š Chain Type <a class="header-anchor" href="#_3ã€ä»£ç å®ç°-æŒ‡å®š-chain-type" aria-label="Permalink to &quot;3ã€ä»£ç å®ç°ï¼šæŒ‡å®š Chain Type&quot;">â€‹</a></h3><p>åœ¨ LangChain ä¸­ï¼Œé€šè¿‡<code>ConversationalRetrievalChain</code>åˆ›å»ºé“¾æ—¶ï¼Œåªéœ€ç»™<code>chain_type</code>å‚æ•°æŒ‡å®šå¯¹åº”ç­–ç•¥åç§°ï¼Œå³å¯åˆ‡æ¢æ–‡æ¡£ä¼ é€’æ–¹å¼ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç ç¤ºä¾‹ï¼ˆåŸºäºå‰åº RAG æµç¨‹ï¼‰ï¼š</p><h4 id="_3-1-å‰æœŸå‡†å¤‡-å¤ç”¨ç»„ä»¶" tabindex="-1">3.1. å‰æœŸå‡†å¤‡ï¼ˆå¤ç”¨ç»„ä»¶ï¼‰ <a class="header-anchor" href="#_3-1-å‰æœŸå‡†å¤‡-å¤ç”¨ç»„ä»¶" aria-label="Permalink to &quot;3.1. å‰æœŸå‡†å¤‡ï¼ˆå¤ç”¨ç»„ä»¶ï¼‰&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- å¯¼å…¥æ ¸å¿ƒæ¨¡å— --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ£€ç´¢å¢å¼ºå¯¹è¯é“¾ï¼šç»“åˆæ£€ç´¢ã€è®°å¿†å’ŒLLMç”Ÿæˆå›ç­”</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationalRetrievalChain</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¹è¯è®°å¿†ï¼šå­˜å‚¨å†å²å¯¹è¯ï¼Œæ”¯æŒè¿ç»­å¯¹è¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–‡æ¡£åŠ è½½å™¨ï¼šåŠ è½½æœ¬åœ°TXTæ–‡æœ¬æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.document_loaders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‘é‡æ•°æ®åº“ï¼šFAISSï¼Œç”¨äºå­˜å‚¨æ–‡æœ¬å‘é‡å¹¶æ”¯æŒç›¸ä¼¼æ£€ç´¢</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.vectorstores </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FAISS</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èŠå¤©æ¨¡å‹ï¼šOpenAIçš„å¯¹è¯æ¨¡å‹ï¼ˆå¦‚GPT-3.5/4ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åµŒå…¥æ¨¡å‹ï¼šå°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡çš„æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai.embeddings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–‡æœ¬åˆ†å‰²å™¨ï¼šå°†é•¿æ–‡æœ¬åˆ‡åˆ†ä¸ºè¯­ä¹‰å®Œæ•´çš„çŸ­æ–‡æœ¬å—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_text_splitters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RecursiveCharacterTextSplitter</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- æ­¥éª¤1ï¼šåŠ è½½æ–‡æ¡£ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–æ–‡æœ¬åŠ è½½å™¨ï¼ŒæŒ‡å®šè¦åŠ è½½çš„TXTæ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TextLoader(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./demo2.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡ŒåŠ è½½ï¼Œè¿”å›åŒ…å«æ–‡æ¡£å†…å®¹çš„åˆ—è¡¨ï¼ˆæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªDocumentå¯¹è±¡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loader.load()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- æ­¥éª¤2ï¼šæ–‡æœ¬åˆ†å‰² --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–é€’å½’å­—ç¬¦åˆ†å‰²å™¨ï¼Œé…ç½®ä¸­æ–‡é€‚é…å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text_splitter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RecursiveCharacterTextSplitter(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chunk_size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å•ä¸ªæ–‡æœ¬å—æœ€å¤§é•¿åº¦ï¼ˆ500å­—ç¬¦ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chunk_overlap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç›¸é‚»æ–‡æœ¬å—é‡å é•¿åº¦ï¼ˆ40å­—ç¬¦ï¼Œä¿æŒä¸Šä¸‹æ–‡è¿è´¯ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    separators</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ï¼Œ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ã€&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸­æ–‡åˆ†å‰²ç¬¦ä¼˜å…ˆçº§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°†åŠ è½½çš„æ–‡æ¡£åˆ†å‰²ä¸ºå¤šä¸ªçŸ­æ–‡æœ¬å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">texts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text_splitter.split_documents(docs)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- æ­¥éª¤3ï¼šåˆ›å»ºå‘é‡æ•°æ®åº“ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–OpenAIåµŒå…¥æ¨¡å‹ï¼ˆç”¨äºå°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">embeddings_model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAIEmbeddings()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°†åˆ†å‰²åçš„æ–‡æœ¬å—è½¬æ¢ä¸ºå‘é‡å¹¶å­˜å‚¨åˆ°FAISSæ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FAISS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.from_documents(texts, embeddings_model)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- æ­¥éª¤4ï¼šåˆ›å»ºæ£€ç´¢å™¨ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°†å‘é‡æ•°æ®åº“è½¬æ¢ä¸ºæ£€ç´¢å™¨ï¼Œç”¨äºåç»­æŸ¥è¯¢ç›¸å…³æ–‡æœ¬å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retriever </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.as_retriever()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -------------------------- æ­¥éª¤5ï¼šåˆå§‹åŒ–æ ¸å¿ƒç»„ä»¶ --------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–èŠå¤©æ¨¡å‹ï¼ˆä½¿ç”¨GPT-3.5-turboï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–å¯¹è¯è®°å¿†ï¼ˆé€‚é…ConversationalRetrievalChainçš„è¦æ±‚ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    return_messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä»¥æ¶ˆæ¯å¯¹è±¡åˆ—è¡¨å½¢å¼å­˜å‚¨è®°å¿†</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;chat_history&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è®°å¿†åœ¨é“¾ä¸­çš„å˜é‡åï¼ˆéœ€ä¸é“¾è¦æ±‚ä¸€è‡´ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    output_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;answer&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # é“¾è¾“å‡ºä¸­AIå›ç­”çš„é”®åï¼ˆéœ€ä¸é“¾è¦æ±‚ä¸€è‡´ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h4 id="_3-2-åˆ‡æ¢ä¸åŒ-chain-type" tabindex="-1">3.2. åˆ‡æ¢ä¸åŒ Chain Type <a class="header-anchor" href="#_3-2-åˆ‡æ¢ä¸åŒ-chain-type" aria-label="Permalink to &quot;3.2. åˆ‡æ¢ä¸åŒ Chain Type&quot;">â€‹</a></h4><p>åªéœ€ä¿®æ”¹<code>chain_type</code>å‚æ•°çš„å€¼ï¼ˆæ”¯æŒ<code>&quot;stuff&quot;</code>â€œ<code>map_reduce</code>â€â€œ<code>refine</code>â€â€œ<code>map_rerank</code>â€ï¼‰ï¼š</p><h5 id="_1-stuff-ç­–ç•¥-é»˜è®¤-å¯çœç•¥-chain-type-å‚æ•°" tabindex="-1">ï¼ˆ1ï¼‰Stuff ç­–ç•¥ï¼ˆé»˜è®¤ï¼Œå¯çœç•¥ chain_type å‚æ•°ï¼‰ <a class="header-anchor" href="#_1-stuff-ç­–ç•¥-é»˜è®¤-å¯çœç•¥-chain-type-å‚æ•°" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰Stuff ç­–ç•¥ï¼ˆé»˜è®¤ï¼Œå¯çœç•¥ chain_type å‚æ•°ï¼‰&quot;">â€‹</a></h5><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºStuffç­–ç•¥çš„é“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qa_chain_stuff </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationalRetrievalChain.from_llm(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    retriever</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retriever,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chain_type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stuff&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é»˜è®¤å€¼ï¼Œå¯çœç•¥</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    return_source_documents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å¯é€‰ï¼šè¿”å›å‚è€ƒç‰‡æ®µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è°ƒç”¨é“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qa_chain_stuff.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¢æµ®å®«åå­—æ€ä¹ˆæ¥çš„ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Stuffç­–ç•¥å›ç­”ï¼š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, response[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;answer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="_2-map-reduce-ç­–ç•¥" tabindex="-1">ï¼ˆ2ï¼‰Map Reduce ç­–ç•¥ <a class="header-anchor" href="#_2-map-reduce-ç­–ç•¥" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰Map Reduce ç­–ç•¥&quot;">â€‹</a></h5><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qa_chain_map_reduce </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationalRetrievalChain.from_llm(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    retriever</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retriever,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chain_type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;map_reduce&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    return_source_documents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qa_chain_map_reduce.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ€»ç»“æ–‡æ¡£ä¸­æåˆ°çš„3ä¸ªåšç‰©é¦†ç‰¹ç‚¹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Map Reduceç­–ç•¥å›ç­”ï¼š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, response[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;answer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="_3-refine-ç­–ç•¥" tabindex="-1">ï¼ˆ3ï¼‰Refine ç­–ç•¥ <a class="header-anchor" href="#_3-refine-ç­–ç•¥" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰Refine ç­–ç•¥&quot;">â€‹</a></h5><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qa_chain_refine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationalRetrievalChain.from_llm(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    retriever</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retriever,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chain_type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;refine&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    return_source_documents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qa_chain_refine.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è§£ææ–‡æ¡£ä¸­å®éªŒçš„æ­¥éª¤ä¸ç»“è®º&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Refineç­–ç•¥å›ç­”ï¼š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, response[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;answer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="_4-map-rerank-ç­–ç•¥" tabindex="-1">ï¼ˆ4ï¼‰Map Rerank ç­–ç•¥ <a class="header-anchor" href="#_4-map-rerank-ç­–ç•¥" aria-label="Permalink to &quot;ï¼ˆ4ï¼‰Map Rerank ç­–ç•¥&quot;">â€‹</a></h5><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qa_chain_map_rerank </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationalRetrievalChain.from_llm(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    retriever</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retriever,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chain_type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;map_rerank&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    return_source_documents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å¯é€‰ï¼šæŒ‡å®šæ‰“åˆ†è§„åˆ™ï¼ˆéœ€ä¸LLMæç¤ºåŒ¹é…ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chain_type_kwargs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;prompt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·å›ç­”é—®é¢˜ï¼Œå¹¶å¯¹è¯¥ç‰‡æ®µä¸é—®é¢˜çš„ç›¸å…³æ€§æ‰“åˆ†ï¼ˆ1-10åˆ†ï¼Œæ ¼å¼ï¼šå›ç­”ï¼šxxxï¼›å¾—åˆ†ï¼šxï¼‰&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qa_chain_map_rerank.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¢æµ®å®«åœ¨å“ªå¹´è¢«å‘½åä¸ºä¸­å¤®è‰ºæœ¯åšç‰©é¦†ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Map Rerankç­–ç•¥å›ç­”ï¼š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, response[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;answer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_4ã€å…³é”®æ³¨æ„äº‹é¡¹" tabindex="-1">4ã€å…³é”®æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#_4ã€å…³é”®æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;4ã€å…³é”®æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h3><ol><li><strong>æç¤ºæ¨¡æ¿é€‚é…</strong>ï¼š<code>map_reduce</code>/<code>refine</code>/<code>map_rerank</code>éœ€ LLM ç†è§£ç‰¹å®šæŒ‡ä»¤ï¼ˆå¦‚ â€œç”Ÿæˆå±€éƒ¨å›ç­”â€â€œæ‰“åˆ†â€ï¼‰ï¼ŒLangChain é»˜è®¤æä¾›åŸºç¡€æç¤ºæ¨¡æ¿ï¼Œè‹¥éœ€å®šåˆ¶ï¼ˆå¦‚ä¸“ä¸šé¢†åŸŸæœ¯è¯­ï¼‰ï¼Œå¯é€šè¿‡<code>chain_type_kwargs={&quot;prompt&quot;: è‡ªå®šä¹‰æç¤º}</code>ä¿®æ”¹ã€‚</li><li><strong>ç‰‡æ®µæ•°é‡æ§åˆ¶</strong>ï¼š<code>map_reduce</code>/<code>refine</code>/<code>map_rerank</code>çš„ LLM è°ƒç”¨æ¬¡æ•°ä¸ç‰‡æ®µæ•°ï¼ˆNï¼‰æ­£ç›¸å…³ï¼Œå»ºè®®é€šè¿‡<code>retriever</code>çš„<code>search_kwargs={&quot;k&quot;: 3}</code>æ§åˆ¶ Nï¼ˆé€šå¸¸ 3-5 ä¸ºå®œï¼‰ï¼Œå¹³è¡¡ç²¾åº¦ä¸æˆæœ¬ã€‚</li><li><strong>æ¨¡å‹é€‰æ‹©</strong>ï¼šå¤æ‚ç­–ç•¥ï¼ˆå¦‚<code>refine</code>ï¼‰å»ºè®®ç”¨æ›´æ“…é•¿é€»è¾‘æ¨ç†çš„æ¨¡å‹ï¼ˆå¦‚ GPT-4ï¼‰ï¼Œç®€å•ç­–ç•¥ï¼ˆå¦‚<code>stuff</code>ï¼‰å¯ç”¨ GPT-3.5 é™ä½æˆæœ¬ã€‚</li></ol><p>é€šè¿‡é€‰æ‹©åˆé€‚çš„æ–‡æ¡£ä¼ é€’ç­–ç•¥ï¼Œå¯åœ¨ â€œç²¾åº¦ã€é€Ÿåº¦ã€æˆæœ¬â€ ä¹‹é—´æ‰¾åˆ°æœ€ä¼˜å¹³è¡¡ï¼Œè®© RAG ç³»ç»Ÿé€‚é…ä¸åŒåœºæ™¯çš„éœ€æ±‚ï¼ˆå¦‚å¿«é€ŸæŸ¥è¯¢ã€æ·±åº¦åˆ†æã€å¤šä¿¡æ¯æ•´åˆï¼‰ã€‚</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Kele-Bingtang/vitepress-theme-teek/edit/master/docs/Python/AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘/11_ç»™AIæ¨¡å‹è¯»æ–‡ä»¶çš„èƒ½åŠ›.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!--]--></a></div><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>ä¸Šæ¬¡æ›´æ–°æ—¶é—´: <time datetime="2026-01-03T12:43:45.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><!----></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>ä¸‹ä¸€é¡µ</span><span class="title" data-v-e257564d>PythonåŸºç¡€è¯­æ³•</span><!--]--></a></div></nav></footer><!--[--><!--[--><!--[--><!--[--><!--]--><!--[--><!--[--><!--]--><div class="tk-article-update"><div class="tk-article-update__title flx-align-center"><i class="tk-icon edit-icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="m199.04 672.64 193.984 112 224-387.968-193.92-112-224 388.032zm-23.872 60.16 32.896 148.288 144.896-45.696zM455.04 229.248l193.92 112 56.704-98.112-193.984-112-56.64 98.112zM104.32 708.8l384-665.024 304.768 175.936L409.152 884.8h.064l-248.448 78.336zm384 254.272v-64h448v64h-448z"
    ></path>
  </svg></i><a href="/@pages/archivesPage.html" class="hover-color" aria-label="æœ€è¿‘æ›´æ–°">æœ€è¿‘æ›´æ–°</a></div><ul><!--[--><li class="flx-center"><span class="tk-article-update--num" aria-hidden="true">01</span><div class="tk-article-update__content"><a href="/daily/é¢è¯•ä¸“æ /SpringBoot/SpringBoot.html" class="flx-1 hover-color sle" aria-label="html"><span class="tk-article-title" aria-label="æ–‡ç« æ ‡é¢˜"><!--v-if--><!--[--><!--[-->html<!--]--><!--]--><!--v-if--></span></a><span class="tk-article-update__content--date">2026-01-13 13:36:06</span></div></li><li class="flx-center"><span class="tk-article-update--num" aria-hidden="true">02</span><div class="tk-article-update__content"><a href="/Java/å¾®æœåŠ¡ä¸“æ /03.æ³¨å†Œä¸­å¿ƒ/1_æ³¨å†Œä¸­å¿ƒæ¦‚è¿°.html" class="flx-1 hover-color sle" aria-label="æ³¨å†Œä¸­å¿ƒæ¦‚è¿°"><span class="tk-article-title" aria-label="æ–‡ç« æ ‡é¢˜"><!--v-if--><!--[--><!--[-->æ³¨å†Œä¸­å¿ƒæ¦‚è¿°<!--]--><!--]--><!--v-if--></span></a><span class="tk-article-update__content--date">2026-01-12 13:08:37</span></div></li><li class="flx-center"><span class="tk-article-update--num" aria-hidden="true">03</span><div class="tk-article-update__content"><a href="/Java/å¾®æœåŠ¡ä¸“æ /02.å¾®æœåŠ¡ç½‘å…³/1_å¾®æœåŠ¡ç½‘å…³æ¦‚è¿°.html" class="flx-1 hover-color sle" aria-label="å¾®æœåŠ¡ç½‘å…³æ¦‚è¿°"><span class="tk-article-title" aria-label="æ–‡ç« æ ‡é¢˜"><!--v-if--><!--[--><!--[-->å¾®æœåŠ¡ç½‘å…³æ¦‚è¿°<!--]--><!--]--><!--v-if--></span></a><span class="tk-article-update__content--date">2026-01-11 12:30:03</span></div></li><li class="flx-center"><span class="tk-article-update--num" aria-hidden="true"></span><div class="tk-article-update__content"><a href="/@pages/archivesPage.html" class="flx-1 hover-color sle" aria-label="æ›´å¤šæ–‡ç«  &gt;"><span class="tk-article-title" aria-label="æ–‡ç« æ ‡é¢˜"><!--v-if--><!--[--><!--[-->æ›´å¤šæ–‡ç«  &gt;<!--]--><!--]--><!--v-if--></span></a><!--v-if--></div></li><!--]--></ul></div><!--[--><!--]--><!--]--><!--v-if--><!-- è¯„è®ºåŒº --><!--v-if--><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-9a104c51 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright Â© 2019-2026 present Xu XiaoLong</p></div></footer><!--[--><!--]--></div><!--]--></div>
    
    
  </body>
</html>