<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RocketMQ-å­¦ä¹ ç¬”è®°01 | xiaolong</title>
    
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.Du365hsd.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.812c0526.js"></script>
    <script type="module" src="/assets/app.BGuUQLqW.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme._Al2fDqX.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CMIDsdwV.js">
    <link rel="modulepreload" href="/assets/chunks/RocketMQè§’è‰².C-u6CD5D.js">
    <link rel="modulepreload" href="/assets/Java_æ¶æ„è®¾è®¡_åˆ†å¸ƒå¼_03.åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—_01.RocketMQ_RocketMQ-01.md.C3hqpAk2.lean.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <link rel="icon" type="image/png" href="/logo.png">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="zh-CN">
    <meta property="og:title" content="Teek | VitePress Theme">
    <meta property="og:site_name" content="Teek">
    <meta property="og:image" content="">
    <meta property="og:url" content="">
    <meta property="og:description" description="æ¬¢è¿æ¥åˆ° vitepress-theme-teek ä½¿ç”¨æ–‡æ¡£,Teek æ˜¯ä¸€ä¸ªåŸºäº VitePress æ„å»ºçš„ä¸»é¢˜ï¼Œæ˜¯åœ¨é»˜è®¤ä¸»é¢˜çš„åŸºç¡€ä¸Šè¿›è¡Œæ‹“å±•ï¼Œæ”¯æŒ VitePress çš„æ‰€æœ‰åŠŸèƒ½ã€é…ç½®,Teek æ‹¥æœ‰ä¸‰ç§å…¸å‹çš„çŸ¥è¯†ç®¡ç†å½¢æ€ï¼šç»“æ„åŒ–ã€ç¢ç‰‡åŒ–ã€ä½“ç³»åŒ–ï¼Œå¯ä»¥è½»æ¾æ„å»ºä¸€ä¸ªç»“æ„åŒ–çŸ¥è¯†åº“ï¼Œé€‚ç”¨ä¸ªäººåšå®¢ã€æ–‡æ¡£ç«™ã€çŸ¥è¯†åº“ç­‰åœºæ™¯">
    <meta name="description" description="æ¬¢è¿æ¥åˆ° vitepress-theme-teek ä½¿ç”¨æ–‡æ¡£,Teek æ˜¯ä¸€ä¸ªåŸºäº VitePress æ„å»ºçš„ä¸»é¢˜ï¼Œæ˜¯åœ¨é»˜è®¤ä¸»é¢˜çš„åŸºç¡€ä¸Šè¿›è¡Œæ‹“å±•ï¼Œæ”¯æŒ VitePress çš„æ‰€æœ‰åŠŸèƒ½ã€é…ç½®,Teek æ‹¥æœ‰ä¸‰ç§å…¸å‹çš„çŸ¥è¯†ç®¡ç†å½¢æ€ï¼šç»“æ„åŒ–ã€ç¢ç‰‡åŒ–ã€ä½“ç³»åŒ–ï¼Œå¯ä»¥è½»æ¾æ„å»ºä¸€ä¸ªç»“æ„åŒ–çŸ¥è¯†åº“ï¼Œé€‚ç”¨ä¸ªäººåšå®¢ã€æ–‡æ¡£ç«™ã€çŸ¥è¯†åº“ç­‰åœºæ™¯">
    <meta name="author" content="Teek">
    <meta name="keywords" description="æ¬¢è¿æ¥åˆ° vitepress-theme-teek ä½¿ç”¨æ–‡æ¡£,Teek æ˜¯ä¸€ä¸ªåŸºäº VitePress æ„å»ºçš„ä¸»é¢˜ï¼Œæ˜¯åœ¨é»˜è®¤ä¸»é¢˜çš„åŸºç¡€ä¸Šè¿›è¡Œæ‹“å±•ï¼Œæ”¯æŒ VitePress çš„æ‰€æœ‰åŠŸèƒ½ã€é…ç½®,Teek æ‹¥æœ‰ä¸‰ç§å…¸å‹çš„çŸ¥è¯†ç®¡ç†å½¢æ€ï¼šç»“æ„åŒ–ã€ç¢ç‰‡åŒ–ã€ä½“ç³»åŒ–ï¼Œå¯ä»¥è½»æ¾æ„å»ºä¸€ä¸ªç»“æ„åŒ–çŸ¥è¯†åº“ï¼Œé€‚ç”¨ä¸ªäººåšå®¢ã€æ–‡æ¡£ç«™ã€çŸ¥è¯†åº“ç­‰åœºæ™¯">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6079554807639839" crossorigin="anonymous"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body><!--teleport start anchor--><div style="display:none;" class="tk-spotlight-hover tk-spotlight-hover__aside" aria-hidden="true" focusable="false"></div><!--teleport anchor-->
    <div id="app"><!--[--><!--v-if--><!--v-if--><!--v-if--><!--[--><!--v-if--><!----><!--v-if--><div class="tk-right-bottom-button tk-wallpaper-outside flx-column"><!--[--><!--]--><div title="è¿”å›é¡¶éƒ¨" class="tk-right-bottom-button__button back-top" style="--tk-progress:0;display:none;" role="button" aria-label="è¿”å›é¡¶éƒ¨" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"><span class="content">0</span></div><div title="å‰å¾€è¯„è®º" class="tk-right-bottom-button__button" role="button" aria-label="å‰å¾€è¯„è®º" style="display:none;"><i class="tk-icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="M273.536 736H800a64 64 0 0 0 64-64V256a64 64 0 0 0-64-64H224a64 64 0 0 0-64 64v570.88zM296 800 147.968 918.4A32 32 0 0 1 96 893.44V256a128 128 0 0 1 128-128h576a128 128 0 0 1 128 128v416a128 128 0 0 1-128 128z"
    ></path>
    <path
      fill="currentColor"
      d="M512 499.2a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4zm192 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4zm-384 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4z"
    ></path>
  </svg></i></div><!--v-if--><!--[--><!--]--></div><!--]--><div class="Layout tk-layout has-sidebar-trigger" data-v-9a104c51><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-9a104c51 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>xiaolong</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>ğŸ¡ä¸»é¡µ</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/java.svg" alt="" style="width: 16px; height: 16px;">
              <span>Java</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/Java%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7/01.JDK%E6%96%B0%E7%89%B9%E6%80%A7/1_JDK8%E6%96%B0%E7%89%B9%E6%80%A7Optional%E5%AE%B9%E5%99%A8%E7%B1%BB.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/code.svg" alt="" style="width: 16px; height: 16px;">
              <span>Javaå¼€å‘æŠ€å·§</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/JVM%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/01.JVM%E6%A6%82%E5%BF%B5/0_JVM%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/JVM.svg" alt="" style="width: 16px; height: 16px;">
              <span>JVMæ€§èƒ½è°ƒä¼˜</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/1_JUC.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å¹¶å‘ç¼–ç¨‹.svg" alt="" style="width: 16px; height: 16px;">
              <span>å¹¶å‘ç¼–ç¨‹</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E5%AE%B9%E5%99%A8/Docker/0_Docker%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/docker.svg" alt="" style="width: 16px; height: 16px;">
              <span>å®¹å™¨ç›¸å…³</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/01.%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/è®¾è®¡æ¨¡å¼.svg" alt="" style="width: 16px; height: 16px;">
              <span>è®¾è®¡æ¨¡å¼</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%93%E6%A0%8F/01.SpringCloud/1_SpringCloud%E7%AE%80%E4%BB%8B.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/mse.svg" alt="" style="width: 16px; height: 16px;">
              <span>å¾®æœåŠ¡ä¸“æ </span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/01.%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ¶æ„è®¾è®¡.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ¶æ„è®¾è®¡</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%94%AF%E4%BB%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98API%E5%AF%B9%E6%8E%A5%E6%8C%87%E5%8D%97/1_%E5%95%86%E5%AE%B6%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/è§£å†³æ–¹æ¡ˆ.svg" alt="" style="width: 16px; height: 16px;">
              <span>è§£å†³æ–¹æ¡ˆ</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ•°æ®ç»“æ„.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ•°æ®ç»“æ„</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Java/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/1_%E5%B9%82%E7%AD%89%E8%AE%BE%E8%AE%A1.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/ç³»ç»Ÿä¼˜åŒ–.svg" alt="" style="width: 16px; height: 16px;">
              <span>ç³»ç»Ÿä¼˜åŒ–</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/python.svg" alt="" style="width: 16px; height: 16px;">
              <span>Python</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/åŸºç¡€è¯­æ³•.svg" alt="" style="width: 16px; height: 16px;">
              <span>åŸºç¡€è¯­æ³•</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/1_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ•°æ®åˆ†æ.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ•°æ®åˆ†æ</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Python/%E7%88%AC%E8%99%AB/1_%E7%88%AC%E8%99%AB%E7%9A%84%E6%B5%81%E7%A8%8B.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/çˆ¬è™«.svg" alt="" style="width: 16px; height: 16px;">
              <span>çˆ¬è™«</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1_AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%A7%91%E6%99%AE.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/äººå·¥æ™ºèƒ½.svg" alt="" style="width: 16px; height: 16px;">
              <span>AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/database.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ•°æ®åº“</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/database/mysql/acid.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/MySQL.svg" alt="" style="width: 16px; height: 16px;">
              <span>MySQL</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/database/mongodb/mongodb-introduction.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/MongoDB.svg" alt="" style="width: 16px; height: 16px;">
              <span>MongoDB</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/database/postgresql/postgresql-introduction.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/PostgreSQL.svg" alt="" style="width: 16px; height: 16px;">
              <span>PostgreSQL</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/database/tidb/tidb-introduction.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/TiDB.svg" alt="" style="width: 16px; height: 16px;">
              <span>åˆ†å¸ƒå¼æ•°æ®åº“TIDB</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/database/neo4j/neo4j-introduce.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/Neo4j.svg" alt="" style="width: 16px; height: 16px;">
              <span>Neo4j</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Redis/Redis%E5%9F%BA%E7%A1%80/1_Redis%E7%BC%93%E5%AD%98%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/redis.svg" alt="" style="width: 16px; height: 16px;">
              <span>Redisä¸“æ </span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/framework.svg" alt="" style="width: 16px; height: 16px;">
              <span>å¸¸ç”¨æ¡†æ¶</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Activiti7/Activiti%E6%95%B4%E5%90%88Spring.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å·¥ä½œæµ.svg" alt="" style="width: 16px; height: 16px;">
              <span>å·¥ä½œæµå¼•æ“Activiti7</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Caffeine/0_Caffeine%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/ç¼“å­˜.svg" alt="" style="width: 16px; height: 16px;">
              <span>ç¼“å­˜æ¡†æ¶Caffeine</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/EasyCaptcha/0_%E4%BD%BF%E7%94%A8EasyCaptcha%E7%94%9F%E6%88%90%E9%AA%8C%E8%AF%81%E7%A0%81.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/éªŒè¯ç .svg" alt="" style="width: 16px; height: 16px;">
              <span>éªŒè¯ç EasyCaptcha</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/EasyExcel/0_EasyExcel%E6%A6%82%E8%BF%B0.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/EasyExcel.svg" alt="" style="width: 16px; height: 16px;">
              <span>è¡¨æ ¼å·¥å…·EasyExcel</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/java/framework/distributed/elasticSearch01.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/ElasticSearch.svg" alt="" style="width: 16px; height: 16px;">
              <span>æœç´¢å¼•æ“ElasticSearch</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Mybatis/Mybatis-Plus-Join%E8%BF%9E%E8%A1%A8%E6%9F%A5%E8%AF%A2.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/Mybatis.svg" alt="" style="width: 16px; height: 16px;">
              <span>ä¸‰å‰‘å®¢Mybatis</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/ShardingJdbc/0_ShardingJdbc%E7%9A%84%E6%A6%82%E8%BF%B0.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ‰‹åŠ¨åˆ†è¡¨.svg" alt="" style="width: 16px; height: 16px;">
              <span>åˆ†åº“åˆ†è¡¨ShardingJdbc</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Spring/1_Spring%E5%AE%B9%E5%99%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/Spring.svg" alt="" style="width: 16px; height: 16px;">
              <span>ä¸‰å‰‘å®¢Spring</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/SpringBoot/SpringBoot%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/0_SpringBoot%E7%BC%96%E7%A8%8B%E8%B5%B7%E6%AD%A5.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/SpringBoot.svg" alt="" style="width: 16px; height: 16px;">
              <span>ä¸‰å‰‘å®¢SpringBoot</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/framework/springAI/overview.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/spring-ai.svg" alt="" style="width: 16px; height: 16px;">
              <span>AIæ¡†æ¶Spring AI</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/framework/springAIAlibaba/overview.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/é˜¿é‡Œå·´å·´.svg" alt="" style="width: 16px; height: 16px;">
              <span>AIæ¡†æ¶Spring AI Alibaba</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/java/framework/distributed/springBootAdmin.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/ç›‘æ§.svg" alt="" style="width: 16px; height: 16px;">
              <span>ç›‘æ§å·¥å…·SpringBootAdmin</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/java/framework/distributed/distributedTaskScheduling.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/xxl-job.svg" alt="" style="width: 16px; height: 16px;">
              <span>ä»»åŠ¡è°ƒåº¦XXL-JOB</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/framework/thymeleaf/thymeleafBasicGrammar.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/thymeleaf.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ¨¡æ¿å¼•æ“Thymeleaf</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/framework/retry/springRetry.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/é‡è¯•.svg" alt="" style="width: 16px; height: 16px;">
              <span>é‡è¯•æ¡†æ¶Retry</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Linux/Shell%E5%91%BD%E4%BB%A4/0_Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/linux.svg" alt="" style="width: 16px; height: 16px;">
              <span>Linux</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/StableDiffusion/StableDiffusion/0_StableDiffusion%E4%BB%8B%E7%BB%8D.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/aigc.svg" alt="" style="width: 16px; height: 16px;">
              <span>AIGC</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/notes.svg" alt="" style="width: 16px; height: 16px;">
              <span>éšç¬”æ–‡æ¡£</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>åšå®¢ç¬”è®°</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3/Vuepress/0_Vuepress%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/vuepress.svg" alt="" style="width: 16px; height: 16px;">
              <span>VuePress</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3/VitPress/0_Vitpress%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/vuepress-open.svg" alt="" style="width: 16px; height: 16px;">
              <span>VitPress</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3/%E5%85%B6%E4%BB%96%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3/Github_Pages%E5%8A%A0%E9%80%9F.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å…¶ä»–.svg" alt="" style="width: 16px; height: 16px;">
              <span>å…¶ä»–</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>æ—¥å¸¸ç¬”è®°</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0/IDEA+Linux%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/note.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ—¥å¸¸ç¬”è®°</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3/PDF%E8%BD%AC%E6%8D%A2.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å¼€å‘æ–‡æ¡£.svg" alt="" style="width: 16px; height: 16px;">
              <span>å¼€å‘æ–‡æ¡£</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/0_%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å¼€æº.svg" alt="" style="width: 16px; height: 16px;">
              <span>å¼€æºé¡¹ç›®</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/01_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/è€ƒè¯•.svg" alt="" style="width: 16px; height: 16px;">
              <span>è½¯è€ƒä¸­çº§</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E9%9D%A2%E8%AF%95%E4%B8%93%E6%A0%8F/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3/1_%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A6%82%E8%BF%B0.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/è°ˆè¯é¢è¯•.svg" alt="" style="width: 16px; height: 16px;">
              <span>é¢è¯•ä¸“æ </span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/daily/%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6/1_%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ•°å­¦.svg" alt="" style="width: 16px; height: 16px;">
              <span>é«˜ç­‰æ•°å­¦</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>å…³äºæœ¬ç«™</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/nav.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å®˜ç½‘ç½‘ç«™.svg" alt="" style="width: 16px; height: 16px;">
              <span>ç½‘ç«™å¯¼èˆª</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/archives.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/å½’æ¡£2.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ–‡ç« å½’æ¡£</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/articleOverview.html" data-v-35975db6><!--[--><span data-v-35975db6>
            <div style="display: flex; align-items: center; gap: 4px;">
             <img src="/svg/navIcon/æ¸…å•2.svg" alt="" style="width: 16px; height: 16px;">
              <span>æ–‡ç« æ¸…å•</span><span>&nbsp;&nbsp;</span>
            </div>
            </span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://gitee.com/xu_xiaolong" aria-label="gitee" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-gitee"></span></a><a class="VPSocialLink no-icon" href="https://github.com/Daneliya" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>ä¸»é¢˜</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://gitee.com/xu_xiaolong" aria-label="gitee" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-gitee"></span></a><a class="VPSocialLink no-icon" href="https://github.com/Daneliya" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><!--[--><!--]--><!--[--><div class="tk-theme-enhance flx-align-center"><!--[--><i class="tk-icon" style="--icon-size:20px;--icon-color-hover:var(--tk-theme-color);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="m512 863.36 384-54.848v-638.72L525.568 222.72a96 96 0 0 1-27.136 0L128 169.792v638.72zM137.024 106.432l370.432 52.928a32 32 0 0 0 9.088 0l370.432-52.928A64 64 0 0 1 960 169.792v638.72a64 64 0 0 1-54.976 63.36l-388.48 55.488a32 32 0 0 1-9.088 0l-388.48-55.488A64 64 0 0 1 64 808.512v-638.72a64 64 0 0 1 73.024-63.36z"
    ></path>
    <path fill="currentColor" d="M480 192h64v704h-64z"></path>
  </svg></i><!--]--></div><!--teleport start--><!--teleport end--><!--]--><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-9a104c51 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>èœå•</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>è¿”å›é¡¶éƒ¨</button><!----></div></div></div><aside class="VPSidebar" data-v-9a104c51 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--[--><!--v-if--><!--]--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>åˆ†å¸ƒå¼</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>01.åˆ†å¸ƒå¼ç¼“å­˜</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/01.%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>åˆ†å¸ƒå¼ç¼“å­˜æ¦‚è¿°</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>02.åˆ†å¸ƒå¼æœç´¢</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/02.%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2/1_%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8EElasticsearch01.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>åˆè¯†ElasticSearch</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/02.%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2/2_%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8EElasticsearch02.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Elasticsearchæ•°æ®æœç´¢</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/02.%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2/3_%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8EElasticsearch03.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Elasticsearché«˜çº§åŠŸèƒ½</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/02.%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2/4_ElasticSearch%E8%BF%9B%E9%98%B6%E5%8A%9F%E8%83%BD.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Elasticsearchè¿›é˜¶åŠŸèƒ½</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>03.åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/03.%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/1_%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BB%8B%E7%BB%8D.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>æ¶ˆæ¯é˜Ÿåˆ—ä»‹ç»</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h4 class="text" data-v-b3fd67f8>01.RocketMQ</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-3 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/03.%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/01.RocketMQ/RocketMQ-01.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>RocketMQ-å­¦ä¹ ç¬”è®°01</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/03.%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/01.RocketMQ/RocketMQ-02.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>RocketMQ-å­¦ä¹ ç¬”è®°02</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/03.%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/01.RocketMQ/RocketMQ-03.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>RocketMQ-å­¦ä¹ ç¬”è®°03</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h4 class="text" data-v-b3fd67f8>02.RabbitMQ</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-3 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/03.%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/02.RabbitMQ/1_RabbitMQ%E5%AE%89%E8%A3%85.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>RabbitMQå®‰è£…</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/03.%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/02.RabbitMQ/2_RabbitMQ.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>RabbitMQæ¶ˆæ¯é˜Ÿåˆ—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/03.%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/02.RabbitMQ/3_RabbitMQ%E9%AB%98%E7%BA%A7.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>RabbitMQé«˜çº§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/03.%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/02.RabbitMQ/4_RabbitMQ%E5%BB%B6%E6%97%B6%E9%98%9F%E5%88%97.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>RabbitMQå»¶æ—¶é˜Ÿåˆ—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/03.%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/02.RabbitMQ/5_RabbitMQ%E6%97%A5%E5%BF%97%E8%BF%BD%E8%B8%AA.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>RabbitMQæ—¥å¿—è¿½è¸ª</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>04.åˆ†å¸ƒå¼äº‹åŠ¡</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/04.%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/0_%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%A6%82%E5%BF%B5.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>åˆ†å¸ƒå¼äº‹åŠ¡æ¦‚å¿µ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/04.%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/1_%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1Seata.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>åˆ†å¸ƒå¼äº‹åŠ¡Seata</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/04.%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/2_%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%A1%86%E6%9E%B6TX-LCN.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶TX-LCN</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>05.åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/05.%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/0_%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E6%A1%86%E6%9E%B6%E6%A6%82%E8%BF%B0.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦æ¡†æ¶æ¦‚è¿°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/05.%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/1_XXL-JOB%E4%BB%8B%E7%BB%8D.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>XXL-JOBä»‹ç»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/05.%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/2_XXL-JOB%E6%89%A7%E8%A1%8C%E5%99%A8%E9%85%8D%E7%BD%AE.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>XXL-JOBæ‰§è¡Œå™¨é…ç½®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/05.%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/3_%E5%88%9B%E5%BB%BAXXL-JOB%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>åˆ›å»ºXXL-JOBä»»åŠ¡è°ƒåº¦</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/05.%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/4_%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>è‡ªåŠ¨åˆ›å»ºå®šæ—¶ä»»åŠ¡</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>06.åˆ†å¸ƒå¼ç›‘æ§</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/06.%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/0_%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¯è§‚æµ‹æ€§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/06.%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/1_ARMS%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ARMS ç³»ç»Ÿç›‘æ§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/06.%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/2_Prometheus.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Prometheusç›‘æ§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/06.%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/3_SkyWalking.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>SkyWalkingé“¾è·¯è¿½è¸ª</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/06.%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/CAT.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>CAT</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/06.%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/Pinpoint.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Pinpointæ€§èƒ½ç›‘æ§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/06.%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/SpringBootAdmin.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>SpringBootAdminç³»ç»Ÿç›‘æ§</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>07.åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/07.%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/0_ElasticStack%E6%A6%82%E8%BF%B0.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ElasticStackæ¦‚è¿°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/07.%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/1_Elasticsearch%E5%AE%89%E8%A3%85.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ELKç¯‡ä¹‹å®‰è£…ElasticSearchå’ŒKibana</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/07.%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/2_Logstash%E4%BD%BF%E7%94%A8.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ELKç¯‡ä¹‹Logstashä½¿ç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/07.%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/3_SpringBoot%E9%9B%86%E6%88%90ELK.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ELKç¯‡ä¹‹SpringBooté›†æˆELK</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/07.%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/4_EFK%E7%AF%87%E4%B9%8BFilebeat%E4%BD%BF%E7%94%A8.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>EFKç¯‡ä¹‹Filebeatä½¿ç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/07.%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/5_SpringBoot%E9%9B%86%E6%88%90Graylog.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>SpringBooté›†æˆGraylog</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>é«˜å¹¶å‘</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>è´Ÿè½½å‡è¡¡</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%B9%B6%E5%8F%91/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/README.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>ç¼“å­˜</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%B9%B6%E5%8F%91/%E7%BC%93%E5%AD%98/README.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>æ•°æ®åº“</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%B9%B6%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/README.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>é«˜å¯ç”¨</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>0_æ¦‚è¿°</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%8F%AF%E7%94%A8/0_%E6%A6%82%E8%BF%B0/0_%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%BF%B0.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>é«˜å¯ç”¨æ¶æ„è®¾è®¡æ¦‚è¿°</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>é™çº§ç†”æ–­</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%8F%AF%E7%94%A8/%E9%99%8D%E7%BA%A7%E7%86%94%E6%96%AD/README.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>é™æµ</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%8F%AF%E7%94%A8/%E9%99%90%E6%B5%81/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96%E4%B9%8B%E9%99%90%E6%B5%81.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ç³»ç»Ÿä¼˜åŒ–ä¹‹é™æµ</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-9a104c51 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><!--[--><!--[--><!--]--><div class="tk-article-share"><button class="tk-article-share__button flx-center" aria-label="åˆ†äº«æ­¤é¡µé¢" aria-live="polite"><div class="flx-center"><i class="tk-icon" style="margin-right:4px;--icon-color-hover:var(--tk-theme-color);"><svg
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    aria-hidden="true"
    role="img"
    class="iconify iconify iconify--solar"
    alt="Icon"
    width="1em"
    height="1em"
    viewBox="0 0 24 24"
    style="vertical-align: -0.125em"
  >
    <path
      fill="currentColor"
      fill-rule="evenodd"
      d="M13.803 5.333c0-1.84 1.5-3.333 3.348-3.333A3.34 3.34 0 0 1 20.5 5.333c0 1.841-1.5 3.334-3.349 3.334a3.35 3.35 0 0 1-2.384-.994l-4.635 3.156a3.34 3.34 0 0 1-.182 1.917l5.082 3.34a3.35 3.35 0 0 1 2.12-.753a3.34 3.34 0 0 1 3.348 3.334C20.5 20.507 19 22 17.151 22a3.34 3.34 0 0 1-3.348-3.333a3.3 3.3 0 0 1 .289-1.356L9.05 14a3.35 3.35 0 0 1-2.202.821A3.34 3.34 0 0 1 3.5 11.487a3.34 3.34 0 0 1 3.348-3.333c1.064 0 2.01.493 2.623 1.261l4.493-3.059a3.3 3.3 0 0 1-.161-1.023"
      clip-rule="evenodd"
    ></path>
  </svg></i> åˆ†äº«æ­¤é¡µé¢</div></button></div><!--[--><!--]--><!--]--><!--[--><!--]--><!--]--><!--]--><!--]--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>æœ¬é¡µå¯¼èˆª</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--[--><!--[--><!--[--><!--]--><!--[--><!--[--><!--]--><div class="tk-article-analyze flx-justify-between" aria-label="æ–‡ç« åˆ†æ"><div class="tk-article-breadcrumb" role="navigation" aria-label="æ–‡ç« é¢åŒ…å±‘"><div class="tk-breadcrumb" role="navigation" aria-label="é¢åŒ…å±‘"><!--[--><span class="tk-breadcrumb__item"><span class="tk-breadcrumb__inner" role="link"><!--[--><a href="/" title="é¦–é¡µ" class="home hover-color" aria-label="é¦–é¡µ"><i class="tk-icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"
    ></path>
  </svg></i></a><!--]--></span><span class="tk-breadcrumb__separator" role="presentation">/</span></span><!--[--><span class="tk-breadcrumb__item"><span class="tk-breadcrumb__inner" role="link"><!--[--><span href title="Java" class="" aria-label="Java">Java</span><!--]--></span><span class="tk-breadcrumb__separator" role="presentation">/</span></span><span class="tk-breadcrumb__item"><span class="tk-breadcrumb__inner" role="link"><!--[--><span href title="æ¶æ„è®¾è®¡" class="" aria-label="æ¶æ„è®¾è®¡">æ¶æ„è®¾è®¡</span><!--]--></span><span class="tk-breadcrumb__separator" role="presentation">/</span></span><span class="tk-breadcrumb__item"><span class="tk-breadcrumb__inner" role="link"><!--[--><span href title="åˆ†å¸ƒå¼" class="" aria-label="åˆ†å¸ƒå¼">åˆ†å¸ƒå¼</span><!--]--></span><span class="tk-breadcrumb__separator" role="presentation">/</span></span><span class="tk-breadcrumb__item"><span class="tk-breadcrumb__inner" role="link"><!--[--><span href title="åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—" class="" aria-label="åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—">åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—</span><!--]--></span><span class="tk-breadcrumb__separator" role="presentation">/</span></span><span class="tk-breadcrumb__item"><span class="tk-breadcrumb__inner" role="link"><!--[--><span href title="RocketMQ" class="" aria-label="RocketMQ">RocketMQ</span><!--]--></span><span class="tk-breadcrumb__separator" role="presentation">/</span></span><!--]--><!--]--></div></div><div class="tk-article-analyze__wrapper flx-align-center"><div class="tk-article-info article" role="group" aria-label="æ–‡ç« ä¿¡æ¯"><!--[--><!--[--><span class="tk-article-info__item" role="group" aria-label="ä½œè€…"><i class="tk-icon tk-article-info__icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
  <path
    fill="currentColor"
    d="M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0"
  ></path>
</svg></i><a title="ä½œè€…" href="https://github.com/Daneliya" target="_blank" class="hover-color" aria-label="xiaolong">xiaolong</a></span><!--]--><!--[--><span class="tk-article-info__item" role="group" aria-label="åˆ›å»ºæ—¶é—´"><i class="tk-icon tk-article-info__icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
  <path
    fill="currentColor"
    d="M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"
  ></path>
</svg></i><a title="åˆ›å»ºæ—¶é—´" class="hover-color" aria-label="2026-01-21">2026-01-21</a></span><!--]--><!--[--><!--v-if--><!--]--><!--[--><!--v-if--><!--]--><!--[--><!--v-if--><!--]--><!--]--><!--[--><!--]--></div><div class="flx-center"><i class="tk-icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="m512 863.36 384-54.848v-638.72L525.568 222.72a96 96 0 0 1-27.136 0L128 169.792v638.72zM137.024 106.432l370.432 52.928a32 32 0 0 0 9.088 0l370.432-52.928A64 64 0 0 1 960 169.792v638.72a64 64 0 0 1-54.976 63.36l-388.48 55.488a32 32 0 0 1-9.088 0l-388.48-55.488A64 64 0 0 1 64 808.512v-638.72a64 64 0 0 1 73.024-63.36z"
    ></path>
    <path fill="currentColor" d="M480 192h64v704h-64z"></path>
  </svg></i><a title="æ–‡ç« å­—æ•°" class="hover-color" aria-label="æ–‡ç« å­—æ•°">20985</a></div><div class="flx-center"><i class="tk-icon" style="--icon-color-hover:var(--tk-theme-color);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"
    ></path>
    <path fill="currentColor" d="M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"></path>
    <path fill="currentColor" d="M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"></path>
  </svg></i><a title="é¢„è®¡é˜…è¯»æ—¶é•¿" class="hover-color" aria-label="é¢„è®¡é˜…è¯»æ—¶é•¿">1h46m</a></div><!--v-if--></div></div><!--[--><!--]--><!--]--><!----><!----><!----><!--v-if--><!--[--><div class="tk-sidebar-trigger" title="ä¾§è¾¹æ å±•å¼€/æŠ˜å " role="button" aria-label="ä¾§è¾¹æ å±•å¼€/æŠ˜å "><div class="tk-right-bottom-button__button"><i class="tk-icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg
    viewBox="0 0 48 48"
    display="inline-block"
    vertical-align="middle"
    min-width="1.2rem"
    width="1.2em"
    height="1.2em"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="4">
      <path d="M6 7h36M8 24h32" />
      <path stroke-linejoin="round" d="M13.99 30L8 24.005L14 18m20.01 0L40 23.995L34 30" />
      <path d="M6 41h36" />
    </g>
  </svg></i></div></div><!--]--><!--]--><!--]--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _Java_%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1_%E5%88%86%E5%B8%83%E5%BC%8F_03_%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97_01_RocketMQ_RocketMQ-01" data-v-39a288b8><div><div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /Java\æ¶æ„è®¾è®¡\åˆ†å¸ƒå¼\03.åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—\01.RocketMQ\RocketMQ-01.md for this page in Markdown format</div><h1 id="_1-mqä»‹ç»" tabindex="-1">1. MQä»‹ç» <a class="header-anchor" href="#_1-mqä»‹ç»" aria-label="Permalink to &quot;1. MQä»‹ç»&quot;">â€‹</a></h1><p>##1.1 ä¸ºä»€ä¹ˆè¦ç”¨MQ</p><p>æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸€ç§â€œå…ˆè¿›å…ˆå‡ºâ€çš„æ•°æ®ç»“æ„</p><p><img src="/assets/queue1.1Ub1lY05.png" alt="" loading="lazy"></p><p>å…¶åº”ç”¨åœºæ™¯ä¸»è¦åŒ…å«ä»¥ä¸‹3ä¸ªæ–¹é¢</p><ul><li>åº”ç”¨è§£è€¦</li></ul><p>ç³»ç»Ÿçš„è€¦åˆæ€§è¶Šé«˜ï¼Œå®¹é”™æ€§å°±è¶Šä½ã€‚ä»¥ç”µå•†åº”ç”¨ä¸ºä¾‹ï¼Œç”¨æˆ·åˆ›å»ºè®¢å•åï¼Œå¦‚æœè€¦åˆè°ƒç”¨åº“å­˜ç³»ç»Ÿã€ç‰©æµç³»ç»Ÿã€æ”¯ä»˜ç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªå­ç³»ç»Ÿå‡ºäº†æ•…éšœæˆ–è€…å› ä¸ºå‡çº§ç­‰åŸå› æš‚æ—¶ä¸å¯ç”¨ï¼Œéƒ½ä¼šé€ æˆä¸‹å•æ“ä½œå¼‚å¸¸ï¼Œå½±å“ç”¨æˆ·ä½¿ç”¨ä½“éªŒã€‚</p><p><img src="/assets/%E8%A7%A3%E8%80%A61.Ccby4sqe.png" alt="" loading="lazy"></p><p>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è§£è€¦åˆï¼Œç³»ç»Ÿçš„è€¦åˆæ€§å°±ä¼šæé«˜äº†ã€‚æ¯”å¦‚ç‰©æµç³»ç»Ÿå‘ç”Ÿæ•…éšœï¼Œéœ€è¦å‡ åˆ†é’Ÿæ‰èƒ½æ¥ä¿®å¤ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œç‰©æµç³»ç»Ÿè¦å¤„ç†çš„æ•°æ®è¢«ç¼“å­˜åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç”¨æˆ·çš„ä¸‹å•æ“ä½œæ­£å¸¸å®Œæˆã€‚å½“ç‰©æµç³»ç»Ÿå›å¤åï¼Œè¡¥å……å¤„ç†å­˜åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„è®¢å•æ¶ˆæ¯å³å¯ï¼Œç»ˆç«¯ç³»ç»Ÿæ„ŸçŸ¥ä¸åˆ°ç‰©æµç³»ç»Ÿå‘ç”Ÿè¿‡å‡ åˆ†é’Ÿæ•…éšœã€‚</p><p><img src="/assets/%E8%A7%A3%E8%80%A62.pGIvVlOc.png" alt="" loading="lazy"></p><ul><li>æµé‡å‰Šå³°</li></ul><p><img src="/assets/mq-5.BQn5IWEH.png" alt="" loading="lazy"></p><p>åº”ç”¨ç³»ç»Ÿå¦‚æœé‡åˆ°ç³»ç»Ÿè¯·æ±‚æµé‡çš„ç¬é—´çŒ›å¢ï¼Œæœ‰å¯èƒ½ä¼šå°†ç³»ç»Ÿå‹å®ã€‚æœ‰äº†æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥å°†å¤§é‡è¯·æ±‚ç¼“å­˜èµ·æ¥ï¼Œåˆ†æ•£åˆ°å¾ˆé•¿ä¸€æ®µæ—¶é—´å¤„ç†ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§æåˆ°ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p><p><img src="/assets/mq-6.Ba0rTTM6.png" alt="" loading="lazy"></p><p>ä¸€èˆ¬æƒ…å†µï¼Œä¸ºäº†ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œå¦‚æœç³»ç»Ÿè´Ÿè½½è¶…è¿‡é˜ˆå€¼ï¼Œå°±ä¼šé˜»æ­¢ç”¨æˆ·è¯·æ±‚ï¼Œè¿™ä¼šå½±å“ç”¨æˆ·ä½“éªŒï¼Œè€Œå¦‚æœä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å°†è¯·æ±‚ç¼“å­˜èµ·æ¥ï¼Œç­‰å¾…ç³»ç»Ÿå¤„ç†å®Œæ¯•åé€šçŸ¥ç”¨æˆ·ä¸‹å•å®Œæ¯•ï¼Œè¿™æ ·æ€»ä¸èƒ½ä¸‹å•ä½“éªŒè¦å¥½ã€‚</p><p><u>å¤„äºç»æµè€ƒé‡ç›®çš„ï¼š</u></p><p>ä¸šåŠ¡ç³»ç»Ÿæ­£å¸¸æ—¶æ®µçš„QPSå¦‚æœæ˜¯1000ï¼Œæµé‡æœ€é«˜å³°æ˜¯10000ï¼Œä¸ºäº†åº”å¯¹æµé‡é«˜å³°é…ç½®é«˜æ€§èƒ½çš„æœåŠ¡å™¨æ˜¾ç„¶ä¸åˆ’ç®—ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¯¹å³°å€¼æµé‡å‰Šå³°</p><ul><li>æ•°æ®åˆ†å‘</li></ul><p><img src="/assets/mq-1.me0O6Ssl.png" alt="" loading="lazy"></p><p>é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥è®©æ•°æ®åœ¨å¤šä¸ªç³»ç»Ÿæ›´åŠ ä¹‹é—´è¿›è¡Œæµé€šã€‚æ•°æ®çš„äº§ç”Ÿæ–¹ä¸éœ€è¦å…³å¿ƒè°æ¥ä½¿ç”¨æ•°æ®ï¼Œåªéœ€è¦å°†æ•°æ®å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ•°æ®ä½¿ç”¨æ–¹ç›´æ¥åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ç›´æ¥è·å–æ•°æ®å³å¯</p><p><img src="/assets/mq-2.BxDA-zWv.png" alt="" loading="lazy"></p><h2 id="_1-2-mqçš„ä¼˜ç‚¹å’Œç¼ºç‚¹" tabindex="-1">1.2 MQçš„ä¼˜ç‚¹å’Œç¼ºç‚¹ <a class="header-anchor" href="#_1-2-mqçš„ä¼˜ç‚¹å’Œç¼ºç‚¹" aria-label="Permalink to &quot;1.2 MQçš„ä¼˜ç‚¹å’Œç¼ºç‚¹&quot;">â€‹</a></h2><p>ä¼˜ç‚¹ï¼šè§£è€¦ã€å‰Šå³°ã€æ•°æ®åˆ†å‘</p><p>ç¼ºç‚¹åŒ…å«ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><p>ç³»ç»Ÿå¯ç”¨æ€§é™ä½</p><p>ç³»ç»Ÿå¼•å…¥çš„å¤–éƒ¨ä¾èµ–è¶Šå¤šï¼Œç³»ç»Ÿç¨³å®šæ€§è¶Šå·®ã€‚ä¸€æ—¦MQå®•æœºï¼Œå°±ä¼šå¯¹ä¸šåŠ¡é€ æˆå½±å“ã€‚</p><p>å¦‚ä½•ä¿è¯MQçš„é«˜å¯ç”¨ï¼Ÿ</p></li><li><p>ç³»ç»Ÿå¤æ‚åº¦æé«˜</p><p>MQçš„åŠ å…¥å¤§å¤§å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œä»¥å‰ç³»ç»Ÿé—´æ˜¯åŒæ­¥çš„è¿œç¨‹è°ƒç”¨ï¼Œç°åœ¨æ˜¯é€šè¿‡MQè¿›è¡Œå¼‚æ­¥è°ƒç”¨ã€‚</p><p>å¦‚ä½•ä¿è¯æ¶ˆæ¯æ²¡æœ‰è¢«é‡å¤æ¶ˆè´¹ï¼Ÿæ€ä¹ˆå¤„ç†æ¶ˆæ¯ä¸¢å¤±æƒ…å†µï¼Ÿé‚£ä¹ˆä¿è¯æ¶ˆæ¯ä¼ é€’çš„é¡ºåºæ€§ï¼Ÿ</p></li><li><p>ä¸€è‡´æ€§é—®é¢˜</p><p>Aç³»ç»Ÿå¤„ç†å®Œä¸šåŠ¡ï¼Œé€šè¿‡MQç»™Bã€Cã€Dä¸‰ä¸ªç³»ç»Ÿå‘æ¶ˆæ¯æ•°æ®ï¼Œå¦‚æœBç³»ç»Ÿã€Cç³»ç»Ÿå¤„ç†æˆåŠŸï¼ŒDç³»ç»Ÿå¤„ç†å¤±è´¥ã€‚</p><p>å¦‚ä½•ä¿è¯æ¶ˆæ¯æ•°æ®å¤„ç†çš„ä¸€è‡´æ€§ï¼Ÿ</p></li></ul><h2 id="_1-3-å„ç§mqäº§å“çš„æ¯”è¾ƒ" tabindex="-1">1.3 å„ç§MQäº§å“çš„æ¯”è¾ƒ <a class="header-anchor" href="#_1-3-å„ç§mqäº§å“çš„æ¯”è¾ƒ" aria-label="Permalink to &quot;1.3 å„ç§MQäº§å“çš„æ¯”è¾ƒ&quot;">â€‹</a></h2><p>å¸¸è§çš„MQäº§å“åŒ…æ‹¬Kafkaã€ActiveMQã€RabbitMQã€RocketMQã€‚</p><p><img src="/assets/MQ%E6%AF%94%E8%BE%83.BghTv-Mb.png" alt="" loading="lazy"></p><h1 id="_2-rocketmqå¿«é€Ÿå…¥é—¨" tabindex="-1">2. RocketMQå¿«é€Ÿå…¥é—¨ <a class="header-anchor" href="#_2-rocketmqå¿«é€Ÿå…¥é—¨" aria-label="Permalink to &quot;2. RocketMQå¿«é€Ÿå…¥é—¨&quot;">â€‹</a></h1><p>RocketMQæ˜¯é˜¿é‡Œå·´å·´2016å¹´MQä¸­é—´ä»¶ï¼Œä½¿ç”¨Javaè¯­è¨€å¼€å‘ï¼Œåœ¨é˜¿é‡Œå†…éƒ¨ï¼ŒRocketMQæ‰¿æ¥äº†ä¾‹å¦‚â€œåŒ11â€ç­‰é«˜å¹¶å‘åœºæ™¯çš„æ¶ˆæ¯æµè½¬ï¼Œèƒ½å¤Ÿå¤„ç†ä¸‡äº¿çº§åˆ«çš„æ¶ˆæ¯ã€‚</p><h2 id="_2-1-å‡†å¤‡å·¥ä½œ" tabindex="-1">2.1 å‡†å¤‡å·¥ä½œ <a class="header-anchor" href="#_2-1-å‡†å¤‡å·¥ä½œ" aria-label="Permalink to &quot;2.1 å‡†å¤‡å·¥ä½œ&quot;">â€‹</a></h2><h3 id="_2-1-1-ä¸‹è½½rocketmq" tabindex="-1">2.1.1 ä¸‹è½½RocketMQ <a class="header-anchor" href="#_2-1-1-ä¸‹è½½rocketmq" aria-label="Permalink to &quot;2.1.1 ä¸‹è½½RocketMQ&quot;">â€‹</a></h3><p>RocketMQæœ€æ–°ç‰ˆæœ¬ï¼š4.5.1</p><p><a href="https://www.apache.org/dyn/closer.cgi?path=rocketmq/4.5.1/rocketmq-all-4.5.1-bin-release.zip" target="_blank" rel="noreferrer">ä¸‹è½½åœ°å€</a></p><h3 id="_2-2-2-ç¯å¢ƒè¦æ±‚" tabindex="-1">2.2.2 ç¯å¢ƒè¦æ±‚ <a class="header-anchor" href="#_2-2-2-ç¯å¢ƒè¦æ±‚" aria-label="Permalink to &quot;2.2.2 ç¯å¢ƒè¦æ±‚&quot;">â€‹</a></h3><ul><li><p>Linux64ä½ç³»ç»Ÿ</p></li><li><p>JDK1.8(64ä½)</p></li><li><p>æºç å®‰è£…éœ€è¦å®‰è£…Maven 3.2.x</p></li></ul><h2 id="_2-2-å®‰è£…rocketmq" tabindex="-1">2.2 å®‰è£…RocketMQ <a class="header-anchor" href="#_2-2-å®‰è£…rocketmq" aria-label="Permalink to &quot;2.2 å®‰è£…RocketMQ&quot;">â€‹</a></h2><h3 id="_2-2-1-å®‰è£…æ­¥éª¤" tabindex="-1">2.2.1 å®‰è£…æ­¥éª¤ <a class="header-anchor" href="#_2-2-1-å®‰è£…æ­¥éª¤" aria-label="Permalink to &quot;2.2.1 å®‰è£…æ­¥éª¤&quot;">â€‹</a></h3><p>æœ¬æ•™ç¨‹ä»¥äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…</p><ol><li>è§£å‹å®‰è£…åŒ…</li><li>è¿›å…¥å®‰è£…ç›®å½•</li></ol><h3 id="_2-2-2-ç›®å½•ä»‹ç»" tabindex="-1">2.2.2 ç›®å½•ä»‹ç» <a class="header-anchor" href="#_2-2-2-ç›®å½•ä»‹ç»" aria-label="Permalink to &quot;2.2.2 ç›®å½•ä»‹ç»&quot;">â€‹</a></h3><ul><li>binï¼šå¯åŠ¨è„šæœ¬ï¼ŒåŒ…æ‹¬shellè„šæœ¬å’ŒCMDè„šæœ¬</li><li>confï¼šå®ä¾‹é…ç½®æ–‡ä»¶ ï¼ŒåŒ…æ‹¬brokeré…ç½®æ–‡ä»¶ã€logbacké…ç½®æ–‡ä»¶ç­‰</li><li>libï¼šä¾èµ–jaråŒ…ï¼ŒåŒ…æ‹¬Nettyã€commons-langã€FastJSONç­‰</li></ul><h2 id="_2-3-å¯åŠ¨rocketmq" tabindex="-1">2.3 å¯åŠ¨RocketMQ <a class="header-anchor" href="#_2-3-å¯åŠ¨rocketmq" aria-label="Permalink to &quot;2.3 å¯åŠ¨RocketMQ&quot;">â€‹</a></h2><ol><li>å¯åŠ¨NameServer</li></ol><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.å¯åŠ¨NameServer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/mqnamesrv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.æŸ¥çœ‹å¯åŠ¨æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/logs/rocketmqlogs/namesrv.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>å¯åŠ¨Broker</li></ol><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.å¯åŠ¨Broker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/mqbroker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:9876</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.æŸ¥çœ‹å¯åŠ¨æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/logs/rocketmqlogs/broker.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p>é—®é¢˜æè¿°ï¼š</p><p>RocketMQé»˜è®¤çš„è™šæ‹Ÿæœºå†…å­˜è¾ƒå¤§ï¼Œå¯åŠ¨Brokerå¦‚æœå› ä¸ºå†…å­˜ä¸è¶³å¤±è´¥ï¼Œéœ€è¦ç¼–è¾‘å¦‚ä¸‹ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹JVMå†…å­˜å¤§å°</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¼–è¾‘runbroker.shå’Œrunserver.shä¿®æ”¹é»˜è®¤JVMå¤§å°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runbroker.sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runserver.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>å‚è€ƒè®¾ç½®ï¼š</li></ul><p><code>JAVA_OPT=&quot;${JAVA_OPT} -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</code></p><h2 id="_2-4-æµ‹è¯•rocketmq" tabindex="-1">2.4 æµ‹è¯•RocketMQ <a class="header-anchor" href="#_2-4-æµ‹è¯•rocketmq" aria-label="Permalink to &quot;2.4 æµ‹è¯•RocketMQ&quot;">â€‹</a></h2><h3 id="_2-4-1-å‘é€æ¶ˆæ¯" tabindex="-1">2.4.1 å‘é€æ¶ˆæ¯ <a class="header-anchor" href="#_2-4-1-å‘é€æ¶ˆæ¯" aria-label="Permalink to &quot;2.4.1 å‘é€æ¶ˆæ¯&quot;">â€‹</a></h3><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.è®¾ç½®ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NAMESRV_ADDR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">localhost:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.ä½¿ç”¨å®‰è£…åŒ…çš„Demoå‘é€æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tools.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.apache.rocketmq.example.quickstart.Producer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-4-2-æ¥æ”¶æ¶ˆæ¯" tabindex="-1">2.4.2 æ¥æ”¶æ¶ˆæ¯ <a class="header-anchor" href="#_2-4-2-æ¥æ”¶æ¶ˆæ¯" aria-label="Permalink to &quot;2.4.2 æ¥æ”¶æ¶ˆæ¯&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.è®¾ç½®ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NAMESRV_ADDR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">localhost:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.æ¥æ”¶æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tools.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.apache.rocketmq.example.quickstart.Consumer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2-5-å…³é—­rocketmq" tabindex="-1">2.5 å…³é—­RocketMQ <a class="header-anchor" href="#_2-5-å…³é—­rocketmq" aria-label="Permalink to &quot;2.5 å…³é—­RocketMQ&quot;">â€‹</a></h2><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.å…³é—­NameServer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/mqshutdown</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> namesrv</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.å…³é—­Broker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/mqshutdown</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> broker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="_3-rocketmqé›†ç¾¤æ­å»º" tabindex="-1">3. RocketMQé›†ç¾¤æ­å»º <a class="header-anchor" href="#_3-rocketmqé›†ç¾¤æ­å»º" aria-label="Permalink to &quot;3. RocketMQé›†ç¾¤æ­å»º&quot;">â€‹</a></h1><h2 id="_3-1-å„è§’è‰²ä»‹ç»" tabindex="-1">3.1 å„è§’è‰²ä»‹ç» <a class="header-anchor" href="#_3-1-å„è§’è‰²ä»‹ç»" aria-label="Permalink to &quot;3.1 å„è§’è‰²ä»‹ç»&quot;">â€‹</a></h2><ul><li>Producerï¼šæ¶ˆæ¯çš„å‘é€è€…ï¼›ä¸¾ä¾‹ï¼šå‘ä¿¡è€…</li><li>Consumerï¼šæ¶ˆæ¯æ¥æ”¶è€…ï¼›ä¸¾ä¾‹ï¼šæ”¶ä¿¡è€…</li><li>Brokerï¼šæš‚å­˜å’Œä¼ è¾“æ¶ˆæ¯ï¼›ä¸¾ä¾‹ï¼šé‚®å±€</li><li>NameServerï¼šç®¡ç†Brokerï¼›ä¸¾ä¾‹ï¼šå„ä¸ªé‚®å±€çš„ç®¡ç†æœºæ„</li><li>Topicï¼šåŒºåˆ†æ¶ˆæ¯çš„ç§ç±»ï¼›ä¸€ä¸ªå‘é€è€…å¯ä»¥å‘é€æ¶ˆæ¯ç»™ä¸€ä¸ªæˆ–è€…å¤šä¸ªTopicï¼›ä¸€ä¸ªæ¶ˆæ¯çš„æ¥æ”¶è€…å¯ä»¥è®¢é˜…ä¸€ä¸ªæˆ–è€…å¤šä¸ªTopicæ¶ˆæ¯</li><li>Message Queueï¼šç›¸å½“äºæ˜¯Topicçš„åˆ†åŒºï¼›ç”¨äºå¹¶è¡Œå‘é€å’Œæ¥æ”¶æ¶ˆæ¯</li></ul><p><img src="/assets/RocketMQ%E8%A7%92%E8%89%B2.C0wOeWNj.jpg" alt="" loading="lazy"></p><h2 id="_3-2-é›†ç¾¤æ­å»ºæ–¹å¼" tabindex="-1">3.2 é›†ç¾¤æ­å»ºæ–¹å¼ <a class="header-anchor" href="#_3-2-é›†ç¾¤æ­å»ºæ–¹å¼" aria-label="Permalink to &quot;3.2 é›†ç¾¤æ­å»ºæ–¹å¼&quot;">â€‹</a></h2><h3 id="_3-2-1-é›†ç¾¤ç‰¹ç‚¹" tabindex="-1">3.2.1 é›†ç¾¤ç‰¹ç‚¹ <a class="header-anchor" href="#_3-2-1-é›†ç¾¤ç‰¹ç‚¹" aria-label="Permalink to &quot;3.2.1 é›†ç¾¤ç‰¹ç‚¹&quot;">â€‹</a></h3><ul><li><p>NameServeræ˜¯ä¸€ä¸ªå‡ ä¹æ— çŠ¶æ€èŠ‚ç‚¹ï¼Œå¯é›†ç¾¤éƒ¨ç½²ï¼ŒèŠ‚ç‚¹ä¹‹é—´æ— ä»»ä½•ä¿¡æ¯åŒæ­¥ã€‚</p></li><li><p>Brokeréƒ¨ç½²ç›¸å¯¹å¤æ‚ï¼ŒBrokeråˆ†ä¸ºMasterä¸Slaveï¼Œä¸€ä¸ªMasterå¯ä»¥å¯¹åº”å¤šä¸ªSlaveï¼Œä½†æ˜¯ä¸€ä¸ªSlaveåªèƒ½å¯¹åº”ä¸€ä¸ªMasterï¼ŒMasterä¸Slaveçš„å¯¹åº”å…³ç³»é€šè¿‡æŒ‡å®šç›¸åŒçš„BrokerNameï¼Œä¸åŒçš„BrokerIdæ¥å®šä¹‰ï¼ŒBrokerIdä¸º0è¡¨ç¤ºMasterï¼Œé0è¡¨ç¤ºSlaveã€‚Masterä¹Ÿå¯ä»¥éƒ¨ç½²å¤šä¸ªã€‚æ¯ä¸ªBrokerä¸NameServeré›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹å»ºç«‹é•¿è¿æ¥ï¼Œå®šæ—¶æ³¨å†ŒTopicä¿¡æ¯åˆ°æ‰€æœ‰NameServerã€‚</p></li><li><p>Producerä¸NameServeré›†ç¾¤ä¸­çš„å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆéšæœºé€‰æ‹©ï¼‰å»ºç«‹é•¿è¿æ¥ï¼Œå®šæœŸä»NameServerå–Topicè·¯ç”±ä¿¡æ¯ï¼Œå¹¶å‘æä¾›TopicæœåŠ¡çš„Masterå»ºç«‹é•¿è¿æ¥ï¼Œä¸”å®šæ—¶å‘Masterå‘é€å¿ƒè·³ã€‚Producerå®Œå…¨æ— çŠ¶æ€ï¼Œå¯é›†ç¾¤éƒ¨ç½²ã€‚</p></li><li><p>Consumerä¸NameServeré›†ç¾¤ä¸­çš„å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆéšæœºé€‰æ‹©ï¼‰å»ºç«‹é•¿è¿æ¥ï¼Œå®šæœŸä»NameServerå–Topicè·¯ç”±ä¿¡æ¯ï¼Œå¹¶å‘æä¾›TopicæœåŠ¡çš„Masterã€Slaveå»ºç«‹é•¿è¿æ¥ï¼Œä¸”å®šæ—¶å‘Masterã€Slaveå‘é€å¿ƒè·³ã€‚Consumeræ—¢å¯ä»¥ä»Masterè®¢é˜…æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥ä»Slaveè®¢é˜…æ¶ˆæ¯ï¼Œè®¢é˜…è§„åˆ™ç”±Brokeré…ç½®å†³å®šã€‚</p></li></ul><h3 id="_3-2-3-é›†ç¾¤æ¨¡å¼" tabindex="-1">3.2.3 é›†ç¾¤æ¨¡å¼ <a class="header-anchor" href="#_3-2-3-é›†ç¾¤æ¨¡å¼" aria-label="Permalink to &quot;3.2.3 é›†ç¾¤æ¨¡å¼&quot;">â€‹</a></h3><h4 id="_1-å•masteræ¨¡å¼" tabindex="-1">1ï¼‰å•Masteræ¨¡å¼ <a class="header-anchor" href="#_1-å•masteræ¨¡å¼" aria-label="Permalink to &quot;1ï¼‰å•Masteræ¨¡å¼&quot;">â€‹</a></h4><p>è¿™ç§æ–¹å¼é£é™©è¾ƒå¤§ï¼Œä¸€æ—¦Brokeré‡å¯æˆ–è€…å®•æœºæ—¶ï¼Œä¼šå¯¼è‡´æ•´ä¸ªæœåŠ¡ä¸å¯ç”¨ã€‚ä¸å»ºè®®çº¿ä¸Šç¯å¢ƒä½¿ç”¨,å¯ä»¥ç”¨äºæœ¬åœ°æµ‹è¯•ã€‚</p><h4 id="_2-å¤šmasteræ¨¡å¼" tabindex="-1">2ï¼‰å¤šMasteræ¨¡å¼ <a class="header-anchor" href="#_2-å¤šmasteræ¨¡å¼" aria-label="Permalink to &quot;2ï¼‰å¤šMasteræ¨¡å¼&quot;">â€‹</a></h4><p>ä¸€ä¸ªé›†ç¾¤æ— Slaveï¼Œå…¨æ˜¯Masterï¼Œä¾‹å¦‚2ä¸ªMasteræˆ–è€…3ä¸ªMasterï¼Œè¿™ç§æ¨¡å¼çš„ä¼˜ç¼ºç‚¹å¦‚ä¸‹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šé…ç½®ç®€å•ï¼Œå•ä¸ªMasterå®•æœºæˆ–é‡å¯ç»´æŠ¤å¯¹åº”ç”¨æ— å½±å“ï¼Œåœ¨ç£ç›˜é…ç½®ä¸ºRAID10æ—¶ï¼Œå³ä½¿æœºå™¨å®•æœºä¸å¯æ¢å¤æƒ…å†µä¸‹ï¼Œç”±äºRAID10ç£ç›˜éå¸¸å¯é ï¼Œæ¶ˆæ¯ä¹Ÿä¸ä¼šä¸¢ï¼ˆå¼‚æ­¥åˆ·ç›˜ä¸¢å¤±å°‘é‡æ¶ˆæ¯ï¼ŒåŒæ­¥åˆ·ç›˜ä¸€æ¡ä¸ä¸¢ï¼‰ï¼Œæ€§èƒ½æœ€é«˜ï¼›</li><li>ç¼ºç‚¹ï¼šå•å°æœºå™¨å®•æœºæœŸé—´ï¼Œè¿™å°æœºå™¨ä¸Šæœªè¢«æ¶ˆè´¹çš„æ¶ˆæ¯åœ¨æœºå™¨æ¢å¤ä¹‹å‰ä¸å¯è®¢é˜…ï¼Œæ¶ˆæ¯å®æ—¶æ€§ä¼šå—åˆ°å½±å“ã€‚</li></ul><h4 id="_3-å¤šmasterå¤šslaveæ¨¡å¼-å¼‚æ­¥" tabindex="-1">3ï¼‰å¤šMasterå¤šSlaveæ¨¡å¼ï¼ˆå¼‚æ­¥ï¼‰ <a class="header-anchor" href="#_3-å¤šmasterå¤šslaveæ¨¡å¼-å¼‚æ­¥" aria-label="Permalink to &quot;3ï¼‰å¤šMasterå¤šSlaveæ¨¡å¼ï¼ˆå¼‚æ­¥ï¼‰&quot;">â€‹</a></h4><p>æ¯ä¸ªMasteré…ç½®ä¸€ä¸ªSlaveï¼Œæœ‰å¤šå¯¹Master-Slaveï¼ŒHAé‡‡ç”¨å¼‚æ­¥å¤åˆ¶æ–¹å¼ï¼Œä¸»å¤‡æœ‰çŸ­æš‚æ¶ˆæ¯å»¶è¿Ÿï¼ˆæ¯«ç§’çº§ï¼‰ï¼Œè¿™ç§æ¨¡å¼çš„ä¼˜ç¼ºç‚¹å¦‚ä¸‹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šå³ä½¿ç£ç›˜æŸåï¼Œæ¶ˆæ¯ä¸¢å¤±çš„éå¸¸å°‘ï¼Œä¸”æ¶ˆæ¯å®æ—¶æ€§ä¸ä¼šå—å½±å“ï¼ŒåŒæ—¶Masterå®•æœºåï¼Œæ¶ˆè´¹è€…ä»ç„¶å¯ä»¥ä»Slaveæ¶ˆè´¹ï¼Œè€Œä¸”æ­¤è¿‡ç¨‹å¯¹åº”ç”¨é€æ˜ï¼Œä¸éœ€è¦äººå·¥å¹²é¢„ï¼Œæ€§èƒ½åŒå¤šMasteræ¨¡å¼å‡ ä¹ä¸€æ ·ï¼›</li><li>ç¼ºç‚¹ï¼šMasterå®•æœºï¼Œç£ç›˜æŸåæƒ…å†µä¸‹ä¼šä¸¢å¤±å°‘é‡æ¶ˆæ¯ã€‚</li></ul><h4 id="_4-å¤šmasterå¤šslaveæ¨¡å¼-åŒæ­¥" tabindex="-1">4ï¼‰å¤šMasterå¤šSlaveæ¨¡å¼ï¼ˆåŒæ­¥ï¼‰ <a class="header-anchor" href="#_4-å¤šmasterå¤šslaveæ¨¡å¼-åŒæ­¥" aria-label="Permalink to &quot;4ï¼‰å¤šMasterå¤šSlaveæ¨¡å¼ï¼ˆåŒæ­¥ï¼‰&quot;">â€‹</a></h4><p>æ¯ä¸ªMasteré…ç½®ä¸€ä¸ªSlaveï¼Œæœ‰å¤šå¯¹Master-Slaveï¼ŒHAé‡‡ç”¨åŒæ­¥åŒå†™æ–¹å¼ï¼Œå³åªæœ‰ä¸»å¤‡éƒ½å†™æˆåŠŸï¼Œæ‰å‘åº”ç”¨è¿”å›æˆåŠŸï¼Œè¿™ç§æ¨¡å¼çš„ä¼˜ç¼ºç‚¹å¦‚ä¸‹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šæ•°æ®ä¸æœåŠ¡éƒ½æ— å•ç‚¹æ•…éšœï¼ŒMasterå®•æœºæƒ…å†µä¸‹ï¼Œæ¶ˆæ¯æ— å»¶è¿Ÿï¼ŒæœåŠ¡å¯ç”¨æ€§ä¸æ•°æ®å¯ç”¨æ€§éƒ½éå¸¸é«˜ï¼›</li><li>ç¼ºç‚¹ï¼šæ€§èƒ½æ¯”å¼‚æ­¥å¤åˆ¶æ¨¡å¼ç•¥ä½ï¼ˆå¤§çº¦ä½10%å·¦å³ï¼‰ï¼Œå‘é€å•ä¸ªæ¶ˆæ¯çš„RTä¼šç•¥é«˜ï¼Œä¸”ç›®å‰ç‰ˆæœ¬åœ¨ä¸»èŠ‚ç‚¹å®•æœºåï¼Œå¤‡æœºä¸èƒ½è‡ªåŠ¨åˆ‡æ¢ä¸ºä¸»æœºã€‚</li></ul><h2 id="_3-3-åŒä¸»åŒä»é›†ç¾¤æ­å»º" tabindex="-1">3.3 åŒä¸»åŒä»é›†ç¾¤æ­å»º <a class="header-anchor" href="#_3-3-åŒä¸»åŒä»é›†ç¾¤æ­å»º" aria-label="Permalink to &quot;3.3 åŒä¸»åŒä»é›†ç¾¤æ­å»º&quot;">â€‹</a></h2><h3 id="_3-3-1-æ€»ä½“æ¶æ„" tabindex="-1">3.3.1 æ€»ä½“æ¶æ„ <a class="header-anchor" href="#_3-3-1-æ€»ä½“æ¶æ„" aria-label="Permalink to &quot;3.3.1 æ€»ä½“æ¶æ„&quot;">â€‹</a></h3><p>æ¶ˆæ¯é«˜å¯ç”¨é‡‡ç”¨2m-2sï¼ˆåŒæ­¥åŒå†™ï¼‰æ–¹å¼</p><p><img src="/assets/RocketMQ%E9%9B%86%E7%BE%A4.CSNheTr-.png" alt="" loading="lazy"></p><h3 id="_3-3-2-é›†ç¾¤å·¥ä½œæµç¨‹" tabindex="-1">3.3.2 é›†ç¾¤å·¥ä½œæµç¨‹ <a class="header-anchor" href="#_3-3-2-é›†ç¾¤å·¥ä½œæµç¨‹" aria-label="Permalink to &quot;3.3.2 é›†ç¾¤å·¥ä½œæµç¨‹&quot;">â€‹</a></h3><ol><li>å¯åŠ¨NameServerï¼ŒNameServerèµ·æ¥åç›‘å¬ç«¯å£ï¼Œç­‰å¾…Brokerã€Producerã€Consumerè¿ä¸Šæ¥ï¼Œç›¸å½“äºä¸€ä¸ªè·¯ç”±æ§åˆ¶ä¸­å¿ƒã€‚</li><li>Brokerå¯åŠ¨ï¼Œè·Ÿæ‰€æœ‰çš„NameServerä¿æŒé•¿è¿æ¥ï¼Œå®šæ—¶å‘é€å¿ƒè·³åŒ…ã€‚å¿ƒè·³åŒ…ä¸­åŒ…å«å½“å‰Brokerä¿¡æ¯(IP+ç«¯å£ç­‰)ä»¥åŠå­˜å‚¨æ‰€æœ‰Topicä¿¡æ¯ã€‚æ³¨å†ŒæˆåŠŸåï¼ŒNameServeré›†ç¾¤ä¸­å°±æœ‰Topicè·ŸBrokerçš„æ˜ å°„å…³ç³»ã€‚</li><li>æ”¶å‘æ¶ˆæ¯å‰ï¼Œå…ˆåˆ›å»ºTopicï¼Œåˆ›å»ºTopicæ—¶éœ€è¦æŒ‡å®šè¯¥Topicè¦å­˜å‚¨åœ¨å“ªäº›Brokerä¸Šï¼Œä¹Ÿå¯ä»¥åœ¨å‘é€æ¶ˆæ¯æ—¶è‡ªåŠ¨åˆ›å»ºTopicã€‚</li><li>Producerå‘é€æ¶ˆæ¯ï¼Œå¯åŠ¨æ—¶å…ˆè·ŸNameServeré›†ç¾¤ä¸­çš„å…¶ä¸­ä¸€å°å»ºç«‹é•¿è¿æ¥ï¼Œå¹¶ä»NameServerä¸­è·å–å½“å‰å‘é€çš„Topicå­˜åœ¨å“ªäº›Brokerä¸Šï¼Œè½®è¯¢ä»é˜Ÿåˆ—åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªé˜Ÿåˆ—ï¼Œç„¶åä¸é˜Ÿåˆ—æ‰€åœ¨çš„Brokerå»ºç«‹é•¿è¿æ¥ä»è€Œå‘Brokerå‘æ¶ˆæ¯ã€‚</li><li>Consumerè·ŸProducerç±»ä¼¼ï¼Œè·Ÿå…¶ä¸­ä¸€å°NameServerå»ºç«‹é•¿è¿æ¥ï¼Œè·å–å½“å‰è®¢é˜…Topicå­˜åœ¨å“ªäº›Brokerä¸Šï¼Œç„¶åç›´æ¥è·ŸBrokerå»ºç«‹è¿æ¥é€šé“ï¼Œå¼€å§‹æ¶ˆè´¹æ¶ˆæ¯ã€‚</li></ol><h3 id="_3-3-3-æœåŠ¡å™¨ç¯å¢ƒ" tabindex="-1">3.3.3 æœåŠ¡å™¨ç¯å¢ƒ <a class="header-anchor" href="#_3-3-3-æœåŠ¡å™¨ç¯å¢ƒ" aria-label="Permalink to &quot;3.3.3 æœåŠ¡å™¨ç¯å¢ƒ&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th><strong>åºå·</strong></th><th><strong>IP</strong></th><th><strong>è§’è‰²</strong></th><th><strong>æ¶æ„æ¨¡å¼</strong></th></tr></thead><tbody><tr><td>1</td><td>192.168.25.135</td><td>nameserverã€brokerserver</td><td>Master1ã€Slave2</td></tr><tr><td>2</td><td>192.168.25.138</td><td>nameserverã€brokerserver</td><td>Master2ã€Slave1</td></tr></tbody></table><h3 id="_3-3-4-hostæ·»åŠ ä¿¡æ¯" tabindex="-1">3.3.4 Hostæ·»åŠ ä¿¡æ¯ <a class="header-anchor" href="#_3-3-4-hostæ·»åŠ ä¿¡æ¯" aria-label="Permalink to &quot;3.3.4 Hostæ·»åŠ ä¿¡æ¯&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/hosts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é…ç½®å¦‚ä¸‹:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># nameserver</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.36</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-nameserver1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.37</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-nameserver2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># broker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.201</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-master1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.201</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-slave2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.37</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-master2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.37</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-slave1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>é…ç½®å®Œæˆå, é‡å¯ç½‘å¡</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_3-3-5-é˜²ç«å¢™é…ç½®" tabindex="-1">3.3.5 é˜²ç«å¢™é…ç½® <a class="header-anchor" href="#_3-3-5-é˜²ç«å¢™é…ç½®" aria-label="Permalink to &quot;3.3.5 é˜²ç«å¢™é…ç½®&quot;">â€‹</a></h3><p>å®¿ä¸»æœºéœ€è¦è¿œç¨‹è®¿é—®è™šæ‹Ÿæœºçš„rocketmqæœåŠ¡å’ŒwebæœåŠ¡ï¼Œéœ€è¦å¼€æ”¾ç›¸å…³çš„ç«¯å£å·ï¼Œç®€å•ç²—æš´çš„æ–¹å¼æ˜¯ç›´æ¥å…³é—­é˜²ç«å¢™</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…³é—­é˜²ç«å¢™</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld.service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹é˜²ç«å¢™çš„çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¦æ­¢firewallå¼€æœºå¯åŠ¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æˆ–è€…ä¸ºäº†å®‰å…¨ï¼Œåªå¼€æ”¾ç‰¹å®šçš„ç«¯å£å·ï¼ŒRocketMQé»˜è®¤ä½¿ç”¨3ä¸ªç«¯å£ï¼š9876 ã€10911 ã€11011 ã€‚å¦‚æœé˜²ç«å¢™æ²¡æœ‰å…³é—­çš„è¯ï¼Œé‚£ä¹ˆé˜²ç«å¢™å°±å¿…é¡»å¼€æ”¾è¿™äº›ç«¯å£ï¼š</p><ul><li><code>nameserver</code> é»˜è®¤ä½¿ç”¨ 9876 ç«¯å£</li><li><code>master</code> é»˜è®¤ä½¿ç”¨ 10911 ç«¯å£</li><li><code>slave</code> é»˜è®¤ä½¿ç”¨11011 ç«¯å£</li></ul><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¼€æ”¾name serveré»˜è®¤ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --remove-port=9876/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¼€æ”¾masteré»˜è®¤ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --remove-port=10911/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¼€æ”¾slaveé»˜è®¤ç«¯å£ (å½“å‰é›†ç¾¤æ¨¡å¼å¯ä¸å¼€å¯)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --remove-port=11011/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é‡å¯é˜²ç«å¢™</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --reload</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-3-6-ç¯å¢ƒå˜é‡é…ç½®" tabindex="-1">3.3.6 ç¯å¢ƒå˜é‡é…ç½® <a class="header-anchor" href="#_3-3-6-ç¯å¢ƒå˜é‡é…ç½®" aria-label="Permalink to &quot;3.3.6 ç¯å¢ƒå˜é‡é…ç½®&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/profile</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>åœ¨profileæ–‡ä»¶çš„æœ«å°¾åŠ å…¥å¦‚ä¸‹å‘½ä»¤</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#set rocketmq</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ROCKETMQ_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/rocketmq-all-4.8.0-bin-release</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ROCKETMQ_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROCKETMQ_HOME PATH</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/soft/mq/rocketmq</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/soft/mq/rocketmq</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ROCKETMQ_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ROCKETMQ_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROCKETMQ_HOME PATH</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>è¾“å…¥:wq! ä¿å­˜å¹¶é€€å‡ºï¼Œ å¹¶ä½¿å¾—é…ç½®ç«‹åˆ»ç”Ÿæ•ˆï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/profile</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">37</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#set rocketmq</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ROCKETMQ_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/rocketmq-4.8.0-bin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ROCKETMQ_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROCKETMQ_HOME PATH</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-3-7-åˆ›å»ºæ¶ˆæ¯å­˜å‚¨è·¯å¾„" tabindex="-1">3.3.7 åˆ›å»ºæ¶ˆæ¯å­˜å‚¨è·¯å¾„ <a class="header-anchor" href="#_3-3-7-åˆ›å»ºæ¶ˆæ¯å­˜å‚¨è·¯å¾„" aria-label="Permalink to &quot;3.3.7 åˆ›å»ºæ¶ˆæ¯å­˜å‚¨è·¯å¾„&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/store</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/store/commitlog</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/store/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/store/index</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-3-8-brokeré…ç½®æ–‡ä»¶" tabindex="-1">3.3.8 brokeré…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_3-3-8-brokeré…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;3.3.8 brokeré…ç½®æ–‡ä»¶&quot;">â€‹</a></h3><h4 id="_1-master1" tabindex="-1">1ï¼‰master1 <a class="header-anchor" href="#_1-master1" aria-label="Permalink to &quot;1ï¼‰master1&quot;">â€‹</a></h4><p>æœåŠ¡å™¨ï¼š192.168.3.37</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-a.properties</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ‰€å±é›†ç¾¤åå­—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerClusterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-cluster</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#brokeråå­—ï¼Œæ³¨æ„æ­¤å¤„ä¸åŒçš„é…ç½®æ–‡ä»¶å¡«å†™çš„ä¸ä¸€æ ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">broker-a</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#0 è¡¨ç¤º Masterï¼Œ&gt;0 è¡¨ç¤º Slave</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">namesrvAddr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-nameserver1:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºæœåŠ¡å™¨ä¸å­˜åœ¨çš„topicï¼Œé»˜è®¤åˆ›å»ºçš„é˜Ÿåˆ—æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">defaultTopicQueueNums</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateTopicEnable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateSubscriptionGroup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">listenPort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10911</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åˆ é™¤æ–‡ä»¶æ—¶é—´ç‚¹ï¼Œé»˜è®¤å‡Œæ™¨ 4ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deleteWhen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">04</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ–‡ä»¶ä¿ç•™æ—¶é—´ï¼Œé»˜è®¤ 48 å°æ—¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fileReservedTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">120</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLogæ¯ä¸ªæ–‡ä»¶çš„å¤§å°é»˜è®¤1G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1073741824</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ConsumeQueueæ¯ä¸ªæ–‡ä»¶é»˜è®¤å­˜30Wæ¡ï¼Œæ ¹æ®ä¸šåŠ¡æƒ…å†µè°ƒæ•´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#destroyMapedFileIntervalForcibly=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#redeleteHangedFileInterval=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ£€æµ‹ç‰©ç†æ–‡ä»¶ç£ç›˜ç©ºé—´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">diskMaxUsedSpaceRatio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">88</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathRootDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store/commitlog</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store/comsumequeue</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store/index</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storeCheckpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">abortFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store/abort</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#é™åˆ¶çš„æ¶ˆæ¯å¤§å°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxMessageSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">65536</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogLeastPages=4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueLeastPages=2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogThoroughInterval=10000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueThoroughInterval=60000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker çš„è§’è‰²</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_MASTER å¼‚æ­¥å¤åˆ¶Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_MASTER åŒæ­¥åŒå†™Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SLAVE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerRole</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SYNC_MASTER</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åˆ·ç›˜æ–¹å¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_FLUSH å¼‚æ­¥åˆ·ç›˜</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_FLUSH åŒæ­¥åˆ·ç›˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flushDiskType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkTransactionMessageEnable=false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å‘æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#sendMessageThreadPoolNums=128</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ‹‰æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#pullMessageThreadPoolNums=128</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h4 id="_2-slave2" tabindex="-1">2ï¼‰slave2 <a class="header-anchor" href="#_2-slave2" aria-label="Permalink to &quot;2ï¼‰slave2&quot;">â€‹</a></h4><p>æœåŠ¡å™¨ï¼š192.168.3.37</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-b-s.properties</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ‰€å±é›†ç¾¤åå­—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerClusterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-cluster</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#brokeråå­—ï¼Œæ³¨æ„æ­¤å¤„ä¸åŒçš„é…ç½®æ–‡ä»¶å¡«å†™çš„ä¸ä¸€æ ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">broker-b</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#0 è¡¨ç¤º Masterï¼Œ&gt;0 è¡¨ç¤º Slave</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">namesrvAddr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-nameserver1:9876</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rocketmq-nameserver2:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºæœåŠ¡å™¨ä¸å­˜åœ¨çš„topicï¼Œé»˜è®¤åˆ›å»ºçš„é˜Ÿåˆ—æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">defaultTopicQueueNums</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateTopicEnable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateSubscriptionGroup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">listenPort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">11011</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åˆ é™¤æ–‡ä»¶æ—¶é—´ç‚¹ï¼Œé»˜è®¤å‡Œæ™¨ 4ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deleteWhen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">04</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ–‡ä»¶ä¿ç•™æ—¶é—´ï¼Œé»˜è®¤ 48 å°æ—¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fileReservedTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">120</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLogæ¯ä¸ªæ–‡ä»¶çš„å¤§å°é»˜è®¤1G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1073741824</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ConsumeQueueæ¯ä¸ªæ–‡ä»¶é»˜è®¤å­˜30Wæ¡ï¼Œæ ¹æ®ä¸šåŠ¡æƒ…å†µè°ƒæ•´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#destroyMapedFileIntervalForcibly=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#redeleteHangedFileInterval=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ£€æµ‹ç‰©ç†æ–‡ä»¶ç£ç›˜ç©ºé—´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">diskMaxUsedSpaceRatio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">88</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathRootDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2/commitlog</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2/index</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storeCheckpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">abortFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2/abort</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#é™åˆ¶çš„æ¶ˆæ¯å¤§å°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxMessageSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">65536</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogLeastPages=4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueLeastPages=2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogThoroughInterval=10000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueThoroughInterval=60000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker çš„è§’è‰²</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_MASTER å¼‚æ­¥å¤åˆ¶Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_MASTER åŒæ­¥åŒå†™Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SLAVE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerRole</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SLAVE</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åˆ·ç›˜æ–¹å¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_FLUSH å¼‚æ­¥åˆ·ç›˜</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_FLUSH åŒæ­¥åˆ·ç›˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flushDiskType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ASYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkTransactionMessageEnable=false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å‘æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#sendMessageThreadPoolNums=128</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ‹‰æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#pullMessageThreadPoolNums=128</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h4 id="_3-master2" tabindex="-1">3ï¼‰master2 <a class="header-anchor" href="#_3-master2" aria-label="Permalink to &quot;3ï¼‰master2&quot;">â€‹</a></h4><p>æœåŠ¡å™¨ï¼š192.168.3.201</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/soft/rocketmq/conf/2m-2s-sync/broker-b.properties</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ‰€å±é›†ç¾¤åå­—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerClusterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-cluster</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#brokeråå­—ï¼Œæ³¨æ„æ­¤å¤„ä¸åŒçš„é…ç½®æ–‡ä»¶å¡«å†™çš„ä¸ä¸€æ ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">broker-b</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#0 è¡¨ç¤º Masterï¼Œ&gt;0 è¡¨ç¤º Slave</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">namesrvAddr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-nameserver1:9876</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rocketmq-nameserver2:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºæœåŠ¡å™¨ä¸å­˜åœ¨çš„topicï¼Œé»˜è®¤åˆ›å»ºçš„é˜Ÿåˆ—æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">defaultTopicQueueNums</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateTopicEnable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateSubscriptionGroup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">listenPort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10911</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åˆ é™¤æ–‡ä»¶æ—¶é—´ç‚¹ï¼Œé»˜è®¤å‡Œæ™¨ 4ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deleteWhen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">04</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ–‡ä»¶ä¿ç•™æ—¶é—´ï¼Œé»˜è®¤ 48 å°æ—¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fileReservedTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">120</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLogæ¯ä¸ªæ–‡ä»¶çš„å¤§å°é»˜è®¤1G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1073741824</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ConsumeQueueæ¯ä¸ªæ–‡ä»¶é»˜è®¤å­˜30Wæ¡ï¼Œæ ¹æ®ä¸šåŠ¡æƒ…å†µè°ƒæ•´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#destroyMapedFileIntervalForcibly=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#redeleteHangedFileInterval=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ£€æµ‹ç‰©ç†æ–‡ä»¶ç£ç›˜ç©ºé—´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">diskMaxUsedSpaceRatio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">88</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathRootDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message/commitlog</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message/index</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storeCheckpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">abortFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message/abort</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#é™åˆ¶çš„æ¶ˆæ¯å¤§å°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxMessageSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">65536</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogLeastPages=4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueLeastPages=2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogThoroughInterval=10000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueThoroughInterval=60000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker çš„è§’è‰²</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_MASTER å¼‚æ­¥å¤åˆ¶Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_MASTER åŒæ­¥åŒå†™Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SLAVE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerRole</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SYNC_MASTER</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åˆ·ç›˜æ–¹å¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_FLUSH å¼‚æ­¥åˆ·ç›˜</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_FLUSH åŒæ­¥åˆ·ç›˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flushDiskType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkTransactionMessageEnable=false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å‘æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#sendMessageThreadPoolNums=128</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ‹‰æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#pullMessageThreadPoolNums=128</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h4 id="_4-slave1" tabindex="-1">4ï¼‰slave1 <a class="header-anchor" href="#_4-slave1" aria-label="Permalink to &quot;4ï¼‰slave1&quot;">â€‹</a></h4><p>æœåŠ¡å™¨ï¼š192.168.3.201</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/soft/rocketmq/conf/2m-2s-sync/broker-a-s.properties</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ‰€å±é›†ç¾¤åå­—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerClusterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-cluster</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#brokeråå­—ï¼Œæ³¨æ„æ­¤å¤„ä¸åŒçš„é…ç½®æ–‡ä»¶å¡«å†™çš„ä¸ä¸€æ ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">broker-a</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#0 è¡¨ç¤º Masterï¼Œ&gt;0 è¡¨ç¤º Slave</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">namesrvAddr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-nameserver1:9876</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rocketmq-nameserver2:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºæœåŠ¡å™¨ä¸å­˜åœ¨çš„topicï¼Œé»˜è®¤åˆ›å»ºçš„é˜Ÿåˆ—æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">defaultTopicQueueNums</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateTopicEnable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateSubscriptionGroup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">listenPort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">11011</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åˆ é™¤æ–‡ä»¶æ—¶é—´ç‚¹ï¼Œé»˜è®¤å‡Œæ™¨ 4ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deleteWhen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">04</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ–‡ä»¶ä¿ç•™æ—¶é—´ï¼Œé»˜è®¤ 48 å°æ—¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fileReservedTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">120</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLogæ¯ä¸ªæ–‡ä»¶çš„å¤§å°é»˜è®¤1G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1073741824</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ConsumeQueueæ¯ä¸ªæ–‡ä»¶é»˜è®¤å­˜30Wæ¡ï¼Œæ ¹æ®ä¸šåŠ¡æƒ…å†µè°ƒæ•´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#destroyMapedFileIntervalForcibly=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#redeleteHangedFileInterval=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ£€æµ‹ç‰©ç†æ–‡ä»¶ç£ç›˜ç©ºé—´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">diskMaxUsedSpaceRatio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">88</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathRootDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2/commitlog</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2/index</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storeCheckpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">abortFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2/abort</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#é™åˆ¶çš„æ¶ˆæ¯å¤§å°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxMessageSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">65536</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogLeastPages=4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueLeastPages=2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogThoroughInterval=10000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueThoroughInterval=60000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker çš„è§’è‰²</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_MASTER å¼‚æ­¥å¤åˆ¶Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_MASTER åŒæ­¥åŒå†™Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SLAVE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerRole</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SLAVE</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åˆ·ç›˜æ–¹å¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_FLUSH å¼‚æ­¥åˆ·ç›˜</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_FLUSH åŒæ­¥åˆ·ç›˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flushDiskType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ASYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkTransactionMessageEnable=false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å‘æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#sendMessageThreadPoolNums=128</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ‹‰æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#pullMessageThreadPoolNums=128</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h3 id="_3-3-9-ä¿®æ”¹å¯åŠ¨è„šæœ¬æ–‡ä»¶" tabindex="-1">3.3.9 ä¿®æ”¹å¯åŠ¨è„šæœ¬æ–‡ä»¶ <a class="header-anchor" href="#_3-3-9-ä¿®æ”¹å¯åŠ¨è„šæœ¬æ–‡ä»¶" aria-label="Permalink to &quot;3.3.9 ä¿®æ”¹å¯åŠ¨è„šæœ¬æ–‡ä»¶&quot;">â€‹</a></h3><h4 id="_1-runbroker-sh" tabindex="-1">1ï¼‰runbroker.sh <a class="header-anchor" href="#_1-runbroker-sh" aria-label="Permalink to &quot;1ï¼‰runbroker.sh&quot;">â€‹</a></h4><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin/runbroker.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>éœ€è¦æ ¹æ®å†…å­˜å¤§å°è¿›è¡Œé€‚å½“çš„å¯¹JVMå‚æ•°è¿›è¡Œè°ƒæ•´ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#===================================================</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¼€å‘ç¯å¢ƒé…ç½® JVM Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JAVA_OPT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JAVA_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} -server -Xms256m -Xmx256m -Xmn128m&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>####2ï¼‰runserver.sh</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin/runserver.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JAVA_OPT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JAVA_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_3-3-10-æœåŠ¡å¯åŠ¨" tabindex="-1">3.3.10 æœåŠ¡å¯åŠ¨ <a class="header-anchor" href="#_3-3-10-æœåŠ¡å¯åŠ¨" aria-label="Permalink to &quot;3.3.10 æœåŠ¡å¯åŠ¨&quot;">â€‹</a></h3><h4 id="_1-å¯åŠ¨nameserveé›†ç¾¤" tabindex="-1">1ï¼‰å¯åŠ¨NameServeé›†ç¾¤ <a class="header-anchor" href="#_1-å¯åŠ¨nameserveé›†ç¾¤" aria-label="Permalink to &quot;1ï¼‰å¯åŠ¨NameServeé›†ç¾¤&quot;">â€‹</a></h4><p>åˆ†åˆ«åœ¨192.168.3.37å’Œ192.168.3.201å¯åŠ¨NameServer</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mqnamesrv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/install/soft/rocketmq/rocketmq-all-4.8.0-bin-release/conf/2m-2s-sync</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-å¯åŠ¨brokeré›†ç¾¤" tabindex="-1">2ï¼‰å¯åŠ¨Brokeré›†ç¾¤ <a class="header-anchor" href="#_2-å¯åŠ¨brokeré›†ç¾¤" aria-label="Permalink to &quot;2ï¼‰å¯åŠ¨Brokeré›†ç¾¤&quot;">â€‹</a></h4><ul><li>åœ¨192.168.3.37ä¸Šå¯åŠ¨master1å’Œslave2</li></ul><p>master1ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mqbroker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-a.properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>slave2ï¼š</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mqbroker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-b-s.properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>åœ¨192.168.3.201ä¸Šå¯åŠ¨master2å’Œslave2</li></ul><p>master2</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mqbroker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /install/soft/rocketmq/rocketmq-all-4.8.0-bin-release/conf/2m-2s-sync/broker-b.properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>slave1</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mqbroker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /install/soft/rocketmq/rocketmq-all-4.8.0-bin-release/conf/2m-2s-sync/broker-a-s.properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-3-11-æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€" tabindex="-1">3.3.11 æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€ <a class="header-anchor" href="#_3-3-11-æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€" aria-label="Permalink to &quot;3.3.11 æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€&quot;">â€‹</a></h3><p>å¯åŠ¨åé€šè¿‡JPSæŸ¥çœ‹å¯åŠ¨è¿›ç¨‹</p><p><img src="/assets/jps1.uMzcqkEG.png" alt="" loading="lazy"></p><h3 id="_3-3-12-æŸ¥çœ‹æ—¥å¿—" tabindex="-1">3.3.12 æŸ¥çœ‹æ—¥å¿— <a class="header-anchor" href="#_3-3-12-æŸ¥çœ‹æ—¥å¿—" aria-label="Permalink to &quot;3.3.12 æŸ¥çœ‹æ—¥å¿—&quot;">â€‹</a></h3><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹nameServeræ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -500f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/logs/rocketmqlogs/namesrv.log</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹brokeræ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -500f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/logs/rocketmqlogs/broker.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3-4-mqadminç®¡ç†å·¥å…·" tabindex="-1">3.4 mqadminç®¡ç†å·¥å…· <a class="header-anchor" href="#_3-4-mqadminç®¡ç†å·¥å…·" aria-label="Permalink to &quot;3.4 mqadminç®¡ç†å·¥å…·&quot;">â€‹</a></h2><h3 id="_3-4-1-ä½¿ç”¨æ–¹å¼" tabindex="-1">3.4.1 ä½¿ç”¨æ–¹å¼ <a class="header-anchor" href="#_3-4-1-ä½¿ç”¨æ–¹å¼" aria-label="Permalink to &quot;3.4.1 ä½¿ç”¨æ–¹å¼&quot;">â€‹</a></h3><p>è¿›å…¥RocketMQå®‰è£…ä½ç½®ï¼Œåœ¨binç›®å½•ä¸‹æ‰§è¡Œ<code>./mqadmin {command} {args}</code></p><p>###3.4.2 å‘½ä»¤ä»‹ç»</p><p>####1ï¼‰Topicç›¸å…³</p><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">åç§°</td><td class="xl64" width="175" style="width:131pt;">å«ä¹‰</td><td class="xl64" width="177" style="width:133pt;">å‘½ä»¤é€‰é¡¹</td><td class="xl64" width="185" style="width:139pt;">è¯´æ˜</td></tr><tr height="132" style="height:99.0pt;"><td rowspan="8" height="593" class="xl68" width="163" style="border-bottom:1.0pt;height:444.0pt;border-top:none;width:122pt;">updateTopic</td><td rowspan="8" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">åˆ›å»ºæ›´æ–°Topicé…ç½®</td><td class="xl65" width="149" style="width:112pt;">-b</td><td class="xl66" width="159" style="width:119pt;">Broker åœ°å€ï¼Œè¡¨ç¤º topic æ‰€åœ¨ Brokerï¼Œåªæ”¯æŒå•å°Brokerï¼Œåœ°å€ä¸ºip:port</td></tr><tr height="132" style="height:99.0pt;"><td height="132" class="xl65" width="149" style="height:99.0pt;width:112pt;">-c</td><td class="xl66" width="159" style="width:119pt;">cluster åç§°ï¼Œè¡¨ç¤º topic æ‰€åœ¨é›†ç¾¤ï¼ˆé›†ç¾¤å¯é€šè¿‡ clusterList æŸ¥è¯¢ï¼‰</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h-</td><td class="xl66" width="159" style="width:119pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServeræœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="76" style="height:57.0pt;"><td height="76" class="xl65" width="149" style="height:57.0pt;width:112pt;">-p</td><td class="xl66" width="159" style="width:119pt;">æŒ‡å®šæ–°topicçš„è¯»å†™æƒé™( W=2|R=4|WR=6 )</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="149" style="height:29.0pt;width:112pt;">-r</td><td class="xl66" width="159" style="width:119pt;">å¯è¯»é˜Ÿåˆ—æ•°ï¼ˆé»˜è®¤ä¸º 8ï¼‰</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="149" style="height:29.0pt;width:112pt;">-w</td><td class="xl66" width="159" style="width:119pt;">å¯å†™é˜Ÿåˆ—æ•°ï¼ˆé»˜è®¤ä¸º 8ï¼‰</td></tr><tr height="95" style="height:71.0pt;"><td height="95" class="xl65" width="149" style="height:71.0pt;width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic åç§°ï¼ˆåç§°åªèƒ½ä½¿ç”¨å­—ç¬¦ ^[a-zA-Z0-9_-]+$ ï¼‰</td></tr><tr height="132" style="height:99.0pt;"><td rowspan="4" height="307" class="xl68" width="163" style="border-bottom:1.0pt;height:230.0pt;border-top:none;width:122pt;">deleteTopic</td><td rowspan="4" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">åˆ é™¤Topic</td><td class="xl65" width="149" style="width:112pt;">-c</td><td class="xl66" width="159" style="width:119pt;">cluster åç§°ï¼Œè¡¨ç¤ºåˆ é™¤æŸé›†ç¾¤ä¸‹çš„æŸä¸ª topic ï¼ˆé›†ç¾¤ å¯é€šè¿‡ clusterList æŸ¥è¯¢ï¼‰</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="95" style="height:71.0pt;"><td height="95" class="xl65" width="149" style="height:71.0pt;width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic åç§°ï¼ˆåç§°åªèƒ½ä½¿ç”¨å­—ç¬¦ ^[a-zA-Z0-9_-]+$ ï¼‰</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="3" height="287" class="xl68" width="163" style="border-bottom:1.0pt;height:215.0pt;border-top:none;width:122pt;">topicList</td><td rowspan="3" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">æŸ¥çœ‹ Topic åˆ—è¡¨ä¿¡æ¯</td><td class="xl65" width="149" style="width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="207" style="height:155.0pt;"><td height="207" class="xl65" width="149" style="height:155.0pt;width:112pt;">-c</td><td class="xl66" width="159" style="width:119pt;">ä¸é…ç½®-cåªè¿”å›topicåˆ—è¡¨ï¼Œå¢åŠ -cè¿”å›clusterName, topic, consumerGroupä¿¡æ¯ï¼Œå³topicçš„æ‰€å±é›†ç¾¤å’Œè®¢é˜…å…³ç³»ï¼Œæ²¡æœ‰å‚æ•°</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="3" height="103" class="xl68" width="163" style="border-bottom:1.0pt;height:77.0pt;border-top:none;width:122pt;">topicRoute</td><td rowspan="3" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">æŸ¥çœ‹ Topic è·¯ç”±ä¿¡æ¯</td><td class="xl65" width="149" style="width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic åç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="3" height="103" class="xl68" width="163" style="border-bottom:1.0pt;height:77.0pt;border-top:none;width:122pt;">topicStatus</td><td rowspan="3" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">æŸ¥çœ‹ Topic æ¶ˆæ¯é˜Ÿåˆ—offset</td><td class="xl65" width="149" style="width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic åç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="3" height="103" class="xl68" width="163" style="border-bottom:1.0pt;height:77.0pt;border-top:none;width:122pt;">topicClusterList</td><td rowspan="3" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">æŸ¥çœ‹ Topic æ‰€åœ¨é›†ç¾¤åˆ—è¡¨</td><td class="xl65" width="149" style="width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic åç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="6" height="518" class="xl68" width="163" style="border-bottom:1.0pt;height:380pt;border-top:none;width:122pt;">updateTopicPerm</td><td rowspan="6" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">æ›´æ–° Topic è¯»å†™æƒé™</td><td class="xl65" width="149" style="width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic åç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="132" style="height:99.0pt;"><td height="132" class="xl65" width="149" style="height:99.0pt;width:112pt;">-b</td><td class="xl66" width="159" style="width:119pt;">Broker åœ°å€ï¼Œè¡¨ç¤º topic æ‰€åœ¨ Brokerï¼Œåªæ”¯æŒå•å°Brokerï¼Œåœ°å€ä¸ºip:port</td></tr><tr height="76" style="height:57.0pt;"><td height="76" class="xl65" width="149" style="height:57.0pt;width:112pt;">-p</td><td class="xl66" width="159" style="width:119pt;">æŒ‡å®šæ–° topic çš„è¯»å†™æƒé™( W=2|R=4|WR=6 )</td></tr><tr height="207" style="height:155.0pt;"><td height="207" class="xl65" width="149" style="height:155.0pt;width:112pt;">-c</td><td class="xl66" width="159" style="width:119pt;">cluster åç§°ï¼Œè¡¨ç¤º topic æ‰€åœ¨é›†ç¾¤ï¼ˆé›†ç¾¤å¯é€šè¿‡ clusterList æŸ¥è¯¢ï¼‰ï¼Œ-bä¼˜å…ˆï¼Œå¦‚æœæ²¡æœ‰-bï¼Œåˆ™å¯¹é›†ç¾¤ä¸­æ‰€æœ‰Brokeræ‰§è¡Œå‘½ä»¤</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="5" height="199" class="xl68" width="163" style="border-bottom:1.0pt;height:149.0pt;border-top:none;width:122pt;">updateOrderConf</td><td rowspan="5" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">ä»NameServerä¸Šåˆ›å»ºã€åˆ é™¤ã€è·å–ç‰¹å®šå‘½åç©ºé—´çš„kvé…ç½®ï¼Œç›®å‰è¿˜æœªå¯ç”¨</td><td class="xl65" width="149" style="width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topicï¼Œé”®</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="149" style="height:29.0pt;width:112pt;">-v</td><td class="xl66" width="159" style="width:119pt;">orderConfï¼Œå€¼</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-m</td><td class="xl66" width="159" style="width:119pt;">methodï¼Œå¯é€‰getã€putã€delete</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="4" height="198" class="xl68" width="163" style="border-bottom:1.0pt;height:140pt;border-top:none;width:122pt;">allocateMQ</td><td rowspan="4" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">ä»¥å¹³å‡è´Ÿè½½ç®—æ³•è®¡ç®—æ¶ˆè´¹è€…åˆ—è¡¨è´Ÿè½½æ¶ˆæ¯é˜Ÿåˆ—çš„è´Ÿè½½ç»“æœ</td><td class="xl65" width="149" style="width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic åç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="95" style="height:71.0pt;"><td height="95" class="xl65" width="149" style="height:71.0pt;width:112pt;">-i</td><td class="xl66" width="159" style="width:119pt;">ipListï¼Œç”¨é€—å·åˆ†éš”ï¼Œè®¡ç®—è¿™äº›ipå»è´Ÿè½½Topicçš„æ¶ˆæ¯é˜Ÿåˆ—</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="4" height="142" class="xl68" width="163" style="border-bottom:1.0pt solid black;height:106.0pt;border-top:1.0pt;width:122pt;">statsAll</td><td rowspan="4" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">æ‰“å°Topicè®¢é˜…å…³ç³»ã€TPSã€ç§¯ç´¯é‡ã€24hè¯»å†™æ€»é‡ç­‰ä¿¡æ¯</td><td class="xl65" width="149" style="width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="149" style="height:29.0pt;width:112pt;">-a</td><td class="xl66" width="159" style="width:119pt;">æ˜¯å¦åªæ‰“å°æ´»è·ƒtopic</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">æŒ‡å®štopic</td></tr></table><p>####2ï¼‰é›†ç¾¤ç›¸å…³</p><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">åç§°</td><td class="xl64" width="175" style="width:131pt;">å«ä¹‰</td><td class="xl64" width="177" style="width:133pt;">å‘½ä»¤é€‰é¡¹</td><td class="xl64" width="185" style="width:139pt;">è¯´æ˜</td></tr><tr height="207" style="height:155.0pt;"><td rowspan="4" height="326" class="xl67" width="177" style="border-bottom:1.0pt;height:244.0pt;border-top:none;width:133pt;"><span style="mso-spacerun:yes;"></span>clusterList</td><td rowspan="4" class="xl70" width="175" style="border-bottom:1.0pt;border-top:none;width:131pt;">æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯ï¼Œé›†ç¾¤ã€BrokerNameã€BrokerIdã€TPSç­‰ä¿¡æ¯</td><td class="xl65" width="177" style="width:133pt;">-m</td><td class="xl66" width="185" style="width:139pt;">æ‰“å°æ›´å¤šä¿¡æ¯ (å¢åŠ æ‰“å°å‡ºå¦‚ä¸‹ä¿¡æ¯ #InTotalYest, #OutTotalYest, #InTotalToday ,#OutTotalToday)</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="177" style="height:17.0pt;width:133pt;">-h</td><td class="xl66" width="185" style="width:139pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="177" style="height:43.0pt;width:133pt;">-n</td><td class="xl66" width="185" style="width:139pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="177" style="height:29.0pt;width:133pt;">-i</td><td class="xl66" width="185" style="width:139pt;">æ‰“å°é—´éš”ï¼Œå•ä½ç§’</td></tr><tr height="95" style="height:71.0pt;"><td rowspan="8" height="391" class="xl67" width="177" style="border-bottom:1.0pt;height:292.0pt;border-top:none;width:133pt;">clusterRT</td><td rowspan="8" class="xl70" width="175" style="border-bottom:1.0pt;border-top:none;width:131pt;">å‘é€æ¶ˆæ¯æ£€æµ‹é›†ç¾¤å„Broker RTã€‚æ¶ˆæ¯å‘å¾€${BrokerName} Topicã€‚</td><td class="xl65" width="177" style="width:133pt;">-a</td><td class="xl66" width="185" style="width:139pt;">amountï¼Œæ¯æ¬¡æ¢æµ‹çš„æ€»æ•°ï¼ŒRT = æ€»æ—¶é—´ / amount</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="177" style="height:29.0pt;width:133pt;">-s</td><td class="xl66" width="185" style="width:139pt;">æ¶ˆæ¯å¤§å°ï¼Œå•ä½B</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="177" style="height:17.0pt;width:133pt;">-c</td><td class="xl66" width="185" style="width:139pt;">æ¢æµ‹å“ªä¸ªé›†ç¾¤</td></tr><tr height="76" style="height:57.0pt;"><td height="76" class="xl65" width="177" style="height:57.0pt;width:133pt;">-p</td><td class="xl66" width="185" style="width:139pt;">æ˜¯å¦æ‰“å°æ ¼å¼åŒ–æ—¥å¿—ï¼Œä»¥|åˆ†å‰²ï¼Œé»˜è®¤ä¸æ‰“å°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="177" style="height:17.0pt;width:133pt;">-h</td><td class="xl66" width="185" style="width:139pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="177" style="height:29.0pt;width:133pt;">-m</td><td class="xl66" width="185" style="width:139pt;">æ‰€å±æœºæˆ¿ï¼Œæ‰“å°ä½¿ç”¨</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="177" style="height:29.0pt;width:133pt;">-i</td><td class="xl66" width="185" style="width:139pt;">å‘é€é—´éš”ï¼Œå•ä½ç§’</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="177" style="height:43.0pt;width:133pt;">-n</td><td class="xl66" width="185" style="width:139pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr></table><p>####3ï¼‰Brokerç›¸å…³</p><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">åç§°</td><td class="xl64" width="175" style="width:131pt;">å«ä¹‰</td><td class="xl64" width="177" style="width:133pt;">å‘½ä»¤é€‰é¡¹</td><td class="xl64" width="185" style="width:139pt;">è¯´æ˜</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="6" height="206" class="xl69" width="191" style="border-bottom:1.0pt;height:154.0pt;border-top:none;width:143pt;">updateBrokerConfig</td><td rowspan="6" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">æ›´æ–° Broker é…ç½®æ–‡ä»¶ï¼Œä¼šä¿®æ”¹Broker.conf</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker åœ°å€ï¼Œæ ¼å¼ä¸ºip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">cluster åç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-k</td><td class="xl68" width="87" style="width:65pt;">key å€¼</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-v</td><td class="xl68" width="87" style="width:65pt;">value å€¼</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="3" height="137" class="xl69" width="191" style="border-bottom:1.0pt;height:103.0pt;border-top:none;width:143pt;">brokerStatus</td><td rowspan="3" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">æŸ¥çœ‹ Broker ç»Ÿè®¡ä¿¡æ¯ã€è¿è¡ŒçŠ¶æ€ï¼ˆä½ æƒ³è¦çš„ä¿¡æ¯å‡ ä¹éƒ½åœ¨é‡Œé¢ï¼‰</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker åœ°å€ï¼Œåœ°å€ä¸ºip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="6" height="256" class="xl69" width="191" style="border-bottom:1.0pt;height:192.0pt;border-top:none;width:143pt;">brokerConsumeStats</td><td rowspan="6" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">Brokerä¸­å„ä¸ªæ¶ˆè´¹è€…çš„æ¶ˆè´¹æƒ…å†µï¼ŒæŒ‰Message Queueç»´åº¦è¿”å›Consume Offsetï¼ŒBroker Offsetï¼ŒDiffï¼ŒTImestampç­‰ä¿¡æ¯</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker åœ°å€ï¼Œåœ°å€ä¸ºip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">è¯·æ±‚è¶…æ—¶æ—¶é—´</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-l</td><td class="xl68" width="87" style="width:65pt;">diffé˜ˆå€¼ï¼Œè¶…è¿‡é˜ˆå€¼æ‰æ‰“å°</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-o</td><td class="xl68" width="87" style="width:65pt;">æ˜¯å¦ä¸ºé¡ºåºtopicï¼Œä¸€èˆ¬ä¸ºfalse</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="2" height="114" class="xl69" width="191" style="border-bottom:1.0pt;height:86.0pt;border-top:none;width:143pt;">getBrokerConfig</td><td rowspan="2" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">è·å–Brokeré…ç½®</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker åœ°å€ï¼Œåœ°å€ä¸ºip:port</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="3" height="137" class="xl69" width="191" style="border-bottom:1.0pt;height:103.0pt;border-top:none;width:143pt;">wipeWritePerm</td><td rowspan="3" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">ä»NameServerä¸Šæ¸…é™¤ Brokerå†™æƒé™</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker åœ°å€ï¼Œåœ°å€ä¸ºip:port</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="4" height="160" class="xl69" width="191" style="border-bottom:1.0pt;height:120.0pt;border-top:none;width:143pt;">cleanExpiredCQ</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">æ¸…ç†Brokerä¸Šè¿‡æœŸçš„Consume Queueï¼Œå¦‚æœæ‰‹åŠ¨å‡å°‘å¯¹åˆ—æ•°å¯èƒ½äº§ç”Ÿè¿‡æœŸé˜Ÿåˆ—</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker åœ°å€ï¼Œåœ°å€ä¸ºip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">é›†ç¾¤åç§°</td></tr><tr height="88" style="mso-height-source:userset;height:66.0pt;"><td rowspan="4" height="191" class="xl69" width="191" style="border-bottom:1.0pt;height:143.0pt;border-top:none;width:143pt;">cleanUnusedTopic</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">æ¸…ç†Brokerä¸Šä¸ä½¿ç”¨çš„Topicï¼Œä»å†…å­˜ä¸­é‡Šæ”¾Topicçš„Consume Queueï¼Œå¦‚æœæ‰‹åŠ¨åˆ é™¤Topicä¼šäº§ç”Ÿä¸ä½¿ç”¨çš„Topic</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker åœ°å€ï¼Œåœ°å€ä¸ºip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">é›†ç¾¤åç§°</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="5" height="199" class="xl69" width="191" style="border-bottom:1.0pt;height:149.0pt;border-top:none;width:143pt;">sendMsgStatus</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">å‘Brokerå‘æ¶ˆæ¯ï¼Œè¿”å›å‘é€çŠ¶æ€å’ŒRT</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">BrokerNameï¼Œæ³¨æ„ä¸åŒäºBrokeråœ°å€</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">æ¶ˆæ¯å¤§å°ï¼Œå•ä½B</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">å‘é€æ¬¡æ•°</td></tr></table><p>####4ï¼‰æ¶ˆæ¯ç›¸å…³</p><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">åç§°</td><td class="xl64" width="175" style="width:131pt;">å«ä¹‰</td><td class="xl64" width="177" style="width:133pt;">å‘½ä»¤é€‰é¡¹</td><td class="xl64" width="185" style="width:139pt;">è¯´æ˜</td></tr><tr height="128" style="height:96.0pt;"><td rowspan="3" height="208" class="xl69" width="87" style="border-bottom:1.0pt;height:156.0pt;border-top:none;width:65pt;">queryMsgById</td><td rowspan="3" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">æ ¹æ®offsetMsgIdæŸ¥è¯¢msgï¼Œå¦‚æœä½¿ç”¨å¼€æºæ§åˆ¶å°ï¼Œåº”ä½¿ç”¨offsetMsgIdï¼Œæ­¤å‘½ä»¤è¿˜æœ‰å…¶ä»–å‚æ•°ï¼Œå…·ä½“ä½œç”¨è¯·é˜…è¯»QueryMsgByIdSubCommandã€‚</td><td class="xl67" width="87" style="width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">msgId</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="4" height="126" class="xl69" width="87" style="border-bottom:1.0pt;height:94.0pt;border-top:none;width:65pt;">queryMsgByKey</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">æ ¹æ®æ¶ˆæ¯ Key æŸ¥è¯¢æ¶ˆæ¯</td><td class="xl67" width="87" style="width:65pt;">-k</td><td class="xl67" width="87" style="width:65pt;">msgKey</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">Topic åç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="225" style="height:169.0pt;"><td rowspan="6" height="390" class="xl69" width="87" style="border-bottom:1.0pt;height:292.0pt;border-top:none;width:65pt;">queryMsgByOffset</td><td rowspan="6" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">æ ¹æ® Offset æŸ¥è¯¢æ¶ˆæ¯</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker åç§°ï¼Œï¼ˆè¿™é‡Œéœ€è¦æ³¨æ„ å¡«å†™çš„æ˜¯ Broker çš„åç§°ï¼Œä¸æ˜¯ Broker çš„åœ°å€ï¼ŒBroker åç§°å¯ä»¥åœ¨ clusterList æŸ¥åˆ°ï¼‰</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-i</td><td class="xl68" width="87" style="width:65pt;">query é˜Ÿåˆ— id</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-o</td><td class="xl68" width="87" style="width:65pt;">offset å€¼</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topic åç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="47"><td rowspan="6" height="209" class="xl69" width="87" style="border-bottom:1.0pt;height:156.0pt;border-top:none;width:65pt;">queryMsgByUniqueKey</td><td rowspan="6" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">æ ¹æ®msgIdæŸ¥è¯¢ï¼ŒmsgIdä¸åŒäºoffsetMsgIdï¼ŒåŒºåˆ«è¯¦è§å¸¸è§è¿ç»´é—®é¢˜ã€‚-gï¼Œ-dé…åˆä½¿ç”¨ï¼ŒæŸ¥åˆ°æ¶ˆæ¯åå°è¯•è®©ç‰¹å®šçš„æ¶ˆè´¹è€…æ¶ˆè´¹æ¶ˆæ¯å¹¶è¿”å›æ¶ˆè´¹ç»“æœ</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">uniqe msg id</td></tr><tr height="36" style="height:27.0pt;"><td height="36" class="xl67" width="87" style="height:27.0pt;width:65pt;">-g</td><td class="xl67" width="87" style="width:65pt;">consumerGroup</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-d</td><td class="xl67" width="87" style="width:65pt;">clientId</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topicåç§°</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="5" height="149" class="xl69" width="87" style="border-bottom:1.0pt
  height:111.0pt;border-top:none;width:65pt;">checkMsgSendRT</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">æ£€æµ‹å‘topicå‘æ¶ˆæ¯çš„RTï¼ŒåŠŸèƒ½ç±»ä¼¼clusterRT</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topicåç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-a</td><td class="xl68" width="87" style="width:65pt;">æ¢æµ‹æ¬¡æ•°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">æ¶ˆæ¯å¤§å°</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="8" height="218" class="xl69" width="87" style="border-bottom:1.0pt;height:162.0pt;border-top:none;width:65pt;">sendMessage</td><td rowspan="8" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œå¯ä»¥æ ¹æ®é…ç½®å‘å¾€ç‰¹å®šMessage Queueï¼Œæˆ–æ™®é€šå‘é€ã€‚</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topicåç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-p</td><td class="xl68" width="87" style="width:65pt;">bodyï¼Œæ¶ˆæ¯ä½“</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-k</td><td class="xl67" width="87" style="width:65pt;">keys</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl67" width="87" style="width:65pt;">tags</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-b</td><td class="xl67" width="87" style="width:65pt;">BrokerName</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">queueId</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="10" height="312" class="xl69" width="87" style="border-bottom:1.0pt;height:232.0pt;border-top:none;width:65pt;">consumeMessage</td><td rowspan="10" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">æ¶ˆè´¹æ¶ˆæ¯ã€‚å¯ä»¥æ ¹æ®offsetã€å¼€å§‹&amp;ç»“æŸæ—¶é—´æˆ³ã€æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹æ¶ˆæ¯ï¼Œé…ç½®ä¸åŒæ‰§è¡Œä¸åŒæ¶ˆè´¹é€»è¾‘ï¼Œè¯¦è§ConsumeMessageCommandã€‚</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topicåç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-b</td><td class="xl67" width="87" style="width:65pt;">BrokerName</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-o</td><td class="xl68" width="87" style="width:65pt;">ä»offsetå¼€å§‹æ¶ˆè´¹</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">queueId</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">æ¶ˆè´¹è€…åˆ†ç»„</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">å¼€å§‹æ—¶é—´æˆ³ï¼Œæ ¼å¼è¯¦è§-h</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-d</td><td class="xl68" width="87" style="width:65pt;">ç»“æŸæ—¶é—´æˆ³</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">æ¶ˆè´¹å¤šå°‘æ¡æ¶ˆæ¯</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="8" height="282" class="xl69" width="87" style="border-bottom:1.0pt;height:210.0pt;border-top:none;width:65pt;">printMsg</td><td rowspan="8" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">ä»Brokeræ¶ˆè´¹æ¶ˆæ¯å¹¶æ‰“å°ï¼Œå¯é€‰æ—¶é—´æ®µ</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topicåç§°</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">å­—ç¬¦é›†ï¼Œä¾‹å¦‚UTF-8</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">subExpressï¼Œè¿‡æ»¤è¡¨è¾¾å¼</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">å¼€å§‹æ—¶é—´æˆ³ï¼Œæ ¼å¼å‚è§-h</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-e</td><td class="xl68" width="87" style="width:65pt;">ç»“æŸæ—¶é—´æˆ³</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-d</td><td class="xl68" width="87" style="width:65pt;">æ˜¯å¦æ‰“å°æ¶ˆæ¯ä½“</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="12" height="390" class="xl69" width="87" style="border-bottom:1.0pt;height:290.0pt;border-top:none;width:65pt;">printMsgByQueue</td><td rowspan="12" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">ç±»ä¼¼printMsgï¼Œä½†æŒ‡å®šMessage Queue</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topicåç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">queueId</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-a</td><td class="xl67" width="87" style="width:65pt;">BrokerName</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">å­—ç¬¦é›†ï¼Œä¾‹å¦‚UTF-8</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">subExpressï¼Œè¿‡æ»¤è¡¨è¾¾å¼</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">å¼€å§‹æ—¶é—´æˆ³ï¼Œæ ¼å¼å‚è§-h</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-e</td><td class="xl68" width="87" style="width:65pt;">ç»“æŸæ—¶é—´æˆ³</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-p</td><td class="xl68" width="87" style="width:65pt;">æ˜¯å¦æ‰“å°æ¶ˆæ¯</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-d</td><td class="xl68" width="87" style="width:65pt;">æ˜¯å¦æ‰“å°æ¶ˆæ¯ä½“</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-f</td><td class="xl68" width="87" style="width:65pt;">æ˜¯å¦ç»Ÿè®¡tagæ•°é‡å¹¶æ‰“å°</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="7" height="410" class="xl69" width="87" style="border-bottom:1.0pt;height:307.0pt;border-top:none;width:65pt;">resetOffsetByTime</td><td rowspan="7" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">æŒ‰æ—¶é—´æˆ³é‡ç½®offsetï¼ŒBrokerå’Œconsumeréƒ½ä¼šé‡ç½®</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">æ¶ˆè´¹è€…åˆ†ç»„</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topicåç§°</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">é‡ç½®ä¸ºæ­¤æ—¶é—´æˆ³å¯¹åº”çš„offset</td></tr><tr height="188" style="height:141.0pt;"><td height="188" class="xl67" width="87" style="height:141.0pt;width:65pt;">-f</td><td class="xl68" width="87" style="width:65pt;">æ˜¯å¦å¼ºåˆ¶é‡ç½®ï¼Œå¦‚æœfalseï¼Œåªæ”¯æŒå›æº¯offsetï¼Œå¦‚æœtrueï¼Œä¸ç®¡æ—¶é—´æˆ³å¯¹åº”offsetä¸consumeOffsetå…³ç³»</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">æ˜¯å¦é‡ç½®c++å®¢æˆ·ç«¯offset</td></tr></table><h4 id="_5-æ¶ˆè´¹è€…ã€æ¶ˆè´¹ç»„ç›¸å…³" tabindex="-1">5ï¼‰æ¶ˆè´¹è€…ã€æ¶ˆè´¹ç»„ç›¸å…³ <a class="header-anchor" href="#_5-æ¶ˆè´¹è€…ã€æ¶ˆè´¹ç»„ç›¸å…³" aria-label="Permalink to &quot;5ï¼‰æ¶ˆè´¹è€…ã€æ¶ˆè´¹ç»„ç›¸å…³&quot;">â€‹</a></h4><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">åç§°</td><td class="xl64" width="175" style="width:131pt;">å«ä¹‰</td><td class="xl64" width="177" style="width:133pt;">å‘½ä»¤é€‰é¡¹</td><td class="xl64" width="185" style="width:139pt;">è¯´æ˜</td></tr><tr height="39" style="height:29.0pt;"><td rowspan="4" height="158" class="xl69" width="87" style="border-bottom:1.0pt;height:110pt;border-top:none;width:65pt;">consumerProgress</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">æŸ¥çœ‹è®¢é˜…ç»„æ¶ˆè´¹çŠ¶æ€ï¼Œå¯ä»¥æŸ¥çœ‹å…·ä½“çš„client IPçš„æ¶ˆæ¯ç§¯ç´¯é‡</td><td class="xl67" width="87" style="width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">æ¶ˆè´¹è€…æ‰€å±ç»„å</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">æ˜¯å¦æ‰“å°client IP</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="105" style="mso-height-source:userset;height:79.0pt;"><td rowspan="5" height="260" class="xl69" width="87" style="border-bottom:1.0pt;height:195.0pt;border-top:none;width:65pt;">consumerStatus</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">æŸ¥çœ‹æ¶ˆè´¹è€…çŠ¶æ€ï¼ŒåŒ…æ‹¬åŒä¸€ä¸ªåˆ†ç»„ä¸­æ˜¯å¦éƒ½æ˜¯ç›¸åŒçš„è®¢é˜…ï¼Œåˆ†æProcess Queueæ˜¯å¦å †ç§¯ï¼Œè¿”å›æ¶ˆè´¹è€…jstackç»“æœï¼Œå†…å®¹è¾ƒå¤šï¼Œä½¿ç”¨è€…å‚è§ConsumerStatusSubCommand</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="36" style="height:27.0pt;"><td height="36" class="xl67" width="87" style="height:27.0pt;width:65pt;">-g</td><td class="xl67" width="87" style="width:65pt;">consumer group</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">clientId</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">æ˜¯å¦æ‰§è¡Œjstack</td></tr><tr height="39" style="height:29.0pt;"><td rowspan="5" height="181" class="xl69" width="87" style="border-bottom:1.0pt
  height:135.0pt;border-top:none;width:65pt;">getConsumerStatus</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">è·å– Consumer æ¶ˆè´¹è¿›åº¦</td><td class="xl67" width="87" style="width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">æ¶ˆè´¹è€…æ‰€å±ç»„å</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">æŸ¥è¯¢ä¸»é¢˜</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-i</td><td class="xl68" width="87" style="width:65pt;">Consumer å®¢æˆ·ç«¯ ip</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="13" height="761" class="xl69" width="87" style="border-bottom:1.0pt
  height:569.0pt;border-top:none;width:65pt;">updateSubGroup</td><td rowspan="13" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">æ›´æ–°æˆ–åˆ›å»ºè®¢é˜…å…³ç³»</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Brokeråœ°å€</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">é›†ç¾¤åç§°</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">æ¶ˆè´¹è€…åˆ†ç»„åç§°</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">åˆ†ç»„æ˜¯å¦å…è®¸æ¶ˆè´¹</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-m</td><td class="xl68" width="87" style="width:65pt;">æ˜¯å¦ä»æœ€å°offsetå¼€å§‹æ¶ˆè´¹</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-d</td><td class="xl68" width="87" style="width:65pt;">æ˜¯å¦æ˜¯å¹¿æ’­æ¨¡å¼</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-q</td><td class="xl68" width="87" style="width:65pt;">é‡è¯•é˜Ÿåˆ—æ•°é‡</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-r</td><td class="xl68" width="87" style="width:65pt;">æœ€å¤§é‡è¯•æ¬¡æ•°</td></tr><tr height="207" style="height:155.0pt;"><td height="207" class="xl67" width="87" style="height:155.0pt;width:65pt;">-i</td><td class="xl68" width="87" style="width:65pt;">å½“slaveReadEnableå¼€å¯æ—¶æœ‰æ•ˆï¼Œä¸”è¿˜æœªè¾¾åˆ°ä»slaveæ¶ˆè´¹æ—¶å»ºè®®ä»å“ªä¸ªBrokerIdæ¶ˆè´¹ï¼Œå¯ä»¥é…ç½®å¤‡æœºidï¼Œä¸»åŠ¨ä»å¤‡æœºæ¶ˆè´¹</td></tr><tr height="132" style="height:99.0pt;"><td height="132" class="xl67" width="87" style="height:99.0pt;width:65pt;">-w</td><td class="xl68" width="87" style="width:65pt;">å¦‚æœBrokerå»ºè®®ä»slaveæ¶ˆè´¹ï¼Œé…ç½®å†³å®šä»å“ªä¸ªslaveæ¶ˆè´¹ï¼Œé…ç½®BrokerIdï¼Œä¾‹å¦‚1</td></tr><tr height="76" style="height:57.0pt;"><td height="76" class="xl67" width="87" style="height:57.0pt;width:65pt;">-a</td><td class="xl68" width="87" style="width:65pt;">å½“æ¶ˆè´¹è€…æ•°é‡å˜åŒ–æ—¶æ˜¯å¦é€šçŸ¥å…¶ä»–æ¶ˆè´¹è€…è´Ÿè½½å‡è¡¡</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="5" height="165" class="xl69" width="87" style="border-bottom:1.0pt
  height:123.0pt;border-top:none;width:65pt;">deleteSubGroup</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">ä»Brokeråˆ é™¤è®¢é˜…å…³ç³»</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Brokeråœ°å€</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">é›†ç¾¤åç§°</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">æ¶ˆè´¹è€…åˆ†ç»„åç§°</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="6" height="172" class="xl69" width="87" style="border-bottom:1.0pt
  height:120pt;border-top:none;width:65pt;">cloneGroupOffset</td><td rowspan="6" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">åœ¨ç›®æ ‡ç¾¤ç»„ä¸­ä½¿ç”¨æºç¾¤ç»„çš„offset</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">æºæ¶ˆè´¹è€…ç»„</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-d</td><td class="xl68" width="87" style="width:65pt;">ç›®æ ‡æ¶ˆè´¹è€…ç»„</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topicåç§°</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-o</td><td class="xl68" width="87" style="width:65pt;">æš‚æœªä½¿ç”¨</td></tr></table><h4 id="_6-è¿æ¥ç›¸å…³" tabindex="-1">6ï¼‰è¿æ¥ç›¸å…³ <a class="header-anchor" href="#_6-è¿æ¥ç›¸å…³" aria-label="Permalink to &quot;6ï¼‰è¿æ¥ç›¸å…³&quot;">â€‹</a></h4><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">åç§°</td><td class="xl64" width="175" style="width:131pt;">å«ä¹‰</td><td class="xl64" width="177" style="width:133pt;">å‘½ä»¤é€‰é¡¹</td><td class="xl64" width="185" style="width:139pt;">è¯´æ˜</td></tr><tr height="39" style="height:29.0pt;"><td rowspan="3" height="119" class="xl69" width="87" style="border-bottom:1.0pt
  height:89.0pt;border-top:none;width:65pt;">consumerConnec tion</td><td rowspan="3" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">æŸ¥è¯¢ Consumer çš„ç½‘ç»œè¿æ¥</td><td class="xl67" width="87" style="width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">æ¶ˆè´¹è€…æ‰€å±ç»„å</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="39" style="height:29.0pt;"><td rowspan="4" height="142" class="xl69" width="87" style="border-bottom:1.0pt
  height:106.0pt;border-top:none;width:65pt;">producerConnec tion</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">æŸ¥è¯¢ Producer çš„ç½‘ç»œè¿æ¥</td><td class="xl67" width="87" style="width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">ç”Ÿäº§è€…æ‰€å±ç»„å</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">ä¸»é¢˜åç§°</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr></table><h4 id="_7-nameserverç›¸å…³" tabindex="-1">7ï¼‰NameServerç›¸å…³ <a class="header-anchor" href="#_7-nameserverç›¸å…³" aria-label="Permalink to &quot;7ï¼‰NameServerç›¸å…³&quot;">â€‹</a></h4><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">åç§°</td><td class="xl64" width="175" style="width:131pt;">å«ä¹‰</td><td class="xl64" width="177" style="width:133pt;">å‘½ä»¤é€‰é¡¹</td><td class="xl64" width="185" style="width:139pt;">è¯´æ˜</td></tr><tr height="21" style="height:16.0pt;"><td rowspan="5" height="143" class="xl69" width="87" style="border-bottom:1.0pt
  height:100pt;border-top:none;width:65pt;">updateKvConfig</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">æ›´æ–°NameServerçš„kvé…ç½®ï¼Œç›®å‰è¿˜æœªä½¿ç”¨</td><td class="xl75" width="87" style="width:65pt;">-s</td><td class="xl76" width="87" style="width:65pt;">å‘½åç©ºé—´</td></tr><tr height="21" style="height:16.0pt;"><td height="21" class="xl75" width="87" style="height:16.0pt;width:65pt;">-k</td><td class="xl75" width="87" style="width:65pt;">key</td></tr><tr height="21" style="height:16.0pt;"><td height="21" class="xl75" width="87" style="height:16.0pt;width:65pt;">-v</td><td class="xl75" width="87" style="width:65pt;">value</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="4" height="126" class="xl69" width="87" style="border-bottom:1.0pt
  height:94.0pt;border-top:none;width:65pt;">deleteKvConfig</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">åˆ é™¤NameServerçš„kvé…ç½®</td><td class="xl67" width="87" style="width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">å‘½åç©ºé—´</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-k</td><td class="xl67" width="87" style="width:65pt;">key</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="2" height="80" class="xl69" width="87" style="border-bottom:1.0pt
  height:60.0pt;border-top:none;width:65pt;">getNamesrvConfig</td><td rowspan="2" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">è·å–NameServeré…ç½®</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="4" height="126" class="xl69" width="87" style="border-bottom:1.0pt
  height:94.0pt;border-top:none;width:65pt;">updateNamesrvConfig</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">ä¿®æ”¹NameServeré…ç½®</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-k</td><td class="xl67" width="87" style="width:65pt;">key</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-v</td><td class="xl67" width="87" style="width:65pt;">value</td></tr></table><h4 id="_8-å…¶ä»–" tabindex="-1">8ï¼‰å…¶ä»– <a class="header-anchor" href="#_8-å…¶ä»–" aria-label="Permalink to &quot;8ï¼‰å…¶ä»–&quot;">â€‹</a></h4><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">åç§°</td><td class="xl64" width="175" style="width:131pt;">å«ä¹‰</td><td class="xl64" width="177" style="width:133pt;">å‘½ä»¤é€‰é¡¹</td><td class="xl64" width="185" style="width:139pt;">è¯´æ˜</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="2" height="80" class="xl69" width="87" style="border-bottom:1.0pt
  height:60.0pt;border-top:none;width:65pt;">startMonitoring</td><td rowspan="2" class="xl71" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">å¼€å¯ç›‘æ§è¿›ç¨‹ï¼Œç›‘æ§æ¶ˆæ¯è¯¯åˆ ã€é‡è¯•é˜Ÿåˆ—æ¶ˆæ¯æ•°ç­‰</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer æœåŠ¡åœ°å€ï¼Œæ ¼å¼ ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">æ‰“å°å¸®åŠ©</td></tr></table><h3 id="_3-4-3-æ³¨æ„äº‹é¡¹" tabindex="-1">3.4.3 æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#_3-4-3-æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;3.4.3 æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h3><ul><li>å‡ ä¹æ‰€æœ‰å‘½ä»¤éƒ½éœ€è¦é…ç½®-nè¡¨ç¤ºNameServeråœ°å€ï¼Œæ ¼å¼ä¸ºip:port</li><li>å‡ ä¹æ‰€æœ‰å‘½ä»¤éƒ½å¯ä»¥é€šè¿‡-hè·å–å¸®åŠ©</li><li>å¦‚æœæ—¢æœ‰Brokeråœ°å€ï¼ˆ-bï¼‰é…ç½®é¡¹åˆæœ‰clusterNameï¼ˆ-cï¼‰é…ç½®é¡¹ï¼Œåˆ™ä¼˜å…ˆä»¥Brokeråœ°å€æ‰§è¡Œå‘½ä»¤ï¼›å¦‚æœä¸é…ç½®Brokeråœ°å€ï¼Œåˆ™å¯¹é›†ç¾¤ä¸­æ‰€æœ‰ä¸»æœºæ‰§è¡Œå‘½ä»¤</li></ul><h2 id="_3-5-é›†ç¾¤ç›‘æ§å¹³å°æ­å»º" tabindex="-1">3.5 é›†ç¾¤ç›‘æ§å¹³å°æ­å»º <a class="header-anchor" href="#_3-5-é›†ç¾¤ç›‘æ§å¹³å°æ­å»º" aria-label="Permalink to &quot;3.5 é›†ç¾¤ç›‘æ§å¹³å°æ­å»º&quot;">â€‹</a></h2><h3 id="_3-5-1-æ¦‚è¿°" tabindex="-1">3.5.1 æ¦‚è¿° <a class="header-anchor" href="#_3-5-1-æ¦‚è¿°" aria-label="Permalink to &quot;3.5.1 æ¦‚è¿°&quot;">â€‹</a></h3><p><code>RocketMQ</code>æœ‰ä¸€ä¸ªå¯¹å…¶æ‰©å±•çš„å¼€æºé¡¹ç›®<a href="https://github.com/apache/rocketmq-externals" target="_blank" rel="noreferrer">incubator-rocketmq-externals</a>ï¼Œè¿™ä¸ªé¡¹ç›®ä¸­æœ‰ä¸€ä¸ªå­æ¨¡å—å«<code>rocketmq-console</code>ï¼Œè¿™ä¸ªä¾¿æ˜¯ç®¡ç†æ§åˆ¶å°é¡¹ç›®äº†ï¼Œå…ˆå°†<a href="https://github.com/apache/rocketmq-externals" target="_blank" rel="noreferrer">incubator-rocketmq-externals</a>æ‹‰åˆ°æœ¬åœ°ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦è‡ªå·±å¯¹<code>rocketmq-console</code>è¿›è¡Œç¼–è¯‘æ‰“åŒ…è¿è¡Œã€‚</p><p><img src="/assets/rocketmq-console.DSOq-V_d.png" alt="" loading="lazy"></p><h3 id="_3-5-2-ä¸‹è½½å¹¶ç¼–è¯‘æ‰“åŒ…" tabindex="-1">3.5.2 ä¸‹è½½å¹¶ç¼–è¯‘æ‰“åŒ… <a class="header-anchor" href="#_3-5-2-ä¸‹è½½å¹¶ç¼–è¯‘æ‰“åŒ…" aria-label="Permalink to &quot;3.5.2 ä¸‹è½½å¹¶ç¼–è¯‘æ‰“åŒ…&quot;">â€‹</a></h3><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/apache/rocketmq-externals</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-console</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mvn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Dmaven.test.skip=true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ³¨æ„ï¼šæ‰“åŒ…å‰åœ¨<code>rocketmq-console</code>ä¸­é…ç½®<code>namesrv</code>é›†ç¾¤åœ°å€ï¼š</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rocketmq.config.namesrvAddr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=192.168.25.135:9876</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.25.138:9876</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¯åŠ¨rocketmq-consoleï¼š</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">java</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-console.jar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¯åŠ¨æˆåŠŸåï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®<code>http://localhost:8080</code>è¿›å…¥æ§åˆ¶å°ç•Œé¢äº†ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="/assets/rocketmq-console2.BNsM6gJ8.png" alt="" loading="lazy"></p><p>é›†ç¾¤çŠ¶æ€ï¼š</p><p><img src="/assets/rocketmq-console3.BNhiRcHC.png" alt="" loading="lazy"></p><h1 id="_4-æ¶ˆæ¯å‘é€æ ·ä¾‹" tabindex="-1">4. æ¶ˆæ¯å‘é€æ ·ä¾‹ <a class="header-anchor" href="#_4-æ¶ˆæ¯å‘é€æ ·ä¾‹" aria-label="Permalink to &quot;4. æ¶ˆæ¯å‘é€æ ·ä¾‹&quot;">â€‹</a></h1><ul><li>å¯¼å…¥MQå®¢æˆ·ç«¯ä¾èµ–</li></ul><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.apache.rocketmq&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;rocketmq-client&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;4.4.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>æ¶ˆæ¯å‘é€è€…æ­¥éª¤åˆ†ær</li></ul><div class="language-tex vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tex</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">1.åˆ›å»ºæ¶ˆæ¯ç”Ÿäº§è€…producerï¼Œå¹¶åˆ¶å®šç”Ÿäº§è€…ç»„å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2.æŒ‡å®šNameserveråœ°å€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">3.å¯åŠ¨producer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">4.åˆ›å»ºæ¶ˆæ¯å¯¹è±¡ï¼ŒæŒ‡å®šä¸»é¢˜Topicã€Tagå’Œæ¶ˆæ¯ä½“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">5.å‘é€æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">6.å…³é—­ç”Ÿäº§è€…producer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>æ¶ˆæ¯æ¶ˆè´¹è€…æ­¥éª¤åˆ†æ</li></ul><div class="language-tex vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tex</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">1.åˆ›å»ºæ¶ˆè´¹è€…Consumerï¼Œåˆ¶å®šæ¶ˆè´¹è€…ç»„å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2.æŒ‡å®šNameserveråœ°å€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">3.è®¢é˜…ä¸»é¢˜Topicå’ŒTag</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">4.è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¤„ç†æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">5.å¯åŠ¨æ¶ˆè´¹è€…consumer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_4-1-åŸºæœ¬æ ·ä¾‹" tabindex="-1">4.1 åŸºæœ¬æ ·ä¾‹ <a class="header-anchor" href="#_4-1-åŸºæœ¬æ ·ä¾‹" aria-label="Permalink to &quot;4.1 åŸºæœ¬æ ·ä¾‹&quot;">â€‹</a></h2><h3 id="_4-1-1-æ¶ˆæ¯å‘é€" tabindex="-1">4.1.1 æ¶ˆæ¯å‘é€ <a class="header-anchor" href="#_4-1-1-æ¶ˆæ¯å‘é€" aria-label="Permalink to &quot;4.1.1 æ¶ˆæ¯å‘é€&quot;">â€‹</a></h3><h4 id="_1-å‘é€åŒæ­¥æ¶ˆæ¯" tabindex="-1">1ï¼‰å‘é€åŒæ­¥æ¶ˆæ¯ <a class="header-anchor" href="#_1-å‘é€åŒæ­¥æ¶ˆæ¯" aria-label="Permalink to &quot;1ï¼‰å‘é€åŒæ­¥æ¶ˆæ¯&quot;">â€‹</a></h4><p>è¿™ç§å¯é æ€§åŒæ­¥åœ°å‘é€æ–¹å¼ä½¿ç”¨çš„æ¯”è¾ƒå¹¿æ³›ï¼Œæ¯”å¦‚ï¼šé‡è¦çš„æ¶ˆæ¯é€šçŸ¥ï¼ŒçŸ­ä¿¡é€šçŸ¥ã€‚</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SyncProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// å®ä¾‹åŒ–æ¶ˆæ¯ç”Ÿäº§è€…Producer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// è®¾ç½®NameServerçš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// å¯åŠ¨Producerå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    	for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	    // åˆ›å»ºæ¶ˆæ¯ï¼Œå¹¶æŒ‡å®šTopicï¼ŒTagå’Œæ¶ˆæ¯ä½“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	    Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* Topic */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        	&quot;TagA&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* Tag */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        	(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello RocketMQ &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RemotingHelper.DEFAULT_CHARSET) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* Message body */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        	);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        	// å‘é€æ¶ˆæ¯åˆ°ä¸€ä¸ªBroker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            SendResult sendResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // é€šè¿‡sendResultè¿”å›æ¶ˆæ¯æ˜¯å¦æˆåŠŸé€è¾¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%s%n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sendResult);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// å¦‚æœä¸å†å‘é€æ¶ˆæ¯ï¼Œå…³é—­Producerå®ä¾‹ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="_2-å‘é€å¼‚æ­¥æ¶ˆæ¯" tabindex="-1">2ï¼‰å‘é€å¼‚æ­¥æ¶ˆæ¯ <a class="header-anchor" href="#_2-å‘é€å¼‚æ­¥æ¶ˆæ¯" aria-label="Permalink to &quot;2ï¼‰å‘é€å¼‚æ­¥æ¶ˆæ¯&quot;">â€‹</a></h4><p>å¼‚æ­¥æ¶ˆæ¯é€šå¸¸ç”¨åœ¨å¯¹å“åº”æ—¶é—´æ•æ„Ÿçš„ä¸šåŠ¡åœºæ™¯ï¼Œå³å‘é€ç«¯ä¸èƒ½å®¹å¿é•¿æ—¶é—´åœ°ç­‰å¾…Brokerçš„å“åº”ã€‚</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AsyncProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// å®ä¾‹åŒ–æ¶ˆæ¯ç”Ÿäº§è€…Producer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// è®¾ç½®NameServerçš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// å¯åŠ¨Producerå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRetryTimesWhenSendAsyncFailed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    	for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            	// åˆ›å»ºæ¶ˆæ¯ï¼Œå¹¶æŒ‡å®šTopicï¼ŒTagå’Œæ¶ˆæ¯ä½“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &quot;OrderID188&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &quot;Hello world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RemotingHelper.DEFAULT_CHARSET));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // SendCallbackæ¥æ”¶å¼‚æ­¥è¿”å›ç»“æœçš„å›è°ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SendCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SendResult </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sendResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%-10d OK %s %n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, index,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            sendResult.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMsgId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Throwable </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      	              System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%-10d Exception %s %n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, index, e);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      	              e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            	});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// å¦‚æœä¸å†å‘é€æ¶ˆæ¯ï¼Œå…³é—­Producerå®ä¾‹ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="_3-å•å‘å‘é€æ¶ˆæ¯" tabindex="-1">3ï¼‰å•å‘å‘é€æ¶ˆæ¯ <a class="header-anchor" href="#_3-å•å‘å‘é€æ¶ˆæ¯" aria-label="Permalink to &quot;3ï¼‰å•å‘å‘é€æ¶ˆæ¯&quot;">â€‹</a></h4><p>è¿™ç§æ–¹å¼ä¸»è¦ç”¨åœ¨ä¸ç‰¹åˆ«å…³å¿ƒå‘é€ç»“æœçš„åœºæ™¯ï¼Œä¾‹å¦‚æ—¥å¿—å‘é€ã€‚</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OnewayProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// å®ä¾‹åŒ–æ¶ˆæ¯ç”Ÿäº§è€…Producer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// è®¾ç½®NameServerçš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// å¯åŠ¨Producerå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    	for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        	// åˆ›å»ºæ¶ˆæ¯ï¼Œå¹¶æŒ‡å®šTopicï¼ŒTagå’Œæ¶ˆæ¯ä½“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        	Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* Topic */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;TagA&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* Tag */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello RocketMQ &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RemotingHelper.DEFAULT_CHARSET) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* Message body */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        	);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        	// å‘é€å•å‘æ¶ˆæ¯ï¼Œæ²¡æœ‰ä»»ä½•è¿”å›ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        	producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendOneway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// å¦‚æœä¸å†å‘é€æ¶ˆæ¯ï¼Œå…³é—­Producerå®ä¾‹ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_4-1-2-æ¶ˆè´¹æ¶ˆæ¯" tabindex="-1">4.1.2 æ¶ˆè´¹æ¶ˆæ¯ <a class="header-anchor" href="#_4-1-2-æ¶ˆè´¹æ¶ˆæ¯" aria-label="Permalink to &quot;4.1.2 æ¶ˆè´¹æ¶ˆæ¯&quot;">â€‹</a></h3><h4 id="_1-è´Ÿè½½å‡è¡¡æ¨¡å¼" tabindex="-1">1ï¼‰è´Ÿè½½å‡è¡¡æ¨¡å¼ <a class="header-anchor" href="#_1-è´Ÿè½½å‡è¡¡æ¨¡å¼" aria-label="Permalink to &quot;1ï¼‰è´Ÿè½½å‡è¡¡æ¨¡å¼&quot;">â€‹</a></h4><p>æ¶ˆè´¹è€…é‡‡ç”¨è´Ÿè½½å‡è¡¡æ–¹å¼æ¶ˆè´¹æ¶ˆæ¯ï¼Œå¤šä¸ªæ¶ˆè´¹è€…å…±åŒæ¶ˆè´¹é˜Ÿåˆ—æ¶ˆæ¯ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…å¤„ç†çš„æ¶ˆæ¯ä¸åŒ</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) throws Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å®ä¾‹åŒ–æ¶ˆæ¯ç”Ÿäº§è€…,æŒ‡å®šç»„å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æŒ‡å®šNamesrvåœ°å€ä¿¡æ¯.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è®¢é˜…Topic</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //è´Ÿè½½å‡è¡¡æ¨¡å¼æ¶ˆè´¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setMessageModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MessageModel.CLUSTERING);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå¤„ç†æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerMessageListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageListenerConcurrently</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consumeMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageExt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                        ConsumeConcurrentlyContext </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%s Receive New Messages: %s %n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                              Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), msgs);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å¯åŠ¨æ¶ˆæ¯è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Consumer Started.%n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="_2-å¹¿æ’­æ¨¡å¼" tabindex="-1">2ï¼‰å¹¿æ’­æ¨¡å¼ <a class="header-anchor" href="#_2-å¹¿æ’­æ¨¡å¼" aria-label="Permalink to &quot;2ï¼‰å¹¿æ’­æ¨¡å¼&quot;">â€‹</a></h4><p>æ¶ˆè´¹è€…é‡‡ç”¨å¹¿æ’­çš„æ–¹å¼æ¶ˆè´¹æ¶ˆæ¯ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹çš„æ¶ˆæ¯éƒ½æ˜¯ç›¸åŒçš„</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) throws Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å®ä¾‹åŒ–æ¶ˆæ¯ç”Ÿäº§è€…,æŒ‡å®šç»„å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æŒ‡å®šNamesrvåœ°å€ä¿¡æ¯.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è®¢é˜…Topic</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å¹¿æ’­æ¨¡å¼æ¶ˆè´¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setMessageModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MessageModel.BROADCASTING);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå¤„ç†æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerMessageListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageListenerConcurrently</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consumeMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageExt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                        ConsumeConcurrentlyContext </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%s Receive New Messages: %s %n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                              Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), msgs);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å¯åŠ¨æ¶ˆæ¯è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Consumer Started.%n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_4-2-é¡ºåºæ¶ˆæ¯" tabindex="-1">4.2 é¡ºåºæ¶ˆæ¯ <a class="header-anchor" href="#_4-2-é¡ºåºæ¶ˆæ¯" aria-label="Permalink to &quot;4.2 é¡ºåºæ¶ˆæ¯&quot;">â€‹</a></h2><p>æ¶ˆæ¯æœ‰åºæŒ‡çš„æ˜¯å¯ä»¥æŒ‰ç…§æ¶ˆæ¯çš„å‘é€é¡ºåºæ¥æ¶ˆè´¹(FIFO)ã€‚RocketMQå¯ä»¥ä¸¥æ ¼çš„ä¿è¯æ¶ˆæ¯æœ‰åºï¼Œå¯ä»¥åˆ†ä¸ºåˆ†åŒºæœ‰åºæˆ–è€…å…¨å±€æœ‰åºã€‚</p><p>é¡ºåºæ¶ˆè´¹çš„åŸç†è§£æï¼Œåœ¨é»˜è®¤çš„æƒ…å†µä¸‹æ¶ˆæ¯å‘é€ä¼šé‡‡å–Round Robinè½®è¯¢æ–¹å¼æŠŠæ¶ˆæ¯å‘é€åˆ°ä¸åŒçš„queue(åˆ†åŒºé˜Ÿåˆ—)ï¼›è€Œæ¶ˆè´¹æ¶ˆæ¯çš„æ—¶å€™ä»å¤šä¸ªqueueä¸Šæ‹‰å–æ¶ˆæ¯ï¼Œè¿™ç§æƒ…å†µå‘é€å’Œæ¶ˆè´¹æ˜¯ä¸èƒ½ä¿è¯é¡ºåºã€‚ä½†æ˜¯å¦‚æœæ§åˆ¶å‘é€çš„é¡ºåºæ¶ˆæ¯åªä¾æ¬¡å‘é€åˆ°åŒä¸€ä¸ªqueueä¸­ï¼Œæ¶ˆè´¹çš„æ—¶å€™åªä»è¿™ä¸ªqueueä¸Šä¾æ¬¡æ‹‰å–ï¼Œåˆ™å°±ä¿è¯äº†é¡ºåºã€‚å½“å‘é€å’Œæ¶ˆè´¹å‚ä¸çš„queueåªæœ‰ä¸€ä¸ªï¼Œåˆ™æ˜¯å…¨å±€æœ‰åºï¼›å¦‚æœå¤šä¸ªqueueå‚ä¸ï¼Œåˆ™ä¸ºåˆ†åŒºæœ‰åºï¼Œå³ç›¸å¯¹æ¯ä¸ªqueueï¼Œæ¶ˆæ¯éƒ½æ˜¯æœ‰åºçš„ã€‚</p><p>ä¸‹é¢ç”¨è®¢å•è¿›è¡Œåˆ†åŒºæœ‰åºçš„ç¤ºä¾‹ã€‚ä¸€ä¸ªè®¢å•çš„é¡ºåºæµç¨‹æ˜¯ï¼šåˆ›å»ºã€ä»˜æ¬¾ã€æ¨é€ã€å®Œæˆã€‚è®¢å•å·ç›¸åŒçš„æ¶ˆæ¯ä¼šè¢«å…ˆåå‘é€åˆ°åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹æ—¶ï¼ŒåŒä¸€ä¸ªOrderIdè·å–åˆ°çš„è‚¯å®šæ˜¯åŒä¸€ä¸ªé˜Ÿåˆ—ã€‚</p><h3 id="_4-2-1-é¡ºåºæ¶ˆæ¯ç”Ÿäº§" tabindex="-1">4.2.1 é¡ºåºæ¶ˆæ¯ç”Ÿäº§ <a class="header-anchor" href="#_4-2-1-é¡ºåºæ¶ˆæ¯ç”Ÿäº§" aria-label="Permalink to &quot;4.2.1 é¡ºåºæ¶ˆæ¯ç”Ÿäº§&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* Producerï¼Œå‘é€é¡ºåºæ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Producer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] tags </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       // è®¢å•åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; orderList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Producer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">buildOrders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       Date date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       SimpleDateFormat sdf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SimpleDateFormat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       String dateStr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sdf.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(date);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           // åŠ ä¸ªæ—¶é—´å‰ç¼€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           String body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dateStr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot; Hello RocketMQ &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tags[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tags.length], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;KEY&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i, body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           SendResult sendResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageQueueSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MessageQueue </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mqs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Message </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   Long id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Long) arg;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æ ¹æ®è®¢å•idé€‰æ‹©å‘é€queue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                   long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mqs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                   return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mqs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) index);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }, orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è®¢å•id</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SendResult status:%s, queueId:%d, body:%s&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               sendResult.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSendStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               sendResult.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessageQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getQueueId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               body));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * è®¢å•çš„æ­¥éª¤</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderId;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String desc;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> long</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderId;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">long</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> orderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.orderId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderId;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> desc;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">desc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.desc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> desc;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;OrderStep{&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               &quot;orderId=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               &quot;, desc=&#39;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> desc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               &#39;}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * ç”Ÿæˆæ¨¡æ‹Ÿè®¢å•æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">buildOrders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; orderList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ArrayList&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       OrderStep orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111039L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ›å»º&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111065L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ›å»º&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111039L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»˜æ¬¾&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103117235L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ›å»º&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111065L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»˜æ¬¾&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103117235L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»˜æ¬¾&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111065L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å®Œæˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111039L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¨é€&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103117235L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å®Œæˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111039L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å®Œæˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderList;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br></div></div><h3 id="_4-2-2-é¡ºåºæ¶ˆè´¹æ¶ˆæ¯" tabindex="-1">4.2.2 é¡ºåºæ¶ˆè´¹æ¶ˆæ¯ <a class="header-anchor" href="#_4-2-2-é¡ºåºæ¶ˆè´¹æ¶ˆæ¯" aria-label="Permalink to &quot;4.2.2 é¡ºåºæ¶ˆè´¹æ¶ˆæ¯&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* é¡ºåºæ¶ˆæ¯æ¶ˆè´¹ï¼Œå¸¦äº‹åŠ¡æ–¹å¼ï¼ˆåº”ç”¨å¯æ§åˆ¶Offsetä»€ä¹ˆæ—¶å€™æäº¤ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ConsumerInOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">           DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name_3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        * è®¾ç½®Consumerç¬¬ä¸€æ¬¡å¯åŠ¨æ˜¯ä»é˜Ÿåˆ—å¤´éƒ¨å¼€å§‹æ¶ˆè´¹è¿˜æ˜¯é˜Ÿåˆ—å°¾éƒ¨å¼€å§‹æ¶ˆè´¹&lt;br&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        * å¦‚æœéç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œé‚£ä¹ˆæŒ‰ç…§ä¸Šæ¬¡æ¶ˆè´¹çš„ä½ç½®ç»§ç»­æ¶ˆè´¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setConsumeFromWhere</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA || TagC || TagD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerMessageListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageListenerOrderly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           Random random </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Random</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeOrderlyStatus </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consumeMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageExt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ConsumeOrderlyContext </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAutoCommit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (MessageExt msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> msgs) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   // å¯ä»¥çœ‹åˆ°æ¯ä¸ªqueueæœ‰å”¯ä¸€çš„consumeçº¿ç¨‹æ¥æ¶ˆè´¹, è®¢å•å¯¹æ¯ä¸ªqueue(åˆ†åŒº)æœ‰åº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;consumeThread=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;queueId=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getQueueId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;, content:&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   //æ¨¡æ‹Ÿä¸šåŠ¡é€»è¾‘å¤„ç†ä¸­...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   TimeUnit.SECONDS.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(random.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nextInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeOrderlyStatus.SUCCESS;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Consumer Started.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h2 id="_4-3-å»¶æ—¶æ¶ˆæ¯" tabindex="-1">4.3 å»¶æ—¶æ¶ˆæ¯ <a class="header-anchor" href="#_4-3-å»¶æ—¶æ¶ˆæ¯" aria-label="Permalink to &quot;4.3 å»¶æ—¶æ¶ˆæ¯&quot;">â€‹</a></h2><p>æ¯”å¦‚ç”µå•†é‡Œï¼Œæäº¤äº†ä¸€ä¸ªè®¢å•å°±å¯ä»¥å‘é€ä¸€ä¸ªå»¶æ—¶æ¶ˆæ¯ï¼Œ1håå»æ£€æŸ¥è¿™ä¸ªè®¢å•çš„çŠ¶æ€ï¼Œå¦‚æœè¿˜æ˜¯æœªä»˜æ¬¾å°±å–æ¶ˆè®¢å•é‡Šæ”¾åº“å­˜ã€‚</p><h3 id="_4-3-1-å¯åŠ¨æ¶ˆæ¯æ¶ˆè´¹è€…" tabindex="-1">4.3.1 å¯åŠ¨æ¶ˆæ¯æ¶ˆè´¹è€… <a class="header-anchor" href="#_4-3-1-å¯åŠ¨æ¶ˆæ¯æ¶ˆè´¹è€…" aria-label="Permalink to &quot;4.3.1 å¯åŠ¨æ¶ˆæ¯æ¶ˆè´¹è€…&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ScheduledMessageConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å®ä¾‹åŒ–æ¶ˆè´¹è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ExampleConsumer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // è®¢é˜…Topics</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TestTopic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // æ³¨å†Œæ¶ˆæ¯ç›‘å¬è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerMessageListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageListenerConcurrently</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consumeMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageExt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">messages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ConsumeConcurrentlyContext </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (MessageExt message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  // Print approximate delay time period</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Receive message[msgId=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMsgId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;] &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentTimeMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStoreTimestamp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ms later&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å¯åŠ¨æ¶ˆè´¹è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_4-3-2-å‘é€å»¶æ—¶æ¶ˆæ¯" tabindex="-1">4.3.2 å‘é€å»¶æ—¶æ¶ˆæ¯ <a class="header-anchor" href="#_4-3-2-å‘é€å»¶æ—¶æ¶ˆæ¯" aria-label="Permalink to &quot;4.3.2 å‘é€å»¶æ—¶æ¶ˆæ¯&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ScheduledMessageProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å®ä¾‹åŒ–ä¸€ä¸ªç”Ÿäº§è€…æ¥äº§ç”Ÿå»¶æ—¶æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ExampleProducerGroup&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å¯åŠ¨ç”Ÿäº§è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> totalMessagesToSend </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> totalMessagesToSend; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          Message message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TestTopic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello scheduled message &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // è®¾ç½®å»¶æ—¶ç­‰çº§3,è¿™ä¸ªæ¶ˆæ¯å°†åœ¨10sä¹‹åå‘é€(ç°åœ¨åªæ”¯æŒå›ºå®šçš„å‡ ä¸ªæ—¶é—´,è¯¦çœ‹delayTimeLevel)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDelayTimeLevel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // å‘é€æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       // å…³é—­ç”Ÿäº§è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>###4.3.3 éªŒè¯</p><p>æ‚¨å°†ä¼šçœ‹åˆ°æ¶ˆæ¯çš„æ¶ˆè´¹æ¯”å­˜å‚¨æ—¶é—´æ™š10ç§’</p><h3 id="_4-3-4-ä½¿ç”¨é™åˆ¶" tabindex="-1">4.3.4 ä½¿ç”¨é™åˆ¶ <a class="header-anchor" href="#_4-3-4-ä½¿ç”¨é™åˆ¶" aria-label="Permalink to &quot;4.3.4 ä½¿ç”¨é™åˆ¶&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// org/apache/rocketmq/store/config/MessageStoreConfig.java</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String messageDelayLevel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç°åœ¨RocketMqå¹¶ä¸æ”¯æŒä»»æ„æ—¶é—´çš„å»¶æ—¶ï¼Œéœ€è¦è®¾ç½®å‡ ä¸ªå›ºå®šçš„å»¶æ—¶ç­‰çº§ï¼Œä»1såˆ°2håˆ†åˆ«å¯¹åº”ç€ç­‰çº§1åˆ°18</p><h2 id="_4-4-æ‰¹é‡æ¶ˆæ¯" tabindex="-1">4.4 æ‰¹é‡æ¶ˆæ¯ <a class="header-anchor" href="#_4-4-æ‰¹é‡æ¶ˆæ¯" aria-label="Permalink to &quot;4.4 æ‰¹é‡æ¶ˆæ¯&quot;">â€‹</a></h2><p>æ‰¹é‡å‘é€æ¶ˆæ¯èƒ½æ˜¾è‘—æé«˜ä¼ é€’å°æ¶ˆæ¯çš„æ€§èƒ½ã€‚é™åˆ¶æ˜¯è¿™äº›æ‰¹é‡æ¶ˆæ¯åº”è¯¥æœ‰ç›¸åŒçš„topicï¼Œç›¸åŒçš„waitStoreMsgOKï¼Œè€Œä¸”ä¸èƒ½æ˜¯å»¶æ—¶æ¶ˆæ¯ã€‚æ­¤å¤–ï¼Œè¿™ä¸€æ‰¹æ¶ˆæ¯çš„æ€»å¤§å°ä¸åº”è¶…è¿‡4MBã€‚</p><h3 id="_4-4-1-å‘é€æ‰¹é‡æ¶ˆæ¯" tabindex="-1">4.4.1 å‘é€æ‰¹é‡æ¶ˆæ¯ <a class="header-anchor" href="#_4-4-1-å‘é€æ‰¹é‡æ¶ˆæ¯" aria-label="Permalink to &quot;4.4.1 å‘é€æ‰¹é‡æ¶ˆæ¯&quot;">â€‹</a></h3><p>å¦‚æœæ‚¨æ¯æ¬¡åªå‘é€ä¸è¶…è¿‡4MBçš„æ¶ˆæ¯ï¼Œåˆ™å¾ˆå®¹æ˜“ä½¿ç”¨æ‰¹å¤„ç†ï¼Œæ ·ä¾‹å¦‚ä¸‹ï¼š</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String topic </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;BatchTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(topic, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OrderID001&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world 0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(topic, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OrderID002&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world 1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(topic, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OrderID003&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world 2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(messages);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   //å¤„ç†error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>å¦‚æœæ¶ˆæ¯çš„æ€»é•¿åº¦å¯èƒ½å¤§äº4MBæ—¶ï¼Œè¿™æ—¶å€™æœ€å¥½æŠŠæ¶ˆæ¯è¿›è¡Œåˆ†å‰²</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ListSplitter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SIZE_LIMIT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; messages;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currIndex;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ListSplitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">messages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nextIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currIndex;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> totalSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (; nextIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); nextIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           Message message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nextIndex);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTopic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().length;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; properties </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Map.Entry&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; entry </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> properties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">entrySet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¢åŠ æ—¥å¿—çš„å¼€é”€20å­—èŠ‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SIZE_LIMIT) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               //å•ä¸ªæ¶ˆæ¯è¶…è¿‡äº†æœ€å¤§çš„é™åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               //å¿½ç•¥,å¦åˆ™ä¼šé˜»å¡åˆ†è£‚çš„è¿›ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (nextIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  //å‡å¦‚ä¸‹ä¸€ä¸ªå­åˆ—è¡¨æ²¡æœ‰å…ƒç´ ,åˆ™æ·»åŠ è¿™ä¸ªå­åˆ—è¡¨ç„¶åé€€å‡ºå¾ªç¯,å¦åˆ™åªæ˜¯é€€å‡ºå¾ªç¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  nextIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> totalSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SIZE_LIMIT) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               totalSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tmpSize;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; subList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(currIndex, nextIndex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       currIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nextIndex;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> subList;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æŠŠå¤§çš„æ¶ˆæ¯åˆ†è£‚æˆè‹¥å¹²ä¸ªå°çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ListSplitter splitter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ListSplitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(messages);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (splitter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;  listItem </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> splitter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(listItem);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      //å¤„ç†error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h2 id="_4-5-è¿‡æ»¤æ¶ˆæ¯" tabindex="-1">4.5 è¿‡æ»¤æ¶ˆæ¯ <a class="header-anchor" href="#_4-5-è¿‡æ»¤æ¶ˆæ¯" aria-label="Permalink to &quot;4.5 è¿‡æ»¤æ¶ˆæ¯&quot;">â€‹</a></h2><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒTAGæ˜¯ä¸€ä¸ªç®€å•è€Œæœ‰ç”¨çš„è®¾è®¡ï¼Œå…¶å¯ä»¥æ¥é€‰æ‹©æ‚¨æƒ³è¦çš„æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼š</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CID_EXAMPLE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TOPIC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TAGA || TAGB || TAGC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æ¶ˆè´¹è€…å°†æ¥æ”¶åŒ…å«TAGAæˆ–TAGBæˆ–TAGCçš„æ¶ˆæ¯ã€‚ä½†æ˜¯é™åˆ¶æ˜¯ä¸€ä¸ªæ¶ˆæ¯åªèƒ½æœ‰ä¸€ä¸ªæ ‡ç­¾ï¼Œè¿™å¯¹äºå¤æ‚çš„åœºæ™¯å¯èƒ½ä¸èµ·ä½œç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨SQLè¡¨è¾¾å¼ç­›é€‰æ¶ˆæ¯ã€‚SQLç‰¹æ€§å¯ä»¥é€šè¿‡å‘é€æ¶ˆæ¯æ—¶çš„å±æ€§æ¥è¿›è¡Œè®¡ç®—ã€‚åœ¨RocketMQå®šä¹‰çš„è¯­æ³•ä¸‹ï¼Œå¯ä»¥å®ç°ä¸€äº›ç®€å•çš„é€»è¾‘ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><div class="language-te vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">te</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>------------</span></span>
<span class="line"><span>| message  |</span></span>
<span class="line"><span>|----------|  a &gt; 5 AND b = &#39;abc&#39;</span></span>
<span class="line"><span>| a = 10   |  --------------------&gt; Gotten</span></span>
<span class="line"><span>| b = &#39;abc&#39;|</span></span>
<span class="line"><span>| c = true |</span></span>
<span class="line"><span>------------</span></span>
<span class="line"><span>------------</span></span>
<span class="line"><span>| message  |</span></span>
<span class="line"><span>|----------|   a &gt; 5 AND b = &#39;abc&#39;</span></span>
<span class="line"><span>| a = 1    |  --------------------&gt; Missed</span></span>
<span class="line"><span>| b = &#39;abc&#39;|</span></span>
<span class="line"><span>| c = true |</span></span>
<span class="line"><span>------------</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_4-5-1-sqlåŸºæœ¬è¯­æ³•" tabindex="-1">4.5.1 SQLåŸºæœ¬è¯­æ³• <a class="header-anchor" href="#_4-5-1-sqlåŸºæœ¬è¯­æ³•" aria-label="Permalink to &quot;4.5.1 SQLåŸºæœ¬è¯­æ³•&quot;">â€‹</a></h3><p>RocketMQåªå®šä¹‰äº†ä¸€äº›åŸºæœ¬è¯­æ³•æ¥æ”¯æŒè¿™ä¸ªç‰¹æ€§ã€‚ä½ ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å±•å®ƒã€‚</p><ul><li>æ•°å€¼æ¯”è¾ƒï¼Œæ¯”å¦‚ï¼š<strong>&gt;ï¼Œ&gt;=ï¼Œ&lt;ï¼Œ&lt;=ï¼ŒBETWEENï¼Œ=ï¼›</strong></li><li>å­—ç¬¦æ¯”è¾ƒï¼Œæ¯”å¦‚ï¼š<strong>=ï¼Œ&lt;&gt;ï¼ŒINï¼›</strong></li><li><strong>IS NULL</strong> æˆ–è€… <strong>IS NOT NULLï¼›</strong></li><li>é€»è¾‘ç¬¦å· <strong>ANDï¼ŒORï¼ŒNOTï¼›</strong></li></ul><p>å¸¸é‡æ”¯æŒç±»å‹ä¸ºï¼š</p><ul><li>æ•°å€¼ï¼Œæ¯”å¦‚ï¼š<strong>123ï¼Œ3.1415ï¼›</strong></li><li>å­—ç¬¦ï¼Œæ¯”å¦‚ï¼š<strong>&#39;abc&#39;ï¼Œå¿…é¡»ç”¨å•å¼•å·åŒ…è£¹èµ·æ¥ï¼›</strong></li><li><strong>NULL</strong>ï¼Œç‰¹æ®Šçš„å¸¸é‡</li><li>å¸ƒå°”å€¼ï¼Œ<strong>TRUE</strong> æˆ– <strong>FALSE</strong></li></ul><p>åªæœ‰ä½¿ç”¨pushæ¨¡å¼çš„æ¶ˆè´¹è€…æ‰èƒ½ç”¨ä½¿ç”¨SQL92æ ‡å‡†çš„sqlè¯­å¥ï¼Œæ¥å£å¦‚ä¸‹ï¼š</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(finalString topic, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MessageSelector messageSelector)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_4-5-2-æ¶ˆæ¯ç”Ÿäº§è€…" tabindex="-1">4.5.2 æ¶ˆæ¯ç”Ÿäº§è€… <a class="header-anchor" href="#_4-5-2-æ¶ˆæ¯ç”Ÿäº§è€…" aria-label="Permalink to &quot;4.5.2 æ¶ˆæ¯ç”Ÿäº§è€…&quot;">â€‹</a></h3><p>å‘é€æ¶ˆæ¯æ—¶ï¼Œä½ èƒ½é€šè¿‡<code>putUserProperty</code>æ¥è®¾ç½®æ¶ˆæ¯çš„å±æ€§</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   tag,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello RocketMQ &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RemotingHelper.DEFAULT_CHARSET)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½®ä¸€äº›å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">putUserProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">valueOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SendResult sendResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-5-3-æ¶ˆæ¯æ¶ˆè´¹è€…" tabindex="-1">4.5.3 æ¶ˆæ¯æ¶ˆè´¹è€… <a class="header-anchor" href="#_4-5-3-æ¶ˆæ¯æ¶ˆè´¹è€…" aria-label="Permalink to &quot;4.5.3 æ¶ˆæ¯æ¶ˆè´¹è€…&quot;">â€‹</a></h3><p>ç”¨MessageSelector.bySqlæ¥ä½¿ç”¨sqlç­›é€‰æ¶ˆæ¯</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name_4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åªæœ‰è®¢é˜…çš„æ¶ˆæ¯æœ‰è¿™ä¸ªå±æ€§a, a &gt;=0 and a &lt;= 3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, MessageSelector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bySql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a between 0 and 3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerMessageListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageListenerConcurrently</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consumeMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageExt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ConsumeConcurrentlyContext </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_4-6-äº‹åŠ¡æ¶ˆæ¯" tabindex="-1">4.6 äº‹åŠ¡æ¶ˆæ¯ <a class="header-anchor" href="#_4-6-äº‹åŠ¡æ¶ˆæ¯" aria-label="Permalink to &quot;4.6 äº‹åŠ¡æ¶ˆæ¯&quot;">â€‹</a></h2><p>###4.6.1 æµç¨‹åˆ†æ</p><p><img src="/assets/%E4%BA%8B%E5%8A%A1%E6%B6%88%E6%81%AF.DB3KWzi-.png" alt="" loading="lazy"></p><p>ä¸Šå›¾è¯´æ˜äº†äº‹åŠ¡æ¶ˆæ¯çš„å¤§è‡´æ–¹æ¡ˆï¼Œå…¶ä¸­åˆ†ä¸ºä¸¤ä¸ªæµç¨‹ï¼šæ­£å¸¸äº‹åŠ¡æ¶ˆæ¯çš„å‘é€åŠæäº¤ã€äº‹åŠ¡æ¶ˆæ¯çš„è¡¥å¿æµç¨‹ã€‚</p><p>####1ï¼‰äº‹åŠ¡æ¶ˆæ¯å‘é€åŠæäº¤</p><p>(1) å‘é€æ¶ˆæ¯ï¼ˆhalfæ¶ˆæ¯ï¼‰ã€‚</p><p>(2) æœåŠ¡ç«¯å“åº”æ¶ˆæ¯å†™å…¥ç»“æœã€‚</p><p>(3) æ ¹æ®å‘é€ç»“æœæ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼ˆå¦‚æœå†™å…¥å¤±è´¥ï¼Œæ­¤æ—¶halfæ¶ˆæ¯å¯¹ä¸šåŠ¡ä¸å¯è§ï¼Œæœ¬åœ°é€»è¾‘ä¸æ‰§è¡Œï¼‰ã€‚</p><p>(4) æ ¹æ®æœ¬åœ°äº‹åŠ¡çŠ¶æ€æ‰§è¡ŒCommitæˆ–è€…Rollbackï¼ˆCommitæ“ä½œç”Ÿæˆæ¶ˆæ¯ç´¢å¼•ï¼Œæ¶ˆæ¯å¯¹æ¶ˆè´¹è€…å¯è§ï¼‰</p><h4 id="_2-äº‹åŠ¡è¡¥å¿" tabindex="-1">2ï¼‰äº‹åŠ¡è¡¥å¿ <a class="header-anchor" href="#_2-äº‹åŠ¡è¡¥å¿" aria-label="Permalink to &quot;2ï¼‰äº‹åŠ¡è¡¥å¿&quot;">â€‹</a></h4><p>(1) å¯¹æ²¡æœ‰Commit/Rollbackçš„äº‹åŠ¡æ¶ˆæ¯ï¼ˆpendingçŠ¶æ€çš„æ¶ˆæ¯ï¼‰ï¼Œä»æœåŠ¡ç«¯å‘èµ·ä¸€æ¬¡â€œå›æŸ¥â€</p><p>(2) Produceræ”¶åˆ°å›æŸ¥æ¶ˆæ¯ï¼Œæ£€æŸ¥å›æŸ¥æ¶ˆæ¯å¯¹åº”çš„æœ¬åœ°äº‹åŠ¡çš„çŠ¶æ€</p><p>(3) æ ¹æ®æœ¬åœ°äº‹åŠ¡çŠ¶æ€ï¼Œé‡æ–°Commitæˆ–è€…Rollback</p><p>å…¶ä¸­ï¼Œè¡¥å¿é˜¶æ®µç”¨äºè§£å†³æ¶ˆæ¯Commitæˆ–è€…Rollbackå‘ç”Ÿè¶…æ—¶æˆ–è€…å¤±è´¥çš„æƒ…å†µã€‚</p><h4 id="_3-äº‹åŠ¡æ¶ˆæ¯çŠ¶æ€" tabindex="-1">3ï¼‰äº‹åŠ¡æ¶ˆæ¯çŠ¶æ€ <a class="header-anchor" href="#_3-äº‹åŠ¡æ¶ˆæ¯çŠ¶æ€" aria-label="Permalink to &quot;3ï¼‰äº‹åŠ¡æ¶ˆæ¯çŠ¶æ€&quot;">â€‹</a></h4><p>äº‹åŠ¡æ¶ˆæ¯å…±æœ‰ä¸‰ç§çŠ¶æ€ï¼Œæäº¤çŠ¶æ€ã€å›æ»šçŠ¶æ€ã€ä¸­é—´çŠ¶æ€ï¼š</p><ul><li>TransactionStatus.CommitTransaction: æäº¤äº‹åŠ¡ï¼Œå®ƒå…è®¸æ¶ˆè´¹è€…æ¶ˆè´¹æ­¤æ¶ˆæ¯ã€‚</li><li>TransactionStatus.RollbackTransaction: å›æ»šäº‹åŠ¡ï¼Œå®ƒä»£è¡¨è¯¥æ¶ˆæ¯å°†è¢«åˆ é™¤ï¼Œä¸å…è®¸è¢«æ¶ˆè´¹ã€‚</li><li>TransactionStatus.Unknown: ä¸­é—´çŠ¶æ€ï¼Œå®ƒä»£è¡¨éœ€è¦æ£€æŸ¥æ¶ˆæ¯é˜Ÿåˆ—æ¥ç¡®å®šçŠ¶æ€ã€‚</li></ul><p>###4.6.1 å‘é€äº‹åŠ¡æ¶ˆæ¯</p><h4 id="_1-åˆ›å»ºäº‹åŠ¡æ€§ç”Ÿäº§è€…" tabindex="-1">1) åˆ›å»ºäº‹åŠ¡æ€§ç”Ÿäº§è€… <a class="header-anchor" href="#_1-åˆ›å»ºäº‹åŠ¡æ€§ç”Ÿäº§è€…" aria-label="Permalink to &quot;1) åˆ›å»ºäº‹åŠ¡æ€§ç”Ÿäº§è€…&quot;">â€‹</a></h4><p>ä½¿ç”¨ <code>TransactionMQProducer</code>ç±»åˆ›å»ºç”Ÿäº§è€…ï¼Œå¹¶æŒ‡å®šå”¯ä¸€çš„ <code>ProducerGroup</code>ï¼Œå°±å¯ä»¥è®¾ç½®è‡ªå®šä¹‰çº¿ç¨‹æ± æ¥å¤„ç†è¿™äº›æ£€æŸ¥è¯·æ±‚ã€‚æ‰§è¡Œæœ¬åœ°äº‹åŠ¡åã€éœ€è¦æ ¹æ®æ‰§è¡Œç»“æœå¯¹æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œå›å¤ã€‚å›ä¼ çš„äº‹åŠ¡çŠ¶æ€åœ¨è¯·å‚è€ƒå‰ä¸€èŠ‚ã€‚</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Producer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MQClientException, InterruptedException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //åˆ›å»ºäº‹åŠ¡ç›‘å¬å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        TransactionListener transactionListener </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TransactionListenerImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //åˆ›å»ºæ¶ˆæ¯ç”Ÿäº§è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        TransactionMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TransactionMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group6&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;192.168.25.135:9876;192.168.25.138:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //ç”Ÿäº§è€…è¿™æ˜¯ç›‘å¬å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTransactionListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transactionListener);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å¯åŠ¨æ¶ˆæ¯ç”Ÿäº§è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] tags </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TransactionTopic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tags[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tags.length], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;KEY&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello RocketMQ &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RemotingHelper.DEFAULT_CHARSET));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                SendResult sendResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendMessageInTransaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%s%n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sendResult);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                TimeUnit.SECONDS.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (MQClientException | UnsupportedEncodingException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //producer.shutdown();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="_2-å®ç°äº‹åŠ¡çš„ç›‘å¬æ¥å£" tabindex="-1">2ï¼‰å®ç°äº‹åŠ¡çš„ç›‘å¬æ¥å£ <a class="header-anchor" href="#_2-å®ç°äº‹åŠ¡çš„ç›‘å¬æ¥å£" aria-label="Permalink to &quot;2ï¼‰å®ç°äº‹åŠ¡çš„ç›‘å¬æ¥å£&quot;">â€‹</a></h4><p>å½“å‘é€åŠæ¶ˆæ¯æˆåŠŸæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>executeLocalTransaction</code> æ–¹æ³•æ¥æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ã€‚å®ƒè¿”å›å‰ä¸€èŠ‚ä¸­æåˆ°çš„ä¸‰ä¸ªäº‹åŠ¡çŠ¶æ€ä¹‹ä¸€ã€‚<code>checkLocalTranscation</code> æ–¹æ³•ç”¨äºæ£€æŸ¥æœ¬åœ°äº‹åŠ¡çŠ¶æ€ï¼Œå¹¶å›åº”æ¶ˆæ¯é˜Ÿåˆ—çš„æ£€æŸ¥è¯·æ±‚ã€‚å®ƒä¹Ÿæ˜¯è¿”å›å‰ä¸€èŠ‚ä¸­æåˆ°çš„ä¸‰ä¸ªäº‹åŠ¡çŠ¶æ€ä¹‹ä¸€ã€‚</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TransactionListenerImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TransactionListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">executeLocalTransaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Message </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ‰§è¡Œæœ¬åœ°äº‹åŠ¡&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (StringUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState.COMMIT_MESSAGE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (StringUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState.ROLLBACK_MESSAGE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState.UNKNOW;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkLocalTransaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MessageExt </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MQæ£€æŸ¥æ¶ˆæ¯Tagã€&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ã€‘çš„æœ¬åœ°äº‹åŠ¡æ‰§è¡Œç»“æœ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState.COMMIT_MESSAGE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_4-6-2-ä½¿ç”¨é™åˆ¶" tabindex="-1">4.6.2 ä½¿ç”¨é™åˆ¶ <a class="header-anchor" href="#_4-6-2-ä½¿ç”¨é™åˆ¶" aria-label="Permalink to &quot;4.6.2 ä½¿ç”¨é™åˆ¶&quot;">â€‹</a></h3><ol><li>äº‹åŠ¡æ¶ˆæ¯ä¸æ”¯æŒå»¶æ—¶æ¶ˆæ¯å’Œæ‰¹é‡æ¶ˆæ¯ã€‚</li><li>ä¸ºäº†é¿å…å•ä¸ªæ¶ˆæ¯è¢«æ£€æŸ¥å¤ªå¤šæ¬¡è€Œå¯¼è‡´åŠé˜Ÿåˆ—æ¶ˆæ¯ç´¯ç§¯ï¼Œæˆ‘ä»¬é»˜è®¤å°†å•ä¸ªæ¶ˆæ¯çš„æ£€æŸ¥æ¬¡æ•°é™åˆ¶ä¸º 15 æ¬¡ï¼Œä½†æ˜¯ç”¨æˆ·å¯ä»¥é€šè¿‡ Broker é…ç½®æ–‡ä»¶çš„ <code>transactionCheckMax</code>å‚æ•°æ¥ä¿®æ”¹æ­¤é™åˆ¶ã€‚å¦‚æœå·²ç»æ£€æŸ¥æŸæ¡æ¶ˆæ¯è¶…è¿‡ N æ¬¡çš„è¯ï¼ˆ N = <code>transactionCheckMax</code> ï¼‰ åˆ™ Broker å°†ä¸¢å¼ƒæ­¤æ¶ˆæ¯ï¼Œå¹¶åœ¨é»˜è®¤æƒ…å†µä¸‹åŒæ—¶æ‰“å°é”™è¯¯æ—¥å¿—ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡é‡å†™ <code>AbstractTransactionCheckListener</code> ç±»æ¥ä¿®æ”¹è¿™ä¸ªè¡Œä¸ºã€‚</li><li>äº‹åŠ¡æ¶ˆæ¯å°†åœ¨ Broker é…ç½®æ–‡ä»¶ä¸­çš„å‚æ•° transactionMsgTimeout è¿™æ ·çš„ç‰¹å®šæ—¶é—´é•¿åº¦ä¹‹åè¢«æ£€æŸ¥ã€‚å½“å‘é€äº‹åŠ¡æ¶ˆæ¯æ—¶ï¼Œç”¨æˆ·è¿˜å¯ä»¥é€šè¿‡è®¾ç½®ç”¨æˆ·å±æ€§ CHECK_IMMUNITY_TIME_IN_SECONDS æ¥æ”¹å˜è¿™ä¸ªé™åˆ¶ï¼Œè¯¥å‚æ•°ä¼˜å…ˆäº <code>transactionMsgTimeout</code> å‚æ•°ã€‚</li><li>äº‹åŠ¡æ€§æ¶ˆæ¯å¯èƒ½ä¸æ­¢ä¸€æ¬¡è¢«æ£€æŸ¥æˆ–æ¶ˆè´¹ã€‚</li><li>æäº¤ç»™ç”¨æˆ·çš„ç›®æ ‡ä¸»é¢˜æ¶ˆæ¯å¯èƒ½ä¼šå¤±è´¥ï¼Œç›®å‰è¿™ä¾æ—¥å¿—çš„è®°å½•è€Œå®šã€‚å®ƒçš„é«˜å¯ç”¨æ€§é€šè¿‡ RocketMQ æœ¬èº«çš„é«˜å¯ç”¨æ€§æœºåˆ¶æ¥ä¿è¯ï¼Œå¦‚æœå¸Œæœ›ç¡®ä¿äº‹åŠ¡æ¶ˆæ¯ä¸ä¸¢å¤±ã€å¹¶ä¸”äº‹åŠ¡å®Œæ•´æ€§å¾—åˆ°ä¿è¯ï¼Œå»ºè®®ä½¿ç”¨åŒæ­¥çš„åŒé‡å†™å…¥æœºåˆ¶ã€‚</li><li>äº‹åŠ¡æ¶ˆæ¯çš„ç”Ÿäº§è€… ID ä¸èƒ½ä¸å…¶ä»–ç±»å‹æ¶ˆæ¯çš„ç”Ÿäº§è€… ID å…±äº«ã€‚ä¸å…¶ä»–ç±»å‹çš„æ¶ˆæ¯ä¸åŒï¼Œäº‹åŠ¡æ¶ˆæ¯å…è®¸åå‘æŸ¥è¯¢ã€MQæœåŠ¡å™¨èƒ½é€šè¿‡å®ƒä»¬çš„ç”Ÿäº§è€… ID æŸ¥è¯¢åˆ°æ¶ˆè´¹è€…ã€‚</li></ol></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Kele-Bingtang/vitepress-theme-teek/edit/master/docs/Java/æ¶æ„è®¾è®¡/åˆ†å¸ƒå¼/03.åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—/01.RocketMQ/RocketMQ-01.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!--]--></a></div><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>ä¸Šæ¬¡æ›´æ–°æ—¶é—´: <time datetime="2026-01-03T12:43:45.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><!----></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/01.%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>ä¸‹ä¸€é¡µ</span><span class="title" data-v-e257564d>åˆ†å¸ƒå¼ç¼“å­˜æ¦‚è¿°</span><!--]--></a></div></nav></footer><!--[--><!--[--><!--[--><!--[--><!--]--><!--[--><!--[--><!--]--><div class="tk-article-update"><div class="tk-article-update__title flx-align-center"><i class="tk-icon edit-icon" style="--icon-color-hover:var(--tk-theme-color);" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
    <path
      fill="currentColor"
      d="m199.04 672.64 193.984 112 224-387.968-193.92-112-224 388.032zm-23.872 60.16 32.896 148.288 144.896-45.696zM455.04 229.248l193.92 112 56.704-98.112-193.984-112-56.64 98.112zM104.32 708.8l384-665.024 304.768 175.936L409.152 884.8h.064l-248.448 78.336zm384 254.272v-64h448v64h-448z"
    ></path>
  </svg></i><a href="/@pages/archivesPage.html" class="hover-color" aria-label="æœ€è¿‘æ›´æ–°">æœ€è¿‘æ›´æ–°</a></div><ul><!--[--><li class="flx-center"><span class="tk-article-update--num" aria-hidden="true">01</span><div class="tk-article-update__content"><a href="/daily/é¢è¯•ä¸“æ /SpringBoot/SpringBoot.html" class="flx-1 hover-color sle" aria-label="html"><span class="tk-article-title" aria-label="æ–‡ç« æ ‡é¢˜"><!--v-if--><!--[--><!--[-->html<!--]--><!--]--><!--v-if--></span></a><span class="tk-article-update__content--date">2026-01-13 13:36:06</span></div></li><li class="flx-center"><span class="tk-article-update--num" aria-hidden="true">02</span><div class="tk-article-update__content"><a href="/Java/å¾®æœåŠ¡ä¸“æ /03.æ³¨å†Œä¸­å¿ƒ/1_æ³¨å†Œä¸­å¿ƒæ¦‚è¿°.html" class="flx-1 hover-color sle" aria-label="æ³¨å†Œä¸­å¿ƒæ¦‚è¿°"><span class="tk-article-title" aria-label="æ–‡ç« æ ‡é¢˜"><!--v-if--><!--[--><!--[-->æ³¨å†Œä¸­å¿ƒæ¦‚è¿°<!--]--><!--]--><!--v-if--></span></a><span class="tk-article-update__content--date">2026-01-12 13:08:37</span></div></li><li class="flx-center"><span class="tk-article-update--num" aria-hidden="true">03</span><div class="tk-article-update__content"><a href="/Java/å¾®æœåŠ¡ä¸“æ /02.å¾®æœåŠ¡ç½‘å…³/1_å¾®æœåŠ¡ç½‘å…³æ¦‚è¿°.html" class="flx-1 hover-color sle" aria-label="å¾®æœåŠ¡ç½‘å…³æ¦‚è¿°"><span class="tk-article-title" aria-label="æ–‡ç« æ ‡é¢˜"><!--v-if--><!--[--><!--[-->å¾®æœåŠ¡ç½‘å…³æ¦‚è¿°<!--]--><!--]--><!--v-if--></span></a><span class="tk-article-update__content--date">2026-01-11 12:30:03</span></div></li><li class="flx-center"><span class="tk-article-update--num" aria-hidden="true"></span><div class="tk-article-update__content"><a href="/@pages/archivesPage.html" class="flx-1 hover-color sle" aria-label="æ›´å¤šæ–‡ç«  &gt;"><span class="tk-article-title" aria-label="æ–‡ç« æ ‡é¢˜"><!--v-if--><!--[--><!--[-->æ›´å¤šæ–‡ç«  &gt;<!--]--><!--]--><!--v-if--></span></a><!--v-if--></div></li><!--]--></ul></div><!--[--><!--]--><!--]--><!--v-if--><!-- è¯„è®ºåŒº --><!--v-if--><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-9a104c51 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright Â© 2019-2026 present Xu XiaoLong</p></div></footer><!--[--><!--]--></div><!--]--></div>
    
    
  </body>
</html>