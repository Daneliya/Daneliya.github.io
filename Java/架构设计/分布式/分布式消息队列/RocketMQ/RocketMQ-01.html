<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RocketMQ-学习笔记01 | XXL的小屋</title>
    <meta name="description" content="我的文档教程">
    <meta name="generator" content="VitePress v2.0.0-alpha.12">
    <link rel="preload stylesheet" href="/assets/style.DQs3JE5Y.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.upx9ckRp.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BA47u7cU.js">
    <link rel="modulepreload" href="/assets/chunks/framework.D5cOWG0Y.js">
    <link rel="modulepreload" href="/assets/Java_架构设计_分布式_分布式消息队列_RocketMQ_RocketMQ-01.md.elFaFyE0.lean.js">
    <link rel="icon" href="/logo.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1df9f90f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-1df9f90f data-v-9f75dce3><div class="VPNavBar" data-v-9f75dce3 data-v-2a96a3d0><div class="wrapper" data-v-2a96a3d0><div class="container" data-v-2a96a3d0><div class="title" data-v-2a96a3d0><div class="VPNavBarTitle has-sidebar" data-v-2a96a3d0 data-v-1e38c6bc><a class="title" href="/" data-v-1e38c6bc><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-8426fc1a><!--]--><span data-v-1e38c6bc>xiaolong</span><!--[--><!--]--></a></div></div><div class="content" data-v-2a96a3d0><div class="content-body" data-v-2a96a3d0><!--[--><!--]--><div class="VPNavBarSearch search" data-v-2a96a3d0><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-2a96a3d0 data-v-39714824><span id="main-nav-aria-label" class="visually-hidden" data-v-39714824> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>🏠主页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-39714824 data-v-42cb505d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-42cb505d><span class="text" data-v-42cb505d><!----><span data-v-42cb505d>🍎Java</span><span class="vpi-chevron-down text-icon" data-v-42cb505d></span></span></button><div class="menu" data-v-42cb505d><div class="VPMenu" data-v-42cb505d data-v-25a6cce8><div class="items" data-v-25a6cce8><!--[--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/Java%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7/%E9%AB%98%E6%95%88%E7%BC%96%E7%A8%8B/1_%E8%B5%84%E6%BA%90%E5%85%B3%E9%97%AD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88.html" data-v-cd834e02><!--[--><span data-v-cd834e02>Java开发技巧</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/JVM%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/JVM%E6%A6%82%E5%BF%B5/0_JVM%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.html" data-v-cd834e02><!--[--><span data-v-cd834e02>JVM性能调优</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/JUC.html" data-v-cd834e02><!--[--><span data-v-cd834e02>并发编程</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/%E5%AE%B9%E5%99%A8/Docker/0_Docker%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8.html" data-v-cd834e02><!--[--><span data-v-cd834e02>容器相关</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" data-v-cd834e02><!--[--><span data-v-cd834e02>设计模式</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%93%E6%A0%8F/SpringCloud/1_SpringCloud%E7%AE%80%E4%BB%8B.html" data-v-cd834e02><!--[--><span data-v-cd834e02>微服务专栏</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1Seata.html" data-v-cd834e02><!--[--><span data-v-cd834e02>架构设计</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%94%AF%E4%BB%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98API%E5%AF%B9%E6%8E%A5%E6%8C%87%E5%8D%97/1_%E5%95%86%E5%AE%B6%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96.html" data-v-cd834e02><!--[--><span data-v-cd834e02>解决方案</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html" data-v-cd834e02><!--[--><span data-v-cd834e02>数据结构</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/1_%E5%B9%82%E7%AD%89%E8%AE%BE%E8%AE%A1.html" data-v-cd834e02><!--[--><span data-v-cd834e02>系统优化</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-39714824 data-v-42cb505d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-42cb505d><span class="text" data-v-42cb505d><!----><span data-v-42cb505d>🥭Python</span><span class="vpi-chevron-down text-icon" data-v-42cb505d></span></span></button><div class="menu" data-v-42cb505d><div class="VPMenu" data-v-42cb505d data-v-25a6cce8><div class="items" data-v-25a6cce8><!--[--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Python/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html" data-v-cd834e02><!--[--><span data-v-cd834e02>基础语法</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Python/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/1_Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90.html" data-v-cd834e02><!--[--><span data-v-cd834e02>数据分析</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Python/%E7%88%AC%E8%99%AB/1_%E7%88%AC%E8%99%AB%E7%9A%84%E6%B5%81%E7%A8%8B.html" data-v-cd834e02><!--[--><span data-v-cd834e02>爬虫</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Python/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1_AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%A7%91%E6%99%AE.html" data-v-cd834e02><!--[--><span data-v-cd834e02>AI大模型应用开发</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/0_MongoDB%E7%AE%80%E4%BB%8B.html" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>🍍数据库</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Redis/Redis%E5%9F%BA%E7%A1%80/1_Redis%E7%BC%93%E5%AD%98%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98.html" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>🍌Redis专栏</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-39714824 data-v-42cb505d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-42cb505d><span class="text" data-v-42cb505d><!----><span data-v-42cb505d>🍑常用框架</span><span class="vpi-chevron-down text-icon" data-v-42cb505d></span></span></button><div class="menu" data-v-42cb505d><div class="VPMenu" data-v-42cb505d data-v-25a6cce8><div class="items" data-v-25a6cce8><!--[--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Activiti7/Activiti%E6%95%B4%E5%90%88Spring.html" data-v-cd834e02><!--[--><span data-v-cd834e02>工作流引擎Activiti7</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Caffeine/0_Caffeine%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html" data-v-cd834e02><!--[--><span data-v-cd834e02>缓存框架Caffeine</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/EasyCaptcha/0_%E4%BD%BF%E7%94%A8EasyCaptcha%E7%94%9F%E6%88%90%E9%AA%8C%E8%AF%81%E7%A0%81.html" data-v-cd834e02><!--[--><span data-v-cd834e02>验证码EasyCaptcha</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/EasyExcel/0_EasyExcel%E6%A6%82%E8%BF%B0.html" data-v-cd834e02><!--[--><span data-v-cd834e02>表格工具EasyExcel</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8EElasticsearch01.html" data-v-cd834e02><!--[--><span data-v-cd834e02>搜索引擎ElasticSearch</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Mybatis/Mybatis-Plus-Join%E8%BF%9E%E8%A1%A8%E6%9F%A5%E8%AF%A2.html" data-v-cd834e02><!--[--><span data-v-cd834e02>三剑客Mybatis</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/ShardingJdbc/0_ShardingJdbc%E7%9A%84%E6%A6%82%E8%BF%B0.html" data-v-cd834e02><!--[--><span data-v-cd834e02>分库分表ShardingJdbc</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Spring/1_Spring%E5%AE%B9%E5%99%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.html" data-v-cd834e02><!--[--><span data-v-cd834e02>三剑客Spring</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/SpringBoot/SpringBoot%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/0_SpringBoot%E7%BC%96%E7%A8%8B%E8%B5%B7%E6%AD%A5.html" data-v-cd834e02><!--[--><span data-v-cd834e02>三剑客SpringBoot</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/SpringAI/SpringAI.html" data-v-cd834e02><!--[--><span data-v-cd834e02>AI框架Spring AI</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/SpringBootAdmin.html" data-v-cd834e02><!--[--><span data-v-cd834e02>监控工具SpringBootAdmin</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/XXL-JOB/0_%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E6%A1%86%E6%9E%B6%E6%A6%82%E8%BF%B0.html" data-v-cd834e02><!--[--><span data-v-cd834e02>任务调度XXL-JOB</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/Thymeleaf/1_%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.html" data-v-cd834e02><!--[--><span data-v-cd834e02>模板引擎Thymeleaf</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-25a6cce8 data-v-cd834e02><a class="VPLink link" href="/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/%E9%87%8D%E8%AF%95%E6%A1%86%E6%9E%B6/1_Spring-Retry.html" data-v-cd834e02><!--[--><span data-v-cd834e02>重试框架Retry</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Linux/Shell%E5%91%BD%E4%BB%A4/0_Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>💻Linux</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/StableDiffusion/StableDiffusion/0_StableDiffusion%E4%BB%8B%E7%BB%8D.html" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>🖼Stable Diffusion</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-39714824 data-v-42cb505d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-42cb505d><span class="text" data-v-42cb505d><!----><span data-v-42cb505d>🍓随笔文档</span><span class="vpi-chevron-down text-icon" data-v-42cb505d></span></span></button><div class="menu" data-v-42cb505d><div class="VPMenu" data-v-42cb505d data-v-25a6cce8><div class="items" data-v-25a6cce8><!--[--><!--[--><div class="VPMenuGroup" data-v-25a6cce8 data-v-1963e1bb><p class="title" data-v-1963e1bb>博客笔记</p><!--[--><!--[--><div class="VPMenuLink" data-v-1963e1bb data-v-cd834e02><a class="VPLink link" href="/daily/%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3/VitPress/0_Vitpress%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA.html" data-v-cd834e02><!--[--><span data-v-cd834e02>🚀VuePress</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1963e1bb data-v-cd834e02><a class="VPLink link" href="/daily/%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3/VitPress/0_Vitpress%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA.html" data-v-cd834e02><!--[--><span data-v-cd834e02>🚀VitPress</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1963e1bb data-v-cd834e02><a class="VPLink link" href="/daily/%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3/Github_Pages%E5%8A%A0%E9%80%9F.html" data-v-cd834e02><!--[--><span data-v-cd834e02>🚀其他</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-25a6cce8 data-v-1963e1bb><p class="title" data-v-1963e1bb>日常笔记</p><!--[--><!--[--><div class="VPMenuLink" data-v-1963e1bb data-v-cd834e02><a class="VPLink link" href="/daily/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0/IDEA+Linux%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91.html" data-v-cd834e02><!--[--><span data-v-cd834e02>🚀日常笔记</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1963e1bb data-v-cd834e02><a class="VPLink link" href="/daily/%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3/PDF%E8%BD%AC%E6%8D%A2.html" data-v-cd834e02><!--[--><span data-v-cd834e02>🚀开发文档</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1963e1bb data-v-cd834e02><a class="VPLink link" href="/daily/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/0_%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE.html" data-v-cd834e02><!--[--><span data-v-cd834e02>🚀开源项目</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1963e1bb data-v-cd834e02><a class="VPLink link" href="/daily/%E8%BD%AF%E8%80%83%E4%B8%AD%E7%BA%A7%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/01_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.html" data-v-cd834e02><!--[--><span data-v-cd834e02>🚀软考中级</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1963e1bb data-v-cd834e02><a class="VPLink link" href="/daily/%E9%9D%A2%E8%AF%95%E4%B8%93%E6%A0%8F/%E9%9D%A2%E8%AF%95%E4%B8%93%E6%A0%8F.html" data-v-cd834e02><!--[--><span data-v-cd834e02>🚀面试专栏</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1963e1bb data-v-cd834e02><a class="VPLink link" href="/daily/%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6/1_%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86.html" data-v-cd834e02><!--[--><span data-v-cd834e02>🚀高等数学</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-2a96a3d0 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-2a96a3d0 data-v-0394ad82 data-v-d07f11e6><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="me noopener" data-v-d07f11e6 data-v-591a6b30><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-2a96a3d0 data-v-bb2aa2f0 data-v-42cb505d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-42cb505d><span class="vpi-more-horizontal icon" data-v-42cb505d></span></button><div class="menu" data-v-42cb505d><div class="VPMenu" data-v-42cb505d data-v-25a6cce8><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-d07f11e6><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="me noopener" data-v-d07f11e6 data-v-591a6b30><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-2a96a3d0 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-2a96a3d0><div class="divider-line" data-v-2a96a3d0></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-1df9f90f data-v-8acdfeb5><div class="container" data-v-8acdfeb5><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-8acdfeb5><span class="vpi-align-left menu-icon" data-v-8acdfeb5></span><span class="menu-text" data-v-8acdfeb5>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-8acdfeb5 data-v-0bf0e06f><button data-v-0bf0e06f>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-1df9f90f data-v-e7c6e512><div class="curtain" data-v-e7c6e512></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-e7c6e512><span class="visually-hidden" id="sidebar-aria-label" data-v-e7c6e512> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>分布式</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>分布式缓存</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><section class="VPSidebarItem level-2 collapsible collapsed" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h4 class="text" data-v-d81de50c>1概念</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/1%E6%A6%82%E5%BF%B5/%E7%BC%93%E5%AD%98.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>缓存概述</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h4 class="text" data-v-d81de50c>cache</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/cache/0_redis.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Redis概述及使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/cache/1_RedisStack%E4%BB%8B%E7%BB%8D.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Redis Stack介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/cache/2_RedisInsight%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RedisInsight部署使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/cache/3_%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>布隆过滤器</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>分布式监控</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/0_%E7%9B%91%E6%8E%A7.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>监控</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/CAT.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>CAT</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/Pinpoint.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Pinpoint性能监控</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/Prometheus.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Prometheus监控</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/SkyWalking.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>SkyWalking链路追踪</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%91%E6%8E%A7/SpringBootAdmin.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>SpringBootAdmin系统监控</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>分布式任务调度</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>分布式任务调度</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>分布式日志收集</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/0_ElasticStack%E6%A6%82%E8%BF%B0.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ElasticStack概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/1_Elasticsearch%E5%AE%89%E8%A3%85.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ELK篇之安装ElasticSearch和Kibana</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/2_Logstash%E4%BD%BF%E7%94%A8.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ELK篇之Logstash使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/3_SpringBoot%E9%9B%86%E6%88%90ELK.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>ELK篇之SpringBoot集成ELK</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/4_EFK%E7%AF%87%E4%B9%8BFilebeat%E4%BD%BF%E7%94%A8.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>EFK篇之Filebeat使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/5_SpringBoot%E9%9B%86%E6%88%90Graylog.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>SpringBoot集成Graylog</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>分布式事务</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/0_%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%A6%82%E5%BF%B5.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>分布式事务概念</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%A1%86%E6%9E%B6TX-LCN.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>分布式事务框架TX-LCN</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1Seata.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>分布式事务Seata</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>分布式搜索</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8EElasticsearch01.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Elasticsearch-学习笔记01</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8EElasticsearch02.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Elasticsearch-学习笔记02</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8EElasticsearch03.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Elasticsearch-学习笔记03</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2/ElasticSearch%E8%BF%9B%E9%98%B6%E5%8A%9F%E8%83%BD.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>Elasticsearch进阶功能</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>分布式消息队列</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><section class="VPSidebarItem level-2 collapsible collapsed" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h4 class="text" data-v-d81de50c>1概念</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/1%E6%A6%82%E5%BF%B5/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>消息队列介绍</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h4 class="text" data-v-d81de50c>RabbitMQ</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RabbitMQ/1_RabbitMQ%E5%AE%89%E8%A3%85.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RabbitMQ安装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RabbitMQ/2_RabbitMQ.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RabbitMQ消息队列</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RabbitMQ/3_RabbitMQ%E9%AB%98%E7%BA%A7.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RabbitMQ高级</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RabbitMQ/4_RabbitMQ%E5%BB%B6%E6%97%B6%E9%98%9F%E5%88%97.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RabbitMQ延时队列</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RabbitMQ/5_RabbitMQ%E6%97%A5%E5%BF%97%E8%BF%BD%E8%B8%AA.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RabbitMQ日志追踪</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h4 class="text" data-v-d81de50c>RocketMQ</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RocketMQ/RocketMQ-01.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RocketMQ-学习笔记01</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RocketMQ/RocketMQ-02.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RocketMQ-学习笔记02</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RocketMQ/RocketMQ-03.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>RocketMQ-学习笔记03</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>高并发</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>负载均衡</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%B9%B6%E5%8F%91/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/README.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>缓存</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%B9%B6%E5%8F%91/%E7%BC%93%E5%AD%98/README.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>数据库</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%B9%B6%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/README.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-8d50c081><section class="VPSidebarItem level-0 collapsible" data-v-8d50c081 data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h2 class="text" data-v-d81de50c>高可用</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>0_概述</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%8F%AF%E7%94%A8/0_%E6%A6%82%E8%BF%B0/0_%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%BF%B0.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>高可用架构设计概述</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>降级熔断</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%8F%AF%E7%94%A8/%E9%99%8D%E7%BA%A7%E7%86%94%E6%96%AD/README.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-d81de50c data-v-d81de50c><div class="item" role="button" tabindex="0" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><h3 class="text" data-v-d81de50c>限流</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d81de50c><span class="vpi-chevron-right caret-icon" data-v-d81de50c></span></div></div><div class="items" data-v-d81de50c><!--[--><div class="VPSidebarItem level-2 is-link" data-v-d81de50c data-v-d81de50c><div class="item" data-v-d81de50c><div class="indicator" data-v-d81de50c></div><a class="VPLink link link" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E9%AB%98%E5%8F%AF%E7%94%A8/%E9%99%90%E6%B5%81/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96%E4%B9%8B%E9%99%90%E6%B5%81.html" data-v-d81de50c><!--[--><p class="text" data-v-d81de50c>系统优化之限流</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-1df9f90f data-v-aff0b8d7><div class="VPDoc has-sidebar has-aside" data-v-aff0b8d7 data-v-7011f0d8><!--[--><!--]--><div class="container" data-v-7011f0d8><div class="aside" data-v-7011f0d8><div class="aside-curtain" data-v-7011f0d8></div><div class="aside-container" data-v-7011f0d8><div class="aside-content" data-v-7011f0d8><div class="VPDocAside" data-v-7011f0d8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-60d5052e><div class="content" data-v-60d5052e><div class="outline-marker" data-v-60d5052e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-60d5052e>当前页大纲</div><ul class="VPDocOutlineItem root" data-v-60d5052e data-v-2d0bdf9b><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7011f0d8><div class="content-container" data-v-7011f0d8><!--[--><!--]--><main class="main" data-v-7011f0d8><div style="position:relative;" class="vp-doc _Java_%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1_%E5%88%86%E5%B8%83%E5%BC%8F_%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97_RocketMQ_RocketMQ-01" data-v-7011f0d8><div><h1 id="_1-mq介绍" tabindex="-1">1. MQ介绍 <a class="header-anchor" href="#_1-mq介绍" aria-label="Permalink to “1. MQ介绍”">​</a></h1><p>##1.1 为什么要用MQ</p><p>消息队列是一种“先进先出”的数据结构</p><p><img src="/assets/queue1.1Ub1lY05.png" alt="" loading="lazy"></p><p>其应用场景主要包含以下3个方面</p><ul><li>应用解耦</li></ul><p>系统的耦合性越高，容错性就越低。以电商应用为例，用户创建订单后，如果耦合调用库存系统、物流系统、支付系统，任何一个子系统出了故障或者因为升级等原因暂时不可用，都会造成下单操作异常，影响用户使用体验。</p><p><img src="/assets/%E8%A7%A3%E8%80%A61.Ccby4sqe.png" alt="" loading="lazy"></p><p>使用消息队列解耦合，系统的耦合性就会提高了。比如物流系统发生故障，需要几分钟才能来修复，在这段时间内，物流系统要处理的数据被缓存到消息队列中，用户的下单操作正常完成。当物流系统回复后，补充处理存在消息队列中的订单消息即可，终端系统感知不到物流系统发生过几分钟故障。</p><p><img src="/assets/%E8%A7%A3%E8%80%A62.pGIvVlOc.png" alt="" loading="lazy"></p><ul><li>流量削峰</li></ul><p><img src="/assets/mq-5.BQn5IWEH.png" alt="" loading="lazy"></p><p>应用系统如果遇到系统请求流量的瞬间猛增，有可能会将系统压垮。有了消息队列可以将大量请求缓存起来，分散到很长一段时间处理，这样可以大大提到系统的稳定性和用户体验。</p><p><img src="/assets/mq-6.Ba0rTTM6.png" alt="" loading="lazy"></p><p>一般情况，为了保证系统的稳定性，如果系统负载超过阈值，就会阻止用户请求，这会影响用户体验，而如果使用消息队列将请求缓存起来，等待系统处理完毕后通知用户下单完毕，这样总不能下单体验要好。</p><p><u>处于经济考量目的：</u></p><p>业务系统正常时段的QPS如果是1000，流量最高峰是10000，为了应对流量高峰配置高性能的服务器显然不划算，这时可以使用消息队列对峰值流量削峰</p><ul><li>数据分发</li></ul><p><img src="/assets/mq-1.me0O6Ssl.png" alt="" loading="lazy"></p><p>通过消息队列可以让数据在多个系统更加之间进行流通。数据的产生方不需要关心谁来使用数据，只需要将数据发送到消息队列，数据使用方直接在消息队列中直接获取数据即可</p><p><img src="/assets/mq-2.BxDA-zWv.png" alt="" loading="lazy"></p><h2 id="_1-2-mq的优点和缺点" tabindex="-1">1.2 MQ的优点和缺点 <a class="header-anchor" href="#_1-2-mq的优点和缺点" aria-label="Permalink to “1.2 MQ的优点和缺点”">​</a></h2><p>优点：解耦、削峰、数据分发</p><p>缺点包含以下几点：</p><ul><li><p>系统可用性降低</p><p>系统引入的外部依赖越多，系统稳定性越差。一旦MQ宕机，就会对业务造成影响。</p><p>如何保证MQ的高可用？</p></li><li><p>系统复杂度提高</p><p>MQ的加入大大增加了系统的复杂度，以前系统间是同步的远程调用，现在是通过MQ进行异步调用。</p><p>如何保证消息没有被重复消费？怎么处理消息丢失情况？那么保证消息传递的顺序性？</p></li><li><p>一致性问题</p><p>A系统处理完业务，通过MQ给B、C、D三个系统发消息数据，如果B系统、C系统处理成功，D系统处理失败。</p><p>如何保证消息数据处理的一致性？</p></li></ul><h2 id="_1-3-各种mq产品的比较" tabindex="-1">1.3 各种MQ产品的比较 <a class="header-anchor" href="#_1-3-各种mq产品的比较" aria-label="Permalink to “1.3 各种MQ产品的比较”">​</a></h2><p>常见的MQ产品包括Kafka、ActiveMQ、RabbitMQ、RocketMQ。</p><p><img src="/assets/MQ%E6%AF%94%E8%BE%83.BghTv-Mb.png" alt="" loading="lazy"></p><h1 id="_2-rocketmq快速入门" tabindex="-1">2. RocketMQ快速入门 <a class="header-anchor" href="#_2-rocketmq快速入门" aria-label="Permalink to “2. RocketMQ快速入门”">​</a></h1><p>RocketMQ是阿里巴巴2016年MQ中间件，使用Java语言开发，在阿里内部，RocketMQ承接了例如“双11”等高并发场景的消息流转，能够处理万亿级别的消息。</p><h2 id="_2-1-准备工作" tabindex="-1">2.1 准备工作 <a class="header-anchor" href="#_2-1-准备工作" aria-label="Permalink to “2.1 准备工作”">​</a></h2><h3 id="_2-1-1-下载rocketmq" tabindex="-1">2.1.1 下载RocketMQ <a class="header-anchor" href="#_2-1-1-下载rocketmq" aria-label="Permalink to “2.1.1 下载RocketMQ”">​</a></h3><p>RocketMQ最新版本：4.5.1</p><p><a href="https://www.apache.org/dyn/closer.cgi?path=rocketmq/4.5.1/rocketmq-all-4.5.1-bin-release.zip" target="_blank" rel="noreferrer">下载地址</a></p><h3 id="_2-2-2-环境要求" tabindex="-1">2.2.2 环境要求 <a class="header-anchor" href="#_2-2-2-环境要求" aria-label="Permalink to “2.2.2 环境要求”">​</a></h3><ul><li><p>Linux64位系统</p></li><li><p>JDK1.8(64位)</p></li><li><p>源码安装需要安装Maven 3.2.x</p></li></ul><h2 id="_2-2-安装rocketmq" tabindex="-1">2.2 安装RocketMQ <a class="header-anchor" href="#_2-2-安装rocketmq" aria-label="Permalink to “2.2 安装RocketMQ”">​</a></h2><h3 id="_2-2-1-安装步骤" tabindex="-1">2.2.1 安装步骤 <a class="header-anchor" href="#_2-2-1-安装步骤" aria-label="Permalink to “2.2.1 安装步骤”">​</a></h3><p>本教程以二进制包方式安装</p><ol><li>解压安装包</li><li>进入安装目录</li></ol><h3 id="_2-2-2-目录介绍" tabindex="-1">2.2.2 目录介绍 <a class="header-anchor" href="#_2-2-2-目录介绍" aria-label="Permalink to “2.2.2 目录介绍”">​</a></h3><ul><li>bin：启动脚本，包括shell脚本和CMD脚本</li><li>conf：实例配置文件 ，包括broker配置文件、logback配置文件等</li><li>lib：依赖jar包，包括Netty、commons-lang、FastJSON等</li></ul><h2 id="_2-3-启动rocketmq" tabindex="-1">2.3 启动RocketMQ <a class="header-anchor" href="#_2-3-启动rocketmq" aria-label="Permalink to “2.3 启动RocketMQ”">​</a></h2><ol><li>启动NameServer</li></ol><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.启动NameServer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/mqnamesrv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.查看启动日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/logs/rocketmqlogs/namesrv.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>启动Broker</li></ol><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.启动Broker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/mqbroker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:9876</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.查看启动日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/logs/rocketmqlogs/broker.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p>问题描述：</p><p>RocketMQ默认的虚拟机内存较大，启动Broker如果因为内存不足失败，需要编辑如下两个配置文件，修改JVM内存大小</p></li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编辑runbroker.sh和runserver.sh修改默认JVM大小</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runbroker.sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runserver.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>参考设置：</li></ul><p><code>JAVA_OPT=&quot;${JAVA_OPT} -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</code></p><h2 id="_2-4-测试rocketmq" tabindex="-1">2.4 测试RocketMQ <a class="header-anchor" href="#_2-4-测试rocketmq" aria-label="Permalink to “2.4 测试RocketMQ”">​</a></h2><h3 id="_2-4-1-发送消息" tabindex="-1">2.4.1 发送消息 <a class="header-anchor" href="#_2-4-1-发送消息" aria-label="Permalink to “2.4.1 发送消息”">​</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.设置环境变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NAMESRV_ADDR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">localhost:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.使用安装包的Demo发送消息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tools.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.apache.rocketmq.example.quickstart.Producer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-4-2-接收消息" tabindex="-1">2.4.2 接收消息 <a class="header-anchor" href="#_2-4-2-接收消息" aria-label="Permalink to “2.4.2 接收消息”">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.设置环境变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NAMESRV_ADDR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">localhost:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.接收消息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tools.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.apache.rocketmq.example.quickstart.Consumer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2-5-关闭rocketmq" tabindex="-1">2.5 关闭RocketMQ <a class="header-anchor" href="#_2-5-关闭rocketmq" aria-label="Permalink to “2.5 关闭RocketMQ”">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.关闭NameServer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/mqshutdown</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> namesrv</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.关闭Broker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/mqshutdown</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> broker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="_3-rocketmq集群搭建" tabindex="-1">3. RocketMQ集群搭建 <a class="header-anchor" href="#_3-rocketmq集群搭建" aria-label="Permalink to “3. RocketMQ集群搭建”">​</a></h1><h2 id="_3-1-各角色介绍" tabindex="-1">3.1 各角色介绍 <a class="header-anchor" href="#_3-1-各角色介绍" aria-label="Permalink to “3.1 各角色介绍”">​</a></h2><ul><li>Producer：消息的发送者；举例：发信者</li><li>Consumer：消息接收者；举例：收信者</li><li>Broker：暂存和传输消息；举例：邮局</li><li>NameServer：管理Broker；举例：各个邮局的管理机构</li><li>Topic：区分消息的种类；一个发送者可以发送消息给一个或者多个Topic；一个消息的接收者可以订阅一个或者多个Topic消息</li><li>Message Queue：相当于是Topic的分区；用于并行发送和接收消息</li></ul><p><img src="/assets/RocketMQ%E8%A7%92%E8%89%B2.C0wOeWNj.jpg" alt="" loading="lazy"></p><h2 id="_3-2-集群搭建方式" tabindex="-1">3.2 集群搭建方式 <a class="header-anchor" href="#_3-2-集群搭建方式" aria-label="Permalink to “3.2 集群搭建方式”">​</a></h2><h3 id="_3-2-1-集群特点" tabindex="-1">3.2.1 集群特点 <a class="header-anchor" href="#_3-2-1-集群特点" aria-label="Permalink to “3.2.1 集群特点”">​</a></h3><ul><li><p>NameServer是一个几乎无状态节点，可集群部署，节点之间无任何信息同步。</p></li><li><p>Broker部署相对复杂，Broker分为Master与Slave，一个Master可以对应多个Slave，但是一个Slave只能对应一个Master，Master与Slave的对应关系通过指定相同的BrokerName，不同的BrokerId来定义，BrokerId为0表示Master，非0表示Slave。Master也可以部署多个。每个Broker与NameServer集群中的所有节点建立长连接，定时注册Topic信息到所有NameServer。</p></li><li><p>Producer与NameServer集群中的其中一个节点（随机选择）建立长连接，定期从NameServer取Topic路由信息，并向提供Topic服务的Master建立长连接，且定时向Master发送心跳。Producer完全无状态，可集群部署。</p></li><li><p>Consumer与NameServer集群中的其中一个节点（随机选择）建立长连接，定期从NameServer取Topic路由信息，并向提供Topic服务的Master、Slave建立长连接，且定时向Master、Slave发送心跳。Consumer既可以从Master订阅消息，也可以从Slave订阅消息，订阅规则由Broker配置决定。</p></li></ul><h3 id="_3-2-3-集群模式" tabindex="-1">3.2.3 集群模式 <a class="header-anchor" href="#_3-2-3-集群模式" aria-label="Permalink to “3.2.3 集群模式”">​</a></h3><h4 id="_1-单master模式" tabindex="-1">1）单Master模式 <a class="header-anchor" href="#_1-单master模式" aria-label="Permalink to “1）单Master模式”">​</a></h4><p>这种方式风险较大，一旦Broker重启或者宕机时，会导致整个服务不可用。不建议线上环境使用,可以用于本地测试。</p><h4 id="_2-多master模式" tabindex="-1">2）多Master模式 <a class="header-anchor" href="#_2-多master模式" aria-label="Permalink to “2）多Master模式”">​</a></h4><p>一个集群无Slave，全是Master，例如2个Master或者3个Master，这种模式的优缺点如下：</p><ul><li>优点：配置简单，单个Master宕机或重启维护对应用无影响，在磁盘配置为RAID10时，即使机器宕机不可恢复情况下，由于RAID10磁盘非常可靠，消息也不会丢（异步刷盘丢失少量消息，同步刷盘一条不丢），性能最高；</li><li>缺点：单台机器宕机期间，这台机器上未被消费的消息在机器恢复之前不可订阅，消息实时性会受到影响。</li></ul><h4 id="_3-多master多slave模式-异步" tabindex="-1">3）多Master多Slave模式（异步） <a class="header-anchor" href="#_3-多master多slave模式-异步" aria-label="Permalink to “3）多Master多Slave模式（异步）”">​</a></h4><p>每个Master配置一个Slave，有多对Master-Slave，HA采用异步复制方式，主备有短暂消息延迟（毫秒级），这种模式的优缺点如下：</p><ul><li>优点：即使磁盘损坏，消息丢失的非常少，且消息实时性不会受影响，同时Master宕机后，消费者仍然可以从Slave消费，而且此过程对应用透明，不需要人工干预，性能同多Master模式几乎一样；</li><li>缺点：Master宕机，磁盘损坏情况下会丢失少量消息。</li></ul><h4 id="_4-多master多slave模式-同步" tabindex="-1">4）多Master多Slave模式（同步） <a class="header-anchor" href="#_4-多master多slave模式-同步" aria-label="Permalink to “4）多Master多Slave模式（同步）”">​</a></h4><p>每个Master配置一个Slave，有多对Master-Slave，HA采用同步双写方式，即只有主备都写成功，才向应用返回成功，这种模式的优缺点如下：</p><ul><li>优点：数据与服务都无单点故障，Master宕机情况下，消息无延迟，服务可用性与数据可用性都非常高；</li><li>缺点：性能比异步复制模式略低（大约低10%左右），发送单个消息的RT会略高，且目前版本在主节点宕机后，备机不能自动切换为主机。</li></ul><h2 id="_3-3-双主双从集群搭建" tabindex="-1">3.3 双主双从集群搭建 <a class="header-anchor" href="#_3-3-双主双从集群搭建" aria-label="Permalink to “3.3 双主双从集群搭建”">​</a></h2><h3 id="_3-3-1-总体架构" tabindex="-1">3.3.1 总体架构 <a class="header-anchor" href="#_3-3-1-总体架构" aria-label="Permalink to “3.3.1 总体架构”">​</a></h3><p>消息高可用采用2m-2s（同步双写）方式</p><p><img src="/assets/RocketMQ%E9%9B%86%E7%BE%A4.CSNheTr-.png" alt="" loading="lazy"></p><h3 id="_3-3-2-集群工作流程" tabindex="-1">3.3.2 集群工作流程 <a class="header-anchor" href="#_3-3-2-集群工作流程" aria-label="Permalink to “3.3.2 集群工作流程”">​</a></h3><ol><li>启动NameServer，NameServer起来后监听端口，等待Broker、Producer、Consumer连上来，相当于一个路由控制中心。</li><li>Broker启动，跟所有的NameServer保持长连接，定时发送心跳包。心跳包中包含当前Broker信息(IP+端口等)以及存储所有Topic信息。注册成功后，NameServer集群中就有Topic跟Broker的映射关系。</li><li>收发消息前，先创建Topic，创建Topic时需要指定该Topic要存储在哪些Broker上，也可以在发送消息时自动创建Topic。</li><li>Producer发送消息，启动时先跟NameServer集群中的其中一台建立长连接，并从NameServer中获取当前发送的Topic存在哪些Broker上，轮询从队列列表中选择一个队列，然后与队列所在的Broker建立长连接从而向Broker发消息。</li><li>Consumer跟Producer类似，跟其中一台NameServer建立长连接，获取当前订阅Topic存在哪些Broker上，然后直接跟Broker建立连接通道，开始消费消息。</li></ol><h3 id="_3-3-3-服务器环境" tabindex="-1">3.3.3 服务器环境 <a class="header-anchor" href="#_3-3-3-服务器环境" aria-label="Permalink to “3.3.3 服务器环境”">​</a></h3><table tabindex="0"><thead><tr><th><strong>序号</strong></th><th><strong>IP</strong></th><th><strong>角色</strong></th><th><strong>架构模式</strong></th></tr></thead><tbody><tr><td>1</td><td>192.168.25.135</td><td>nameserver、brokerserver</td><td>Master1、Slave2</td></tr><tr><td>2</td><td>192.168.25.138</td><td>nameserver、brokerserver</td><td>Master2、Slave1</td></tr></tbody></table><h3 id="_3-3-4-host添加信息" tabindex="-1">3.3.4 Host添加信息 <a class="header-anchor" href="#_3-3-4-host添加信息" aria-label="Permalink to “3.3.4 Host添加信息”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/hosts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>配置如下:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># nameserver</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.36</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-nameserver1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.37</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-nameserver2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># broker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.201</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-master1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.201</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-slave2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.37</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-master2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.3.37</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-slave1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>配置完成后, 重启网卡</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_3-3-5-防火墙配置" tabindex="-1">3.3.5 防火墙配置 <a class="header-anchor" href="#_3-3-5-防火墙配置" aria-label="Permalink to “3.3.5 防火墙配置”">​</a></h3><p>宿主机需要远程访问虚拟机的rocketmq服务和web服务，需要开放相关的端口号，简单粗暴的方式是直接关闭防火墙</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 关闭防火墙</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld.service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看防火墙的状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 禁止firewall开机启动</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>或者为了安全，只开放特定的端口号，RocketMQ默认使用3个端口：9876 、10911 、11011 。如果防火墙没有关闭的话，那么防火墙就必须开放这些端口：</p><ul><li><code>nameserver</code> 默认使用 9876 端口</li><li><code>master</code> 默认使用 10911 端口</li><li><code>slave</code> 默认使用11011 端口</li></ul><p>执行以下命令：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开放name server默认端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --remove-port=9876/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开放master默认端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --remove-port=10911/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开放slave默认端口 (当前集群模式可不开启)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --remove-port=11011/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启防火墙</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --reload</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-3-6-环境变量配置" tabindex="-1">3.3.6 环境变量配置 <a class="header-anchor" href="#_3-3-6-环境变量配置" aria-label="Permalink to “3.3.6 环境变量配置”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/profile</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在profile文件的末尾加入如下命令</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#set rocketmq</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ROCKETMQ_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/rocketmq-all-4.8.0-bin-release</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ROCKETMQ_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROCKETMQ_HOME PATH</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/soft/mq/rocketmq</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/soft/mq/rocketmq</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ROCKETMQ_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ROCKETMQ_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROCKETMQ_HOME PATH</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>输入:wq! 保存并退出， 并使得配置立刻生效：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/profile</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">37</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#set rocketmq</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ROCKETMQ_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/rocketmq-4.8.0-bin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ROCKETMQ_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROCKETMQ_HOME PATH</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-3-7-创建消息存储路径" tabindex="-1">3.3.7 创建消息存储路径 <a class="header-anchor" href="#_3-3-7-创建消息存储路径" aria-label="Permalink to “3.3.7 创建消息存储路径”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/store</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/store/commitlog</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/store/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/store/index</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-3-8-broker配置文件" tabindex="-1">3.3.8 broker配置文件 <a class="header-anchor" href="#_3-3-8-broker配置文件" aria-label="Permalink to “3.3.8 broker配置文件”">​</a></h3><h4 id="_1-master1" tabindex="-1">1）master1 <a class="header-anchor" href="#_1-master1" aria-label="Permalink to “1）master1”">​</a></h4><p>服务器：192.168.3.37</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-a.properties</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>修改配置如下：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#所属集群名字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerClusterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-cluster</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#broker名字，注意此处不同的配置文件填写的不一样</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">broker-a</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#0 表示 Master，&gt;0 表示 Slave</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#nameServer地址，分号分割</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">namesrvAddr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-nameserver1:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#在发送消息时，自动创建服务器不存在的topic，默认创建的队列数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">defaultTopicQueueNums</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#是否允许 Broker 自动创建Topic，建议线下开启，线上关闭</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateTopicEnable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateSubscriptionGroup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker 对外服务的监听端口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">listenPort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10911</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#删除文件时间点，默认凌晨 4点</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deleteWhen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">04</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#文件保留时间，默认 48 小时</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fileReservedTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">120</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog每个文件的大小默认1G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1073741824</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ConsumeQueue每个文件默认存30W条，根据业务情况调整</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#destroyMapedFileIntervalForcibly=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#redeleteHangedFileInterval=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#检测物理文件磁盘空间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">diskMaxUsedSpaceRatio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">88</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathRootDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog 存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store/commitlog</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#消费队列存储路径存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store/comsumequeue</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#消息索引存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store/index</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkpoint 文件存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storeCheckpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#abort 文件存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">abortFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/soft/mq/rocketmq/store/abort</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#限制的消息大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxMessageSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">65536</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogLeastPages=4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueLeastPages=2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogThoroughInterval=10000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueThoroughInterval=60000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker 的角色</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_MASTER 异步复制Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_MASTER 同步双写Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SLAVE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerRole</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SYNC_MASTER</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#刷盘方式</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_FLUSH 异步刷盘</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_FLUSH 同步刷盘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flushDiskType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkTransactionMessageEnable=false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#发消息线程池数量</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#sendMessageThreadPoolNums=128</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#拉消息线程池数量</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#pullMessageThreadPoolNums=128</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h4 id="_2-slave2" tabindex="-1">2）slave2 <a class="header-anchor" href="#_2-slave2" aria-label="Permalink to “2）slave2”">​</a></h4><p>服务器：192.168.3.37</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-b-s.properties</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>修改配置如下：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#所属集群名字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerClusterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-cluster</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#broker名字，注意此处不同的配置文件填写的不一样</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">broker-b</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#0 表示 Master，&gt;0 表示 Slave</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#nameServer地址，分号分割</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">namesrvAddr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-nameserver1:9876</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rocketmq-nameserver2:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#在发送消息时，自动创建服务器不存在的topic，默认创建的队列数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">defaultTopicQueueNums</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#是否允许 Broker 自动创建Topic，建议线下开启，线上关闭</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateTopicEnable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateSubscriptionGroup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker 对外服务的监听端口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">listenPort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">11011</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#删除文件时间点，默认凌晨 4点</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deleteWhen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">04</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#文件保留时间，默认 48 小时</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fileReservedTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">120</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog每个文件的大小默认1G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1073741824</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ConsumeQueue每个文件默认存30W条，根据业务情况调整</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#destroyMapedFileIntervalForcibly=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#redeleteHangedFileInterval=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#检测物理文件磁盘空间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">diskMaxUsedSpaceRatio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">88</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathRootDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog 存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2/commitlog</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#消费队列存储路径存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#消息索引存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2/index</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkpoint 文件存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storeCheckpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#abort 文件存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">abortFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/rocketmq/message2/abort</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#限制的消息大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxMessageSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">65536</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogLeastPages=4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueLeastPages=2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogThoroughInterval=10000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueThoroughInterval=60000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker 的角色</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_MASTER 异步复制Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_MASTER 同步双写Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SLAVE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerRole</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SLAVE</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#刷盘方式</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_FLUSH 异步刷盘</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_FLUSH 同步刷盘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flushDiskType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ASYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkTransactionMessageEnable=false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#发消息线程池数量</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#sendMessageThreadPoolNums=128</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#拉消息线程池数量</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#pullMessageThreadPoolNums=128</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h4 id="_3-master2" tabindex="-1">3）master2 <a class="header-anchor" href="#_3-master2" aria-label="Permalink to “3）master2”">​</a></h4><p>服务器：192.168.3.201</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/soft/rocketmq/conf/2m-2s-sync/broker-b.properties</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>修改配置如下：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#所属集群名字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerClusterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-cluster</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#broker名字，注意此处不同的配置文件填写的不一样</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">broker-b</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#0 表示 Master，&gt;0 表示 Slave</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#nameServer地址，分号分割</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">namesrvAddr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-nameserver1:9876</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rocketmq-nameserver2:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#在发送消息时，自动创建服务器不存在的topic，默认创建的队列数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">defaultTopicQueueNums</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#是否允许 Broker 自动创建Topic，建议线下开启，线上关闭</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateTopicEnable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateSubscriptionGroup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker 对外服务的监听端口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">listenPort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10911</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#删除文件时间点，默认凌晨 4点</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deleteWhen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">04</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#文件保留时间，默认 48 小时</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fileReservedTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">120</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog每个文件的大小默认1G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1073741824</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ConsumeQueue每个文件默认存30W条，根据业务情况调整</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#destroyMapedFileIntervalForcibly=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#redeleteHangedFileInterval=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#检测物理文件磁盘空间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">diskMaxUsedSpaceRatio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">88</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathRootDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog 存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message/commitlog</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#消费队列存储路径存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#消息索引存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message/index</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkpoint 文件存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storeCheckpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#abort 文件存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">abortFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message/abort</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#限制的消息大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxMessageSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">65536</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogLeastPages=4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueLeastPages=2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogThoroughInterval=10000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueThoroughInterval=60000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker 的角色</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_MASTER 异步复制Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_MASTER 同步双写Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SLAVE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerRole</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SYNC_MASTER</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#刷盘方式</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_FLUSH 异步刷盘</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_FLUSH 同步刷盘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flushDiskType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkTransactionMessageEnable=false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#发消息线程池数量</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#sendMessageThreadPoolNums=128</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#拉消息线程池数量</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#pullMessageThreadPoolNums=128</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h4 id="_4-slave1" tabindex="-1">4）slave1 <a class="header-anchor" href="#_4-slave1" aria-label="Permalink to “4）slave1”">​</a></h4><p>服务器：192.168.3.201</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/soft/rocketmq/conf/2m-2s-sync/broker-a-s.properties</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>修改配置如下：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#所属集群名字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerClusterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-cluster</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#broker名字，注意此处不同的配置文件填写的不一样</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">broker-a</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#0 表示 Master，&gt;0 表示 Slave</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#nameServer地址，分号分割</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">namesrvAddr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rocketmq-nameserver1:9876</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rocketmq-nameserver2:9876</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#在发送消息时，自动创建服务器不存在的topic，默认创建的队列数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">defaultTopicQueueNums</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#是否允许 Broker 自动创建Topic，建议线下开启，线上关闭</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateTopicEnable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoCreateSubscriptionGroup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker 对外服务的监听端口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">listenPort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">11011</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#删除文件时间点，默认凌晨 4点</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deleteWhen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">04</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#文件保留时间，默认 48 小时</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fileReservedTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">120</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog每个文件的大小默认1G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1073741824</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ConsumeQueue每个文件默认存30W条，根据业务情况调整</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapedFileSizeConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">300000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#destroyMapedFileIntervalForcibly=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#redeleteHangedFileInterval=120000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#检测物理文件磁盘空间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">diskMaxUsedSpaceRatio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">88</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathRootDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#commitLog 存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathCommitLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2/commitlog</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#消费队列存储路径存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathConsumeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#消息索引存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storePathIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2/index</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkpoint 文件存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">storeCheckpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#abort 文件存储路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">abortFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/install/soft/rocketmq/message2/abort</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#限制的消息大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxMessageSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">65536</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogLeastPages=4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueLeastPages=2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushCommitLogThoroughInterval=10000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#flushConsumeQueueThoroughInterval=60000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Broker 的角色</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_MASTER 异步复制Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_MASTER 同步双写Master</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SLAVE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">brokerRole</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SLAVE</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#刷盘方式</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- ASYNC_FLUSH 异步刷盘</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#- SYNC_FLUSH 同步刷盘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flushDiskType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ASYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#checkTransactionMessageEnable=false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#发消息线程池数量</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#sendMessageThreadPoolNums=128</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#拉消息线程池数量</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#pullMessageThreadPoolNums=128</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h3 id="_3-3-9-修改启动脚本文件" tabindex="-1">3.3.9 修改启动脚本文件 <a class="header-anchor" href="#_3-3-9-修改启动脚本文件" aria-label="Permalink to “3.3.9 修改启动脚本文件”">​</a></h3><h4 id="_1-runbroker-sh" tabindex="-1">1）runbroker.sh <a class="header-anchor" href="#_1-runbroker-sh" aria-label="Permalink to “1）runbroker.sh”">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin/runbroker.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>需要根据内存大小进行适当的对JVM参数进行调整：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#===================================================</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开发环境配置 JVM Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JAVA_OPT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JAVA_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} -server -Xms256m -Xmx256m -Xmn128m&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>####2）runserver.sh</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin/runserver.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JAVA_OPT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JAVA_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_3-3-10-服务启动" tabindex="-1">3.3.10 服务启动 <a class="header-anchor" href="#_3-3-10-服务启动" aria-label="Permalink to “3.3.10 服务启动”">​</a></h3><h4 id="_1-启动nameserve集群" tabindex="-1">1）启动NameServe集群 <a class="header-anchor" href="#_1-启动nameserve集群" aria-label="Permalink to “1）启动NameServe集群”">​</a></h4><p>分别在192.168.3.37和192.168.3.201启动NameServer</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mqnamesrv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/install/soft/rocketmq/rocketmq-all-4.8.0-bin-release/conf/2m-2s-sync</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-启动broker集群" tabindex="-1">2）启动Broker集群 <a class="header-anchor" href="#_2-启动broker集群" aria-label="Permalink to “2）启动Broker集群”">​</a></h4><ul><li>在192.168.3.37上启动master1和slave2</li></ul><p>master1：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mqbroker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-a.properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>slave2：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mqbroker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-b-s.properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>在192.168.3.201上启动master2和slave2</li></ul><p>master2</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mqbroker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /install/soft/rocketmq/rocketmq-all-4.8.0-bin-release/conf/2m-2s-sync/broker-b.properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>slave1</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/rocketmq/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nohup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mqbroker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /install/soft/rocketmq/rocketmq-all-4.8.0-bin-release/conf/2m-2s-sync/broker-a-s.properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-3-11-查看进程状态" tabindex="-1">3.3.11 查看进程状态 <a class="header-anchor" href="#_3-3-11-查看进程状态" aria-label="Permalink to “3.3.11 查看进程状态”">​</a></h3><p>启动后通过JPS查看启动进程</p><p><img src="/assets/jps1.uMzcqkEG.png" alt="" loading="lazy"></p><h3 id="_3-3-12-查看日志" tabindex="-1">3.3.12 查看日志 <a class="header-anchor" href="#_3-3-12-查看日志" aria-label="Permalink to “3.3.12 查看日志”">​</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看nameServer日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -500f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/logs/rocketmqlogs/namesrv.log</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看broker日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -500f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/logs/rocketmqlogs/broker.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3-4-mqadmin管理工具" tabindex="-1">3.4 mqadmin管理工具 <a class="header-anchor" href="#_3-4-mqadmin管理工具" aria-label="Permalink to “3.4 mqadmin管理工具”">​</a></h2><h3 id="_3-4-1-使用方式" tabindex="-1">3.4.1 使用方式 <a class="header-anchor" href="#_3-4-1-使用方式" aria-label="Permalink to “3.4.1 使用方式”">​</a></h3><p>进入RocketMQ安装位置，在bin目录下执行<code>./mqadmin {command} {args}</code></p><p>###3.4.2 命令介绍</p><p>####1）Topic相关</p><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">名称</td><td class="xl64" width="175" style="width:131pt;">含义</td><td class="xl64" width="177" style="width:133pt;">命令选项</td><td class="xl64" width="185" style="width:139pt;">说明</td></tr><tr height="132" style="height:99.0pt;"><td rowspan="8" height="593" class="xl68" width="163" style="border-bottom:1.0pt;height:444.0pt;border-top:none;width:122pt;">updateTopic</td><td rowspan="8" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">创建更新Topic配置</td><td class="xl65" width="149" style="width:112pt;">-b</td><td class="xl66" width="159" style="width:119pt;">Broker 地址，表示 topic 所在 Broker，只支持单台Broker，地址为ip:port</td></tr><tr height="132" style="height:99.0pt;"><td height="132" class="xl65" width="149" style="height:99.0pt;width:112pt;">-c</td><td class="xl66" width="159" style="width:119pt;">cluster 名称，表示 topic 所在集群（集群可通过 clusterList 查询）</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h-</td><td class="xl66" width="159" style="width:119pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer服务地址，格式 ip:port</td></tr><tr height="76" style="height:57.0pt;"><td height="76" class="xl65" width="149" style="height:57.0pt;width:112pt;">-p</td><td class="xl66" width="159" style="width:119pt;">指定新topic的读写权限( W=2|R=4|WR=6 )</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="149" style="height:29.0pt;width:112pt;">-r</td><td class="xl66" width="159" style="width:119pt;">可读队列数（默认为 8）</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="149" style="height:29.0pt;width:112pt;">-w</td><td class="xl66" width="159" style="width:119pt;">可写队列数（默认为 8）</td></tr><tr height="95" style="height:71.0pt;"><td height="95" class="xl65" width="149" style="height:71.0pt;width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic 名称（名称只能使用字符 ^[a-zA-Z0-9_-]+$ ）</td></tr><tr height="132" style="height:99.0pt;"><td rowspan="4" height="307" class="xl68" width="163" style="border-bottom:1.0pt;height:230.0pt;border-top:none;width:122pt;">deleteTopic</td><td rowspan="4" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">删除Topic</td><td class="xl65" width="149" style="width:112pt;">-c</td><td class="xl66" width="159" style="width:119pt;">cluster 名称，表示删除某集群下的某个 topic （集群 可通过 clusterList 查询）</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="95" style="height:71.0pt;"><td height="95" class="xl65" width="149" style="height:71.0pt;width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic 名称（名称只能使用字符 ^[a-zA-Z0-9_-]+$ ）</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="3" height="287" class="xl68" width="163" style="border-bottom:1.0pt;height:215.0pt;border-top:none;width:122pt;">topicList</td><td rowspan="3" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">查看 Topic 列表信息</td><td class="xl65" width="149" style="width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">打印帮助</td></tr><tr height="207" style="height:155.0pt;"><td height="207" class="xl65" width="149" style="height:155.0pt;width:112pt;">-c</td><td class="xl66" width="159" style="width:119pt;">不配置-c只返回topic列表，增加-c返回clusterName, topic, consumerGroup信息，即topic的所属集群和订阅关系，没有参数</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="3" height="103" class="xl68" width="163" style="border-bottom:1.0pt;height:77.0pt;border-top:none;width:122pt;">topicRoute</td><td rowspan="3" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">查看 Topic 路由信息</td><td class="xl65" width="149" style="width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic 名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="3" height="103" class="xl68" width="163" style="border-bottom:1.0pt;height:77.0pt;border-top:none;width:122pt;">topicStatus</td><td rowspan="3" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">查看 Topic 消息队列offset</td><td class="xl65" width="149" style="width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic 名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="3" height="103" class="xl68" width="163" style="border-bottom:1.0pt;height:77.0pt;border-top:none;width:122pt;">topicClusterList</td><td rowspan="3" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">查看 Topic 所在集群列表</td><td class="xl65" width="149" style="width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic 名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="6" height="518" class="xl68" width="163" style="border-bottom:1.0pt;height:380pt;border-top:none;width:122pt;">updateTopicPerm</td><td rowspan="6" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">更新 Topic 读写权限</td><td class="xl65" width="149" style="width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic 名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="132" style="height:99.0pt;"><td height="132" class="xl65" width="149" style="height:99.0pt;width:112pt;">-b</td><td class="xl66" width="159" style="width:119pt;">Broker 地址，表示 topic 所在 Broker，只支持单台Broker，地址为ip:port</td></tr><tr height="76" style="height:57.0pt;"><td height="76" class="xl65" width="149" style="height:57.0pt;width:112pt;">-p</td><td class="xl66" width="159" style="width:119pt;">指定新 topic 的读写权限( W=2|R=4|WR=6 )</td></tr><tr height="207" style="height:155.0pt;"><td height="207" class="xl65" width="149" style="height:155.0pt;width:112pt;">-c</td><td class="xl66" width="159" style="width:119pt;">cluster 名称，表示 topic 所在集群（集群可通过 clusterList 查询），-b优先，如果没有-b，则对集群中所有Broker执行命令</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="5" height="199" class="xl68" width="163" style="border-bottom:1.0pt;height:149.0pt;border-top:none;width:122pt;">updateOrderConf</td><td rowspan="5" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">从NameServer上创建、删除、获取特定命名空间的kv配置，目前还未启用</td><td class="xl65" width="149" style="width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic，键</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="149" style="height:29.0pt;width:112pt;">-v</td><td class="xl66" width="159" style="width:119pt;">orderConf，值</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-m</td><td class="xl66" width="159" style="width:119pt;">method，可选get、put、delete</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="4" height="198" class="xl68" width="163" style="border-bottom:1.0pt;height:140pt;border-top:none;width:122pt;">allocateMQ</td><td rowspan="4" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">以平均负载算法计算消费者列表负载消息队列的负载结果</td><td class="xl65" width="149" style="width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">topic 名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="95" style="height:71.0pt;"><td height="95" class="xl65" width="149" style="height:71.0pt;width:112pt;">-i</td><td class="xl66" width="159" style="width:119pt;">ipList，用逗号分隔，计算这些ip去负载Topic的消息队列</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="4" height="142" class="xl68" width="163" style="border-bottom:1.0pt solid black;height:106.0pt;border-top:1.0pt;width:122pt;">statsAll</td><td rowspan="4" class="xl70" width="135" style="border-bottom:1.0pt;border-top:none;width:101pt;">打印Topic订阅关系、TPS、积累量、24h读写总量等信息</td><td class="xl65" width="149" style="width:112pt;">-h</td><td class="xl66" width="159" style="width:119pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="149" style="height:43.0pt;width:112pt;">-n</td><td class="xl66" width="159" style="width:119pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="149" style="height:29.0pt;width:112pt;">-a</td><td class="xl66" width="159" style="width:119pt;">是否只打印活跃topic</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="149" style="height:17.0pt;width:112pt;">-t</td><td class="xl66" width="159" style="width:119pt;">指定topic</td></tr></table><p>####2）集群相关</p><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">名称</td><td class="xl64" width="175" style="width:131pt;">含义</td><td class="xl64" width="177" style="width:133pt;">命令选项</td><td class="xl64" width="185" style="width:139pt;">说明</td></tr><tr height="207" style="height:155.0pt;"><td rowspan="4" height="326" class="xl67" width="177" style="border-bottom:1.0pt;height:244.0pt;border-top:none;width:133pt;"><span style="mso-spacerun:yes;"></span>clusterList</td><td rowspan="4" class="xl70" width="175" style="border-bottom:1.0pt;border-top:none;width:131pt;">查看集群信息，集群、BrokerName、BrokerId、TPS等信息</td><td class="xl65" width="177" style="width:133pt;">-m</td><td class="xl66" width="185" style="width:139pt;">打印更多信息 (增加打印出如下信息 #InTotalYest, #OutTotalYest, #InTotalToday ,#OutTotalToday)</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="177" style="height:17.0pt;width:133pt;">-h</td><td class="xl66" width="185" style="width:139pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="177" style="height:43.0pt;width:133pt;">-n</td><td class="xl66" width="185" style="width:139pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="177" style="height:29.0pt;width:133pt;">-i</td><td class="xl66" width="185" style="width:139pt;">打印间隔，单位秒</td></tr><tr height="95" style="height:71.0pt;"><td rowspan="8" height="391" class="xl67" width="177" style="border-bottom:1.0pt;height:292.0pt;border-top:none;width:133pt;">clusterRT</td><td rowspan="8" class="xl70" width="175" style="border-bottom:1.0pt;border-top:none;width:131pt;">发送消息检测集群各Broker RT。消息发往${BrokerName} Topic。</td><td class="xl65" width="177" style="width:133pt;">-a</td><td class="xl66" width="185" style="width:139pt;">amount，每次探测的总数，RT = 总时间 / amount</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="177" style="height:29.0pt;width:133pt;">-s</td><td class="xl66" width="185" style="width:139pt;">消息大小，单位B</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="177" style="height:17.0pt;width:133pt;">-c</td><td class="xl66" width="185" style="width:139pt;">探测哪个集群</td></tr><tr height="76" style="height:57.0pt;"><td height="76" class="xl65" width="177" style="height:57.0pt;width:133pt;">-p</td><td class="xl66" width="185" style="width:139pt;">是否打印格式化日志，以|分割，默认不打印</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl65" width="177" style="height:17.0pt;width:133pt;">-h</td><td class="xl66" width="185" style="width:139pt;">打印帮助</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="177" style="height:29.0pt;width:133pt;">-m</td><td class="xl66" width="185" style="width:139pt;">所属机房，打印使用</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl65" width="177" style="height:29.0pt;width:133pt;">-i</td><td class="xl66" width="185" style="width:139pt;">发送间隔，单位秒</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl65" width="177" style="height:43.0pt;width:133pt;">-n</td><td class="xl66" width="185" style="width:139pt;">NameServer 服务地址，格式 ip:port</td></tr></table><p>####3）Broker相关</p><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">名称</td><td class="xl64" width="175" style="width:131pt;">含义</td><td class="xl64" width="177" style="width:133pt;">命令选项</td><td class="xl64" width="185" style="width:139pt;">说明</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="6" height="206" class="xl69" width="191" style="border-bottom:1.0pt;height:154.0pt;border-top:none;width:143pt;">updateBrokerConfig</td><td rowspan="6" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">更新 Broker 配置文件，会修改Broker.conf</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker 地址，格式为ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">cluster 名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-k</td><td class="xl68" width="87" style="width:65pt;">key 值</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-v</td><td class="xl68" width="87" style="width:65pt;">value 值</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="3" height="137" class="xl69" width="191" style="border-bottom:1.0pt;height:103.0pt;border-top:none;width:143pt;">brokerStatus</td><td rowspan="3" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">查看 Broker 统计信息、运行状态（你想要的信息几乎都在里面）</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker 地址，地址为ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="6" height="256" class="xl69" width="191" style="border-bottom:1.0pt;height:192.0pt;border-top:none;width:143pt;">brokerConsumeStats</td><td rowspan="6" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">Broker中各个消费者的消费情况，按Message Queue维度返回Consume Offset，Broker Offset，Diff，TImestamp等信息</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker 地址，地址为ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">请求超时时间</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-l</td><td class="xl68" width="87" style="width:65pt;">diff阈值，超过阈值才打印</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-o</td><td class="xl68" width="87" style="width:65pt;">是否为顺序topic，一般为false</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="2" height="114" class="xl69" width="191" style="border-bottom:1.0pt;height:86.0pt;border-top:none;width:143pt;">getBrokerConfig</td><td rowspan="2" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">获取Broker配置</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker 地址，地址为ip:port</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="3" height="137" class="xl69" width="191" style="border-bottom:1.0pt;height:103.0pt;border-top:none;width:143pt;">wipeWritePerm</td><td rowspan="3" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">从NameServer上清除 Broker写权限</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker 地址，地址为ip:port</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="4" height="160" class="xl69" width="191" style="border-bottom:1.0pt;height:120.0pt;border-top:none;width:143pt;">cleanExpiredCQ</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">清理Broker上过期的Consume Queue，如果手动减少对列数可能产生过期队列</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker 地址，地址为ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">集群名称</td></tr><tr height="88" style="mso-height-source:userset;height:66.0pt;"><td rowspan="4" height="191" class="xl69" width="191" style="border-bottom:1.0pt;height:143.0pt;border-top:none;width:143pt;">cleanUnusedTopic</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">清理Broker上不使用的Topic，从内存中释放Topic的Consume Queue，如果手动删除Topic会产生不使用的Topic</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker 地址，地址为ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">集群名称</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="5" height="199" class="xl69" width="191" style="border-bottom:1.0pt;height:149.0pt;border-top:none;width:143pt;">sendMsgStatus</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">向Broker发消息，返回发送状态和RT</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">BrokerName，注意不同于Broker地址</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">消息大小，单位B</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">发送次数</td></tr></table><p>####4）消息相关</p><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">名称</td><td class="xl64" width="175" style="width:131pt;">含义</td><td class="xl64" width="177" style="width:133pt;">命令选项</td><td class="xl64" width="185" style="width:139pt;">说明</td></tr><tr height="128" style="height:96.0pt;"><td rowspan="3" height="208" class="xl69" width="87" style="border-bottom:1.0pt;height:156.0pt;border-top:none;width:65pt;">queryMsgById</td><td rowspan="3" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">根据offsetMsgId查询msg，如果使用开源控制台，应使用offsetMsgId，此命令还有其他参数，具体作用请阅读QueryMsgByIdSubCommand。</td><td class="xl67" width="87" style="width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">msgId</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="4" height="126" class="xl69" width="87" style="border-bottom:1.0pt;height:94.0pt;border-top:none;width:65pt;">queryMsgByKey</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">根据消息 Key 查询消息</td><td class="xl67" width="87" style="width:65pt;">-k</td><td class="xl67" width="87" style="width:65pt;">msgKey</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">Topic 名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="225" style="height:169.0pt;"><td rowspan="6" height="390" class="xl69" width="87" style="border-bottom:1.0pt;height:292.0pt;border-top:none;width:65pt;">queryMsgByOffset</td><td rowspan="6" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">根据 Offset 查询消息</td><td class="xl67" width="87" style="width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker 名称，（这里需要注意 填写的是 Broker 的名称，不是 Broker 的地址，Broker 名称可以在 clusterList 查到）</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-i</td><td class="xl68" width="87" style="width:65pt;">query 队列 id</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-o</td><td class="xl68" width="87" style="width:65pt;">offset 值</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topic 名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="47"><td rowspan="6" height="209" class="xl69" width="87" style="border-bottom:1.0pt;height:156.0pt;border-top:none;width:65pt;">queryMsgByUniqueKey</td><td rowspan="6" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">根据msgId查询，msgId不同于offsetMsgId，区别详见常见运维问题。-g，-d配合使用，查到消息后尝试让特定的消费者消费消息并返回消费结果</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">uniqe msg id</td></tr><tr height="36" style="height:27.0pt;"><td height="36" class="xl67" width="87" style="height:27.0pt;width:65pt;">-g</td><td class="xl67" width="87" style="width:65pt;">consumerGroup</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-d</td><td class="xl67" width="87" style="width:65pt;">clientId</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topic名称</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="5" height="149" class="xl69" width="87" style="border-bottom:1.0pt
  height:111.0pt;border-top:none;width:65pt;">checkMsgSendRT</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">检测向topic发消息的RT，功能类似clusterRT</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topic名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-a</td><td class="xl68" width="87" style="width:65pt;">探测次数</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">消息大小</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="8" height="218" class="xl69" width="87" style="border-bottom:1.0pt;height:162.0pt;border-top:none;width:65pt;">sendMessage</td><td rowspan="8" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">发送一条消息，可以根据配置发往特定Message Queue，或普通发送。</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topic名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-p</td><td class="xl68" width="87" style="width:65pt;">body，消息体</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-k</td><td class="xl67" width="87" style="width:65pt;">keys</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl67" width="87" style="width:65pt;">tags</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-b</td><td class="xl67" width="87" style="width:65pt;">BrokerName</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">queueId</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="10" height="312" class="xl69" width="87" style="border-bottom:1.0pt;height:232.0pt;border-top:none;width:65pt;">consumeMessage</td><td rowspan="10" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">消费消息。可以根据offset、开始&amp;结束时间戳、消息队列消费消息，配置不同执行不同消费逻辑，详见ConsumeMessageCommand。</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topic名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-b</td><td class="xl67" width="87" style="width:65pt;">BrokerName</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-o</td><td class="xl68" width="87" style="width:65pt;">从offset开始消费</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">queueId</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">消费者分组</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">开始时间戳，格式详见-h</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-d</td><td class="xl68" width="87" style="width:65pt;">结束时间戳</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">消费多少条消息</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="8" height="282" class="xl69" width="87" style="border-bottom:1.0pt;height:210.0pt;border-top:none;width:65pt;">printMsg</td><td rowspan="8" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">从Broker消费消息并打印，可选时间段</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topic名称</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">字符集，例如UTF-8</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">subExpress，过滤表达式</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">开始时间戳，格式参见-h</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-e</td><td class="xl68" width="87" style="width:65pt;">结束时间戳</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-d</td><td class="xl68" width="87" style="width:65pt;">是否打印消息体</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="12" height="390" class="xl69" width="87" style="border-bottom:1.0pt;height:290.0pt;border-top:none;width:65pt;">printMsgByQueue</td><td rowspan="12" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">类似printMsg，但指定Message Queue</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topic名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">queueId</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-a</td><td class="xl67" width="87" style="width:65pt;">BrokerName</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">字符集，例如UTF-8</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">subExpress，过滤表达式</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">开始时间戳，格式参见-h</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-e</td><td class="xl68" width="87" style="width:65pt;">结束时间戳</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-p</td><td class="xl68" width="87" style="width:65pt;">是否打印消息</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-d</td><td class="xl68" width="87" style="width:65pt;">是否打印消息体</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-f</td><td class="xl68" width="87" style="width:65pt;">是否统计tag数量并打印</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="7" height="410" class="xl69" width="87" style="border-bottom:1.0pt;height:307.0pt;border-top:none;width:65pt;">resetOffsetByTime</td><td rowspan="7" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">按时间戳重置offset，Broker和consumer都会重置</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">消费者分组</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topic名称</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">重置为此时间戳对应的offset</td></tr><tr height="188" style="height:141.0pt;"><td height="188" class="xl67" width="87" style="height:141.0pt;width:65pt;">-f</td><td class="xl68" width="87" style="width:65pt;">是否强制重置，如果false，只支持回溯offset，如果true，不管时间戳对应offset与consumeOffset关系</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">是否重置c++客户端offset</td></tr></table><h4 id="_5-消费者、消费组相关" tabindex="-1">5）消费者、消费组相关 <a class="header-anchor" href="#_5-消费者、消费组相关" aria-label="Permalink to “5）消费者、消费组相关”">​</a></h4><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">名称</td><td class="xl64" width="175" style="width:131pt;">含义</td><td class="xl64" width="177" style="width:133pt;">命令选项</td><td class="xl64" width="185" style="width:139pt;">说明</td></tr><tr height="39" style="height:29.0pt;"><td rowspan="4" height="158" class="xl69" width="87" style="border-bottom:1.0pt;height:110pt;border-top:none;width:65pt;">consumerProgress</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt;border-top:none;width:65pt;">查看订阅组消费状态，可以查看具体的client IP的消息积累量</td><td class="xl67" width="87" style="width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">消费者所属组名</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">是否打印client IP</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="105" style="mso-height-source:userset;height:79.0pt;"><td rowspan="5" height="260" class="xl69" width="87" style="border-bottom:1.0pt;height:195.0pt;border-top:none;width:65pt;">consumerStatus</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">查看消费者状态，包括同一个分组中是否都是相同的订阅，分析Process Queue是否堆积，返回消费者jstack结果，内容较多，使用者参见ConsumerStatusSubCommand</td><td class="xl67" width="87" style="width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="36" style="height:27.0pt;"><td height="36" class="xl67" width="87" style="height:27.0pt;width:65pt;">-g</td><td class="xl67" width="87" style="width:65pt;">consumer group</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-i</td><td class="xl67" width="87" style="width:65pt;">clientId</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">是否执行jstack</td></tr><tr height="39" style="height:29.0pt;"><td rowspan="5" height="181" class="xl69" width="87" style="border-bottom:1.0pt
  height:135.0pt;border-top:none;width:65pt;">getConsumerStatus</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">获取 Consumer 消费进度</td><td class="xl67" width="87" style="width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">消费者所属组名</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">查询主题</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-i</td><td class="xl68" width="87" style="width:65pt;">Consumer 客户端 ip</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="13" height="761" class="xl69" width="87" style="border-bottom:1.0pt
  height:569.0pt;border-top:none;width:65pt;">updateSubGroup</td><td rowspan="13" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">更新或创建订阅关系</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker地址</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">集群名称</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">消费者分组名称</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">分组是否允许消费</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-m</td><td class="xl68" width="87" style="width:65pt;">是否从最小offset开始消费</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-d</td><td class="xl68" width="87" style="width:65pt;">是否是广播模式</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-q</td><td class="xl68" width="87" style="width:65pt;">重试队列数量</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-r</td><td class="xl68" width="87" style="width:65pt;">最大重试次数</td></tr><tr height="207" style="height:155.0pt;"><td height="207" class="xl67" width="87" style="height:155.0pt;width:65pt;">-i</td><td class="xl68" width="87" style="width:65pt;">当slaveReadEnable开启时有效，且还未达到从slave消费时建议从哪个BrokerId消费，可以配置备机id，主动从备机消费</td></tr><tr height="132" style="height:99.0pt;"><td height="132" class="xl67" width="87" style="height:99.0pt;width:65pt;">-w</td><td class="xl68" width="87" style="width:65pt;">如果Broker建议从slave消费，配置决定从哪个slave消费，配置BrokerId，例如1</td></tr><tr height="76" style="height:57.0pt;"><td height="76" class="xl67" width="87" style="height:57.0pt;width:65pt;">-a</td><td class="xl68" width="87" style="width:65pt;">当消费者数量变化时是否通知其他消费者负载均衡</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="5" height="165" class="xl69" width="87" style="border-bottom:1.0pt
  height:123.0pt;border-top:none;width:65pt;">deleteSubGroup</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">从Broker删除订阅关系</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-b</td><td class="xl68" width="87" style="width:65pt;">Broker地址</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-c</td><td class="xl68" width="87" style="width:65pt;">集群名称</td></tr><tr height="39" style="height:29.0pt;"><td height="39" class="xl67" width="87" style="height:29.0pt;width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">消费者分组名称</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="6" height="172" class="xl69" width="87" style="border-bottom:1.0pt
  height:120pt;border-top:none;width:65pt;">cloneGroupOffset</td><td rowspan="6" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">在目标群组中使用源群组的offset</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">源消费者组</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-d</td><td class="xl68" width="87" style="width:65pt;">目标消费者组</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">topic名称</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-o</td><td class="xl68" width="87" style="width:65pt;">暂未使用</td></tr></table><h4 id="_6-连接相关" tabindex="-1">6）连接相关 <a class="header-anchor" href="#_6-连接相关" aria-label="Permalink to “6）连接相关”">​</a></h4><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">名称</td><td class="xl64" width="175" style="width:131pt;">含义</td><td class="xl64" width="177" style="width:133pt;">命令选项</td><td class="xl64" width="185" style="width:139pt;">说明</td></tr><tr height="39" style="height:29.0pt;"><td rowspan="3" height="119" class="xl69" width="87" style="border-bottom:1.0pt
  height:89.0pt;border-top:none;width:65pt;">consumerConnec tion</td><td rowspan="3" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">查询 Consumer 的网络连接</td><td class="xl67" width="87" style="width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">消费者所属组名</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="39" style="height:29.0pt;"><td rowspan="4" height="142" class="xl69" width="87" style="border-bottom:1.0pt
  height:106.0pt;border-top:none;width:65pt;">producerConnec tion</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">查询 Producer 的网络连接</td><td class="xl67" width="87" style="width:65pt;">-g</td><td class="xl68" width="87" style="width:65pt;">生产者所属组名</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-t</td><td class="xl68" width="87" style="width:65pt;">主题名称</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr></table><h4 id="_7-nameserver相关" tabindex="-1">7）NameServer相关 <a class="header-anchor" href="#_7-nameserver相关" aria-label="Permalink to “7）NameServer相关”">​</a></h4><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">名称</td><td class="xl64" width="175" style="width:131pt;">含义</td><td class="xl64" width="177" style="width:133pt;">命令选项</td><td class="xl64" width="185" style="width:139pt;">说明</td></tr><tr height="21" style="height:16.0pt;"><td rowspan="5" height="143" class="xl69" width="87" style="border-bottom:1.0pt
  height:100pt;border-top:none;width:65pt;">updateKvConfig</td><td rowspan="5" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">更新NameServer的kv配置，目前还未使用</td><td class="xl75" width="87" style="width:65pt;">-s</td><td class="xl76" width="87" style="width:65pt;">命名空间</td></tr><tr height="21" style="height:16.0pt;"><td height="21" class="xl75" width="87" style="height:16.0pt;width:65pt;">-k</td><td class="xl75" width="87" style="width:65pt;">key</td></tr><tr height="21" style="height:16.0pt;"><td height="21" class="xl75" width="87" style="height:16.0pt;width:65pt;">-v</td><td class="xl75" width="87" style="width:65pt;">value</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="23" style="height:17.0pt;"><td rowspan="4" height="126" class="xl69" width="87" style="border-bottom:1.0pt
  height:94.0pt;border-top:none;width:65pt;">deleteKvConfig</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">删除NameServer的kv配置</td><td class="xl67" width="87" style="width:65pt;">-s</td><td class="xl68" width="87" style="width:65pt;">命名空间</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-k</td><td class="xl67" width="87" style="width:65pt;">key</td></tr><tr height="57" style="height:43.0pt;"><td height="57" class="xl67" width="87" style="height:43.0pt;width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="2" height="80" class="xl69" width="87" style="border-bottom:1.0pt
  height:60.0pt;border-top:none;width:65pt;">getNamesrvConfig</td><td rowspan="2" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">获取NameServer配置</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="4" height="126" class="xl69" width="87" style="border-bottom:1.0pt
  height:94.0pt;border-top:none;width:65pt;">updateNamesrvConfig</td><td rowspan="4" class="xl72" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">修改NameServer配置</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-k</td><td class="xl67" width="87" style="width:65pt;">key</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-v</td><td class="xl67" width="87" style="width:65pt;">value</td></tr></table><h4 id="_8-其他" tabindex="-1">8）其他 <a class="header-anchor" href="#_8-其他" aria-label="Permalink to “8）其他”">​</a></h4><table border="0" cellpadding="0" cellspacing="0" width="714"><col width="177"><col width="175"><col width="177"><col width="185"><tr height="23" style="height:17.0pt;"><td height="23" class="xl63" width="177" style="height:17.0pt;width:133pt;">名称</td><td class="xl64" width="175" style="width:131pt;">含义</td><td class="xl64" width="177" style="width:133pt;">命令选项</td><td class="xl64" width="185" style="width:139pt;">说明</td></tr><tr height="57" style="height:43.0pt;"><td rowspan="2" height="80" class="xl69" width="87" style="border-bottom:1.0pt
  height:60.0pt;border-top:none;width:65pt;">startMonitoring</td><td rowspan="2" class="xl71" width="87" style="border-bottom:1.0pt
  border-top:none;width:65pt;">开启监控进程，监控消息误删、重试队列消息数等</td><td class="xl67" width="87" style="width:65pt;">-n</td><td class="xl68" width="87" style="width:65pt;">NameServer 服务地址，格式 ip:port</td></tr><tr height="23" style="height:17.0pt;"><td height="23" class="xl67" width="87" style="height:17.0pt;width:65pt;">-h</td><td class="xl68" width="87" style="width:65pt;">打印帮助</td></tr></table><h3 id="_3-4-3-注意事项" tabindex="-1">3.4.3 注意事项 <a class="header-anchor" href="#_3-4-3-注意事项" aria-label="Permalink to “3.4.3 注意事项”">​</a></h3><ul><li>几乎所有命令都需要配置-n表示NameServer地址，格式为ip:port</li><li>几乎所有命令都可以通过-h获取帮助</li><li>如果既有Broker地址（-b）配置项又有clusterName（-c）配置项，则优先以Broker地址执行命令；如果不配置Broker地址，则对集群中所有主机执行命令</li></ul><h2 id="_3-5-集群监控平台搭建" tabindex="-1">3.5 集群监控平台搭建 <a class="header-anchor" href="#_3-5-集群监控平台搭建" aria-label="Permalink to “3.5 集群监控平台搭建”">​</a></h2><h3 id="_3-5-1-概述" tabindex="-1">3.5.1 概述 <a class="header-anchor" href="#_3-5-1-概述" aria-label="Permalink to “3.5.1 概述”">​</a></h3><p><code>RocketMQ</code>有一个对其扩展的开源项目<a href="https://github.com/apache/rocketmq-externals" target="_blank" rel="noreferrer">incubator-rocketmq-externals</a>，这个项目中有一个子模块叫<code>rocketmq-console</code>，这个便是管理控制台项目了，先将<a href="https://github.com/apache/rocketmq-externals" target="_blank" rel="noreferrer">incubator-rocketmq-externals</a>拉到本地，因为我们需要自己对<code>rocketmq-console</code>进行编译打包运行。</p><p><img src="/assets/rocketmq-console.DSOq-V_d.png" alt="" loading="lazy"></p><h3 id="_3-5-2-下载并编译打包" tabindex="-1">3.5.2 下载并编译打包 <a class="header-anchor" href="#_3-5-2-下载并编译打包" aria-label="Permalink to “3.5.2 下载并编译打包”">​</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/apache/rocketmq-externals</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-console</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mvn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Dmaven.test.skip=true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注意：打包前在<code>rocketmq-console</code>中配置<code>namesrv</code>集群地址：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rocketmq.config.namesrvAddr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=192.168.25.135:9876</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.25.138:9876</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>启动rocketmq-console：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">java</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rocketmq-console.jar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>启动成功后，我们就可以通过浏览器访问<code>http://localhost:8080</code>进入控制台界面了，如下图：</p><p><img src="/assets/rocketmq-console2.BNsM6gJ8.png" alt="" loading="lazy"></p><p>集群状态：</p><p><img src="/assets/rocketmq-console3.BNhiRcHC.png" alt="" loading="lazy"></p><h1 id="_4-消息发送样例" tabindex="-1">4. 消息发送样例 <a class="header-anchor" href="#_4-消息发送样例" aria-label="Permalink to “4. 消息发送样例”">​</a></h1><ul><li>导入MQ客户端依赖</li></ul><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.apache.rocketmq&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;rocketmq-client&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;4.4.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>消息发送者步骤分析r</li></ul><div class="language-tex line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tex</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">1.创建消息生产者producer，并制定生产者组名</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2.指定Nameserver地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">3.启动producer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">4.创建消息对象，指定主题Topic、Tag和消息体</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">5.发送消息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">6.关闭生产者producer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>消息消费者步骤分析</li></ul><div class="language-tex line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tex</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">1.创建消费者Consumer，制定消费者组名</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2.指定Nameserver地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">3.订阅主题Topic和Tag</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">4.设置回调函数，处理消息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">5.启动消费者consumer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_4-1-基本样例" tabindex="-1">4.1 基本样例 <a class="header-anchor" href="#_4-1-基本样例" aria-label="Permalink to “4.1 基本样例”">​</a></h2><h3 id="_4-1-1-消息发送" tabindex="-1">4.1.1 消息发送 <a class="header-anchor" href="#_4-1-1-消息发送" aria-label="Permalink to “4.1.1 消息发送”">​</a></h3><h4 id="_1-发送同步消息" tabindex="-1">1）发送同步消息 <a class="header-anchor" href="#_1-发送同步消息" aria-label="Permalink to “1）发送同步消息”">​</a></h4><p>这种可靠性同步地发送方式使用的比较广泛，比如：重要的消息通知，短信通知。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SyncProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 实例化消息生产者Producer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 设置NameServer的地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 启动Producer实例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    	for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	    // 创建消息，并指定Topic，Tag和消息体</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	    Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* Topic */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        	&quot;TagA&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* Tag */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        	(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello RocketMQ &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RemotingHelper.DEFAULT_CHARSET) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* Message body */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        	);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        	// 发送消息到一个Broker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            SendResult sendResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 通过sendResult返回消息是否成功送达</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%s%n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sendResult);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 如果不再发送消息，关闭Producer实例。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="_2-发送异步消息" tabindex="-1">2）发送异步消息 <a class="header-anchor" href="#_2-发送异步消息" aria-label="Permalink to “2）发送异步消息”">​</a></h4><p>异步消息通常用在对响应时间敏感的业务场景，即发送端不能容忍长时间地等待Broker的响应。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AsyncProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 实例化消息生产者Producer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 设置NameServer的地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 启动Producer实例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRetryTimesWhenSendAsyncFailed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    	for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            	// 创建消息，并指定Topic，Tag和消息体</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &quot;OrderID188&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &quot;Hello world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RemotingHelper.DEFAULT_CHARSET));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // SendCallback接收异步返回结果的回调</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SendCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SendResult </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sendResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%-10d OK %s %n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, index,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            sendResult.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMsgId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Throwable </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      	              System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%-10d Exception %s %n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, index, e);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      	              e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            	});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 如果不再发送消息，关闭Producer实例。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="_3-单向发送消息" tabindex="-1">3）单向发送消息 <a class="header-anchor" href="#_3-单向发送消息" aria-label="Permalink to “3）单向发送消息”">​</a></h4><p>这种方式主要用在不特别关心发送结果的场景，例如日志发送。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OnewayProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 实例化消息生产者Producer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 设置NameServer的地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 启动Producer实例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    	for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        	// 创建消息，并指定Topic，Tag和消息体</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        	Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* Topic */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;TagA&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* Tag */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello RocketMQ &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RemotingHelper.DEFAULT_CHARSET) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* Message body */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        	);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        	// 发送单向消息，没有任何返回结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        	producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendOneway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 如果不再发送消息，关闭Producer实例。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_4-1-2-消费消息" tabindex="-1">4.1.2 消费消息 <a class="header-anchor" href="#_4-1-2-消费消息" aria-label="Permalink to “4.1.2 消费消息”">​</a></h3><h4 id="_1-负载均衡模式" tabindex="-1">1）负载均衡模式 <a class="header-anchor" href="#_1-负载均衡模式" aria-label="Permalink to “1）负载均衡模式”">​</a></h4><p>消费者采用负载均衡方式消费消息，多个消费者共同消费队列消息，每个消费者处理的消息不同</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) throws Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 实例化消息生产者,指定组名</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 指定Namesrv地址信息.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 订阅Topic</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //负载均衡模式消费</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setMessageModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MessageModel.CLUSTERING);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 注册回调函数，处理消息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerMessageListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageListenerConcurrently</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consumeMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageExt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                        ConsumeConcurrentlyContext </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%s Receive New Messages: %s %n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                              Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), msgs);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //启动消息者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Consumer Started.%n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="_2-广播模式" tabindex="-1">2）广播模式 <a class="header-anchor" href="#_2-广播模式" aria-label="Permalink to “2）广播模式”">​</a></h4><p>消费者采用广播的方式消费消息，每个消费者消费的消息都是相同的</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) throws Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 实例化消息生产者,指定组名</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 指定Namesrv地址信息.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 订阅Topic</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //广播模式消费</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setMessageModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MessageModel.BROADCASTING);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 注册回调函数，处理消息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerMessageListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageListenerConcurrently</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consumeMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageExt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                        ConsumeConcurrentlyContext </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%s Receive New Messages: %s %n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                              Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), msgs);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //启动消息者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Consumer Started.%n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_4-2-顺序消息" tabindex="-1">4.2 顺序消息 <a class="header-anchor" href="#_4-2-顺序消息" aria-label="Permalink to “4.2 顺序消息”">​</a></h2><p>消息有序指的是可以按照消息的发送顺序来消费(FIFO)。RocketMQ可以严格的保证消息有序，可以分为分区有序或者全局有序。</p><p>顺序消费的原理解析，在默认的情况下消息发送会采取Round Robin轮询方式把消息发送到不同的queue(分区队列)；而消费消息的时候从多个queue上拉取消息，这种情况发送和消费是不能保证顺序。但是如果控制发送的顺序消息只依次发送到同一个queue中，消费的时候只从这个queue上依次拉取，则就保证了顺序。当发送和消费参与的queue只有一个，则是全局有序；如果多个queue参与，则为分区有序，即相对每个queue，消息都是有序的。</p><p>下面用订单进行分区有序的示例。一个订单的顺序流程是：创建、付款、推送、完成。订单号相同的消息会被先后发送到同一个队列中，消费时，同一个OrderId获取到的肯定是同一个队列。</p><h3 id="_4-2-1-顺序消息生产" tabindex="-1">4.2.1 顺序消息生产 <a class="header-anchor" href="#_4-2-1-顺序消息生产" aria-label="Permalink to “4.2.1 顺序消息生产”">​</a></h3><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* Producer，发送顺序消息</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Producer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] tags </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       // 订单列表</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; orderList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Producer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">buildOrders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       Date date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       SimpleDateFormat sdf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SimpleDateFormat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       String dateStr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sdf.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(date);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           // 加个时间前缀</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           String body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dateStr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot; Hello RocketMQ &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tags[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tags.length], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;KEY&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i, body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           SendResult sendResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageQueueSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MessageQueue </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mqs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Message </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   Long id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Long) arg;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//根据订单id选择发送queue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                   long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mqs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                   return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mqs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) index);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }, orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//订单id</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SendResult status:%s, queueId:%d, body:%s&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               sendResult.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSendStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               sendResult.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessageQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getQueueId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               body));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * 订单的步骤</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderId;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String desc;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> long</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderId;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">long</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> orderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.orderId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderId;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> desc;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">desc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.desc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> desc;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;OrderStep{&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               &quot;orderId=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               &quot;, desc=&#39;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> desc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               &#39;}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * 生成模拟订单数据</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">buildOrders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; orderList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ArrayList&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       OrderStep orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111039L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;创建&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111065L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;创建&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111039L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;付款&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103117235L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;创建&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111065L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;付款&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103117235L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;付款&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111065L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;完成&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111039L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;推送&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103117235L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;完成&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15103111039L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderDemo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;完成&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       orderList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDemo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderList;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br></div></div><h3 id="_4-2-2-顺序消费消息" tabindex="-1">4.2.2 顺序消费消息 <a class="header-anchor" href="#_4-2-2-顺序消费消息" aria-label="Permalink to “4.2.2 顺序消费消息”">​</a></h3><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 顺序消息消费，带事务方式（应用可控制Offset什么时候提交）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ConsumerInOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">           DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name_3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        * 设置Consumer第一次启动是从队列头部开始消费还是队列尾部开始消费&lt;br&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        * 如果非第一次启动，那么按照上次消费的位置继续消费</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setConsumeFromWhere</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA || TagC || TagD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerMessageListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageListenerOrderly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           Random random </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Random</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeOrderlyStatus </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consumeMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageExt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ConsumeOrderlyContext </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAutoCommit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (MessageExt msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> msgs) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   // 可以看到每个queue有唯一的consume线程来消费, 订单对每个queue(分区)有序</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;consumeThread=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;queueId=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getQueueId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;, content:&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   //模拟业务逻辑处理中...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   TimeUnit.SECONDS.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(random.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nextInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeOrderlyStatus.SUCCESS;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Consumer Started.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h2 id="_4-3-延时消息" tabindex="-1">4.3 延时消息 <a class="header-anchor" href="#_4-3-延时消息" aria-label="Permalink to “4.3 延时消息”">​</a></h2><p>比如电商里，提交了一个订单就可以发送一个延时消息，1h后去检查这个订单的状态，如果还是未付款就取消订单释放库存。</p><h3 id="_4-3-1-启动消息消费者" tabindex="-1">4.3.1 启动消息消费者 <a class="header-anchor" href="#_4-3-1-启动消息消费者" aria-label="Permalink to “4.3.1 启动消息消费者”">​</a></h3><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ScheduledMessageConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 实例化消费者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ExampleConsumer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 订阅Topics</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TestTopic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 注册消息监听者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerMessageListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageListenerConcurrently</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consumeMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageExt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">messages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ConsumeConcurrentlyContext </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (MessageExt message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  // Print approximate delay time period</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Receive message[msgId=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMsgId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;] &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentTimeMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStoreTimestamp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ms later&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 启动消费者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_4-3-2-发送延时消息" tabindex="-1">4.3.2 发送延时消息 <a class="header-anchor" href="#_4-3-2-发送延时消息" aria-label="Permalink to “4.3.2 发送延时消息”">​</a></h3><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ScheduledMessageProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 实例化一个生产者来产生延时消息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ExampleProducerGroup&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 启动生产者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> totalMessagesToSend </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> totalMessagesToSend; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          Message message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TestTopic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello scheduled message &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // 设置延时等级3,这个消息将在10s之后发送(现在只支持固定的几个时间,详看delayTimeLevel)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDelayTimeLevel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // 发送消息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       // 关闭生产者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>###4.3.3 验证</p><p>您将会看到消息的消费比存储时间晚10秒</p><h3 id="_4-3-4-使用限制" tabindex="-1">4.3.4 使用限制 <a class="header-anchor" href="#_4-3-4-使用限制" aria-label="Permalink to “4.3.4 使用限制”">​</a></h3><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// org/apache/rocketmq/store/config/MessageStoreConfig.java</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String messageDelayLevel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>现在RocketMq并不支持任意时间的延时，需要设置几个固定的延时等级，从1s到2h分别对应着等级1到18</p><h2 id="_4-4-批量消息" tabindex="-1">4.4 批量消息 <a class="header-anchor" href="#_4-4-批量消息" aria-label="Permalink to “4.4 批量消息”">​</a></h2><p>批量发送消息能显著提高传递小消息的性能。限制是这些批量消息应该有相同的topic，相同的waitStoreMsgOK，而且不能是延时消息。此外，这一批消息的总大小不应超过4MB。</p><h3 id="_4-4-1-发送批量消息" tabindex="-1">4.4.1 发送批量消息 <a class="header-anchor" href="#_4-4-1-发送批量消息" aria-label="Permalink to “4.4.1 发送批量消息”">​</a></h3><p>如果您每次只发送不超过4MB的消息，则很容易使用批处理，样例如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String topic </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;BatchTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(topic, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OrderID001&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world 0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(topic, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OrderID002&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world 1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(topic, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OrderID003&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world 2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(messages);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   //处理error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>如果消息的总长度可能大于4MB时，这时候最好把消息进行分割</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ListSplitter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SIZE_LIMIT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; messages;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currIndex;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ListSplitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">messages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nextIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currIndex;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> totalSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (; nextIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); nextIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           Message message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nextIndex);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTopic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().length;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; properties </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Map.Entry&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; entry </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> properties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">entrySet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 增加日志的开销20字节</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SIZE_LIMIT) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               //单个消息超过了最大的限制</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               //忽略,否则会阻塞分裂的进程</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (nextIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  //假如下一个子列表没有元素,则添加这个子列表然后退出循环,否则只是退出循环</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  nextIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (tmpSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> totalSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SIZE_LIMIT) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">               break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               totalSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tmpSize;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; subList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(currIndex, nextIndex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       currIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nextIndex;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> subList;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//把大的消息分裂成若干个小的消息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ListSplitter splitter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ListSplitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(messages);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (splitter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;  listItem </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> splitter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(listItem);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      //处理error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h2 id="_4-5-过滤消息" tabindex="-1">4.5 过滤消息 <a class="header-anchor" href="#_4-5-过滤消息" aria-label="Permalink to “4.5 过滤消息”">​</a></h2><p>在大多数情况下，TAG是一个简单而有用的设计，其可以来选择您想要的消息。例如：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CID_EXAMPLE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TOPIC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TAGA || TAGB || TAGC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>消费者将接收包含TAGA或TAGB或TAGC的消息。但是限制是一个消息只能有一个标签，这对于复杂的场景可能不起作用。在这种情况下，可以使用SQL表达式筛选消息。SQL特性可以通过发送消息时的属性来进行计算。在RocketMQ定义的语法下，可以实现一些简单的逻辑。下面是一个例子：</p><div class="language-te line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">te</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>------------</span></span>
<span class="line"><span>| message  |</span></span>
<span class="line"><span>|----------|  a &gt; 5 AND b = &#39;abc&#39;</span></span>
<span class="line"><span>| a = 10   |  --------------------&gt; Gotten</span></span>
<span class="line"><span>| b = &#39;abc&#39;|</span></span>
<span class="line"><span>| c = true |</span></span>
<span class="line"><span>------------</span></span>
<span class="line"><span>------------</span></span>
<span class="line"><span>| message  |</span></span>
<span class="line"><span>|----------|   a &gt; 5 AND b = &#39;abc&#39;</span></span>
<span class="line"><span>| a = 1    |  --------------------&gt; Missed</span></span>
<span class="line"><span>| b = &#39;abc&#39;|</span></span>
<span class="line"><span>| c = true |</span></span>
<span class="line"><span>------------</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_4-5-1-sql基本语法" tabindex="-1">4.5.1 SQL基本语法 <a class="header-anchor" href="#_4-5-1-sql基本语法" aria-label="Permalink to “4.5.1 SQL基本语法”">​</a></h3><p>RocketMQ只定义了一些基本语法来支持这个特性。你也可以很容易地扩展它。</p><ul><li>数值比较，比如：<strong>&gt;，&gt;=，&lt;，&lt;=，BETWEEN，=；</strong></li><li>字符比较，比如：<strong>=，&lt;&gt;，IN；</strong></li><li><strong>IS NULL</strong> 或者 <strong>IS NOT NULL；</strong></li><li>逻辑符号 <strong>AND，OR，NOT；</strong></li></ul><p>常量支持类型为：</p><ul><li>数值，比如：<strong>123，3.1415；</strong></li><li>字符，比如：<strong>&#39;abc&#39;，必须用单引号包裹起来；</strong></li><li><strong>NULL</strong>，特殊的常量</li><li>布尔值，<strong>TRUE</strong> 或 <strong>FALSE</strong></li></ul><p>只有使用push模式的消费者才能用使用SQL92标准的sql语句，接口如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(finalString topic, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MessageSelector messageSelector)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_4-5-2-消息生产者" tabindex="-1">4.5.2 消息生产者 <a class="header-anchor" href="#_4-5-2-消息生产者" aria-label="Permalink to “4.5.2 消息生产者”">​</a></h3><p>发送消息时，你能通过<code>putUserProperty</code>来设置消息的属性</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DefaultMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   tag,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello RocketMQ &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RemotingHelper.DEFAULT_CHARSET)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置一些属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">putUserProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">valueOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SendResult sendResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-5-3-消息消费者" tabindex="-1">4.5.3 消息消费者 <a class="header-anchor" href="#_4-5-3-消息消费者" aria-label="Permalink to “4.5.3 消息消费者”">​</a></h3><p>用MessageSelector.bySql来使用sql筛选消息</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DefaultMQPushConsumer consumer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultMQPushConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;please_rename_unique_group_name_4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 只有订阅的消息有这个属性a, a &gt;=0 and a &lt;= 3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TopicTest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, MessageSelector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bySql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a between 0 and 3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerMessageListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageListenerConcurrently</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consumeMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MessageExt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ConsumeConcurrentlyContext </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_4-6-事务消息" tabindex="-1">4.6 事务消息 <a class="header-anchor" href="#_4-6-事务消息" aria-label="Permalink to “4.6 事务消息”">​</a></h2><p>###4.6.1 流程分析</p><p><img src="/assets/%E4%BA%8B%E5%8A%A1%E6%B6%88%E6%81%AF.DB3KWzi-.png" alt="" loading="lazy"></p><p>上图说明了事务消息的大致方案，其中分为两个流程：正常事务消息的发送及提交、事务消息的补偿流程。</p><p>####1）事务消息发送及提交</p><p>(1) 发送消息（half消息）。</p><p>(2) 服务端响应消息写入结果。</p><p>(3) 根据发送结果执行本地事务（如果写入失败，此时half消息对业务不可见，本地逻辑不执行）。</p><p>(4) 根据本地事务状态执行Commit或者Rollback（Commit操作生成消息索引，消息对消费者可见）</p><h4 id="_2-事务补偿" tabindex="-1">2）事务补偿 <a class="header-anchor" href="#_2-事务补偿" aria-label="Permalink to “2）事务补偿”">​</a></h4><p>(1) 对没有Commit/Rollback的事务消息（pending状态的消息），从服务端发起一次“回查”</p><p>(2) Producer收到回查消息，检查回查消息对应的本地事务的状态</p><p>(3) 根据本地事务状态，重新Commit或者Rollback</p><p>其中，补偿阶段用于解决消息Commit或者Rollback发生超时或者失败的情况。</p><h4 id="_3-事务消息状态" tabindex="-1">3）事务消息状态 <a class="header-anchor" href="#_3-事务消息状态" aria-label="Permalink to “3）事务消息状态”">​</a></h4><p>事务消息共有三种状态，提交状态、回滚状态、中间状态：</p><ul><li>TransactionStatus.CommitTransaction: 提交事务，它允许消费者消费此消息。</li><li>TransactionStatus.RollbackTransaction: 回滚事务，它代表该消息将被删除，不允许被消费。</li><li>TransactionStatus.Unknown: 中间状态，它代表需要检查消息队列来确定状态。</li></ul><p>###4.6.1 发送事务消息</p><h4 id="_1-创建事务性生产者" tabindex="-1">1) 创建事务性生产者 <a class="header-anchor" href="#_1-创建事务性生产者" aria-label="Permalink to “1) 创建事务性生产者”">​</a></h4><p>使用 <code>TransactionMQProducer</code>类创建生产者，并指定唯一的 <code>ProducerGroup</code>，就可以设置自定义线程池来处理这些检查请求。执行本地事务后、需要根据执行结果对消息队列进行回复。回传的事务状态在请参考前一节。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Producer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MQClientException, InterruptedException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //创建事务监听器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        TransactionListener transactionListener </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TransactionListenerImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //创建消息生产者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        TransactionMQProducer producer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TransactionMQProducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group6&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNamesrvAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;192.168.25.135:9876;192.168.25.138:9876&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //生产者这是监听器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTransactionListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transactionListener);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //启动消息生产者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] tags </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                Message msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TransactionTopic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tags[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tags.length], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;KEY&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello RocketMQ &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RemotingHelper.DEFAULT_CHARSET));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                SendResult sendResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> producer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendMessageInTransaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%s%n&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sendResult);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                TimeUnit.SECONDS.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (MQClientException | UnsupportedEncodingException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //producer.shutdown();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="_2-实现事务的监听接口" tabindex="-1">2）实现事务的监听接口 <a class="header-anchor" href="#_2-实现事务的监听接口" aria-label="Permalink to “2）实现事务的监听接口”">​</a></h4><p>当发送半消息成功时，我们使用 <code>executeLocalTransaction</code> 方法来执行本地事务。它返回前一节中提到的三个事务状态之一。<code>checkLocalTranscation</code> 方法用于检查本地事务状态，并回应消息队列的检查请求。它也是返回前一节中提到的三个事务状态之一。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TransactionListenerImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TransactionListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">executeLocalTransaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Message </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;执行本地事务&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (StringUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState.COMMIT_MESSAGE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (StringUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TagB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState.ROLLBACK_MESSAGE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState.UNKNOW;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkLocalTransaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MessageExt </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MQ检查消息Tag【&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;】的本地事务执行结果&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalTransactionState.COMMIT_MESSAGE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_4-6-2-使用限制" tabindex="-1">4.6.2 使用限制 <a class="header-anchor" href="#_4-6-2-使用限制" aria-label="Permalink to “4.6.2 使用限制”">​</a></h3><ol><li>事务消息不支持延时消息和批量消息。</li><li>为了避免单个消息被检查太多次而导致半队列消息累积，我们默认将单个消息的检查次数限制为 15 次，但是用户可以通过 Broker 配置文件的 <code>transactionCheckMax</code>参数来修改此限制。如果已经检查某条消息超过 N 次的话（ N = <code>transactionCheckMax</code> ） 则 Broker 将丢弃此消息，并在默认情况下同时打印错误日志。用户可以通过重写 <code>AbstractTransactionCheckListener</code> 类来修改这个行为。</li><li>事务消息将在 Broker 配置文件中的参数 transactionMsgTimeout 这样的特定时间长度之后被检查。当发送事务消息时，用户还可以通过设置用户属性 CHECK_IMMUNITY_TIME_IN_SECONDS 来改变这个限制，该参数优先于 <code>transactionMsgTimeout</code> 参数。</li><li>事务性消息可能不止一次被检查或消费。</li><li>提交给用户的目标主题消息可能会失败，目前这依日志的记录而定。它的高可用性通过 RocketMQ 本身的高可用性机制来保证，如果希望确保事务消息不丢失、并且事务完整性得到保证，建议使用同步的双重写入机制。</li><li>事务消息的生产者 ID 不能与其他类型消息的生产者 ID 共享。与其他类型的消息不同，事务消息允许反向查询、MQ服务器能通过它们的生产者 ID 查询到消费者。</li></ol></div></div></main><footer class="VPDocFooter" data-v-7011f0d8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><!----><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>最后更新于: <time datetime="2025-08-21T18:55:17.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><!----></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/Java/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/1%E6%A6%82%E5%BF%B5/%E7%BC%93%E5%AD%98.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>下一页</span><span class="title" data-v-e257564d>缓存概述</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-1df9f90f data-v-c3855bb3><div class="container" data-v-c3855bb3><p class="message" data-v-c3855bb3>Released under the MIT License.</p><p class="copyright" data-v-c3855bb3>Copyright © 2019-2025 present Xu XiaoLong</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"D6EwiumO\",\"daily_博客文档_github_pages加速.md\":\"B6mDZeF2\",\"daily_博客文档_github个人主页改造.md\":\"DrWq5Wp9\",\"daily_博客文档_hexo博客搭建.md\":\"DUZemS9U\",\"daily_博客文档_vitpress_0_vitpress博客搭建.md\":\"DOXiLYHh\",\"daily_博客文档_vitpress_1_config配置.md\":\"8V7m2RkC\",\"daily_博客文档_vitpress_2_页面.md\":\"Bdd232Az\",\"daily_博客文档_vitpress_3_frontmatter.md\":\"GnwCUB5f\",\"daily_博客文档_vitpress_4_markdown.md\":\"a30AXtub\",\"daily_博客文档_vitpress_5_vue组件.md\":\"DRXNFCpK\",\"daily_博客文档_vitpress_6_样式美化.md\":\"NG30Bz73\",\"daily_博客文档_vitpress_7_插件.md\":\"BLHQIkIf\",\"daily_博客文档_vitpress_8_静态部署.md\":\"DybeCWAU\",\"daily_博客文档_vitpress_teek主题美化.md\":\"DY_7YsN7\",\"daily_博客文档_vuepressreco博客搭建.md\":\"C5lK190h\",\"daily_博客文档_vuepress博客搭建.md\":\"qYUxqgkb\",\"daily_博客文档_博客园美化.md\":\"voczQ4ig\",\"daily_开发文档_pdf转换.md\":\"Osk5YZ_L\",\"daily_开发文档_qt开发.md\":\"VFo0SFop\",\"daily_开发文档_rabbitmqassistant使用.md\":\"BfCs4viq\",\"daily_开发文档_基于taro开发小程序.md\":\"Cvowgupu\",\"daily_开发文档_扫码登录.md\":\"DRrBTlHw\",\"daily_开发文档_抖音小程序开发.md\":\"UXB5267M\",\"daily_开源项目_0_开源项目.md\":\"BvWDwWHi\",\"daily_开源项目_1_文件上传x-spring-file-storage.md\":\"BpBh7p5F\",\"daily_开源项目_2_规则引擎liteflow.md\":\"A7pPTkIF\",\"daily_开源项目_3_flowlong飞龙工作流.md\":\"60Ss87T9\",\"daily_开源项目_dataease可视化分析.md\":\"BYWm5bwk\",\"daily_日常笔记_go语言学习.md\":\"CnrgEVnI\",\"daily_日常笔记_idea_linux远程开发.md\":\"Cdwyte5o\",\"daily_日常笔记_markdown进阶之路.md\":\"DBB8T40L\",\"daily_日常笔记_vim操作技巧.md\":\"BezeLvpf\",\"daily_日常笔记_加密算法.md\":\"DV9sakmE\",\"daily_日常笔记_工具清单.md\":\"DWbXSC6O\",\"daily_日常笔记_玩客云.md\":\"CI2WX3e0\",\"daily_日常笔记_等保整改.md\":\"DaexWfbF\",\"daily_软考中级软件设计师学习笔记_00_软件设计师考点.md\":\"BeDL3lgE\",\"daily_软考中级软件设计师学习笔记_01_计算机组成与体系结构.md\":\"4g8MmqYv\",\"daily_软考中级软件设计师学习笔记_02_程序设计语言基础知识.md\":\"BwqKElfZ\",\"daily_软考中级软件设计师学习笔记_03_数据结构.md\":\"DdPr-YFf\",\"daily_软考中级软件设计师学习笔记_04_操作系统知识.md\":\"CpbNKG1q\",\"daily_软考中级软件设计师学习笔记_05_软件工程基础知识.md\":\"tPuT0jrU\",\"daily_软考中级软件设计师学习笔记_06_结构化开发方法.md\":\"ClF21S7s\",\"daily_软考中级软件设计师学习笔记_07_面向对象技术.md\":\"14-sbpTh\",\"daily_软考中级软件设计师学习笔记_08_算法设计与分析.md\":\"CZnKn9RZ\",\"daily_软考中级软件设计师学习笔记_09_数据库技术基础.md\":\"LSNTnwBp\",\"daily_软考中级软件设计师学习笔记_10_网络与信息安全基础知识.md\":\"CygtgqfH\",\"daily_软考中级软件设计师学习笔记_11_标准化和软件知识产权基础知识.md\":\"QkWn8Me1\",\"daily_软考中级软件设计师学习笔记_12_软件系统分析与设计.md\":\"m-gD0q3b\",\"daily_面试专栏_微服务相关_1_微服务.md\":\"iYeNJs1t\",\"daily_面试专栏_面试专栏.md\":\"BHosvk7l\",\"daily_高等数学_01_高等数学预备知识.md\":\"Dzz49WUm\",\"daily_高等数学_02_数列极限.md\":\"DdPa0svS\",\"daily_高等数学_03_函数极限与连续性.md\":\"C2A1gH4a\",\"daily_高等数学_04_一元函数微分学的概念与计算.md\":\"C58Mq4eX\",\"daily_高等数学_05_一元函数微分学的几何应用.md\":\"DQ8272gW\",\"daily_高等数学_06_中值定理.md\":\"VhjG8ea3\",\"daily_高等数学_07_零点问题与微分不等式.md\":\"cM9uTdyg\",\"index.md\":\"B5xAle6k\",\"index_default.md\":\"CJGniSNB\",\"java_java开发技巧_idea_idea使用技巧.md\":\"KEWcy5kJ\",\"java_java开发技巧_idea_idea插件.md\":\"DDaKz2hb\",\"java_java开发技巧_其他_1_自定义注解.md\":\"CHQodc3p\",\"java_java开发技巧_其他_2_语法糖.md\":\"bE53xRpq\",\"java_java开发技巧_其他_3_反射reflection.md\":\"CeawpsO1\",\"java_java开发技巧_其他_4_替换jar包中单个class文件.md\":\"zqp0wl6H\",\"java_java开发技巧_函数式编程_0_函数式编程概念.md\":\"Bkd4mMsE\",\"java_java开发技巧_函数式编程_1_lambda表达式.md\":\"DomtwRX4\",\"java_java开发技巧_函数式编程_2_stream流.md\":\"DWjRaNfz\",\"java_java开发技巧_函数式编程_3_函数式接口.md\":\"CJYwvtgT\",\"java_java开发技巧_函数式编程_4_方法引用.md\":\"D_ujS3hu\",\"java_java开发技巧_高效编程_1_资源关闭优化方案.md\":\"DBMcxJUl\",\"java_java开发技巧_高效编程_2_jdk8新特性optional容器类.md\":\"oL-J9-Uq\",\"java_java开发技巧_高效编程_3_guava工具包常用api.md\":\"5foWTHlP\",\"java_jvm性能调优_jvm性能监控与调优_0_性能调优概述.md\":\"BzdDapOm\",\"java_jvm性能调优_jvm性能监控与调优_1_jvm监控与诊断工具之命令行.md\":\"OM8_f7bX\",\"java_jvm性能调优_jvm性能监控与调优_2_jvm监控与诊断工具之gui.md\":\"BMOc5ymV\",\"java_jvm性能调优_jvm性能监控与调优_3_jvm运行时参数.md\":\"Dt5IV7Q8\",\"java_jvm性能调优_jvm性能监控与调优_4_分析gc日志.md\":\"B8Axe8Rw\",\"java_jvm性能调优_jvm性能监控与调优_5_内存泄露几种情况及案例分析.md\":\"DsqO-okp\",\"java_jvm性能调优_jvm性能监控与调优_arthas.md\":\"27WG3BbU\",\"java_jvm性能调优_jvm性能监控与调优_oom分类及排查.md\":\"B6kmtfJg\",\"java_jvm性能调优_jvm性能监控与调优_性能分析利器visualvm的使用.md\":\"DDeyku0Z\",\"java_jvm性能调优_jvm性能监控与调优_找出某个java进程中最耗费cpu的java线程.md\":\"hUeY3tl2\",\"java_jvm性能调优_jvm性能监控与调优_接口超时排查.md\":\"Bsl-08V2\",\"java_jvm性能调优_jvm概念_0_jvm体系结构.md\":\"DjXI5D_6\",\"java_jvm性能调优_jvm概念_1_类加载器.md\":\"D4An1zTa\",\"java_jvm性能调优_jvm概念_2_native、方法区和寄存器.md\":\"d-VI_VT1\",\"java_jvm性能调优_jvm概念_3_栈.md\":\"CtTmATt4\",\"java_jvm性能调优_jvm概念_4_堆.md\":\"C0ajiYzu\",\"java_jvm性能调优_jvm概念_5_gc垃圾回收.md\":\"DUd8dRbk\",\"java_jvm性能调优_jvm概念_6_jmm内存模型.md\":\"CHzRjf6l\",\"java_jvm性能调优_jvm概念_java 类加载机制.md\":\"LUyvJQBr\",\"java_jvm性能调优_jvm概念_jvm.md\":\"C_y_cEM0\",\"java_jvm性能调优_jvm概念_jvm快速入门篇.md\":\"Du1sBsAv\",\"java_中间件_logstash.md\":\"Cjn_Ck0h\",\"java_容器_docker_0_docker介绍及使用.md\":\"-xUHu-TS\",\"java_容器_docker_1_docker常用命令合集.md\":\"CdP3PhXW\",\"java_容器_docker_2_linux安装docker.md\":\"MRdUdYTE\",\"java_容器_docker_3_图形化工具portainer.md\":\"Dt1WJ7uI\",\"java_容器_docker_4_compose脚本.md\":\"Bt_xQ2Gg\",\"java_容器_docker_5_docker部署jar包.md\":\"BOAN1Idn\",\"java_容器_docker_镜像安装-docker安装graylog.md\":\"DQ18vhXQ\",\"java_容器_docker_镜像安装-docker安装mongodb.md\":\"CtYl65v8\",\"java_容器_docker_镜像安装-docker安装mysql.md\":\"B0Dh8Ymb\",\"java_容器_docker_镜像安装-docker安装nginx.md\":\"DL_EIf6e\",\"java_容器_docker_镜像安装-docker安装redis.md\":\"Cjtou3g9\",\"java_容器_jenkins_gitlab安装.md\":\"aYxUqkvK\",\"java_容器_jenkins_jenkins安装.md\":\"fCC0O2bY\",\"java_容器_jenkins_jenkins实战之自动化配置.md\":\"zhmPL0Tp\",\"java_容器_k8s_kubernetes.md\":\"C9_UDBm_\",\"java_并发编程_hashmap.md\":\"BNXRRyEZ\",\"java_并发编程_juc.md\":\"DBSDmjGE\",\"java_微服务专栏_nacos_0_nacos安装.md\":\"0_VrDrXa\",\"java_微服务专栏_nacos_1_nacos注册中心.md\":\"Cnifsrvf\",\"java_微服务专栏_nacos_2_nacos配置管理.md\":\"DGCOBJLc\",\"java_微服务专栏_nacos_3_nacos集群搭建.md\":\"Dl7bdrNm\",\"java_微服务专栏_nacos_4_nacos动态读取xml日志配置.md\":\"DLwwaaCc\",\"java_微服务专栏_nacos_nacos源码分析之configservice.md\":\"DmXCbnrG\",\"java_微服务专栏_quarkus_quarkus.md\":\"C24cCw8X\",\"java_微服务专栏_solon_solon.md\":\"DuDnVvog\",\"java_微服务专栏_springcloud_1_springcloud简介.md\":\"lcJcY1Cn\",\"java_微服务专栏_springcloud_2_springcloud与restful.md\":\"VrSgtsFX\",\"java_微服务专栏_springcloud_3_eureka注册服务.md\":\"D8Te2sdX\",\"java_微服务专栏_springcloud_4_springcloud服务组件.md\":\"Ik2y_eZK\",\"java_微服务专栏_springcloud_5_springcloudconfig.md\":\"DORAq6Rc\",\"java_微服务专栏_springcloud_6_springcloudstream.md\":\"BIHbM1hr\",\"java_微服务专栏_springcloud_7_springcloudsleuth.md\":\"DqDJ7JsK\",\"java_微服务专栏_服务网关gateway_gateway服务网关.md\":\"CXwUao-i\",\"java_微服务专栏_流控组件sentinel_微服务保护.md\":\"BVT0VfLZ\",\"java_微服务专栏_消息总线bus_readme.md\":\"CG1fyLbE\",\"java_微服务专栏_远程调用feign_feign远程调用.md\":\"DJ1dSpp3\",\"java_数据结构_排序算法.md\":\"Dn5LAFYv\",\"java_数据结构_查找算法.md\":\"Bf9-iylg\",\"java_架构设计_分布式_分布式事务_0_分布式事务概念.md\":\"pDfU0_uk\",\"java_架构设计_分布式_分布式事务_分布式事务seata.md\":\"2Re0sH0X\",\"java_架构设计_分布式_分布式事务_分布式事务框架tx-lcn.md\":\"9LXkEy7-\",\"java_架构设计_分布式_分布式任务调度_分布式任务调度.md\":\"Dar6KM7E\",\"java_架构设计_分布式_分布式搜索_elasticsearch进阶功能.md\":\"CfVpmCG3\",\"java_架构设计_分布式_分布式搜索_分布式搜索引擎elasticsearch01.md\":\"BcAEbqWz\",\"java_架构设计_分布式_分布式搜索_分布式搜索引擎elasticsearch02.md\":\"8H7mn_Jd\",\"java_架构设计_分布式_分布式搜索_分布式搜索引擎elasticsearch03.md\":\"W8BQ8zAZ\",\"java_架构设计_分布式_分布式日志收集_0_elasticstack概述.md\":\"SijnuAtD\",\"java_架构设计_分布式_分布式日志收集_1_elasticsearch安装.md\":\"Dgm--Vxb\",\"java_架构设计_分布式_分布式日志收集_2_logstash使用.md\":\"BYJZT8JD\",\"java_架构设计_分布式_分布式日志收集_3_springboot集成elk.md\":\"aWR6KmTP\",\"java_架构设计_分布式_分布式日志收集_4_efk篇之filebeat使用.md\":\"BDwkgVjv\",\"java_架构设计_分布式_分布式日志收集_5_springboot集成graylog.md\":\"Ds5_6iqp\",\"java_架构设计_分布式_分布式消息队列_1概念_消息队列.md\":\"CQ2N2foO\",\"java_架构设计_分布式_分布式消息队列_rabbitmq_1_rabbitmq安装.md\":\"B81UkC03\",\"java_架构设计_分布式_分布式消息队列_rabbitmq_2_rabbitmq.md\":\"C9CvqAni\",\"java_架构设计_分布式_分布式消息队列_rabbitmq_3_rabbitmq高级.md\":\"CT0hnXhw\",\"java_架构设计_分布式_分布式消息队列_rabbitmq_4_rabbitmq延时队列.md\":\"B43xhhn1\",\"java_架构设计_分布式_分布式消息队列_rabbitmq_5_rabbitmq日志追踪.md\":\"DuPmSJWk\",\"java_架构设计_分布式_分布式消息队列_rocketmq_rocketmq-01.md\":\"elFaFyE0\",\"java_架构设计_分布式_分布式消息队列_rocketmq_rocketmq-02.md\":\"KfjKBQCC\",\"java_架构设计_分布式_分布式消息队列_rocketmq_rocketmq-03.md\":\"D8JNZJgn\",\"java_架构设计_分布式_分布式监控_0_监控.md\":\"D5OVfR52\",\"java_架构设计_分布式_分布式监控_cat.md\":\"BmZ07ZAm\",\"java_架构设计_分布式_分布式监控_pinpoint.md\":\"D3AWHitN\",\"java_架构设计_分布式_分布式监控_prometheus.md\":\"1hnKIozE\",\"java_架构设计_分布式_分布式监控_skywalking.md\":\"DC1QLxUL\",\"java_架构设计_分布式_分布式监控_springbootadmin.md\":\"CVk3gDUL\",\"java_架构设计_分布式_分布式缓存_1概念_缓存.md\":\"CQRlACM1\",\"java_架构设计_分布式_分布式缓存_cache_0_redis.md\":\"oFu1arvG\",\"java_架构设计_分布式_分布式缓存_cache_1_redisstack介绍.md\":\"ChTnME4o\",\"java_架构设计_分布式_分布式缓存_cache_2_redisinsight部署使用.md\":\"aD7s-sxe\",\"java_架构设计_分布式_分布式缓存_cache_3_布隆过滤器.md\":\"DCJgN8dU\",\"java_架构设计_高可用_0_概述_0_高可用架构设计概述.md\":\"BmXwJGn8\",\"java_架构设计_高可用_降级熔断_readme.md\":\"fuZtV-Az\",\"java_架构设计_高可用_限流_系统优化之限流.md\":\"DuBkRdhc\",\"java_架构设计_高并发_数据库_readme.md\":\"DEpXnmDw\",\"java_架构设计_高并发_缓存_readme.md\":\"CU5JOZNR\",\"java_架构设计_高并发_负载均衡_readme.md\":\"BzTGkfTU\",\"java_系统优化_性能优化_1_rxjava响应式编程.md\":\"BpIZviad\",\"java_系统优化_性能优化_2_实时通讯方案.md\":\"P41KddDs\",\"java_系统优化_性能优化_3_缓存.md\":\"DVgebajD\",\"java_系统优化_性能优化_4_分库分表实战.md\":\"DaCbhH_u\",\"java_系统优化_性能优化_5_mysql hints.md\":\"ZDXtUm-j\",\"java_系统优化_系统优化_1_幂等设计.md\":\"sWVfwsL0\",\"java_系统优化_系统优化_2_线程池隔离.md\":\"Dos3KTAv\",\"java_系统优化_系统优化_3_api签名认证.md\":\"CA7BfxsP\",\"java_系统优化_系统优化_4_sdk封装.md\":\"D-b00HKu\",\"java_系统优化_系统优化_5_平台智能化.md\":\"DIvc3ZAW\",\"java_解决方案_多租户_多租户.md\":\"CeK4UqFy\",\"java_解决方案_接口设计_1_接口幂等.md\":\"ChmGn5AU\",\"java_解决方案_接口设计_2_接口加密.md\":\"B33XEF47\",\"java_解决方案_接口设计_3_接口限流.md\":\"Df8cNqiP\",\"java_解决方案_接口设计_4_接口优化.md\":\"DvY63_OE\",\"java_解决方案_支付解决方案_支付宝支付api对接指南_1_商家基本信息获取.md\":\"BY5Hd5YF\",\"java_解决方案_支付解决方案_支付宝支付api对接指南_2_支付宝支付环境搭建及配置.md\":\"B4Q0kGcu\",\"java_解决方案_支付解决方案_支付宝支付api对接指南_3_支付宝支付请求工具类封装.md\":\"DA_MWdDm\",\"java_解决方案_支付解决方案_支付宝支付api对接指南_4_支付宝支付成功回调通知.md\":\"DIOCS2Pf\",\"java_解决方案_数据同步_0_数据同步.md\":\"DMSRIRah\",\"java_解决方案_数据同步_1_canal.md\":\"DSsLpbiw\",\"java_解决方案_数据同步_2_flink-cdc.md\":\"D0-n6fVi\",\"java_解决方案_数据同步_3_seatunnel.md\":\"DNgBvDz0\",\"java_解决方案_数据同步_4_dolphinscheduler.md\":\"DorQkqrD\",\"java_解决方案_数据同步_5_datax.md\":\"Quwi0dhH\",\"java_解决方案_秒杀_秒杀.md\":\"CDg0utsA\",\"java_设计模式_1基本概念_设计模式.md\":\"W9yj1-x-\",\"java_设计模式_创建型_1.md\":\"C5IunSc7\",\"java_设计模式_结构型_1.md\":\"DQQ0lW5M\",\"java_设计模式_行为型_16_strategy.md\":\"BqgUEL98\",\"linux_linux安装软件_linux下安装graylog.md\":\"D-LIiLFp\",\"linux_linux安装软件_linux下安装java.md\":\"CMEsAfwD\",\"linux_linux安装软件_linux下安装tomcat.md\":\"GHqfZFqk\",\"linux_linux安装软件_linux安装mongodb.md\":\"QlaOiXmE\",\"linux_linux安装软件_linux安装mysql.md\":\"DBBBqA9k\",\"linux_nginx_0_nginx快速入门.md\":\"CsFD00_j\",\"linux_nginx_1_linux安装nginx.md\":\"CfvpOgFK\",\"linux_nginx_2_nginx常用配置.md\":\"sSwXCcOV\",\"linux_nginx_3_nginx路由匹配.md\":\"Cr620GPk\",\"linux_nginx_4_nginx负载均衡.md\":\"Cv1h-amI\",\"linux_nginx_5_跨域配置与防盗链.md\":\"C7WnG53G\",\"linux_nginx_kong.md\":\"MPQX-Ux-\",\"linux_openeuler_1_openeuler.md\":\"BpAL2BU9\",\"linux_openeuler_2_openeuler安装docker.md\":\"C2Uyfi-X\",\"linux_openeuler_3_cockpit服务器管理工具.md\":\"CMACTVoJ\",\"linux_shell命令_0_linux常用命令.md\":\"CRqtaUXq\",\"linux_shell命令_1_linux新建用户并授予root权限.md\":\"CZSGYCSf\",\"linux_shell命令_2_ubuntu桌面版禁止root登录解决方法.md\":\"C-pZsPlk\",\"linux_shell命令_3_centos7扩容根目录.md\":\"ASOo2WpP\",\"linux_shell命令_4_linux服务器抓包分析http请求.md\":\"Bo0lF9Jw\",\"linux_ubuntu_ubuntu安装应用.md\":\"DHG2D9BU\",\"markdown-examples.md\":\"Xq_34tDx\",\"python_ai大模型应用开发_10_实战3：克隆ai聊天助手.md\":\"DLGZOA1u\",\"python_ai大模型应用开发_11_给ai模型读文件的能力.md\":\"CZGp4Dxp\",\"python_ai大模型应用开发_12_实战4：智能pdf问答工具.md\":\"B0CZHWd1\",\"python_ai大模型应用开发_13_给ai模型用工具的能力.md\":\"DWrkq9VK\",\"python_ai大模型应用开发_14_csv数据分析智能工具.md\":\"2PRITITA\",\"python_ai大模型应用开发_15_assistant api.md\":\"BpdC5QkT\",\"python_ai大模型应用开发_16_streamlit入门.md\":\"2FySaueP\",\"python_ai大模型应用开发_17_ai应用部署.md\":\"G-qRBN8Q\",\"python_ai大模型应用开发_1_ai大模型科普.md\":\"DzZcMfr7\",\"python_ai大模型应用开发_2_openai大模型api基础.md\":\"N0JyeLpn\",\"python_ai大模型应用开发_3_提示词工程.md\":\"Bi281Qq6\",\"python_ai大模型应用开发_4_api用法示例.md\":\"CuAM1QYo\",\"python_ai大模型应用开发_5_langchain介绍.md\":\"DE5AWu05\",\"python_ai大模型应用开发_6_ai模型与输入输出.md\":\"jBMAeZbF\",\"python_ai大模型应用开发_7_实战1：视频脚本一键生成器.md\":\"tp2QNvfo\",\"python_ai大模型应用开发_8_实战2：爆款小红书文案生成器.md\":\"BOgSkJUa\",\"python_ai大模型应用开发_9_给ai模型添加记忆.md\":\"BNZ3-tEA\",\"python_基础语法_python基础语法.md\":\"DaodkKN9\",\"python_数据分析_10_python数据分析—保存数据.md\":\"DTY9fFbI\",\"python_数据分析_11_python数据分析—整理数据.md\":\"BXq24D25\",\"python_数据分析_12_python数据分析—统计学基础.md\":\"C2kdBKOE\",\"python_数据分析_13_python数据分析—可视化数据.md\":\"C5chltfa\",\"python_数据分析_14_python数据分析—统计学进阶.md\":\"DFEu24QW\",\"python_数据分析_1_python数据分析.md\":\"C7tltPAh\",\"python_数据分析_2_python数据分析—numpy.md\":\"CHMRMr8k\",\"python_数据分析_3_python数据分析—pandas.md\":\"C4cgqn01\",\"python_数据分析_4_python数据分析—dataframe.md\":\"0fHB22BC\",\"python_数据分析_5_python数据分析—数据收集.md\":\"MUvWWYl6\",\"python_数据分析_6_python数据分析—读取json.md\":\"CG18aX5K\",\"python_数据分析_7_python数据分析—读取csv.md\":\"UN-4UQJG\",\"python_数据分析_8_python数据分析—评估数据.md\":\"CvF4TNQE\",\"python_数据分析_9_python数据分析—清理数据.md\":\"B5Ey7WV4\",\"python_爬虫_1_爬虫的流程.md\":\"CGa7j-Hc\",\"python_爬虫_2_python发送http请求.md\":\"B5uIb8HG\",\"python_爬虫_3_python解析html.md\":\"CU9_J0F4\",\"python_爬虫_4_爬取豆瓣电影top250.md\":\"ClZwx9yq\",\"python_爬虫_5_python使用api.md\":\"B0JwB6nE\",\"redis_redis基础_1_redis缓存三大问题.md\":\"BeTUC0jE\",\"redis_redis基础_2_内存淘汰策略.md\":\"BHtFDeh9\",\"redis_redis基础_3_bigkey、hotkey 的发现与处理.md\":\"CIEYL6lf\",\"redis_redis基础_4_springboot整合redisson.md\":\"Be1FXl2m\",\"redis_redis基础_5_redis延迟队列.md\":\"DDJJ4TtT\",\"redis_redis基础_redisearch全文搜索引擎.md\":\"u6eio4uf\",\"redis_redis基础_redistemplate.md\":\"BjR9dF2X\",\"redis_redis基础_valkey.md\":\"lxOSe5Yg\",\"redis_redis实战_1_redis实战之解决限流问题.md\":\"DkiiRhEj\",\"redis_redis实战_2_redis实战之解决超卖问题.md\":\"DQt_4Oxu\",\"redis_redis实战_3_incr命令之微信文章阅读量.md\":\"B576lbKC\",\"redis_redis数据结构_redis数据结构.md\":\"BWyhj5z0\",\"redis_redis数据结构_set结构实战之用户画像标签去重.md\":\"BBzY9aYX\",\"redis_redis数据结构_set结构实战之社交应用中的共同好友.md\":\"DGKIledi\",\"stablediffusion_aigc_ai猫咪剧情号.md\":\"DMUC7UIN\",\"stablediffusion_aigc_lofi.md\":\"DW4dE8k9\",\"stablediffusion_aigc_midjourney制作微信表情包.md\":\"DFni_0oQ\",\"stablediffusion_aigc_midjourney萌宠治愈频道.md\":\"FVZ0eOpo\",\"stablediffusion_comfyui_0_comfyui简介.md\":\"CjmVux_D\",\"stablediffusion_comfyui_1_comfyui安装.md\":\"ClonBQ5Y\",\"stablediffusion_comfyui_2_comfyui配置.md\":\"Cnulgf6E\",\"stablediffusion_comfyui_3_comfyui核心采样器.md\":\"CQ9m18T1\",\"stablediffusion_midjourney_0_midjourney基础教程.md\":\"-OW4wUz7\",\"stablediffusion_midjourney_1_midjourney命令参数用途列表.md\":\"CEbZ9zkI\",\"stablediffusion_midjourney_2_调整图片比例.md\":\"DEpoXy5G\",\"stablediffusion_midjourney_3_midjourney垫图.md\":\"DPvAz1uu\",\"stablediffusion_midjourney_4_单人及多人换脸.md\":\"DRCwL7TY\",\"stablediffusion_midjourney_5_局部重绘.md\":\"CLkypXDz\",\"stablediffusion_midjourney_6_扩展图片zoomout功能.md\":\"xvbq-rts\",\"stablediffusion_stablediffusion_0_stablediffusion介绍.md\":\"BUtFqnMF\",\"stablediffusion_stablediffusion_1_prompt提示词.md\":\"AwYc-zco\",\"stablediffusion_stablediffusion_2_模型使用.md\":\"B769RYdu\",\"stablediffusion_stablediffusion_3_controlnet控制网.md\":\"3K8-Byhs\",\"stablediffusion_stablediffusion_4_lora训练.md\":\"DaCA4m7V\",\"stablediffusion_webui_0_webui介绍.md\":\"YFs6_XT0\",\"stablediffusion_webui_1_文生图.md\":\"Tb4smMFB\",\"stablediffusion_webui_2_图生图.md\":\"DU_iGuvh\",\"常用框架_activiti7_activiti整合spring.md\":\"CYx1CqXV\",\"常用框架_caffeine_0_caffeine基本概念.md\":\"D8Qslv4K\",\"常用框架_caffeine_1_springboot集成caffeine.md\":\"CyG6OxGe\",\"常用框架_easycaptcha_0_使用easycaptcha生成验证码.md\":\"C0npF5bK\",\"常用框架_easyexcel_0_easyexcel概述.md\":\"DebQMbpY\",\"常用框架_easyexcel_1_easyexcel准备操作.md\":\"X_kusA1k\",\"常用框架_easyexcel_2_easyexcel入门之导入excel.md\":\"By6P3eNX\",\"常用框架_easyexcel_3_easyexcel入门之导出excel.md\":\"B9bwDfXa\",\"常用框架_easyexcel_4_easyexcel入门之填充excel.md\":\"EAz1u26Z\",\"常用框架_easyexcel_5_大量数据导出.md\":\"BdOY25iJ\",\"常用框架_easyexcel_6_fastexcel.md\":\"B_pZRYb5\",\"常用框架_mybatis_mybatis-plus-join连表查询.md\":\"CGojYOC5\",\"常用框架_mybatis_mybatis增强框架mybatis-flex.md\":\"J1_XHWMx\",\"常用框架_shardingjdbc_0_shardingjdbc的概述.md\":\"CiBK4Kil\",\"常用框架_shardingjdbc_1_shardingjdbc准备-安装mysql及配置主从复制.md\":\"DR5EM0Ry\",\"常用框架_shardingjdbc_2_shardingjdbc配置读写分离.md\":\"eMLNWiGG\",\"常用框架_shardingjdbc_3_mysql分库分表原理.md\":\"CiMp1PGl\",\"常用框架_shardingjdbc_4_shardingjdbc配置分库分表.md\":\"CKF4sg1u\",\"常用框架_spring_1_spring容器初始化源码解析.md\":\"CAjtaxbq\",\"常用框架_spring_2_springaop面向切面编程.md\":\"CML91YtL\",\"常用框架_spring_3_springaop源码分析.md\":\"DLKAWABy\",\"常用框架_spring_4_springaop实战之日志拦截.md\":\"DdG1PSPh\",\"常用框架_springai_springai.md\":\"z6TDdken\",\"常用框架_springboot_springboot与web应用_1_配置tomcat运行.md\":\"Bbikil-J\",\"常用框架_springboot_springboot与web应用_2_https安全访问.md\":\"Dg23THrp\",\"常用框架_springboot_springboot与web应用_3_数据验证.md\":\"CkPGzbIp\",\"常用框架_springboot_springboot与web应用_4_配置错误页.md\":\"CZqYugxM\",\"常用框架_springboot_springboot与web应用_5_全局异常处理.md\":\"BX6d0T4A\",\"常用框架_springboot_springboot与web应用_6_文件上传.md\":\"DgWdZAih\",\"常用框架_springboot_springboot与web应用_7_拦截器.md\":\"bWnh4T0Q\",\"常用框架_springboot_springboot与web应用_8_aop拦截器.md\":\"B8Wm-W_H\",\"常用框架_springboot_springboot服务整合_1_springboot整合数据源.md\":\"C9j9fyuf\",\"常用框架_springboot_springboot服务整合_2_springboot整合orm开发框架.md\":\"CCSz2u79\",\"常用框架_springboot_springboot服务整合_3_springboot整合消息服务组件.md\":\"BOQHitNu\",\"常用框架_springboot_springboot服务整合_4_springboot整合redis数据库.md\":\"DvwEjkww\",\"常用框架_springboot_springboot服务整合_5_springboot整合安全框架.md\":\"CRBWEIGQ\",\"常用框架_springboot_springboot服务整合_6_springboot整合邮件服务器.md\":\"DKv78zvN\",\"常用框架_springboot_springboot服务整合_7_定时调度.md\":\"AFclu7MT\",\"常用框架_springboot_springboot服务整合_8_actuator监控.md\":\"B2T1fjH3\",\"常用框架_springboot_springboot源码分析_springboot异步实现方式.md\":\"BFNdWV0X\",\"常用框架_springboot_springboot源码分析_初始化加载配置.md\":\"B8RjJsiw\",\"常用框架_springboot_springboot源码分析_资源填充类resourcedatabasepopulator.md\":\"BdMnkM2z\",\"常用框架_springboot_springboot程序开发_0_springboot编程起步.md\":\"ny44nS3B\",\"常用框架_springboot_springboot程序开发_10_整合spring配置.md\":\"IPz7bvSd\",\"常用框架_springboot_springboot程序开发_11_统一返回结果对象.md\":\"7mgfh6bD\",\"常用框架_springboot_springboot程序开发_12_统一异常处理.md\":\"DiUqjFbT\",\"常用框架_springboot_springboot程序开发_13_统一日志处理.md\":\"-9PC6kO2\",\"常用框架_springboot_springboot程序开发_1_统一父pom管理.md\":\"5QS_44Af\",\"常用框架_springboot_springboot程序开发_20_profile环境配置.md\":\"BDWz2aaB\",\"常用框架_springboot_springboot程序开发_20_springboot项目打包发布.md\":\"BNm5U3Al\",\"常用框架_springboot_springboot程序开发_22_springboot中的异步方法调用.md\":\"BM9Xmndd\",\"常用框架_springboot_springboot程序开发_2_springboot程序测试.md\":\"Bp6_KBL0\",\"常用框架_springboot_springboot程序开发_3_springboot注解分析.md\":\"C_P-Q60O\",\"常用框架_springboot_springboot程序开发_4_配置访问路径.md\":\"DWwdAhpp\",\"常用框架_springboot_springboot程序开发_5_springboot调试.md\":\"DKzWjM1V\",\"常用框架_springboot_springboot程序开发_6_使用内置对象.md\":\"BiN9Wyva\",\"常用框架_springboot_springboot程序开发_7_使用jetty容器.md\":\"wKcSS7MJ\",\"常用框架_springboot_springboot程序开发_8_配置环境属性.md\":\"BkqMyKN_\",\"常用框架_springboot_springboot程序开发_9_读取资源文件.md\":\"DtJZHsGh\",\"常用框架_thymeleaf_2_实战.md\":\"bFQSUga2\",\"常用框架_xxl-job_0_分布式任务调度框架概述.md\":\"BjoSqnlG\",\"常用框架_xxl-job_1_xxl-job介绍.md\":\"ZCkuNvfr\",\"常用框架_xxl-job_2_xxl-job执行器配置.md\":\"6hsaQ_FC\",\"常用框架_xxl-job_3_创建xxl-job任务调度.md\":\"2LJ5VpTf\",\"常用框架_xxl-job_4_自动创建定时任务.md\":\"DwMTpD_Z\",\"常用框架_重试框架_1_spring-retry.md\":\"DQESCb2C\",\"常用框架_重试框架_2_guava-retry.md\":\"SKansM52\",\"数据库_mongodb_0_mongodb简介.md\":\"DZb9f0Ya\",\"数据库_mongodb_1_mongodb安装.md\":\"msMNpBjt\",\"数据库_mongodb_2_mongotemplate基本用法.md\":\"DEd5NGQf\",\"数据库_mongodb_3_criteria与聚合查询.md\":\"AiBdOaO7\",\"数据库_mongodb_4_mongodb数据同步.md\":\"DBJzP3D9\",\"数据库_mysql_acid.md\":\"Cyq66wXt\",\"数据库_mysql_mysql主从复制.md\":\"DfY-h8VT\",\"数据库_mysql_mysql分词搜索.md\":\"ndcnhHZA\",\"数据库_mysql_mysql导入mariadb.md\":\"CV2g7Qm7\",\"数据库_mysql_mysql执行分析.md\":\"BLWhehmT\",\"数据库_mysql_mysql日期函数.md\":\"pGyDj8aV\",\"数据库_mysql_mysql索引.md\":\"J4i1kLkB\",\"数据库_mysql_mysql集群.md\":\"CYvZ_dNi\",\"数据库_mysql常见问题及解决方案_mysql慢查询优化.md\":\"BFg6cMlz\",\"数据库_neo4j_0_neo4j概念.md\":\"BCiiPRUn\",\"数据库_neo4j_1_neo4j安装.md\":\"BFs_vHk8\",\"数据库_neo4j_2_neo4j数据库创建.md\":\"BzKsP8yk\",\"数据库_neo4j_3_springboot集成neo4j.md\":\"d25kGIuh\",\"数据库_分布式数据库tidb_1_tidb简介.md\":\"BiaUPzdk\",\"数据库_分布式数据库tidb_2_部署迁移.md\":\"DuMYYr9r\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"xiaolong\",\"titleTemplate\":\"XXL的小屋\",\"description\":\"我的文档教程\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.png\",\"siteTitle\":\"xiaolong\",\"search\":{\"provider\":\"local\"},\"sitemap\":{\"hostname\":\"https://luckilyxxl.xyz\"},\"outline\":{\"level\":[2,4],\"label\":\"当前页大纲\"},\"nav\":[{\"text\":\"🏠主页\",\"link\":\"/\"},{\"text\":\"🍎Java\",\"icon\":\"/icon/MySQL.png\",\"items\":[{\"text\":\"Java开发技巧\",\"icon\":\"/.vitepress/public/icon/cafei.png\",\"link\":\"/Java/Java开发技巧/高效编程/1_资源关闭优化方案\"},{\"text\":\"JVM性能调优\",\"icon\":\"iconfont icon-duozhongzhifu\",\"link\":\"/Java/JVM性能调优/JVM概念/0_JVM体系结构\"},{\"text\":\"并发编程\",\"icon\":\"iconfont icon-bingfashuliang\",\"link\":\"/Java/并发编程/JUC\"},{\"text\":\"容器相关\",\"icon\":\"iconfont icon-rongqi\",\"link\":\"/Java/容器/Docker/0_Docker介绍及使用\"},{\"text\":\"设计模式\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/Java/设计模式/1基本概念/设计模式\"},{\"text\":\"微服务专栏\",\"icon\":\"iconfont icon-mseweifuwuyinqing\",\"link\":\"/Java/微服务专栏/SpringCloud/1_SpringCloud简介\"},{\"text\":\"架构设计\",\"icon\":\"iconfont icon-jiagou\",\"link\":\"/Java/架构设计/分布式/分布式事务/分布式事务Seata\"},{\"text\":\"解决方案\",\"icon\":\"iconfont icon-zhifubaozhifu\",\"link\":\"/Java/解决方案/支付解决方案/支付宝支付API对接指南/1_商家基本信息获取\"},{\"text\":\"数据结构\",\"icon\":\"iconfont icon-shujujiegou\",\"link\":\"/Java/数据结构/排序算法\"},{\"text\":\"系统优化\",\"icon\":\"iconfont icon-icon_nav_xitongyouhua_default\",\"link\":\"/Java/系统优化/系统优化/1_幂等设计\"}]},{\"text\":\"🥭Python\",\"icon\":\"iconfont icon-python\",\"items\":[{\"text\":\"基础语法\",\"icon\":\"iconfont icon-jichuyufa\",\"link\":\"/Python/基础语法/Python基础语法\"},{\"text\":\"数据分析\",\"icon\":\"iconfont icon-shujufenxi\",\"link\":\"/Python/数据分析/1_Python数据分析\"},{\"text\":\"爬虫\",\"icon\":\"iconfont icon-AIdamoxing\",\"link\":\"/Python/爬虫/1_爬虫的流程\"},{\"text\":\"AI大模型应用开发\",\"icon\":\"iconfont icon-AIdamoxing\",\"link\":\"/Python/AI大模型应用开发/1_AI大模型科普\"}]},{\"text\":\"🍍数据库\",\"icon\":\"iconfont icon-shujuku\",\"link\":\"/数据库/MongoDB/0_MongoDB简介\"},{\"text\":\"🍌Redis专栏\",\"icon\":\"iconfont icon-redis\",\"link\":\"/Redis/Redis基础/1_Redis缓存三大问题\"},{\"text\":\"🍑常用框架\",\"icon\":\"iconfont icon-zuzhijiagou\",\"items\":[{\"text\":\"工作流引擎Activiti7\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/Activiti7/Activiti整合Spring\"},{\"text\":\"缓存框架Caffeine\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/Caffeine/0_Caffeine基本概念\"},{\"text\":\"验证码EasyCaptcha\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/EasyCaptcha/0_使用EasyCaptcha生成验证码\"},{\"text\":\"表格工具EasyExcel\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/EasyExcel/0_EasyExcel概述\"},{\"text\":\"搜索引擎ElasticSearch\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/Java/架构设计/分布式/分布式搜索/分布式搜索引擎Elasticsearch01\"},{\"text\":\"三剑客Mybatis\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/Mybatis/Mybatis-Plus-Join连表查询\"},{\"text\":\"分库分表ShardingJdbc\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/ShardingJdbc/0_ShardingJdbc的概述\"},{\"text\":\"三剑客Spring\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/Spring/1_Spring容器初始化源码解析\"},{\"text\":\"三剑客SpringBoot\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/SpringBoot/SpringBoot程序开发/0_SpringBoot编程起步\"},{\"text\":\"AI框架Spring AI\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/SpringAI/SpringAI\"},{\"text\":\"监控工具SpringBootAdmin\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/Java/架构设计/分布式/分布式监控/SpringBootAdmin\"},{\"text\":\"任务调度XXL-JOB\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/XXL-JOB/0_分布式任务调度框架概述\"},{\"text\":\"模板引擎Thymeleaf\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/Thymeleaf/1_基本语法\"},{\"text\":\"重试框架Retry\",\"icon\":\"iconfont icon-iconfontmoshi\",\"link\":\"/常用框架/重试框架/1_Spring-Retry\"}]},{\"text\":\"💻Linux\",\"icon\":\"iconfont icon-centos\",\"link\":\"/Linux/Shell命令/0_Linux常用命令\"},{\"text\":\"🖼Stable Diffusion\",\"icon\":\"iconfont icon-a-stablediffusion\",\"link\":\"/StableDiffusion/StableDiffusion/0_StableDiffusion介绍\"},{\"text\":\"🍓随笔文档\",\"icon\":\"iconfont icon-biji\",\"items\":[{\"text\":\"博客笔记\",\"items\":[{\"text\":\"🚀VuePress\",\"link\":\"/daily/博客文档/VitPress/0_Vitpress博客搭建\"},{\"text\":\"🚀VitPress\",\"link\":\"/daily/博客文档/VitPress/0_Vitpress博客搭建\"},{\"text\":\"🚀其他\",\"link\":\"/daily/博客文档/Github_Pages加速\"}]},{\"text\":\"日常笔记\",\"items\":[{\"text\":\"🚀日常笔记\",\"link\":\"/daily/日常笔记/IDEA+Linux远程开发\"},{\"text\":\"🚀开发文档\",\"link\":\"/daily/开发文档/PDF转换\"},{\"text\":\"🚀开源项目\",\"link\":\"/daily/开源项目/0_开源项目\"},{\"text\":\"🚀软考中级\",\"link\":\"/daily/软考中级软件设计师学习笔记/01_计算机组成与体系结构\"},{\"text\":\"🚀面试专栏\",\"link\":\"/daily/面试专栏/面试专栏\"},{\"text\":\"🚀高等数学\",\"link\":\"/daily/高等数学/1_高等数学预备知识\"}]}]}],\"sidebar\":{\"/Java/Java开发技巧/\":[{\"text\":\"高效编程\",\"items\":[{\"text\":\"资源关闭优化方案\",\"link\":\"Java/Java开发技巧/高效编程/1_资源关闭优化方案\"},{\"text\":\"JDK8新特性Optional容器类\",\"link\":\"Java/Java开发技巧/高效编程/2_JDK8新特性Optional容器类\"},{\"text\":\"Guava工具包常用API\",\"link\":\"Java/Java开发技巧/高效编程/3_Guava工具包常用API\"}],\"collapsed\":false},{\"text\":\"函数式编程\",\"items\":[{\"text\":\"函数式编程概念\",\"link\":\"Java/Java开发技巧/函数式编程/0_函数式编程概念\"},{\"text\":\"Lambda表达式\",\"link\":\"Java/Java开发技巧/函数式编程/1_Lambda表达式\"},{\"text\":\"Stream流\",\"link\":\"Java/Java开发技巧/函数式编程/2_Stream流\"},{\"text\":\"函数式接口\",\"link\":\"Java/Java开发技巧/函数式编程/3_函数式接口\"},{\"text\":\"方法引用\",\"link\":\"Java/Java开发技巧/函数式编程/4_方法引用\"}],\"collapsed\":false},{\"text\":\"其他\",\"items\":[{\"text\":\"自定义注解\",\"link\":\"Java/Java开发技巧/其他/1_自定义注解\"},{\"text\":\"语法糖\",\"link\":\"Java/Java开发技巧/其他/2_语法糖\"},{\"text\":\"反射Reflection\",\"link\":\"Java/Java开发技巧/其他/3_反射Reflection\"},{\"text\":\"替换jar包中单个class文件\",\"link\":\"Java/Java开发技巧/其他/4_替换jar包中单个class文件\"}],\"collapsed\":false},{\"text\":\"IDEA\",\"items\":[{\"text\":\"IDEA插件\",\"link\":\"Java/Java开发技巧/IDEA/IDEA插件\"},{\"text\":\"IDEA使用技巧\",\"link\":\"Java/Java开发技巧/IDEA/IDEA使用技巧\"}],\"collapsed\":false}],\"/Java/JVM性能调优/\":[{\"text\":\"JVM概念\",\"items\":[{\"text\":\"JVM体系结构\",\"link\":\"Java/JVM性能调优/JVM概念/0_JVM体系结构\"},{\"text\":\"类加载器\",\"link\":\"Java/JVM性能调优/JVM概念/1_类加载器\"},{\"text\":\"Native、方法区和寄存器\",\"link\":\"Java/JVM性能调优/JVM概念/2_Native、方法区和寄存器\"},{\"text\":\"栈\",\"link\":\"Java/JVM性能调优/JVM概念/3_栈\"},{\"text\":\"堆\",\"link\":\"Java/JVM性能调优/JVM概念/4_堆\"},{\"text\":\"GC垃圾回收\",\"link\":\"Java/JVM性能调优/JVM概念/5_GC垃圾回收\"},{\"text\":\"JMM内存模型\",\"link\":\"Java/JVM性能调优/JVM概念/6_JMM内存模型\"},{\"text\":\"Java 类加载机制\",\"link\":\"Java/JVM性能调优/JVM概念/Java 类加载机制\"},{\"text\":\"JVM及GC一些概念\",\"link\":\"Java/JVM性能调优/JVM概念/JVM\"},{\"text\":\"JVM快速入门篇\",\"link\":\"Java/JVM性能调优/JVM概念/JVM快速入门篇\"}],\"collapsed\":false},{\"text\":\"JVM性能监控与调优\",\"items\":[{\"text\":\"性能调优概述\",\"link\":\"Java/JVM性能调优/JVM性能监控与调优/0_性能调优概述\"},{\"text\":\"JVM监控与诊断工具之命令行\",\"link\":\"Java/JVM性能调优/JVM性能监控与调优/1_JVM监控与诊断工具之命令行\"},{\"text\":\"JVM监控与诊断工具之GUI\",\"link\":\"Java/JVM性能调优/JVM性能监控与调优/2_JVM监控与诊断工具之GUI\"},{\"text\":\"JVM运行时参数\",\"link\":\"Java/JVM性能调优/JVM性能监控与调优/3_JVM运行时参数\"},{\"text\":\"分析GC日志\",\"link\":\"Java/JVM性能调优/JVM性能监控与调优/4_分析GC日志\"},{\"text\":\"内存泄露几种情况及案例分析\",\"link\":\"Java/JVM性能调优/JVM性能监控与调优/5_内存泄露几种情况及案例分析\"},{\"text\":\"接口超时排查\",\"link\":\"Java/JVM性能调优/JVM性能监控与调优/接口超时排查\"},{\"text\":\"性能分析利器VisualVM的使用\",\"link\":\"Java/JVM性能调优/JVM性能监控与调优/性能分析利器VisualVM的使用\"},{\"text\":\"找出某个Java进程中最耗费CPU的Java线程\",\"link\":\"Java/JVM性能调优/JVM性能监控与调优/找出某个Java进程中最耗费CPU的Java线程\"},{\"text\":\"应用诊断利器Arthas\",\"link\":\"Java/JVM性能调优/JVM性能监控与调优/Arthas\"},{\"text\":\"OOM分类及排查\",\"link\":\"Java/JVM性能调优/JVM性能监控与调优/OOM分类及排查\"}],\"collapsed\":false}],\"/Java/并发编程/\":[{\"text\":\"HashMap\",\"link\":\"Java/并发编程/HashMap\"},{\"text\":\"JUC概念\",\"link\":\"Java/并发编程/JUC\"}],\"/Java/容器/\":[{\"text\":\"Docker\",\"items\":[{\"text\":\"Docker介绍及使用\",\"link\":\"Java/容器/Docker/0_Docker介绍及使用\"},{\"text\":\"Docker常用命令合集\",\"link\":\"Java/容器/Docker/1_Docker常用命令合集\"},{\"text\":\"Linux安装Docker\",\"link\":\"Java/容器/Docker/2_Linux安装Docker\"},{\"text\":\"图形化工具Portainer\",\"link\":\"Java/容器/Docker/3_图形化工具Portainer\"},{\"text\":\"Compose脚本\",\"link\":\"Java/容器/Docker/4_Compose脚本\"},{\"text\":\"Docker部署jar包\",\"link\":\"Java/容器/Docker/5_Docker部署jar包\"},{\"text\":\"Docker安装Graylog\",\"link\":\"Java/容器/Docker/镜像安装-Docker安装Graylog\"},{\"text\":\"Docker安装MongoDB\",\"link\":\"Java/容器/Docker/镜像安装-Docker安装MongoDB\"},{\"text\":\"Docker安装MySQL\",\"link\":\"Java/容器/Docker/镜像安装-Docker安装MySQL\"},{\"text\":\"Docker安装Nginx\",\"link\":\"Java/容器/Docker/镜像安装-Docker安装Nginx\"},{\"text\":\"Docker安装Redis\",\"link\":\"Java/容器/Docker/镜像安装-Docker安装Redis\"}],\"collapsed\":false},{\"text\":\"Jenkins\",\"items\":[{\"text\":\"Gitlab安装\",\"link\":\"Java/容器/Jenkins/Gitlab安装\"},{\"text\":\"Jenkins及其所必备环境安装\",\"link\":\"Java/容器/Jenkins/Jenkins安装\"},{\"text\":\"Jenkins实战之自动化配置\",\"link\":\"Java/容器/Jenkins/Jenkins实战之自动化配置\"}],\"collapsed\":false},{\"text\":\"K8S\",\"items\":[{\"text\":\"Kubernetes\",\"link\":\"Java/容器/K8S/Kubernetes\"}],\"collapsed\":false}],\"/Java/设计模式/\":[{\"text\":\"1基本概念\",\"items\":[{\"text\":\"设计模式\",\"link\":\"Java/设计模式/1基本概念/设计模式\"}],\"collapsed\":false},{\"text\":\"创建型\",\"items\":[{\"text\":\"创建型\",\"link\":\"Java/设计模式/创建型/1\"}],\"collapsed\":false},{\"text\":\"结构型\",\"items\":[{\"text\":\"结构型\",\"link\":\"Java/设计模式/结构型/1\"}],\"collapsed\":false},{\"text\":\"行为型\",\"items\":[{\"text\":\"策略模式\",\"link\":\"Java/设计模式/行为型/16_strategy\"}],\"collapsed\":false}],\"/Java/微服务专栏/\":[{\"text\":\"服务网关Gateway\",\"items\":[{\"text\":\"Gateway服务网关\",\"link\":\"Java/微服务专栏/服务网关Gateway/Gateway服务网关\"}],\"collapsed\":false},{\"text\":\"流控组件Sentinel\",\"items\":[{\"text\":\"微服务保护Sentinel\",\"link\":\"Java/微服务专栏/流控组件Sentinel/微服务保护\"}],\"collapsed\":false},{\"text\":\"消息总线Bus\",\"items\":[{\"text\":\"README\",\"link\":\"Java/微服务专栏/消息总线Bus/README\"}],\"collapsed\":false},{\"text\":\"远程调用Feign\",\"items\":[{\"text\":\"Feign远程调用\",\"link\":\"Java/微服务专栏/远程调用Feign/Feign远程调用\"}],\"collapsed\":false},{\"text\":\"Nacos\",\"items\":[{\"text\":\"Nacos安装\",\"link\":\"Java/微服务专栏/Nacos/0_Nacos安装\"},{\"text\":\"Nacos注册中心\",\"link\":\"Java/微服务专栏/Nacos/1_Nacos注册中心\"},{\"text\":\"Nacos配置管理\",\"link\":\"Java/微服务专栏/Nacos/2_Nacos配置管理\"},{\"text\":\"Nacos集群搭建\",\"link\":\"Java/微服务专栏/Nacos/3_Nacos集群搭建\"},{\"text\":\"Nacos动态读取xml日志配置\",\"link\":\"Java/微服务专栏/Nacos/4_Nacos动态读取xml日志配置\"},{\"text\":\"Nacos源码分析之ConfigService\",\"link\":\"Java/微服务专栏/Nacos/Nacos源码分析之ConfigService\"}],\"collapsed\":false},{\"text\":\"Quarkus\",\"items\":[{\"text\":\"Quarkus\",\"link\":\"Java/微服务专栏/Quarkus/Quarkus\"}],\"collapsed\":false},{\"text\":\"Solon\",\"items\":[{\"text\":\"Solon\",\"link\":\"Java/微服务专栏/Solon/Solon\"}],\"collapsed\":false},{\"text\":\"SpringCloud\",\"items\":[{\"text\":\"SpringCloud简介\",\"link\":\"Java/微服务专栏/SpringCloud/1_SpringCloud简介\"},{\"text\":\"SpringCloud与Restful\",\"link\":\"Java/微服务专栏/SpringCloud/2_SpringCloud与Restful\"},{\"text\":\"Eureka注册服务\",\"link\":\"Java/微服务专栏/SpringCloud/3_Eureka注册服务\"},{\"text\":\"SpringCloud服务组件\",\"link\":\"Java/微服务专栏/SpringCloud/4_SpringCloud服务组件\"},{\"text\":\"SpringCloud简介\",\"link\":\"Java/微服务专栏/SpringCloud/5_SpringCloudConfig\"},{\"text\":\"SpringCloudConfig\",\"link\":\"Java/微服务专栏/SpringCloud/6_SpringCloudStream\"},{\"text\":\"SpringCloudSleuth\",\"link\":\"Java/微服务专栏/SpringCloud/7_SpringCloudSleuth\"}],\"collapsed\":false}],\"/Java/架构设计/\":[{\"text\":\"分布式\",\"items\":[{\"text\":\"分布式缓存\",\"items\":[{\"text\":\"1概念\",\"items\":[{\"text\":\"缓存概述\",\"link\":\"Java/架构设计/分布式/分布式缓存/1概念/缓存\"}],\"collapsed\":true},{\"text\":\"cache\",\"items\":[{\"text\":\"Redis概述及使用\",\"link\":\"Java/架构设计/分布式/分布式缓存/cache/0_redis\"},{\"text\":\"Redis Stack介绍\",\"link\":\"Java/架构设计/分布式/分布式缓存/cache/1_RedisStack介绍\"},{\"text\":\"RedisInsight部署使用\",\"link\":\"Java/架构设计/分布式/分布式缓存/cache/2_RedisInsight部署使用\"},{\"text\":\"布隆过滤器\",\"link\":\"Java/架构设计/分布式/分布式缓存/cache/3_布隆过滤器\"}],\"collapsed\":true}],\"collapsed\":false},{\"text\":\"分布式监控\",\"items\":[{\"text\":\"监控\",\"link\":\"Java/架构设计/分布式/分布式监控/0_监控\"},{\"text\":\"CAT\",\"link\":\"Java/架构设计/分布式/分布式监控/CAT\"},{\"text\":\"Pinpoint性能监控\",\"link\":\"Java/架构设计/分布式/分布式监控/Pinpoint\"},{\"text\":\"Prometheus监控\",\"link\":\"Java/架构设计/分布式/分布式监控/Prometheus\"},{\"text\":\"SkyWalking链路追踪\",\"link\":\"Java/架构设计/分布式/分布式监控/SkyWalking\"},{\"text\":\"SpringBootAdmin系统监控\",\"link\":\"Java/架构设计/分布式/分布式监控/SpringBootAdmin\"}],\"collapsed\":false},{\"text\":\"分布式任务调度\",\"items\":[{\"text\":\"分布式任务调度\",\"link\":\"Java/架构设计/分布式/分布式任务调度/分布式任务调度\"}],\"collapsed\":false},{\"text\":\"分布式日志收集\",\"items\":[{\"text\":\"ElasticStack概述\",\"link\":\"Java/架构设计/分布式/分布式日志收集/0_ElasticStack概述\"},{\"text\":\"ELK篇之安装ElasticSearch和Kibana\",\"link\":\"Java/架构设计/分布式/分布式日志收集/1_Elasticsearch安装\"},{\"text\":\"ELK篇之Logstash使用\",\"link\":\"Java/架构设计/分布式/分布式日志收集/2_Logstash使用\"},{\"text\":\"ELK篇之SpringBoot集成ELK\",\"link\":\"Java/架构设计/分布式/分布式日志收集/3_SpringBoot集成ELK\"},{\"text\":\"EFK篇之Filebeat使用\",\"link\":\"Java/架构设计/分布式/分布式日志收集/4_EFK篇之Filebeat使用\"},{\"text\":\"SpringBoot集成Graylog\",\"link\":\"Java/架构设计/分布式/分布式日志收集/5_SpringBoot集成Graylog\"}],\"collapsed\":false},{\"text\":\"分布式事务\",\"items\":[{\"text\":\"分布式事务概念\",\"link\":\"Java/架构设计/分布式/分布式事务/0_分布式事务概念\"},{\"text\":\"分布式事务框架TX-LCN\",\"link\":\"Java/架构设计/分布式/分布式事务/分布式事务框架TX-LCN\"},{\"text\":\"分布式事务Seata\",\"link\":\"Java/架构设计/分布式/分布式事务/分布式事务Seata\"}],\"collapsed\":false},{\"text\":\"分布式搜索\",\"items\":[{\"text\":\"Elasticsearch-学习笔记01\",\"link\":\"Java/架构设计/分布式/分布式搜索/分布式搜索引擎Elasticsearch01\"},{\"text\":\"Elasticsearch-学习笔记02\",\"link\":\"Java/架构设计/分布式/分布式搜索/分布式搜索引擎Elasticsearch02\"},{\"text\":\"Elasticsearch-学习笔记03\",\"link\":\"Java/架构设计/分布式/分布式搜索/分布式搜索引擎Elasticsearch03\"},{\"text\":\"Elasticsearch进阶功能\",\"link\":\"Java/架构设计/分布式/分布式搜索/ElasticSearch进阶功能\"}],\"collapsed\":false},{\"text\":\"分布式消息队列\",\"items\":[{\"text\":\"1概念\",\"items\":[{\"text\":\"消息队列介绍\",\"link\":\"Java/架构设计/分布式/分布式消息队列/1概念/消息队列\"}],\"collapsed\":true},{\"text\":\"RabbitMQ\",\"items\":[{\"text\":\"RabbitMQ安装\",\"link\":\"Java/架构设计/分布式/分布式消息队列/RabbitMQ/1_RabbitMQ安装\"},{\"text\":\"RabbitMQ消息队列\",\"link\":\"Java/架构设计/分布式/分布式消息队列/RabbitMQ/2_RabbitMQ\"},{\"text\":\"RabbitMQ高级\",\"link\":\"Java/架构设计/分布式/分布式消息队列/RabbitMQ/3_RabbitMQ高级\"},{\"text\":\"RabbitMQ延时队列\",\"link\":\"Java/架构设计/分布式/分布式消息队列/RabbitMQ/4_RabbitMQ延时队列\"},{\"text\":\"RabbitMQ日志追踪\",\"link\":\"Java/架构设计/分布式/分布式消息队列/RabbitMQ/5_RabbitMQ日志追踪\"}],\"collapsed\":true},{\"text\":\"RocketMQ\",\"items\":[{\"text\":\"RocketMQ-学习笔记01\",\"link\":\"Java/架构设计/分布式/分布式消息队列/RocketMQ/RocketMQ-01\"},{\"text\":\"RocketMQ-学习笔记02\",\"link\":\"Java/架构设计/分布式/分布式消息队列/RocketMQ/RocketMQ-02\"},{\"text\":\"RocketMQ-学习笔记03\",\"link\":\"Java/架构设计/分布式/分布式消息队列/RocketMQ/RocketMQ-03\"}],\"collapsed\":true}],\"collapsed\":false}],\"collapsed\":false},{\"text\":\"高并发\",\"items\":[{\"text\":\"负载均衡\",\"items\":[{\"text\":\"README\",\"link\":\"Java/架构设计/高并发/负载均衡/README\"}],\"collapsed\":false},{\"text\":\"缓存\",\"items\":[{\"text\":\"README\",\"link\":\"Java/架构设计/高并发/缓存/README\"}],\"collapsed\":false},{\"text\":\"数据库\",\"items\":[{\"text\":\"README\",\"link\":\"Java/架构设计/高并发/数据库/README\"}],\"collapsed\":false}],\"collapsed\":false},{\"text\":\"高可用\",\"items\":[{\"text\":\"0_概述\",\"items\":[{\"text\":\"高可用架构设计概述\",\"link\":\"Java/架构设计/高可用/0_概述/0_高可用架构设计概述\"}],\"collapsed\":false},{\"text\":\"降级熔断\",\"items\":[{\"text\":\"README\",\"link\":\"Java/架构设计/高可用/降级熔断/README\"}],\"collapsed\":false},{\"text\":\"限流\",\"items\":[{\"text\":\"系统优化之限流\",\"link\":\"Java/架构设计/高可用/限流/系统优化之限流\"}],\"collapsed\":false}],\"collapsed\":false}],\"/Java/解决方案/\":[{\"text\":\"多租户\",\"items\":[{\"text\":\"多租户\",\"link\":\"Java/解决方案/多租户/多租户\"}],\"collapsed\":false},{\"text\":\"接口设计\",\"items\":[{\"text\":\"接口幂等\",\"link\":\"Java/解决方案/接口设计/1_接口幂等\"},{\"text\":\"接口加密\",\"link\":\"Java/解决方案/接口设计/2_接口加密\"},{\"text\":\"接口限流\",\"link\":\"Java/解决方案/接口设计/3_接口限流\"},{\"text\":\"接口优化\",\"link\":\"Java/解决方案/接口设计/4_接口优化\"}],\"collapsed\":false},{\"text\":\"秒杀\",\"items\":[{\"text\":\"秒杀\",\"link\":\"Java/解决方案/秒杀/秒杀\"}],\"collapsed\":false},{\"text\":\"数据同步\",\"items\":[{\"text\":\"数据同步\",\"link\":\"Java/解决方案/数据同步/0_数据同步\"},{\"text\":\"Canal\",\"link\":\"Java/解决方案/数据同步/1_Canal\"},{\"text\":\"Flink\",\"link\":\"Java/解决方案/数据同步/2_Flink-CDC\"},{\"text\":\"SeaTunnel\",\"link\":\"Java/解决方案/数据同步/3_SeaTunnel\"},{\"text\":\"DolphinScheduler\",\"link\":\"Java/解决方案/数据同步/4_DolphinScheduler\"},{\"text\":\"DataX\",\"link\":\"Java/解决方案/数据同步/5_DataX\"}],\"collapsed\":false},{\"text\":\"支付解决方案\",\"items\":[{\"text\":\"支付宝支付API对接指南\",\"items\":[{\"text\":\"商家基本信息获取\",\"link\":\"Java/解决方案/支付解决方案/支付宝支付API对接指南/1_商家基本信息获取\"},{\"text\":\"支付宝支付环境搭建及配置\",\"link\":\"Java/解决方案/支付解决方案/支付宝支付API对接指南/2_支付宝支付环境搭建及配置\"},{\"text\":\"支付宝支付请求工具类封装\",\"link\":\"Java/解决方案/支付解决方案/支付宝支付API对接指南/3_支付宝支付请求工具类封装\"},{\"text\":\"支付宝支付成功回调通知\",\"link\":\"Java/解决方案/支付解决方案/支付宝支付API对接指南/4_支付宝支付成功回调通知\"}],\"collapsed\":false}],\"collapsed\":false}],\"/Java/数据结构/\":[{\"text\":\"查找算法\",\"link\":\"Java/数据结构/查找算法\"},{\"text\":\"排序算法\",\"link\":\"Java/数据结构/排序算法\"}],\"/Java/系统优化/\":[{\"text\":\"系统优化\",\"items\":[{\"text\":\"幂等设计\",\"link\":\"Java/系统优化/系统优化/1_幂等设计\"},{\"text\":\"线程池隔离\",\"link\":\"Java/系统优化/系统优化/2_线程池隔离\"},{\"text\":\"API签名认证\",\"link\":\"Java/系统优化/系统优化/3_API签名认证\"},{\"text\":\"SDK封装\",\"link\":\"Java/系统优化/系统优化/4_SDK封装\"},{\"text\":\"平台智能化\",\"link\":\"Java/系统优化/系统优化/5_平台智能化\"}],\"collapsed\":false},{\"text\":\"性能优化\",\"items\":[{\"text\":\"RxJava响应式编程\",\"link\":\"Java/系统优化/性能优化/1_RxJava响应式编程\"},{\"text\":\"实时通讯方案\",\"link\":\"Java/系统优化/性能优化/2_实时通讯方案\"},{\"text\":\"缓存\",\"link\":\"Java/系统优化/性能优化/3_缓存\"},{\"text\":\"分库分表实战\",\"link\":\"Java/系统优化/性能优化/4_分库分表实战\"},{\"text\":\"MySQL Hints\",\"link\":\"Java/系统优化/性能优化/5_MySQL Hints\"}],\"collapsed\":false}],\"/Python/\":[{\"text\":\"基础语法\",\"items\":[{\"text\":\"Python基础语法\",\"link\":\"Python/基础语法/Python基础语法\"}],\"collapsed\":false},{\"text\":\"爬虫\",\"items\":[{\"text\":\"爬虫的流程\",\"link\":\"Python/爬虫/1_爬虫的流程\"},{\"text\":\"Python发送HTTP请求\",\"link\":\"Python/爬虫/2_Python发送HTTP请求\"},{\"text\":\"Python解析HTML\",\"link\":\"Python/爬虫/3_Python解析HTML\"},{\"text\":\"爬取豆瓣电影Top250\",\"link\":\"Python/爬虫/4_爬取豆瓣电影Top250\"},{\"text\":\"Python使用API\",\"link\":\"Python/爬虫/5_Python使用API\"}],\"collapsed\":false},{\"text\":\"数据分析\",\"items\":[{\"text\":\"Python数据分析\",\"link\":\"Python/数据分析/1_Python数据分析\"},{\"text\":\"Python数据分析—NumPy\",\"link\":\"Python/数据分析/2_Python数据分析—NumPy\"},{\"text\":\"Python数据分析—Pandas\",\"link\":\"Python/数据分析/3_Python数据分析—Pandas\"},{\"text\":\"Python数据分析—Dataframe\",\"link\":\"Python/数据分析/4_Python数据分析—Dataframe\"},{\"text\":\"Python数据分析—数据收集\",\"link\":\"Python/数据分析/5_Python数据分析—数据收集\"},{\"text\":\"Python数据分析—读取JSON\",\"link\":\"Python/数据分析/6_Python数据分析—读取JSON\"},{\"text\":\"Python数据分析—读取CSV\",\"link\":\"Python/数据分析/7_Python数据分析—读取CSV\"},{\"text\":\"Python数据分析—评估数据\",\"link\":\"Python/数据分析/8_Python数据分析—评估数据\"},{\"text\":\"Python数据分析—清理数据\",\"link\":\"Python/数据分析/9_Python数据分析—清理数据\"},{\"text\":\"Python数据分析—保存数据\",\"link\":\"Python/数据分析/10_Python数据分析—保存数据\"},{\"text\":\"Python数据分析—整理数据\",\"link\":\"Python/数据分析/11_Python数据分析—整理数据\"},{\"text\":\"Python数据分析—统计学基础\",\"link\":\"Python/数据分析/12_Python数据分析—统计学基础\"},{\"text\":\"Python数据分析—可视化数据\",\"link\":\"Python/数据分析/13_Python数据分析—可视化数据\"},{\"text\":\"Python数据分析—统计学进阶\",\"link\":\"Python/数据分析/14_Python数据分析—统计学进阶\"}],\"collapsed\":false},{\"text\":\"AI大模型应用开发\",\"items\":[{\"text\":\"AI大模型科普\",\"link\":\"Python/AI大模型应用开发/1_AI大模型科普\"},{\"text\":\"OpenAI大模型API基础\",\"link\":\"Python/AI大模型应用开发/2_OpenAI大模型API基础\"},{\"text\":\"提示词工程\",\"link\":\"Python/AI大模型应用开发/3_提示词工程\"},{\"text\":\"API用法示例\",\"link\":\"Python/AI大模型应用开发/4_API用法示例\"},{\"text\":\"LangChain介绍\",\"link\":\"Python/AI大模型应用开发/5_LangChain介绍\"},{\"text\":\"AI模型与输入输出\",\"link\":\"Python/AI大模型应用开发/6_AI模型与输入输出\"},{\"text\":\"实战1：视频脚本一键生成器\",\"link\":\"Python/AI大模型应用开发/7_实战1：视频脚本一键生成器\"},{\"text\":\"实战2：爆款小红书文案生成器\",\"link\":\"Python/AI大模型应用开发/8_实战2：爆款小红书文案生成器\"},{\"text\":\"给AI模型添加记忆\",\"link\":\"Python/AI大模型应用开发/9_给AI模型添加记忆\"},{\"text\":\"实战3：克隆AI聊天助手\",\"link\":\"Python/AI大模型应用开发/10_实战3：克隆AI聊天助手\"},{\"text\":\"给AI模型读文件的能力\",\"link\":\"Python/AI大模型应用开发/11_给AI模型读文件的能力\"},{\"text\":\"实战4：智能PDF问答工具\",\"link\":\"Python/AI大模型应用开发/12_实战4：智能PDF问答工具\"},{\"text\":\"给AI模型用工具的能力\",\"link\":\"Python/AI大模型应用开发/13_给AI模型用工具的能力\"},{\"text\":\"CSV数据分析智能工具\",\"link\":\"Python/AI大模型应用开发/14_CSV数据分析智能工具\"},{\"text\":\"Assistant API\",\"link\":\"Python/AI大模型应用开发/15_Assistant API\"},{\"text\":\"Streamlit入门\",\"link\":\"Python/AI大模型应用开发/16_Streamlit入门\"},{\"text\":\"AI应用部署\",\"link\":\"Python/AI大模型应用开发/17_AI应用部署\"}],\"collapsed\":false}],\"/数据库/\":[{\"text\":\"分布式数据库TIDB\",\"items\":[{\"text\":\"TIDB简介\",\"link\":\"数据库/分布式数据库TIDB/1_TIDB简介\"},{\"text\":\"部署迁移\",\"link\":\"数据库/分布式数据库TIDB/2_部署迁移\"}],\"collapsed\":false},{\"text\":\"MongoDB\",\"items\":[{\"text\":\"MongoDB基本概念\",\"link\":\"数据库/MongoDB/0_MongoDB简介\"},{\"text\":\"MongoDB安装\",\"link\":\"数据库/MongoDB/1_MongoDB安装\"},{\"text\":\"MongoTemplate基本用法\",\"link\":\"数据库/MongoDB/2_MongoTemplate基本用法\"},{\"text\":\"Criteria与聚合查询\",\"link\":\"数据库/MongoDB/3_Criteria与聚合查询\"},{\"text\":\"MongoDB数据同步\",\"link\":\"数据库/MongoDB/4_MongoDB数据同步\"}],\"collapsed\":false},{\"text\":\"MySQL\",\"items\":[{\"text\":\"ACID是什么\",\"link\":\"数据库/MySQL/ACID\"},{\"text\":\"Mysql导入MariaDB\",\"link\":\"数据库/MySQL/Mysql导入MariaDB\"},{\"text\":\"MySQL分词搜索\",\"link\":\"数据库/MySQL/MySQL分词搜索\"},{\"text\":\"Mysql集群\",\"link\":\"数据库/MySQL/Mysql集群\"},{\"text\":\"MySQL日期函数\",\"link\":\"数据库/MySQL/MySQL日期函数\"},{\"text\":\"Mysql索引\",\"link\":\"数据库/MySQL/Mysql索引\"},{\"text\":\"MySQL执行分析\",\"link\":\"数据库/MySQL/MySQL执行分析\"},{\"text\":\"MySQL主从复制\",\"link\":\"数据库/MySQL/MySQL主从复制\"}],\"collapsed\":false},{\"text\":\"MySQL常见问题及解决方案\",\"items\":[{\"text\":\"MySQL慢查询优化\",\"link\":\"数据库/MySQL常见问题及解决方案/MySQL慢查询优化\"}],\"collapsed\":false},{\"text\":\"Neo4j\",\"items\":[{\"text\":\"Neo4j图数据库\",\"link\":\"数据库/Neo4j/0_Neo4j概念\"},{\"text\":\"Neo4j安装\",\"link\":\"数据库/Neo4j/1_Neo4j安装\"},{\"text\":\"Neo4j数据库创建\",\"link\":\"数据库/Neo4j/2_Neo4j数据库创建\"},{\"text\":\"SpringBoot集成Neo4j\",\"link\":\"数据库/Neo4j/3_SpringBoot集成Neo4j\"}],\"collapsed\":false}],\"/Redis/\":[{\"text\":\"Redis基础\",\"items\":[{\"text\":\"Redis缓存三大问题\",\"link\":\"Redis/Redis基础/1_Redis缓存三大问题\"},{\"text\":\"内存淘汰策略\",\"link\":\"Redis/Redis基础/2_内存淘汰策略\"},{\"text\":\"BigKey、HotKey 的发现与处理\",\"link\":\"Redis/Redis基础/3_BigKey、HotKey 的发现与处理\"},{\"text\":\"SpringBoot整合Redisson\",\"link\":\"Redis/Redis基础/4_SpringBoot整合Redisson\"},{\"text\":\"Redis延迟队列\",\"link\":\"Redis/Redis基础/5_Redis延迟队列\"},{\"text\":\"RediSearch全文搜索引擎\",\"link\":\"Redis/Redis基础/RediSearch全文搜索引擎\"},{\"text\":\"RedisTemplate\",\"link\":\"Redis/Redis基础/RedisTemplate\"},{\"text\":\"Valkey简介\",\"link\":\"Redis/Redis基础/Valkey\"}],\"collapsed\":false},{\"text\":\"Redis实战\",\"items\":[{\"text\":\"Redis解决限流问题\",\"link\":\"Redis/Redis实战/1_Redis实战之解决限流问题\"},{\"text\":\"Redis解决超卖问题\",\"link\":\"Redis/Redis实战/2_Redis实战之解决超卖问题\"},{\"text\":\"INCR命令之微信文章阅读量\",\"link\":\"Redis/Redis实战/3_INCR命令之微信文章阅读量\"}],\"collapsed\":false},{\"text\":\"Redis数据结构\",\"items\":[{\"text\":\"Redis数据结构\",\"link\":\"Redis/Redis数据结构/Redis数据结构\"},{\"text\":\"Set结构实战之社交应用中的共同好友\",\"link\":\"Redis/Redis数据结构/Set结构实战之社交应用中的共同好友\"},{\"text\":\"Set结构实战之用户画像标签去重\",\"link\":\"Redis/Redis数据结构/Set结构实战之用户画像标签去重\"}],\"collapsed\":false}],\"/常用框架/\":[{\"text\":\"重试框架\",\"items\":[{\"text\":\"Spring-Retry\",\"link\":\"常用框架/重试框架/1_Spring-Retry\"},{\"text\":\"Guava-Retry\",\"link\":\"常用框架/重试框架/2_Guava-Retry\"}],\"collapsed\":false},{\"text\":\"Activiti7\",\"items\":[{\"text\":\"Activiti整合Spring\",\"link\":\"常用框架/Activiti7/Activiti整合Spring\"}],\"collapsed\":false},{\"text\":\"Caffeine\",\"items\":[{\"text\":\"Caffeine基本概念\",\"link\":\"常用框架/Caffeine/0_Caffeine基本概念\"},{\"text\":\"SpringBoot炖Caffeine\",\"link\":\"常用框架/Caffeine/1_SpringBoot集成Caffeine\"}],\"collapsed\":false},{\"text\":\"EasyCaptcha\",\"items\":[{\"text\":\"使用EasyCaptcha生成验证码\",\"link\":\"常用框架/EasyCaptcha/0_使用EasyCaptcha生成验证码\"}],\"collapsed\":false},{\"text\":\"EasyExcel\",\"items\":[{\"text\":\"EasyExcel概述\",\"link\":\"常用框架/EasyExcel/0_EasyExcel概述\"},{\"text\":\"EasyExcel准备操作\",\"link\":\"常用框架/EasyExcel/1_EasyExcel准备操作\"},{\"text\":\"EasyExcel入门之导出Excel\",\"link\":\"常用框架/EasyExcel/2_EasyExcel入门之导入Excel\"},{\"text\":\"EasyExcel入门之导入Excel\",\"link\":\"常用框架/EasyExcel/3_EasyExcel入门之导出Excel\"},{\"text\":\"EasyExcel入门之填充Excel\",\"link\":\"常用框架/EasyExcel/4_EasyExcel入门之填充Excel\"},{\"text\":\"大量数据导出\",\"link\":\"常用框架/EasyExcel/5_大量数据导出\"},{\"text\":\"FastExcel\",\"link\":\"常用框架/EasyExcel/6_FastExcel\"}],\"collapsed\":false},{\"text\":\"Mybatis\",\"items\":[{\"text\":\"Mybatis-Plus-Join连表查询\",\"link\":\"常用框架/Mybatis/Mybatis-Plus-Join连表查询\"},{\"text\":\"Mybatis增强框架Mybatis-Flex\",\"link\":\"常用框架/Mybatis/Mybatis增强框架Mybatis-Flex\"}],\"collapsed\":false},{\"text\":\"ShardingJdbc\",\"items\":[{\"text\":\"ShardingJdbc的概述\",\"link\":\"常用框架/ShardingJdbc/0_ShardingJdbc的概述\"},{\"text\":\"ShardingJdbc准备-安装MySQL及配置主从复制\",\"link\":\"常用框架/ShardingJdbc/1_ShardingJdbc准备-安装MySQL及配置主从复制\"},{\"text\":\"ShardingJdbc配置读写分离\",\"link\":\"常用框架/ShardingJdbc/2_ShardingJdbc配置读写分离\"},{\"text\":\"MySQL分库分表原理\",\"link\":\"常用框架/ShardingJdbc/3_MySQL分库分表原理\"},{\"text\":\"ShardingJdbc配置分库分表\",\"link\":\"常用框架/ShardingJdbc/4_ShardingJdbc配置分库分表\"}],\"collapsed\":false},{\"text\":\"Spring\",\"items\":[{\"text\":\"Spring容器初始化源码解析\",\"link\":\"常用框架/Spring/1_Spring容器初始化源码解析\"},{\"text\":\"SpringAOP面向切面编程\",\"link\":\"常用框架/Spring/2_SpringAOP面向切面编程\"},{\"text\":\"SpringAOP源码分析\",\"link\":\"常用框架/Spring/3_SpringAOP源码分析\"},{\"text\":\"SpringAOP实战之日志拦截\",\"link\":\"常用框架/Spring/4_SpringAOP实战之日志拦截\"}],\"collapsed\":false},{\"text\":\"SpringAI\",\"items\":[{\"text\":\"SpringAI Alibaba 整合阿里云百炼 DeepSeek\",\"link\":\"常用框架/SpringAI/SpringAI\"}],\"collapsed\":false},{\"text\":\"SpringBoot\",\"items\":[{\"text\":\"SpringBoot程序开发\",\"items\":[{\"text\":\"SpringBoot编程起步\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/0_SpringBoot编程起步\"},{\"text\":\"统一父pom管理\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/1_统一父pom管理\"},{\"text\":\"SpringBoot程序测试\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/2_SpringBoot程序测试\"},{\"text\":\"SpringBoot注解分析\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/3_SpringBoot注解分析\"},{\"text\":\"配置访问路径\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/4_配置访问路径\"},{\"text\":\"SpringBoot调试\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/5_SpringBoot调试\"},{\"text\":\"使用内置对象\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/6_使用内置对象\"},{\"text\":\"使用Jetty容器\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/7_使用Jetty容器\"},{\"text\":\"配置环境属性\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/8_配置环境属性\"},{\"text\":\"读取资源文件\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/9_读取资源文件\"},{\"text\":\"整合Spring配置\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/10_整合Spring配置\"},{\"text\":\"全局统一响应格式、参数校验、异常处理\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/11_统一返回结果对象\"},{\"text\":\"统一异常处理\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/12_统一异常处理\"},{\"text\":\"统一日志处理\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/13_统一日志处理\"},{\"text\":\"profile环境配置\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/20_profile环境配置\"},{\"text\":\"Spring Boot项目打包发布\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/20_SpringBoot项目打包发布\"},{\"text\":\"Spring Boot中的异步方法调用\",\"link\":\"常用框架/SpringBoot/SpringBoot程序开发/22_SpringBoot中的异步方法调用\"}],\"collapsed\":false},{\"text\":\"SpringBoot服务整合\",\"items\":[{\"text\":\"SpringBoot整合数据源\",\"link\":\"常用框架/SpringBoot/SpringBoot服务整合/1_SpringBoot整合数据源\"},{\"text\":\"SpringBoot整合ORM开发框架\",\"link\":\"常用框架/SpringBoot/SpringBoot服务整合/2_SpringBoot整合ORM开发框架\"},{\"text\":\"SpringBoot整合消息服务组件\",\"link\":\"常用框架/SpringBoot/SpringBoot服务整合/3_SpringBoot整合消息服务组件\"},{\"text\":\"SpringBoot整合Redis数据库\",\"link\":\"常用框架/SpringBoot/SpringBoot服务整合/4_SpringBoot整合Redis数据库\"},{\"text\":\"SpringBoot整合安全框架\",\"link\":\"常用框架/SpringBoot/SpringBoot服务整合/5_SpringBoot整合安全框架\"},{\"text\":\"SpringBoot整合邮件服务器\",\"link\":\"常用框架/SpringBoot/SpringBoot服务整合/6_SpringBoot整合邮件服务器\"},{\"text\":\"定时调度\",\"link\":\"常用框架/SpringBoot/SpringBoot服务整合/7_定时调度\"},{\"text\":\"Actuator监控\",\"link\":\"常用框架/SpringBoot/SpringBoot服务整合/8_Actuator监控\"}],\"collapsed\":false},{\"text\":\"SpringBoot与Web应用\",\"items\":[{\"text\":\"配置Tomcat运行\",\"link\":\"常用框架/SpringBoot/SpringBoot与Web应用/1_配置Tomcat运行\"},{\"text\":\"https安全访问\",\"link\":\"常用框架/SpringBoot/SpringBoot与Web应用/2_https安全访问\"},{\"text\":\"数据验证\",\"link\":\"常用框架/SpringBoot/SpringBoot与Web应用/3_数据验证\"},{\"text\":\"配置错误页\",\"link\":\"常用框架/SpringBoot/SpringBoot与Web应用/4_配置错误页\"},{\"text\":\"全局异常处理\",\"link\":\"常用框架/SpringBoot/SpringBoot与Web应用/5_全局异常处理\"},{\"text\":\"文件上传\",\"link\":\"常用框架/SpringBoot/SpringBoot与Web应用/6_文件上传\"},{\"text\":\"拦截器\",\"link\":\"常用框架/SpringBoot/SpringBoot与Web应用/7_拦截器\"},{\"text\":\"AOP拦截器\",\"link\":\"常用框架/SpringBoot/SpringBoot与Web应用/8_AOP拦截器\"}],\"collapsed\":false},{\"text\":\"SpringBoot源码分析\",\"items\":[{\"text\":\"初始化加载配置\",\"link\":\"常用框架/SpringBoot/SpringBoot源码分析/初始化加载配置\"},{\"text\":\"资源填充类ResourceDatabasePopulator\",\"link\":\"常用框架/SpringBoot/SpringBoot源码分析/资源填充类ResourceDatabasePopulator\"},{\"text\":\"SpringBoot异步实现方式\",\"link\":\"常用框架/SpringBoot/SpringBoot源码分析/SpringBoot异步实现方式\"}],\"collapsed\":false}],\"collapsed\":false},{\"text\":\"Thymeleaf\",\"items\":[{\"text\":\"基于Thymeleaf模板生成HTML并转成PDF\",\"link\":\"常用框架/Thymeleaf/2_实战\"}],\"collapsed\":false},{\"text\":\"XXL-JOB\",\"items\":[{\"text\":\"分布式任务调度框架概述\",\"link\":\"常用框架/XXL-JOB/0_分布式任务调度框架概述\"},{\"text\":\"XXL-JOB介绍\",\"link\":\"常用框架/XXL-JOB/1_XXL-JOB介绍\"},{\"text\":\"XXL-JOB执行器配置\",\"link\":\"常用框架/XXL-JOB/2_XXL-JOB执行器配置\"},{\"text\":\"创建XXL-JOB任务调度\",\"link\":\"常用框架/XXL-JOB/3_创建XXL-JOB任务调度\"},{\"text\":\"自动创建定时任务\",\"link\":\"常用框架/XXL-JOB/4_自动创建定时任务\"}],\"collapsed\":false}],\"/Linux/\":[{\"text\":\"Linux安装软件\",\"items\":[{\"text\":\"Linux安装MongoDB\",\"link\":\"Linux/Linux安装软件/Linux安装MongoDB\"},{\"text\":\"Linux安装MySQL\",\"link\":\"Linux/Linux安装软件/Linux安装MySQL\"},{\"text\":\"Linux下安装Graylog\",\"link\":\"Linux/Linux安装软件/Linux下安装Graylog\"},{\"text\":\"Linux下安装Java\",\"link\":\"Linux/Linux安装软件/Linux下安装Java\"},{\"text\":\"Linux下安装Tomcat\",\"link\":\"Linux/Linux安装软件/Linux下安装Tomcat\"}],\"collapsed\":false},{\"text\":\"Nginx\",\"items\":[{\"text\":\"Nginx快速入门\",\"link\":\"Linux/Nginx/0_Nginx快速入门\"},{\"text\":\"Linux安装Nginx\",\"link\":\"Linux/Nginx/1_Linux安装Nginx\"},{\"text\":\"Nginx常用配置\",\"link\":\"Linux/Nginx/2_Nginx常用配置\"},{\"text\":\"Nginx路由匹配\",\"link\":\"Linux/Nginx/3_Nginx路由匹配\"},{\"text\":\"Nginx负载均衡\",\"link\":\"Linux/Nginx/4_Nginx负载均衡\"},{\"text\":\"跨域配置与防盗链\",\"link\":\"Linux/Nginx/5_跨域配置与防盗链\"},{\"text\":\"Kong\",\"link\":\"Linux/Nginx/Kong\"}],\"collapsed\":false},{\"text\":\"OpenEuler\",\"items\":[{\"text\":\"openEuler\",\"link\":\"Linux/OpenEuler/1_openEuler\"},{\"text\":\"openEuler安装Docker\",\"link\":\"Linux/OpenEuler/2_openEuler安装Docker\"},{\"text\":\"Cockpit服务器管理工具\",\"link\":\"Linux/OpenEuler/3_Cockpit服务器管理工具\"}],\"collapsed\":false},{\"text\":\"Shell命令\",\"items\":[{\"text\":\"Linux常用命令\",\"link\":\"Linux/Shell命令/0_Linux常用命令\"},{\"text\":\"Linux新建用户并授予root权限\",\"link\":\"Linux/Shell命令/1_Linux新建用户并授予root权限\"},{\"text\":\"Ubuntu桌面版禁止root登录解决方法\",\"link\":\"Linux/Shell命令/2_Ubuntu桌面版禁止root登录解决方法\"},{\"text\":\"Centos7扩容根目录（/dev/mapper/centos-root）\",\"link\":\"Linux/Shell命令/3_Centos7扩容根目录\"},{\"text\":\"Linux服务器抓包分析HTTP请求\",\"link\":\"Linux/Shell命令/4_Linux服务器抓包分析HTTP请求\"}],\"collapsed\":false},{\"text\":\"Ubuntu\",\"items\":[{\"text\":\"ubuntu安装应用\",\"link\":\"Linux/Ubuntu/ubuntu安装应用\"}],\"collapsed\":false}],\"/StableDiffusion/\":[{\"text\":\"AIGC\",\"items\":[{\"text\":\"AI猫咪剧情号\",\"link\":\"StableDiffusion/AIGC/AI猫咪剧情号\"},{\"text\":\"LOFI音乐频道\",\"link\":\"StableDiffusion/AIGC/LOFI\"},{\"text\":\"Midjourney萌宠治愈频道\",\"link\":\"StableDiffusion/AIGC/Midjourney萌宠治愈频道\"},{\"text\":\"Midjourney制作微信表情包\",\"link\":\"StableDiffusion/AIGC/Midjourney制作微信表情包\"}],\"collapsed\":false},{\"text\":\"ComfyUI\",\"items\":[{\"text\":\"ComfyUI简介\",\"link\":\"StableDiffusion/ComfyUI/0_ComfyUI简介\"},{\"text\":\"ComfyUI安装\",\"link\":\"StableDiffusion/ComfyUI/1_ComfyUI安装\"},{\"text\":\"ComfyUI配置\",\"link\":\"StableDiffusion/ComfyUI/2_ComfyUI配置\"},{\"text\":\"ComfyUI核心采样器\",\"link\":\"StableDiffusion/ComfyUI/3_ComfyUI核心采样器\"}],\"collapsed\":false},{\"text\":\"Midjourney\",\"items\":[{\"text\":\"Midjourney基础教程\",\"link\":\"StableDiffusion/Midjourney/0_Midjourney基础教程\"},{\"text\":\"命令参数用途列表\",\"link\":\"StableDiffusion/Midjourney/1_Midjourney命令参数用途列表\"},{\"text\":\"调整图片比例\",\"link\":\"StableDiffusion/Midjourney/2_调整图片比例\"},{\"text\":\"Midjourney垫图\",\"link\":\"StableDiffusion/Midjourney/3_Midjourney垫图\"},{\"text\":\"单人及多人换脸\",\"link\":\"StableDiffusion/Midjourney/4_单人及多人换脸\"},{\"text\":\"局部重绘\",\"link\":\"StableDiffusion/Midjourney/5_局部重绘\"},{\"text\":\"扩展图片ZoomOut功能\",\"link\":\"StableDiffusion/Midjourney/6_扩展图片ZoomOut功能\"}],\"collapsed\":false},{\"text\":\"StableDiffusion\",\"items\":[{\"text\":\"StableDiffusion介绍\",\"link\":\"StableDiffusion/StableDiffusion/0_StableDiffusion介绍\"},{\"text\":\"Prompt提示词\",\"link\":\"StableDiffusion/StableDiffusion/1_Prompt提示词\"},{\"text\":\"模型下载与使用\",\"link\":\"StableDiffusion/StableDiffusion/2_模型使用\"},{\"text\":\"ControlNet控制网\",\"link\":\"StableDiffusion/StableDiffusion/3_ControlNet控制网\"},{\"text\":\"LORA原理与训练\",\"link\":\"StableDiffusion/StableDiffusion/4_LORA训练\"}],\"collapsed\":false},{\"text\":\"WebUI\",\"items\":[{\"text\":\"WebUI介绍\",\"link\":\"StableDiffusion/WebUI/0_WebUI介绍\"},{\"text\":\"文生图\",\"link\":\"StableDiffusion/WebUI/1_文生图\"},{\"text\":\"图生图\",\"link\":\"StableDiffusion/WebUI/2_图生图\"}],\"collapsed\":false}],\"/daily/\":[{\"text\":\"博客文档\",\"items\":[{\"text\":\"博客园美化\",\"link\":\"daily/博客文档/博客园美化\"},{\"text\":\"Github Pages加速\",\"link\":\"daily/博客文档/Github_Pages加速\"},{\"text\":\"Github个人主页改造\",\"link\":\"daily/博客文档/Github个人主页改造\"},{\"text\":\"Hexo博客搭建\",\"link\":\"daily/博客文档/Hexo博客搭建\"},{\"text\":\"Vuepress博客搭建\",\"link\":\"daily/博客文档/Vuepress博客搭建\"},{\"text\":\"VuepressReco博客搭建\",\"link\":\"daily/博客文档/VuepressReco博客搭建\"},{\"text\":\"VitPress\",\"items\":[{\"text\":\"VitPress博客搭建\",\"link\":\"daily/博客文档/VitPress/0_Vitpress博客搭建\"},{\"text\":\"Config配置\",\"link\":\"daily/博客文档/VitPress/1_Config配置\"},{\"text\":\"页面\",\"link\":\"daily/博客文档/VitPress/2_页面\"},{\"text\":\"Frontmatter\",\"link\":\"daily/博客文档/VitPress/3_Frontmatter\"},{\"text\":\"Markdown\",\"link\":\"daily/博客文档/VitPress/4_Markdown\"},{\"text\":\"Vue组件\",\"link\":\"daily/博客文档/VitPress/5_Vue组件\"},{\"text\":\"样式美化\",\"link\":\"daily/博客文档/VitPress/6_样式美化\"},{\"text\":\"插件\",\"link\":\"daily/博客文档/VitPress/7_插件\"},{\"text\":\"静态部署\",\"link\":\"daily/博客文档/VitPress/8_静态部署\"},{\"text\":\"Teek主题美化\",\"link\":\"daily/博客文档/VitPress/Teek主题美化\"}],\"collapsed\":false}],\"collapsed\":false},{\"text\":\"高等数学\",\"items\":[{\"text\":\"高等数学预备知识\",\"link\":\"daily/高等数学/01_高等数学预备知识\"},{\"text\":\"数列极限\",\"link\":\"daily/高等数学/02_数列极限\"},{\"text\":\"函数极限与连续性\",\"link\":\"daily/高等数学/03_函数极限与连续性\"},{\"text\":\"一元函数微分学的概念与计算\",\"link\":\"daily/高等数学/04_一元函数微分学的概念与计算\"},{\"text\":\"一元函数微分学的几何应用\",\"link\":\"daily/高等数学/05_一元函数微分学的几何应用\"},{\"text\":\"第六讲 中值定理\",\"link\":\"daily/高等数学/06_中值定理\"},{\"text\":\"零点问题与微分不等式\",\"link\":\"daily/高等数学/07_零点问题与微分不等式\"}],\"collapsed\":false},{\"text\":\"开发文档\",\"items\":[{\"text\":\"抖音小程序开发\",\"link\":\"daily/开发文档/抖音小程序开发\"},{\"text\":\"基于Taro开发小程序\",\"link\":\"daily/开发文档/基于Taro开发小程序\"},{\"text\":\"扫码登录\",\"link\":\"daily/开发文档/扫码登录\"},{\"text\":\"PDF转换\",\"link\":\"daily/开发文档/PDF转换\"},{\"text\":\"QT开发\",\"link\":\"daily/开发文档/QT开发\"},{\"text\":\"RabbitMQAssistant使用\",\"link\":\"daily/开发文档/RabbitMQAssistant使用\"}],\"collapsed\":false},{\"text\":\"开源项目\",\"items\":[{\"text\":\"开源项目\",\"link\":\"daily/开源项目/0_开源项目\"},{\"text\":\"文件上传X Spring File Storage\",\"link\":\"daily/开源项目/1_文件上传X-Spring-File-Storage\"},{\"text\":\"规则引擎LiteFlow\",\"link\":\"daily/开源项目/2_规则引擎LiteFlow\"},{\"text\":\"FlowLong飞龙工作流\",\"link\":\"daily/开源项目/3_FlowLong飞龙工作流\"},{\"text\":\"DataEase可视化分析\",\"link\":\"daily/开源项目/DataEase可视化分析\"}],\"collapsed\":false},{\"text\":\"面试专栏\",\"items\":[{\"text\":\"面试专栏\",\"link\":\"daily/面试专栏/面试专栏\"},{\"text\":\"微服务相关\",\"items\":[{\"text\":\"微服务\",\"link\":\"daily/面试专栏/微服务相关/1_微服务\"}],\"collapsed\":false}],\"collapsed\":false},{\"text\":\"日常笔记\",\"items\":[{\"text\":\"等保整改\",\"link\":\"daily/日常笔记/等保整改\"},{\"text\":\"工具清单\",\"link\":\"daily/日常笔记/工具清单\"},{\"text\":\"加密算法\",\"link\":\"daily/日常笔记/加密算法\"},{\"text\":\"玩客云\",\"link\":\"daily/日常笔记/玩客云\"},{\"text\":\"Go语言学习\",\"link\":\"daily/日常笔记/Go语言学习\"},{\"text\":\"IDEA+Linux远程开发\",\"link\":\"daily/日常笔记/IDEA+Linux远程开发\"},{\"text\":\"Markdown进阶之路\",\"link\":\"daily/日常笔记/Markdown进阶之路\"},{\"text\":\"Vim\",\"link\":\"daily/日常笔记/Vim操作技巧\"}],\"collapsed\":false},{\"text\":\"软考中级软件设计师学习笔记\",\"items\":[{\"text\":\"软件设计师考点\",\"link\":\"daily/软考中级软件设计师学习笔记/00_软件设计师考点\"},{\"text\":\"计算机组成与体系结构\",\"link\":\"daily/软考中级软件设计师学习笔记/01_计算机组成与体系结构\"},{\"text\":\"程序设计语言基础知识\",\"link\":\"daily/软考中级软件设计师学习笔记/02_程序设计语言基础知识\"},{\"text\":\"数据结构\",\"link\":\"daily/软考中级软件设计师学习笔记/03_数据结构\"},{\"text\":\"操作系统知识\",\"link\":\"daily/软考中级软件设计师学习笔记/04_操作系统知识\"},{\"text\":\"软件工程基础知识\",\"link\":\"daily/软考中级软件设计师学习笔记/05_软件工程基础知识\"},{\"text\":\"结构化开发方法\",\"link\":\"daily/软考中级软件设计师学习笔记/06_结构化开发方法\"},{\"text\":\"面向对象技术\",\"link\":\"daily/软考中级软件设计师学习笔记/07_面向对象技术\"},{\"text\":\"08_算法设计与分析\",\"link\":\"daily/软考中级软件设计师学习笔记/08_算法设计与分析\"},{\"text\":\"数据库技术基础\",\"link\":\"daily/软考中级软件设计师学习笔记/09_数据库技术基础\"},{\"text\":\"网络与信息安全基础知识\",\"link\":\"daily/软考中级软件设计师学习笔记/10_网络与信息安全基础知识\"},{\"text\":\"标准化和软件知识产权基础知识\",\"link\":\"daily/软考中级软件设计师学习笔记/11_标准化和软件知识产权基础知识\"},{\"text\":\"软件系统分析与设计\",\"link\":\"daily/软考中级软件设计师学习笔记/12_软件系统分析与设计\"}],\"collapsed\":false}],\"**\":false},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2019-2025 present Xu XiaoLong\"},\"returnToTopLabel\":\"返回顶部\",\"lastUpdated\":{\"text\":\"最后更新于\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"medium\"}},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>